/*! For license information please see main.59dc77d7.js.LICENSE.txt */
(()=>{var e={141:e=>{e.exports={eventCodes:{fixation:1,evidence:5,show_earnings:7,test_connect:32,open_task:18}}},485:(e,t,n)=>{const r=n(890);let i;try{const e=window.require("electron");i=e.ipcRenderer}catch(o){i=!1}e.exports={photodiodeGhostBox:function(){return'<div class="photodiode-box '.concat("visible",'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n\t\t\t\t\t\t\t\t\t</div>')},pdSpotEncode:function(e,t,n){if(n.USE_PHOTODIODE){!function e(t,n){n>0&&function(e,t){r(".photodiode-spot").css({"background-color":"black"}),setTimeout((()=>{r(".photodiode-spot").css({"background-color":"white"}),t()}),e)}(t,(()=>{setTimeout((()=>{e(t,n-1)}),t)}))}(40,t),i&&i.send("trigger",e)}}}},661:e=>{e.exports={baseStimulus:function(e){return"<div class=".concat(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"center_container":arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"main-prompt":"main",">").concat(e,"</div>")}}},694:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},890:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,c=o.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,m=p.call(Object),g={},y=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},v=function(e){return null!=e&&e===e.window},w=r.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var r,i,o=(n=n||w).createElement("script");if(o.text=e,t)for(r in b)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?h[d.call(e)]||"object":typeof e}var T="3.7.1",E=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function I(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:T,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"===typeof s&&(u=s,s=arguments[a]||{},a++),"object"===typeof s||y(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(u&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,s[t]=S.extend(u,o,r)):void 0!==r&&(s[t]=r));return s},S.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(!(t=s(e))||"function"===typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(I(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=S.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(I(Object(e))?S.merge(n,"string"===typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!E.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(I(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return l(s)},guid:1,support:g}),"function"===typeof Symbol&&(S.fn[Symbol.iterator]=o[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var C=o.pop,A=o.sort,D=o.splice,N="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");S.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(O,R)};var L=w,M=u;!function(){var e,t,n,i,s,l,u,h,d,p,m=M,y=S.expando,v=0,w=0,b=ee(),_=ee(),x=ee(),T=ee(),E=function(e,t){return e===t&&(s=!0),0},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+N+"*("+O+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+N+"*\\]",j=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),V=new RegExp("^"+N+"*,"+N+"*"),U=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),B=new RegExp(N+"|>"),z=new RegExp(j),q=new RegExp("^"+O+"$"),K={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),$=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},X=function(){le()},J=de((function(e){return!0===e.disabled&&k(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(o=a.call(L.childNodes),L.childNodes),o[L.childNodes.length].nodeType}catch(we){m={apply:function(e,t){M.apply(e,a.call(t))},call:function(e){M.apply(e,a.call(arguments,1))}}}function Z(e,t,n,r){var i,o,s,a,u,c,f,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!==typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!r&&(le(t),t=t||l,h)){if(11!==v&&(u=G.exec(e)))if(i=u[1]){if(9===v){if(!(s=t.getElementById(i)))return n;if(s.id===i)return m.call(n,s),n}else if(p&&(s=p.getElementById(i))&&Z.contains(t,s)&&s.id===i)return m.call(n,s),n}else{if(u[2])return m.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(i)),n}if(!T[e+" "]&&(!d||!d.test(e))){if(f=e,p=t,1===v&&(B.test(e)||U.test(e))){for((p=Q.test(e)&&ae(t.parentNode)||t)==t&&g.scope||((a=t.getAttribute("id"))?a=S.escapeSelector(a):t.setAttribute("id",a=y)),o=(c=ce(e)).length;o--;)c[o]=(a?"#"+a:":scope")+" "+he(c[o]);f=c.join(",")}try{return m.apply(n,p.querySelectorAll(f)),n}catch(w){T(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(P,"$1"),t,n,r)}function ee(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function te(e){return e[y]=!0,e}function ne(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(we){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return k(t,"input")&&t.type===e}}function ie(e){return function(t){return(k(t,"input")||k(t,"button"))&&t.type===e}}function oe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function ae(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function le(e){var n,r=e?e.ownerDocument||e:L;return r!=l&&9===r.nodeType&&r.documentElement?(u=(l=r).documentElement,h=!S.isXMLDoc(l),p=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,u.msMatchesSelector&&L!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",X),g.getById=ne((function(e){return u.appendChild(e).id=S.expando,!l.getElementsByName||!l.getElementsByName(S.expando).length})),g.disconnectedMatch=ne((function(e){return p.call(e,"*")})),g.scope=ne((function(){return l.querySelectorAll(":scope")})),g.cssHas=ne((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(we){return!0}})),g.getById?(t.filter.ID=function(e){var t=e.replace(Y,$);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,$);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;u.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+N+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+y+"-]").length||d.push("~="),e.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),u.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")})),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),E=function(e,t){if(e===t)return s=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument==L&&Z.contains(L,e)?-1:t===l||t.ownerDocument==L&&Z.contains(L,t)?1:i?c.call(i,e)-c.call(i,t):0:4&n?-1:1)},l):l}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(le(e),h&&!T[t+" "]&&(!d||!d.test(t)))try{var n=p.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(we){T(t,!0)}return Z(t,l,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),S.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=l&&le(e);var r=t.attrHandle[n.toLowerCase()],i=r&&f.call(t.attrHandle,n.toLowerCase())?r(e,n,!h):void 0;return void 0!==i?i:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,n=[],r=0,o=0;if(s=!g.sortStable,i=!g.sortStable&&a.call(e,0),A.call(e,E),s){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)D.call(e,n[r],1)}return i=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(a.apply(this)))},t=S.expr={cacheLength:50,createPseudo:te,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,$),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,$),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=ce(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,$).toLowerCase();return"*"===e?function(){return!0}:function(e){return k(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&b(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=Z.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,f,p=o!==s?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),w=!l&&!a,b=!1;if(m){if(o){for(;p;){for(h=t;h=h[p];)if(a?k(h,g):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&w){for(b=(d=(u=(c=m[y]||(m[y]={}))[e]||[])[0]===v&&u[1])&&u[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[v,d,b];break}}else if(w&&(b=d=(u=(c=t[y]||(t[y]={}))[e]||[])[0]===v&&u[1]),!1===b)for(;(h=++d&&h&&h[p]||(b=d=0)||f.pop())&&(!(a?k(h,g):1===h.nodeType)||!++b||(w&&((c=h[y]||(h[y]={}))[e]=[v,b]),h!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return i[y]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,o=i(e,n),s=o.length;s--;)e[r=c.call(e,o[s])]=!(t[r]=o[s])})):function(e){return i(e,0,r)}):i}},pseudos:{not:te((function(e){var t=[],n=[],r=ye(e.replace(P,"$1"));return r[y]?te((function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(Y,$),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}})),lang:te((function(e){return q.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(Y,$).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===u},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:oe(!1),disabled:oe(!0),checked:function(e){return k(e,"input")&&!!e.checked||k(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return H.test(e.nodeName)},button:function(e){return k(e,"input")&&"button"===e.type||k(e,"button")},text:function(e){var t;return k(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,n){return[n<0?n+t:n]})),even:se((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:se((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:se((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:se((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function ue(){}function ce(e,n){var r,i,o,s,a,l,u,c=_[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=t.preFilter;a;){for(s in r&&!(i=V.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),r=!1,(i=U.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(P," ")}),a=a.slice(r.length)),t.filter)!(i=K[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Z.error(e):_(e,l).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=w++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,l){var u,c,h=[v,a];if(l){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(c=t[y]||(t[y]={}),i&&k(t,i))t=t[r]||t;else{if((u=c[o])&&u[0]===v&&u[1]===a)return h[2]=u[2];if(c[o]=h,h[2]=e(t,n,l))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),u&&t.push(a)));return s}function me(e,t,n,r,i,o){return r&&!r[y]&&(r=me(r)),i&&!i[y]&&(i=me(i,o)),te((function(o,s,a,l){var u,h,d,f,p=[],g=[],y=s.length,v=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Z(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),w=!e||!o&&t?v:pe(v,p,e,a,l);if(n?n(w,f=i||(o?e:y||r)?[]:s,a,l):f=w,r)for(u=pe(f,g),r(u,[],a,l),h=u.length;h--;)(d=u[h])&&(f[g[h]]=!(w[g[h]]=d));if(o){if(i||e){if(i){for(u=[],h=f.length;h--;)(d=f[h])&&u.push(w[h]=d);i(null,f=[],u,l)}for(h=f.length;h--;)(d=f[h])&&(u=i?c.call(o,d):p[h])>-1&&(o[u]=!(s[u]=d))}}else f=pe(f===s?f.splice(y,f.length):f),i?i(null,s,f,l):m.apply(s,f)}))}function ge(e){for(var r,i,o,s=e.length,a=t.relative[e[0].type],l=a||t.relative[" "],u=a?1:0,h=de((function(e){return e===r}),l,!0),d=de((function(e){return c.call(r,e)>-1}),l,!0),f=[function(e,t,i){var o=!a&&(i||t!=n)||((r=t).nodeType?h(e,t,i):d(e,t,i));return r=null,o}];u<s;u++)if(i=t.relative[e[u].type])f=[de(fe(f),i)];else{if((i=t.filter[e[u].type].apply(null,e[u].matches))[y]){for(o=++u;o<s&&!t.relative[e[o].type];o++);return me(u>1&&fe(f),u>1&&he(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(P,"$1"),i,u<o&&ge(e.slice(u,o)),o<s&&ge(e=e.slice(o)),o<s&&he(e))}f.push(i)}return fe(f)}function ye(e,r){var i,o=[],s=[],a=x[e+" "];if(!a){for(r||(r=ce(e)),i=r.length;i--;)(a=ge(r[i]))[y]?o.push(a):s.push(a);a=x(e,function(e,r){var i=r.length>0,o=e.length>0,s=function(s,a,u,c,d){var f,p,g,y=0,w="0",b=s&&[],_=[],x=n,T=s||o&&t.find.TAG("*",d),E=v+=null==x?1:Math.random()||.1,I=T.length;for(d&&(n=a==l||a||d);w!==I&&null!=(f=T[w]);w++){if(o&&f){for(p=0,a||f.ownerDocument==l||(le(f),u=!h);g=e[p++];)if(g(f,a||l,u)){m.call(c,f);break}d&&(v=E)}i&&((f=!g&&f)&&y--,s&&b.push(f))}if(y+=w,i&&w!==y){for(p=0;g=r[p++];)g(b,_,a,u);if(s){if(y>0)for(;w--;)b[w]||_[w]||(_[w]=C.call(c));_=pe(_)}m.apply(c,_),d&&!s&&_.length>0&&y+r.length>1&&S.uniqueSort(c)}return d&&(v=E,n=x),b};return i?te(s):s}(s,o)),a.selector=e}return a}function ve(e,n,r,i){var o,s,a,l,u,c="function"===typeof e&&e,d=!i&&ce(e=c.selector||e);if(r=r||[],1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===n.nodeType&&h&&t.relative[s[1].type]){if(!(n=(t.find.ID(a.matches[0].replace(Y,$),n)||[])[0]))return r;c&&(n=n.parentNode),e=e.slice(s.shift().value.length)}for(o=K.needsContext.test(e)?0:s.length;o--&&(a=s[o],!t.relative[l=a.type]);)if((u=t.find[l])&&(i=u(a.matches[0].replace(Y,$),Q.test(s[0].type)&&ae(n.parentNode)||n))){if(s.splice(o,1),!(e=i.length&&he(s)))return m.apply(r,i),r;break}}return(c||ye(e,d))(i,n,!h,r,!n||Q.test(e)&&ae(n.parentNode)||n),r}ue.prototype=t.filters=t.pseudos,t.setFilters=new ue,g.sortStable=y.split("").sort(E).join("")===y,le(),g.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),S.find=Z,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,Z.compile=ye,Z.select=ve,Z.setDocument=le,Z.tokenize=ce,Z.escape=S.escapeSelector,Z.getText=S.text,Z.isXML=S.isXMLDoc,Z.selectors=S.expr,Z.support=S.support,Z.uniqueSort=S.uniqueSort}();var j=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},V=S.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(e,t,n){return y(t)?S.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?S.grep(e,(function(e){return c.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(B(this,e||[],!1))},not:function(e){return this.pushStack(B(this,e||[],!0))},is:function(e){return!!B(this,"string"===typeof e&&V.test(e)?S(e):e||[],!1).length}});var z,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||z,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),U.test(r[1])&&S.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=w.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,z=S(w);var K=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!==typeof e&&S(e);if(!V.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?c.call(S(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return j(e,"parentNode")},parentsUntil:function(e,t,n){return j(e,"parentNode",n)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return j(e,"nextSibling")},prevAll:function(e){return j(e,"previousSibling")},nextUntil:function(e,t,n){return j(e,"nextSibling",n)},prevUntil:function(e,t,n){return j(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(k(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,r){var i=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=S.filter(r,i)),this.length>1&&(H[e]||S.uniqueSort(i),K.test(e)&&i.reverse()),this.pushStack(i)}}));var G=/[^\x20\t\r\n\f]+/g;function Q(e){return e}function Y(e){throw e}function $(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return S.each(e.match(G)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,r,i,o=[],s=[],a=-1,l=function(){for(i=i||e.once,r=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){S.each(n,(function(n,r){y(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(e){return e?S.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var o=0;function s(e,t,n,i){return function(){var a=this,l=arguments,u=function(){var r,u;if(!(e<o)){if((r=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"===typeof r||"function"===typeof r)&&r.then,y(u)?i?u.call(r,s(o,t,Q,i),s(o,t,Y,i)):(o++,u.call(r,s(o,t,Q,i),s(o,t,Y,i),s(o,t,Q,t.notifyWith))):(n!==Q&&(a=void 0,l=[r]),(i||t.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,c.error),e+1>=o&&(n!==Y&&(a=void 0,l=[r]),t.rejectWith(a,l))}};e?c():(S.Deferred.getErrorHook?c.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(c.error=S.Deferred.getStackHook()),r.setTimeout(c))}}return S.Deferred((function(r){t[0][3].add(s(0,r,y(i)?i:Q,r.notifyWith)),t[1][3].add(s(0,r,y(e)?e:Q)),t[2][3].add(s(0,r,y(n)?n:Y))})).promise()},promise:function(e){return null!=e?S.extend(e,i):i}},o={};return S.each(t,(function(e,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=S.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&($(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)$(i[n],s(n),o.reject);return o.promise()}});var X=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&X.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){r.setTimeout((function(){throw e}))};var J=S.Deferred();function Z(){w.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),S.ready()}S.fn.ready=function(e){return J.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||J.resolveWith(w,[S]))}}),S.ready.then=J.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?r.setTimeout(S.ready):(w.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,i,o,s){var a=0,l=e.length,u=null==n;if("object"===x(n))for(a in i=!0,n)ee(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,y(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(S(e),n)})),t))for(;a<l;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:u?t.call(e):l?t(e[0],n):o},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(ne,re)}var oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=S.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[ie(t)]=n;else for(r in t)i[ie(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in r?[t]:t.match(G)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var ae=new se,le=new se,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function he(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ce,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ue.test(e)?JSON.parse(e):e)}(n)}catch(i){}le.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return le.hasData(e)||ae.hasData(e)},data:function(e,t,n){return le.access(e,t,n)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=le.get(o),1===o.nodeType&&!ae.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=ie(r.slice(5)),he(o,r,i[r]));ae.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){le.set(this,e)})):ee(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=le.get(o,e))||void 0!==(n=he(o,e))?n:void 0;this.each((function(){le.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){le.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ae.get(e,t),n&&(!r||Array.isArray(n)?r=ae.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){S.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:S.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=ae.get(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],me=w.documentElement,ge=function(e){return S.contains(e.ownerDocument,e)},ye={composed:!0};me.getRootNode&&(ge=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===S.css(e,"display")};function we(e,t,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return S.css(e,t,"")},l=a(),u=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==u&&+l)&&fe.exec(S.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)S.style(e,t,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,S.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var be={};function _e(e){var t,n=e.ownerDocument,r=e.nodeName,i=be[r];return i||(t=n.body.appendChild(n.createElement(r)),i=S.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),be[r]=i,i)}function xe(e,t){for(var n,r,i=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=ae.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ve(r)&&(i[o]=_e(r))):"none"!==n&&(i[o]="none",ae.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}S.fn.extend({show:function(){return xe(this,!0)},hide:function(){return xe(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ve(this)?S(this).show():S(this).hide()}))}});var Te=/^(?:checkbox|radio)$/i,Ee=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=w.createDocumentFragment().appendChild(w.createElement("div")),t=w.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",g.option=!!e.lastChild}();var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ke(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?S.merge([e],n):n}function Ce(e,t){for(var n=0,r=e.length;n<r;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,g.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var Ae=/<|&#?\w+;/;function De(e,t,n,r,i){for(var o,s,a,l,u,c,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===x(o))S.merge(d,o.nodeType?[o]:o);else if(Ae.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Ee.exec(o)||["",""])[1].toLowerCase(),l=Ie[a]||Ie._default,s.innerHTML=l[1]+S.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;S.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(r&&S.inArray(o,r)>-1)i&&i.push(o);else if(u=ge(o),s=ke(h.appendChild(o),"script"),u&&Ce(s),n)for(c=0;o=s[c++];)Se.test(o.type||"")&&n.push(o);return h}var Ne=/^([^.]*)(?:\.(.+)|)/;function Pe(){return!0}function Oe(){return!1}function Re(e,t,n,r,i,o){var s,a;if("object"===typeof t){for(a in"string"!==typeof n&&(r=r||n,n=void 0),t)Re(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Oe;else if(!i)return e;return 1===o&&(s=i,i=function(e){return S().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=S.guid++)),e.each((function(){S.event.add(this,t,i,r,n)}))}function Le(e,t,n){n?(ae.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,r=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),ae.set(this,t,r),this[t](),n=ae.get(this,t),ae.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(ae.set(this,t,S.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Pe)}})):void 0===ae.get(e,t)&&S.event.add(e,t,Pe)}S.event={global:{},add:function(e,t,n,r,i){var o,s,a,l,u,c,h,d,f,p,m,g=ae.get(e);if(oe(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(me,i),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return"undefined"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(G)||[""]).length;u--;)f=m=(a=Ne.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=S.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=S.event.special[f]||{},c=S.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,s)||e.addEventListener&&e.addEventListener(f,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),S.event.global[f]=!0)},remove:function(e,t,n,r,i){var o,s,a,l,u,c,h,d,f,p,m,g=ae.hasData(e)&&ae.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(G)||[""]).length;u--;)if(f=m=(a=Ne.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=S.event.special[f]||{},d=l[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!i&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||S.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)S.event.remove(e,f+t[u],n,r,!0);S.isEmptyObject(l)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=new Array(arguments.length),l=S.event.fix(e),u=(ae.get(this,"events")||Object.create(null))[l.type]||[],c=S.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(s=S.event.handlers.call(this,l,u),t=0;(i=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,s,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?S(i,this).index(u)>-1:S.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Te.test(t.type)&&t.click&&k(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return Te.test(t.type)&&t.click&&k(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return Te.test(t.type)&&t.click&&k(t,"input")&&ae.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Pe:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Pe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Pe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Pe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(w.documentMode){var n=ae.get(this,"handle"),r=S.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var r;if(Le(this,e,!0),!w.documentMode)return!1;(r=ae.get(this,t))||this.addEventListener(t,n),ae.set(this,t,(r||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!w.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,n),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=w.documentMode?this:r,o=ae.get(i,t);o||(w.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),ae.set(i,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=w.documentMode?this:r,o=ae.get(i,t)-1;o?ae.set(i,t,o):(w.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),ae.remove(i,t))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||S.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,r){return Re(this,e,t,n,r)},one:function(e,t,n,r){return Re(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){S.event.remove(this,e,n,t)}))}});var Me=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ue(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Be(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,r,i,o,s,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(i in ae.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)S.event.add(t,i,a[i][n]);le.hasData(e)&&(o=le.access(e),s=S.extend({},o),le.set(t,s))}}function qe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Te.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ke(e,t,n,r){t=l(t);var i,o,s,a,u,c,h=0,d=e.length,f=d-1,p=t[0],m=y(p);if(m||d>1&&"string"===typeof p&&!g.checkClone&&je.test(p))return e.each((function(i){var o=e.eq(i);m&&(t[0]=p.call(this,i,o.html())),Ke(o,t,n,r)}));if(d&&(o=(i=De(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=S.map(ke(i,"script"),Ue)).length;h<d;h++)u=i,h!==f&&(u=S.clone(u,!0,!0),a&&S.merge(s,ke(u,"script"))),n.call(e[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,S.map(s,Be),h=0;h<a;h++)u=s[h],Se.test(u.type||"")&&!ae.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):_(u.textContent.replace(Fe,""),u,c))}return e}function He(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ke(r)),r.parentNode&&(n&&ge(r)&&Ce(ke(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),l=ge(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(s=ke(a),r=0,i=(o=ke(e)).length;r<i;r++)qe(o[r],s[r]);if(t)if(n)for(o=o||ke(e),s=s||ke(a),r=0,i=o.length;r<i;r++)ze(o[r],s[r]);else ze(e,a);return(s=ke(a,"script")).length>0&&Ce(s,!l&&ke(e,"script")),a},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(oe(n)){if(t=n[ae.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[ae.expando]=void 0}n[le.expando]&&(n[le.expando]=void 0)}}}),S.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return Ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ke(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Me.test(e)&&!Ie[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ke(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ke(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(ke(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,r=[],i=S(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),S(i[s])[t](n),u.apply(r,n.get());return this.pushStack(r)}}));var We=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ge=/^--/,Qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ye=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},$e=new RegExp(pe.join("|"),"i");function Xe(e,t,n){var r,i,o,s,a=Ge.test(t),l=e.style;return(n=n||Qe(e))&&(s=n.getPropertyValue(t)||n[t],a&&s&&(s=s.replace(P,"$1")||void 0),""!==s||ge(e)||(s=S.style(e,t)),!g.pixelBoxStyles()&&We.test(s)&&$e.test(t)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==s?s+"":s}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(u).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),me.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,s,a,l,u=w.createElement("div"),c=w.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,i;return null==a&&(e=w.createElement("table"),t=w.createElement("tr"),n=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),a}}))}();var Ze=["Webkit","Moz","ms"],et=w.createElement("div").style,tt={};function nt(e){var t=S.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in et)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,it={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function st(e,t,n){var r=fe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function at(e,t,n,r,i,o){var s="width"===t?1:0,a=0,l=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=S.css(e,n+pe[s],!0,i)),r?("content"===n&&(l-=S.css(e,"padding"+pe[s],!0,i)),"margin"!==n&&(l-=S.css(e,"border"+pe[s]+"Width",!0,i))):(l+=S.css(e,"padding"+pe[s],!0,i),"padding"!==n?l+=S.css(e,"border"+pe[s]+"Width",!0,i):a+=S.css(e,"border"+pe[s]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))||0),l+u}function lt(e,t,n){var r=Qe(e),i=(!g.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,s=Xe(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(s)){if(!n)return s;s="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&k(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+at(e,t,n||(i?"border":"content"),o,r,s)+"px"}function ut(e,t,n,r,i){return new ut.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Xe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=ie(t),l=Ge.test(t),u=e.style;if(l||(t=nt(a)),s=S.cssHooks[t]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=fe.exec(n))&&i[1]&&(n=we(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||l||(n+=i&&i[3]||(S.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,s,a=ie(t);return Ge.test(t)||(t=nt(a)),(s=S.cssHooks[t]||S.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=Xe(e,t,r)),"normal"===i&&t in ot&&(i=ot[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,t,r):Ye(e,it,(function(){return lt(e,t,r)}))},set:function(e,n,r){var i,o=Qe(e),s=!g.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===S.css(e,"boxSizing",!1,o),l=r?at(e,t,r,a,o):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-at(e,t,"border",!1,o)-.5)),l&&(i=fe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),st(0,n,l)}}})),S.cssHooks.marginLeft=Je(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Xe(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+pe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(S.cssHooks[e+t].set=st)})),S.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=Qe(e),i=t.length;s<i;s++)o[t[s]]=S.css(e,t[s],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=ut,ut.prototype={constructor:ut,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=ut.propHooks[this.prop];return e&&e.get?e.get(this):ut.propHooks._default.get(this)},run:function(e){var t,n=ut.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ut.propHooks._default.set(this),this}},ut.prototype.init.prototype=ut.prototype,ut.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ut.propHooks.scrollTop=ut.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ut.prototype.init,S.fx.step={};var ct,ht,dt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function pt(){ht&&(!1===w.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(pt):r.setTimeout(pt,S.fx.interval),S.fx.tick())}function mt(){return r.setTimeout((function(){ct=void 0})),ct=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=pe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function yt(e,t,n){for(var r,i=(vt.tweeners[t]||[]).concat(vt.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function vt(e,t,n){var r,i,o=0,s=vt.prefilters.length,a=S.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=ct||mt(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(e,[u,r,n]),r<1&&s?n:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||mt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=ie(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=S.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);o<s;o++)if(r=vt.prefilters[o].call(u,e,c,u.opts))return y(r.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,yt,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(vt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return we(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(G);for(var n,r=0,i=e.length;r<i;r++)n=e[r],vt.tweeners[n]=vt.tweeners[n]||[],vt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,l,u,c,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&ve(e),g=ae.get(e,"fxshow");for(r in n.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()}))}))),t)if(i=t[r],dt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}f[r]=g&&g[r]||S.style(e,r)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=ae.get(e,"display")),"none"===(c=S.css(e,"display"))&&(u?c=u:(xe([e],!0),u=e.style.display||u,c=S.css(e,"display"),xe([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(e,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=ae.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&xe([e],!0),d.done((function(){for(r in m||xe([e]),ae.remove(e,"fxshow"),f)S.style(e,r,f[r])}))),l=yt(m?g[r]:0,r,d),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?vt.prefilters.unshift(e):vt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=S.isEmptyObject(e),o=S.speed(t,n,r),s=function(){var t=vt(this,S.extend({},e),o);(i||ae.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=S.timers,s=ae.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ft.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=ae.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=S.timers,s=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(gt(t,!0),e,r,i)}})),S.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(ct=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),ct=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ht||(ht=!0,pt())},S.fx.stop=function(){ht=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=w.createElement("input"),t=w.createElement("select").appendChild(w.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=w.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var wt,bt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return ee(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?wt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(G);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||S.find.attr;bt[t]=function(e,t,r){var i,o,s=t.toLowerCase();return r||(o=bt[s],bt[s]=i,i=null!=n(e,t,r)?s:null,bt[s]=o),i}}));var _t=/^(?:input|select|textarea|button)$/i,xt=/^(?:a|area)$/i;function Tt(e){return(e.match(G)||[]).join(" ")}function Et(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(G)||[]}S.fn.extend({prop:function(e,t){return ee(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,r,i,o,s;return y(e)?this.each((function(t){S(this).addClass(e.call(this,t,Et(this)))})):(t=St(e)).length?this.each((function(){if(r=Et(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=Tt(n),r!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,n,r,i,o,s;return y(e)?this.each((function(t){S(this).removeClass(e.call(this,t,Et(this)))})):arguments.length?(t=St(e)).length?this.each((function(){if(r=Et(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<t.length;o++)for(i=t[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=Tt(n),r!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,s=typeof e,a="string"===s||Array.isArray(e);return y(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,Et(this),t),t)})):"boolean"===typeof t&&a?t?this.addClass(e):this.removeClass(e):(n=St(e),this.each((function(){if(a)for(o=S(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==s||((r=Et(this))&&ae.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Tt(Et(n))+" ").indexOf(t)>-1)return!0;return!1}});var It=/\r/g;S.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,S(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(It,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:Tt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:i.length;for(r=o<0?l:s?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=S(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=S.makeArray(t),s=i.length;s--;)((r=i[s]).selected=S.inArray(S.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var kt=r.location,Ct={guid:Date.now()},At=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,i){var o,s,a,l,u,c,h,d,p=[n||w],m=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=n=n||w,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[S.expando]?e:new S.Event(m,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),h=S.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!v(n)){for(l=h.delegateType||m,Dt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||w)&&p.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)d=s,e.type=o>1?l:h.bindType||m,(c=(ae.get(s,"events")||Object.create(null))[e.type]&&ae.get(s,"handle"))&&c.apply(s,t),(c=u&&s[u])&&c.apply&&oe(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!oe(n)||u&&y(n[m])&&!v(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,Nt),n[m](),e.isPropagationStopped()&&d.removeEventListener(m,Nt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}});var Pt=/\[\]$/,Ot=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Mt(e,t,n,r){var i;if(Array.isArray(t))S.each(t,(function(t,i){n||Pt.test(e)?r(e,i):Mt(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==x(t))r(e,t);else for(i in t)Mt(e+"["+i+"]",t[i],n,r)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){i(this.name,this.value)}));else for(n in e)Mt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Lt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!Te.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var jt=/%20/g,Ft=/#.*$/,Vt=/([?&])_=[^&]*/,Ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:GET|HEAD)$/,zt=/^\/\//,qt={},Kt={},Ht="*/".concat("*"),Wt=w.createElement("a");function Gt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(G)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Qt(e,t,n,r){var i={},o=e===Kt;function s(a){var l;return i[a]=!0,S.each(e[a]||[],(function(e,a){var u=a(t,n,r);return"string"!==typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),l}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Yt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=kt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,S.ajaxSettings),t):Yt(S.ajaxSettings,e)},ajaxPrefilter:Gt(qt),ajaxTransport:Gt(Kt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,s,a,l,u,c,h,d,f=S.ajaxSetup({},t),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?S(p):S.event,g=S.Deferred(),y=S.Callbacks("once memory"),v=f.statusCode||{},b={},_={},x="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Ut.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)T.always(e[T.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||x;return n&&n.abort(t),E(0,t),this}};if(g.promise(T),f.url=((e||f.url||kt.href)+"").replace(zt,kt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){l=w.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Wt.protocol+"//"+Wt.host!==l.protocol+"//"+l.host}catch(I){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!==typeof f.data&&(f.data=S.param(f.data,f.traditional)),Qt(qt,f,t,T),u)return T;for(h in(c=S.event&&f.global)&&0===S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Bt.test(f.type),i=f.url.replace(Ft,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(jt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"===typeof f.data)&&(i+=(At.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Vt,"$1"),d=(At.test(i)?"&":"?")+"_="+Ct.guid+++d),f.url=i+d),f.ifModified&&(S.lastModified[i]&&T.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&T.setRequestHeader("If-None-Match",S.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ht+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||u))return T.abort();if(x="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=Qt(Kt,f,t,T)){if(T.readyState=1,c&&m.trigger("ajaxSend",[T,f]),u)return T;f.async&&f.timeout>0&&(a=r.setTimeout((function(){T.abort("timeout")}),f.timeout));try{u=!1,n.send(b,E)}catch(I){if(u)throw I;E(-1,I)}}else E(-1,"No Transport");function E(e,t,s,l){var h,d,w,b,_,x=t;u||(u=!0,a&&r.clearTimeout(a),n=void 0,o=l||"",T.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(b=function(e,t,n){for(var r,i,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,T,s)),!h&&S.inArray("script",f.dataTypes)>-1&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=function(e,t,n,r){var i,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(I){return{state:"parsererror",error:s?I:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,b,T,h),h?(f.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=_),(_=T.getResponseHeader("etag"))&&(S.etag[i]=_)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=b.state,d=b.data,h=!(w=b.error))):(w=x,!e&&x||(x="error",e<0&&(e=0))),T.status=e,T.statusText=(t||x)+"",h?g.resolveWith(p,[d,x,T]):g.rejectWith(p,[T,x,w]),T.statusCode(v),v=void 0,c&&m.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:w]),y.fireWith(p,[T,x]),c&&(m.trigger("ajaxComplete",[T,f]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:i,data:n,success:r},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},Xt=S.ajaxSettings.xhr();g.cors=!!Xt&&"withCredentials"in Xt,g.ajax=Xt=!!Xt,S.ajaxTransport((function(e){var t,n;if(g.cors||Xt&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!==typeof a.status?o(0,"error"):o(a.status,a.statusText):o($t[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!==typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Jt=[],Zt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var i,o,s,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+i):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||S.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always((function(){void 0===o?S(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(i)),s&&y(o)&&o(s[0]),s=o=void 0})),"script"})),g.createHTMLDocument=function(){var e=w.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(r)):t=w),o=!n&&[],(i=U.exec(e))?[t.createElement(i[1])]:(i=De([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=Tt(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),s.length>0&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var r,i,o,s,a,l,u=S.css(e,"position"),c=S(e),h={};"static"===u&&(e.style.position="relative"),a=c.offset(),o=S.css(e,"top"),l=S.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),y(t)&&(t=t.call(e,n,S.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):c.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||me}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return ee(this,(function(e,r,i){var o;if(v(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Je(g.pixelPosition,(function(e,n){if(n)return n=Xe(e,t),We.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){S.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!==typeof i),a=n||(!0===i||!0===o?"margin":"border");return ee(this,(function(t,n,i){var o;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?S.css(t,n,a):S.style(t,n,i,a)}),t,s?i:void 0,s)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),i=function(){return e.apply(t||this,r.concat(a.call(arguments)))},i.guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=k,S.isFunction=y,S.isWindow=v,S.camelCase=ie,S.type=x,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var tn=r.jQuery,nn=r.$;return S.noConflict=function(e){return r.$===S&&(r.$=nn),e&&r.jQuery===S&&(r.jQuery=tn),S},"undefined"===typeof i&&(r.jQuery=r.$=S),S}))},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,y=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],v="[object Arguments]",w="[object Array]",b="[object Boolean]",_="[object Date]",x="[object Error]",T="[object Function]",E="[object GeneratorFunction]",S="[object Map]",I="[object Number]",k="[object Object]",C="[object Promise]",A="[object RegExp]",D="[object Set]",N="[object String]",P="[object Symbol]",O="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",V="[object Int16Array]",U="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",q="[object Uint16Array]",K="[object Uint32Array]",H=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,$=RegExp(Q.source),X=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),se=/^\s+/,ae=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,we=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,Te=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ie="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",De="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="['\u2019]",Pe="["+Ee+"]",Oe="["+De+"]",Re="["+Se+"]",Le="\\d+",Me="["+Ie+"]",je="["+ke+"]",Fe="[^"+Ee+De+Le+Ie+ke+Ce+"]",Ve="\\ud83c[\\udffb-\\udfff]",Ue="[^"+Ee+"]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",ze="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+Ce+"]",Ke="\\u200d",He="(?:"+je+"|"+Fe+")",We="(?:"+qe+"|"+Fe+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Re+"|"+Ve+")"+"?",$e="["+Ae+"]?",Xe=$e+Ye+("(?:"+Ke+"(?:"+[Ue,Be,ze].join("|")+")"+$e+Ye+")*"),Je="(?:"+[Me,Be,ze].join("|")+")"+Xe,Ze="(?:"+[Ue+Re+"?",Re,Be,ze,Pe].join("|")+")",et=RegExp(Ne,"g"),tt=RegExp(Re,"g"),nt=RegExp(Ve+"(?="+Ve+")|"+Ze+Xe,"g"),rt=RegExp([qe+"?"+je+"+"+Ge+"(?="+[Oe,qe,"$"].join("|")+")",We+"+"+Qe+"(?="+[Oe,qe+He,"$"].join("|")+")",qe+"?"+He+"+"+Ge,qe+"+"+Qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Je].join("|"),"g"),it=RegExp("["+Ke+Ee+Se+Ae+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,lt={};lt[M]=lt[j]=lt[F]=lt[V]=lt[U]=lt[B]=lt[z]=lt[q]=lt[K]=!0,lt[v]=lt[w]=lt[R]=lt[b]=lt[L]=lt[_]=lt[x]=lt[T]=lt[S]=lt[I]=lt[k]=lt[A]=lt[D]=lt[N]=lt[O]=!1;var ut={};ut[v]=ut[w]=ut[R]=ut[L]=ut[b]=ut[_]=ut[M]=ut[j]=ut[F]=ut[V]=ut[U]=ut[S]=ut[I]=ut[k]=ut[A]=ut[D]=ut[N]=ut[P]=ut[B]=ut[z]=ut[q]=ut[K]=!0,ut[x]=ut[T]=ut[O]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,mt=ft||pt||Function("return this")(),gt=t&&!t.nodeType&&t,yt=gt&&e&&!e.nodeType&&e,vt=yt&&yt.exports===gt,wt=vt&&ft.process,bt=function(){try{var e=yt&&yt.require&&yt.require("util").types;return e||wt&&wt.binding&&wt.binding("util")}catch(t){}}(),_t=bt&&bt.isArrayBuffer,xt=bt&&bt.isDate,Tt=bt&&bt.isMap,Et=bt&&bt.isRegExp,St=bt&&bt.isSet,It=bt&&bt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Dt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Pt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Ot(e,t){return!!(null==e?0:e.length)&&qt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Mt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ut=Gt("length");function Bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function zt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function qt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):zt(e,Ht,n)}function Kt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?$t(e,t)/n:m}function Gt(e){return function(t){return null==t?i:t[e]}}function Qt(e){return function(t){return null==e?i:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function $t(e,t){for(var n,r=-1,o=e.length;++r<o;){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,gn(e)+1).replace(se,""):e}function Zt(e){return function(t){return e(t)}}function en(e,t){return Lt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&qt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&qt(t,e[n],0)>-1;);return n}var on=Qt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),sn=Qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ct[e]}function ln(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Ut(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var yn=Qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var n=(t=null==t?mt:vn.defaults(mt.Object(),t,vn.pick(mt,st))).Array,r=t.Date,ae=t.Error,Ee=t.Function,Se=t.Math,Ie=t.Object,ke=t.RegExp,Ce=t.String,Ae=t.TypeError,De=n.prototype,Ne=Ee.prototype,Pe=Ie.prototype,Oe=t["__core-js_shared__"],Re=Ne.toString,Le=Pe.hasOwnProperty,Me=0,je=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Pe.toString,Ve=Re.call(Ie),Ue=mt._,Be=ke("^"+Re.call(Le).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=vt?t.Buffer:i,qe=t.Symbol,Ke=t.Uint8Array,He=ze?ze.allocUnsafe:i,We=cn(Ie.getPrototypeOf,Ie),Ge=Ie.create,Qe=Pe.propertyIsEnumerable,Ye=De.splice,$e=qe?qe.isConcatSpreadable:i,Xe=qe?qe.iterator:i,Je=qe?qe.toStringTag:i,Ze=function(){try{var e=ho(Ie,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,it=r&&r.now!==mt.Date.now&&r.now,ct=t.setTimeout!==mt.setTimeout&&t.setTimeout,ft=Se.ceil,pt=Se.floor,gt=Ie.getOwnPropertySymbols,yt=ze?ze.isBuffer:i,wt=t.isFinite,bt=De.join,Ut=cn(Ie.keys,Ie),Qt=Se.max,wn=Se.min,bn=r.now,_n=t.parseInt,xn=Se.random,Tn=De.reverse,En=ho(t,"DataView"),Sn=ho(t,"Map"),In=ho(t,"Promise"),kn=ho(t,"Set"),Cn=ho(t,"WeakMap"),An=ho(Ie,"create"),Dn=Cn&&new Cn,Nn={},Pn=Fo(En),On=Fo(Sn),Rn=Fo(In),Ln=Fo(kn),Mn=Fo(Cn),jn=qe?qe.prototype:i,Fn=jn?jn.valueOf:i,Vn=jn?jn.toString:i;function Un(e){if(ta(e)&&!Ks(e)&&!(e instanceof Kn)){if(e instanceof qn)return e;if(Le.call(e,"__wrapped__"))return Vo(e)}return new qn(e)}var Bn=function(){function e(){}return function(t){if(!ea(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function zn(){}function qn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Wn(e);this.size=t.size}function $n(e,t){var n=Ks(e),r=!n&&qs(e),i=!n&&!r&&Qs(e),o=!n&&!r&&!i&&ua(e),s=n||r||i||o,a=s?Xt(e.length,Ce):[],l=a.length;for(var u in e)!t&&!Le.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wo(u,l))||a.push(u);return a}function Xn(e){var t=e.length;return t?e[Qr(0,t-1)]:i}function Jn(e,t){return Lo(Ai(e),ar(t,0,e.length))}function Zn(e){return Lo(Ai(e))}function er(e,t,n){(n!==i&&!Us(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function tr(e,t,n){var r=e[t];Le.call(e,t)&&Us(r,n)&&(n!==i||t in e)||or(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Us(e[n][0],t))return n;return-1}function rr(e,t,n,r){return dr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ir(e,t){return e&&Di(t,Na(t),e)}function or(e,t,n){"__proto__"==t&&Ze?Ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,o=t.length,s=n(o),a=null==e;++r<o;)s[r]=a?i:Ia(e,t[r]);return s}function ar(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,o,s){var a,l=1&t,u=2&t,c=4&t;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!ea(e))return e;var h=Ks(e);if(h){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ai(e,a)}else{var d=mo(e),f=d==T||d==E;if(Qs(e))return Ti(e,l);if(d==k||d==v||f&&!o){if(a=u||f?{}:yo(e),!l)return u?function(e,t){return Di(e,po(e),t)}(e,function(e,t){return e&&Di(t,Pa(t),e)}(a,e)):function(e,t){return Di(e,fo(e),t)}(e,ir(a,e))}else{if(!ut[d])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case R:return Ei(e);case b:case _:return new r(+e);case L:return function(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case j:case F:case V:case U:case B:case z:case q:case K:return Si(e,n);case S:return new r;case I:case N:return new r(e);case A:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case D:return new r;case P:return i=e,Fn?Ie(Fn.call(i)):{}}var i}(e,d,l)}}s||(s=new Yn);var p=s.get(e);if(p)return p;s.set(e,a),sa(e)?e.forEach((function(r){a.add(lr(r,t,n,r,e,s))})):na(e)&&e.forEach((function(r,i){a.set(i,lr(r,t,n,i,e,s))}));var m=h?i:(c?u?io:ro:u?Pa:Na)(e);return At(m||e,(function(r,i){m&&(r=e[i=r]),tr(a,i,lr(r,t,n,i,e,s))})),a}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ie(e);r--;){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Ae(o);return No((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,o=Ot,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;n&&(t=Lt(t,Zt(n))),r?(o=Rt,s=!1):t.length>=200&&(o=tn,s=!1,t=new Qn(t));e:for(;++i<a;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,s&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else o(t,h,r)||l.push(c)}return l}Un.templateSettings={escape:J,evaluate:Z,interpolate:ee,variable:"",imports:{_:Un}},Un.prototype=zn.prototype,Un.prototype.constructor=Un,qn.prototype=Bn(zn.prototype),qn.prototype.constructor=qn,Kn.prototype=Bn(zn.prototype),Kn.prototype.constructor=Kn,Hn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===s?i:n}return Le.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==i:Le.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===i?s:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Sn||Wn),string:new Hn}},Gn.prototype.delete=function(e){var t=uo(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return uo(this,e).get(e)},Gn.prototype.has=function(e){return uo(this,e).has(e)},Gn.prototype.set=function(e,t){var n=uo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,s),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var dr=Oi(br),fr=Oi(_r,!0);function pr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var s=e[r],a=t(s);if(null!=a&&(l===i?a===a&&!la(a):n(a,l)))var l=a,u=s}return u}function gr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=vo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?yr(a,t-1,n,r,i):Mt(i,a):r||(i[i.length]=a)}return i}var vr=Ri(),wr=Ri(!0);function br(e,t){return e&&vr(e,t,Na)}function _r(e,t){return e&&wr(e,t,Na)}function xr(e,t){return Pt(t,(function(t){return Xs(e[t])}))}function Tr(e,t){for(var n=0,r=(t=wi(t,e)).length;null!=e&&n<r;)e=e[jo(t[n++])];return n&&n==r?e:i}function Er(e,t,n){var r=t(e);return Ks(e)?r:Mt(r,n(e))}function Sr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Ie(e)?function(e){var t=Le.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(s){}var o=Fe.call(e);r&&(t?e[Je]=n:delete e[Je]);return o}(e):function(e){return Fe.call(e)}(e)}function Ir(e,t){return e>t}function kr(e,t){return null!=e&&Le.call(e,t)}function Cr(e,t){return null!=e&&t in Ie(e)}function Ar(e,t,r){for(var o=r?Rt:Ot,s=e[0].length,a=e.length,l=a,u=n(a),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Lt(d,Zt(t))),c=wn(d.length,c),u[l]=!r&&(t||s>=120&&d.length>=120)?new Qn(l&&d):i}d=e[0];var f=-1,p=u[0];e:for(;++f<s&&h.length<c;){var m=d[f],g=t?t(m):m;if(m=r||0!==m?m:0,!(p?tn(p,g):o(h,g,r))){for(l=a;--l;){var y=u[l];if(!(y?tn(y,g):o(e[l],g,r)))continue e}p&&p.push(g),h.push(m)}}return h}function Dr(e,t,n){var r=null==(e=Co(e,t=wi(t,e)))?e:e[jo($o(t))];return null==r?i:kt(r,e,n)}function Nr(e){return ta(e)&&Sr(e)==v}function Pr(e,t,n,r,o){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,n,r,o,s){var a=Ks(e),l=Ks(t),u=a?w:mo(e),c=l?w:mo(t),h=(u=u==v?k:u)==k,d=(c=c==v?k:c)==k,f=u==c;if(f&&Qs(e)){if(!Qs(t))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Yn),a||ua(e)?to(e,t,n,r,o,s):function(e,t,n,r,i,o,s){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new Ke(e),new Ke(t)));case b:case _:case I:return Us(+e,+t);case x:return e.name==t.name&&e.message==t.message;case A:case N:return e==t+"";case S:var a=un;case D:var l=1&r;if(a||(a=dn),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var c=to(a(e),a(t),r,i,o,s);return s.delete(e),c;case P:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,r,o,s);if(!(1&n)){var p=h&&Le.call(e,"__wrapped__"),m=d&&Le.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,y=m?t.value():t;return s||(s=new Yn),o(g,y,n,r,s)}}if(!f)return!1;return s||(s=new Yn),function(e,t,n,r,o,s){var a=1&n,l=ro(e),u=l.length,c=ro(t),h=c.length;if(u!=h&&!a)return!1;var d=u;for(;d--;){var f=l[d];if(!(a?f in t:Le.call(t,f)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var g=!0;s.set(e,t),s.set(t,e);var y=a;for(;++d<u;){var v=e[f=l[d]],w=t[f];if(r)var b=a?r(w,v,f,t,e,s):r(v,w,f,e,t,s);if(!(b===i?v===w||o(v,w,n,r,s):b)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(g=!1)}return s.delete(e),s.delete(t),g}(e,t,n,r,o,s)}(e,t,n,r,Pr,o))}function Or(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;for(e=Ie(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var u=(l=n[o])[0],c=e[u],h=l[1];if(a&&l[2]){if(c===i&&!(u in e))return!1}else{var d=new Yn;if(r)var f=r(c,h,u,e,t,d);if(!(f===i?Pr(h,c,3,r,d):f))return!1}}return!0}function Rr(e){return!(!ea(e)||(t=e,je&&je in t))&&(Xs(e)?Be:ve).test(Fo(e));var t}function Lr(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ks(e)?Br(e[0],e[1]):Ur(e):dl(e)}function Mr(e){if(!Eo(e))return Ut(e);var t=[];for(var n in Ie(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var n in Ie(e))t.push(n);return t}(e);var t=Eo(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Vr(e,t){var r=-1,i=Ws(e)?n(e.length):[];return dr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Ur(e){var t=co(e);return 1==t.length&&t[0][2]?Io(t[0][0],t[0][1]):function(n){return n===e||Or(n,e,t)}}function Br(e,t){return _o(e)&&So(t)?Io(jo(e),t):function(n){var r=Ia(n,e);return r===i&&r===t?ka(n,e):Pr(t,r,3)}}function zr(e,t,n,r,o){e!==t&&vr(t,(function(s,a){if(o||(o=new Yn),ea(s))!function(e,t,n,r,o,s,a){var l=Ao(e,n),u=Ao(t,n),c=a.get(u);if(c)return void er(e,n,c);var h=s?s(l,u,n+"",e,t,a):i,d=h===i;if(d){var f=Ks(u),p=!f&&Qs(u),m=!f&&!p&&ua(u);h=u,f||p||m?Ks(l)?h=l:Gs(l)?h=Ai(l):p?(d=!1,h=Ti(u,!0)):m?(d=!1,h=Si(u,!0)):h=[]:ia(u)||qs(u)?(h=l,qs(l)?h=ya(l):ea(l)&&!Xs(l)||(h=yo(u))):d=!1}d&&(a.set(u,h),o(h,u,r,s,a),a.delete(u));er(e,n,h)}(e,t,a,n,zr,r,o);else{var l=r?r(Ao(e,a),s,a+"",e,t,o):i;l===i&&(l=s),er(e,a,l)}}),Pa)}function qr(e,t){var n=e.length;if(n)return wo(t+=t<0?n:0,n)?e[t]:i}function Kr(e,t,n){t=t.length?Lt(t,(function(e){return Ks(e)?function(t){return Tr(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=Lt(t,Zt(lo()));var i=Vr(e,(function(e,n,i){var o=Lt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var l=Ii(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Tr(e,s);n(a,s)&&Zr(o,wi(s,e),a)}return o}function Wr(e,t,n,r){var i=r?Kt:qt,o=-1,s=t.length,a=e;for(e===t&&(t=Ai(t)),n&&(a=Lt(e,Zt(n)));++o<s;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(a,c,l,r))>-1;)a!==e&&Ye.call(a,l,1),Ye.call(e,l,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;wo(i)?Ye.call(e,i,1):hi(e,i)}}return e}function Qr(e,t){return e+pt(xn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Po(ko(e,t,rl),e+"")}function Xr(e){return Xn(Ua(e))}function Jr(e,t){var n=Ua(e);return Lo(n,ar(t,0,n.length))}function Zr(e,t,n,r){if(!ea(e))return e;for(var o=-1,s=(t=wi(t,e)).length,a=s-1,l=e;null!=l&&++o<s;){var u=jo(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=ea(h)?h:wo(t[o+1])?[]:{})}tr(l,u,c),l=l[u]}return e}var ei=Dn?function(e,t){return Dn.set(e,t),e}:rl,ti=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Lo(Ua(e))}function ri(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function ii(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!la(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return si(e,t,rl,n)}function si(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!==t,l=null===t,u=la(t),c=t===i;o<s;){var h=pt((o+s)/2),d=n(e[h]),f=d!==i,p=null===d,m=d===d,g=la(d);if(a)var y=r||m;else y=c?m&&(r||f):l?m&&f&&(r||!p):u?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);y?o=h+1:s=h}return wn(s,4294967294)}function ai(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Us(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function li(e){return"number"==typeof e?e:la(e)?m:+e}function ui(e){if("string"==typeof e)return e;if(Ks(e))return Lt(e,ui)+"";if(la(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ci(e,t,n){var r=-1,i=Ot,o=e.length,s=!0,a=[],l=a;if(n)s=!1,i=Rt;else if(o>=200){var u=t?null:Yi(e);if(u)return dn(u);s=!1,i=tn,l=new Qn}else l=t?[]:a;e:for(;++r<o;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,s&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(c)}else i(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}function hi(e,t){return null==(e=Co(e,t=wi(t,e)))||delete e[jo($o(t))]}function di(e,t,n,r){return Zr(e,t,n(Tr(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ri(e,r?0:o,r?o+1:i):ri(e,r?o+1:0,r?i:o)}function pi(e,t){var n=e;return n instanceof Kn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?ci(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=e[o],l=-1;++l<i;)l!=o&&(s[o]=hr(s[o]||a,e[l],t,r));return ci(yr(s,1),t,r)}function gi(e,t,n){for(var r=-1,o=e.length,s=t.length,a={};++r<o;){var l=r<s?t[r]:i;n(a,e[r],l)}return a}function yi(e){return Gs(e)?e:[]}function vi(e){return"function"==typeof e?e:rl}function wi(e,t){return Ks(e)?e:_o(e,t)?[e]:Mo(va(e))}var bi=$r;function _i(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var xi=nt||function(e){return mt.clearTimeout(e)};function Ti(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function Si(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ii(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,s=la(e),a=t!==i,l=null===t,u=t===t,c=la(t);if(!l&&!c&&!s&&e>t||s&&a&&u&&!l&&!c||r&&a&&u||!n&&u||!o)return 1;if(!r&&!s&&!c&&e<t||c&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!u)return-1}return 0}function ki(e,t,r,i){for(var o=-1,s=e.length,a=r.length,l=-1,u=t.length,c=Qt(s-a,0),h=n(u+c),d=!i;++l<u;)h[l]=t[l];for(;++o<a;)(d||o<s)&&(h[r[o]]=e[o]);for(;c--;)h[l++]=e[o++];return h}function Ci(e,t,r,i){for(var o=-1,s=e.length,a=-1,l=r.length,u=-1,c=t.length,h=Qt(s-l,0),d=n(h+c),f=!i;++o<h;)d[o]=e[o];for(var p=o;++u<c;)d[p+u]=t[u];for(;++a<l;)(f||o<s)&&(d[p+r[a]]=e[o++]);return d}function Ai(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Di(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],u=r?r(n[l],e[l],l,n,e):i;u===i&&(u=e[l]),o?or(n,l,u):tr(n,l,u)}return n}function Ni(e,t){return function(n,r){var i=Ks(n)?Ct:rr,o=t?t():{};return i(n,e,lo(r,2),o)}}function Pi(e){return $r((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&bo(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=Ie(t);++r<o;){var l=n[r];l&&e(t,l,r,s)}return t}))}function Oi(e,t){return function(n,r){if(null==n)return n;if(!Ws(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Ie(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ri(e){return function(t,n,r){for(var i=-1,o=Ie(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}function Li(e){return function(t){var n=ln(t=va(t))?mn(t):i,r=n?n[0]:t.charAt(0),o=n?_i(n,1).join(""):t.slice(1);return r[e]()+o}}function Mi(e){return function(t){return jt(Xa(qa(t).replace(et,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return ea(r)?r:n}}function Fi(e){return function(t,n,r){var o=Ie(t);if(!Ws(t)){var s=lo(n,3);t=Na(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function Vi(e){return no((function(t){var n=t.length,r=n,s=qn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Ae(o);if(s&&!l&&"wrapper"==so(a))var l=new qn([],!0)}for(r=l?r:n;++r<n;){var u=so(a=t[r]),c="wrapper"==u?oo(a):i;l=c&&xo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[so(c[0])].apply(l,c[3]):1==a.length&&xo(a)?l[u]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ks(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ui(e,t,r,o,s,a,l,u,c,d){var f=t&h,p=1&t,m=2&t,g=24&t,y=512&t,v=m?i:ji(e);return function h(){for(var w=arguments.length,b=n(w),_=w;_--;)b[_]=arguments[_];if(g)var x=ao(h),T=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,x);if(o&&(b=ki(b,o,s,g)),a&&(b=Ci(b,a,l,g)),w-=T,g&&w<d){var E=hn(b,x);return Gi(e,t,Ui,h.placeholder,r,b,E,u,c,d-w)}var S=p?r:this,I=m?S[e]:e;return w=b.length,u?b=function(e,t){var n=e.length,r=wn(t.length,n),o=Ai(e);for(;r--;){var s=t[r];e[r]=wo(s,n)?o[s]:i}return e}(b,u):y&&w>1&&b.reverse(),f&&c<w&&(b.length=c),this&&this!==mt&&this instanceof h&&(I=v||ji(I)),I.apply(S,b)}}function Bi(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function zi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=li(n),r=li(r)),o=e(n,r)}return o}}function qi(e){return no((function(t){return t=Lt(t,Zt(lo())),$r((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function Ki(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,ft(e/pn(t)));return ln(t)?_i(mn(r),0,e).join(""):r.slice(0,e)}function Hi(e){return function(t,r,o){return o&&"number"!=typeof o&&bo(t,r,o)&&(r=o=i),t=fa(t),r===i?(r=t,t=0):r=fa(r),function(e,t,r,i){for(var o=-1,s=Qt(ft((t-e)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=e,e+=r;return a}(t,r,o=o===i?t<r?1:-1:fa(o),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}function Gi(e,t,n,r,o,s,a,l,h,d){var f=8&t;t|=f?u:c,4&(t&=~(f?c:u))||(t&=-4);var p=[e,t,o,f?s:i,f?a:i,f?i:s,f?i:a,l,h,d],m=n.apply(i,p);return xo(e)&&Do(m,p),m.placeholder=r,Oo(m,e,t)}function Qi(e){var t=Se[e];return function(e,n){if(e=ga(e),(n=null==n?0:wn(pa(n),292))&&wt(e)){var r=(va(e)+"e").split("e");return+((r=(va(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=kn&&1/dn(new kn([,-0]))[1]==f?function(e){return new kn(e)}:ll;function $i(e){return function(t){var n=mo(t);return n==S?un(t):n==D?fn(t):function(e,t){return Lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,r,s,f,p,m,g){var y=2&t;if(!y&&"function"!=typeof e)throw new Ae(o);var v=s?s.length:0;if(v||(t&=-97,s=f=i),m=m===i?m:Qt(pa(m),0),g=g===i?g:pa(g),v-=f?f.length:0,t&c){var w=s,b=f;s=f=i}var _=y?i:oo(e),x=[e,t,r,s,f,w,b,p,m,g];if(_&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?ki(u,l,t[4]):l,e[4]=u?hn(e[3],a):t[4]}(l=t[5])&&(u=e[5],e[5]=u?Ci(u,l,t[6]):l,e[6]=u?hn(e[5],a):t[6]);(l=t[7])&&(e[7]=l);r&h&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(x,_),e=x[0],t=x[1],r=x[2],s=x[3],f=x[4],!(g=x[9]=x[9]===i?y?0:e.length:Qt(x[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)T=8==t||t==l?function(e,t,r){var o=ji(e);return function s(){for(var a=arguments.length,l=n(a),u=a,c=ao(s);u--;)l[u]=arguments[u];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:hn(l,c);return(a-=h.length)<r?Gi(e,t,Ui,s.placeholder,i,l,h,i,i,r-a):kt(this&&this!==mt&&this instanceof s?o:e,this,l)}}(e,t,g):t!=u&&33!=t||f.length?Ui.apply(i,x):function(e,t,r,i){var o=1&t,s=ji(e);return function t(){for(var a=-1,l=arguments.length,u=-1,c=i.length,h=n(c+l),d=this&&this!==mt&&this instanceof t?s:e;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++a];return kt(d,o?r:this,h)}}(e,t,r,s);else var T=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Oo((_?ei:Do)(T,x),e,t)}function Ji(e,t,n,r){return e===i||Us(e,Pe[n])&&!Le.call(r,n)?t:e}function Zi(e,t,n,r,o,s){return ea(e)&&ea(t)&&(s.set(t,e),zr(e,t,i,Zi,s),s.delete(t)),e}function eo(e){return ia(e)?i:e}function to(e,t,n,r,o,s){var a=1&n,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(e),h=s.get(t);if(c&&h)return c==t&&h==e;var d=-1,f=!0,p=2&n?new Qn:i;for(s.set(e,t),s.set(t,e);++d<l;){var m=e[d],g=t[d];if(r)var y=a?r(g,m,d,t,e,s):r(m,g,d,e,t,s);if(y!==i){if(y)continue;f=!1;break}if(p){if(!Vt(t,(function(e,t){if(!tn(p,t)&&(m===e||o(m,e,n,r,s)))return p.push(t)}))){f=!1;break}}else if(m!==g&&!o(m,g,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function no(e){return Po(ko(e,i,Ho),e+"")}function ro(e){return Er(e,Na,fo)}function io(e){return Er(e,Pa,po)}var oo=Dn?function(e){return Dn.get(e)}:ll;function so(e){for(var t=e.name+"",n=Nn[t],r=Le.call(Nn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function ao(e){return(Le.call(Un,"placeholder")?Un:e).placeholder}function lo(){var e=Un.iteratee||il;return e=e===il?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function uo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function co(e){for(var t=Na(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,So(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Rr(n)?n:i}var fo=gt?function(e){return null==e?[]:(e=Ie(e),Pt(gt(e),(function(t){return Qe.call(e,t)})))}:ml,po=gt?function(e){for(var t=[];e;)Mt(t,fo(e)),e=We(e);return t}:ml,mo=Sr;function go(e,t,n){for(var r=-1,i=(t=wi(t,e)).length,o=!1;++r<i;){var s=jo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Zs(i)&&wo(s,i)&&(Ks(e)||qs(e))}function yo(e){return"function"!=typeof e.constructor||Eo(e)?{}:Bn(We(e))}function vo(e){return Ks(e)||qs(e)||!!($e&&e&&e[$e])}function wo(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function bo(e,t,n){if(!ea(n))return!1;var r=typeof t;return!!("number"==r?Ws(n)&&wo(t,n.length):"string"==r&&t in n)&&Us(n[t],e)}function _o(e,t){if(Ks(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!la(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ie(t))}function xo(e){var t=so(e),n=Un[t];if("function"!=typeof n||!(t in Kn.prototype))return!1;if(e===n)return!0;var r=oo(n);return!!r&&e===r[0]}(En&&mo(new En(new ArrayBuffer(1)))!=L||Sn&&mo(new Sn)!=S||In&&mo(In.resolve())!=C||kn&&mo(new kn)!=D||Cn&&mo(new Cn)!=O)&&(mo=function(e){var t=Sr(e),n=t==k?e.constructor:i,r=n?Fo(n):"";if(r)switch(r){case Pn:return L;case On:return S;case Rn:return C;case Ln:return D;case Mn:return O}return t});var To=Oe?Xs:gl;function Eo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function So(e){return e===e&&!ea(e)}function Io(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ie(n)))}}function ko(e,t,r){return t=Qt(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=Qt(i.length-t,0),a=n(s);++o<s;)a[o]=i[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=i[o];return l[t]=r(a),kt(e,this,l)}}function Co(e,t){return t.length<2?e:Tr(e,ri(t,0,-1))}function Ao(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Do=Ro(ei),No=ct||function(e,t){return mt.setTimeout(e,t)},Po=Ro(ti);function Oo(e,t,n){var r=t+"";return Po(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return At(y,(function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Ro(e){var t=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Lo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var s=Qr(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Mo=function(e){var t=Rs(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function jo(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Vo(e){if(e instanceof Kn)return e.clone();var t=new qn(e.__wrapped__,e.__chain__);return t.__actions__=Ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Uo=$r((function(e,t){return Gs(e)?hr(e,yr(t,1,Gs,!0)):[]})),Bo=$r((function(e,t){var n=$o(t);return Gs(n)&&(n=i),Gs(e)?hr(e,yr(t,1,Gs,!0),lo(n,2)):[]})),zo=$r((function(e,t){var n=$o(t);return Gs(n)&&(n=i),Gs(e)?hr(e,yr(t,1,Gs,!0),i,n):[]}));function qo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:pa(n);return i<0&&(i=Qt(r+i,0)),zt(e,lo(t,3),i)}function Ko(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=pa(n),o=n<0?Qt(r+o,0):wn(o,r-1)),zt(e,lo(t,3),o,!0)}function Ho(e){return(null==e?0:e.length)?yr(e,1):[]}function Wo(e){return e&&e.length?e[0]:i}var Go=$r((function(e){var t=Lt(e,yi);return t.length&&t[0]===e[0]?Ar(t):[]})),Qo=$r((function(e){var t=$o(e),n=Lt(e,yi);return t===$o(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ar(n,lo(t,2)):[]})),Yo=$r((function(e){var t=$o(e),n=Lt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,i,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xo=$r(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var Zo=no((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Gr(e,Lt(t,(function(e){return wo(e,n)?+e:e})).sort(Ii)),r}));function es(e){return null==e?e:Tn.call(e)}var ts=$r((function(e){return ci(yr(e,1,Gs,!0))})),ns=$r((function(e){var t=$o(e);return Gs(t)&&(t=i),ci(yr(e,1,Gs,!0),lo(t,2))})),rs=$r((function(e){var t=$o(e);return t="function"==typeof t?t:i,ci(yr(e,1,Gs,!0),i,t)}));function is(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if(Gs(e))return t=Qt(e.length,t),!0})),Xt(t,(function(t){return Lt(e,Gt(t))}))}function os(e,t){if(!e||!e.length)return[];var n=is(e);return null==t?n:Lt(n,(function(e){return kt(t,i,e)}))}var ss=$r((function(e,t){return Gs(e)?hr(e,t):[]})),as=$r((function(e){return mi(Pt(e,Gs))})),ls=$r((function(e){var t=$o(e);return Gs(t)&&(t=i),mi(Pt(e,Gs),lo(t,2))})),us=$r((function(e){var t=$o(e);return t="function"==typeof t?t:i,mi(Pt(e,Gs),i,t)})),cs=$r(is);var hs=$r((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,os(e,n)}));function ds(e){var t=Un(e);return t.__chain__=!0,t}function fs(e,t){return t(e)}var ps=no((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Kn&&wo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fs,args:[o],thisArg:i}),new qn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ms=Ni((function(e,t,n){Le.call(e,n)?++e[n]:or(e,n,1)}));var gs=Fi(qo),ys=Fi(Ko);function vs(e,t){return(Ks(e)?At:dr)(e,lo(t,3))}function ws(e,t){return(Ks(e)?Dt:fr)(e,lo(t,3))}var bs=Ni((function(e,t,n){Le.call(e,n)?e[n].push(t):or(e,n,[t])}));var _s=$r((function(e,t,r){var i=-1,o="function"==typeof t,s=Ws(e)?n(e.length):[];return dr(e,(function(e){s[++i]=o?kt(t,e,r):Dr(e,t,r)})),s})),xs=Ni((function(e,t,n){or(e,n,t)}));function Ts(e,t){return(Ks(e)?Lt:Vr)(e,lo(t,3))}var Es=Ni((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ss=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&bo(e,t[0],t[1])?t=[]:n>2&&bo(t[0],t[1],t[2])&&(t=[t[0]]),Kr(e,yr(t,1),[])})),Is=it||function(){return mt.Date.now()};function ks(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,h,i,i,i,i,t)}function Cs(e,t){var n;if("function"!=typeof t)throw new Ae(o);return e=pa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var As=$r((function(e,t,n){var r=1;if(n.length){var i=hn(n,ao(As));r|=u}return Xi(e,r,t,n,i)})),Ds=$r((function(e,t,n){var r=3;if(n.length){var i=hn(n,ao(Ds));r|=u}return Xi(t,r,e,n,i)}));function Ns(e,t,n){var r,s,a,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Ae(o);function m(t){var n=r,o=s;return r=s=i,h=t,l=e.apply(o,n)}function g(e){var n=e-c;return c===i||n>=t||n<0||f&&e-h>=a}function y(){var e=Is();if(g(e))return v(e);u=No(y,function(e){var n=t-(e-c);return f?wn(n,a-(e-h)):n}(e))}function v(e){return u=i,p&&r?m(e):(r=s=i,l)}function w(){var e=Is(),n=g(e);if(r=arguments,s=this,c=e,n){if(u===i)return function(e){return h=e,u=No(y,t),d?m(e):l}(c);if(f)return xi(u),u=No(y,t),m(c)}return u===i&&(u=No(y,t)),l}return t=ga(t)||0,ea(n)&&(d=!!n.leading,a=(f="maxWait"in n)?Qt(ga(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),w.cancel=function(){u!==i&&xi(u),h=0,r=c=s=u=i},w.flush=function(){return u===i?l:v(Is())},w}var Ps=$r((function(e,t){return cr(e,1,t)})),Os=$r((function(e,t,n){return cr(e,ga(t)||0,n)}));function Rs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Rs.Cache||Gn),n}function Ls(e){if("function"!=typeof e)throw new Ae(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Rs.Cache=Gn;var Ms=bi((function(e,t){var n=(t=1==t.length&&Ks(t[0])?Lt(t[0],Zt(lo())):Lt(yr(t,1),Zt(lo()))).length;return $r((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),js=$r((function(e,t){var n=hn(t,ao(js));return Xi(e,u,i,t,n)})),Fs=$r((function(e,t){var n=hn(t,ao(Fs));return Xi(e,c,i,t,n)})),Vs=no((function(e,t){return Xi(e,d,i,i,i,t)}));function Us(e,t){return e===t||e!==e&&t!==t}var Bs=Wi(Ir),zs=Wi((function(e,t){return e>=t})),qs=Nr(function(){return arguments}())?Nr:function(e){return ta(e)&&Le.call(e,"callee")&&!Qe.call(e,"callee")},Ks=n.isArray,Hs=_t?Zt(_t):function(e){return ta(e)&&Sr(e)==R};function Ws(e){return null!=e&&Zs(e.length)&&!Xs(e)}function Gs(e){return ta(e)&&Ws(e)}var Qs=yt||gl,Ys=xt?Zt(xt):function(e){return ta(e)&&Sr(e)==_};function $s(e){if(!ta(e))return!1;var t=Sr(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ia(e)}function Xs(e){if(!ea(e))return!1;var t=Sr(e);return t==T||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Js(e){return"number"==typeof e&&e==pa(e)}function Zs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var na=Tt?Zt(Tt):function(e){return ta(e)&&mo(e)==S};function ra(e){return"number"==typeof e||ta(e)&&Sr(e)==I}function ia(e){if(!ta(e)||Sr(e)!=k)return!1;var t=We(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Ve}var oa=Et?Zt(Et):function(e){return ta(e)&&Sr(e)==A};var sa=St?Zt(St):function(e){return ta(e)&&mo(e)==D};function aa(e){return"string"==typeof e||!Ks(e)&&ta(e)&&Sr(e)==N}function la(e){return"symbol"==typeof e||ta(e)&&Sr(e)==P}var ua=It?Zt(It):function(e){return ta(e)&&Zs(e.length)&&!!lt[Sr(e)]};var ca=Wi(Fr),ha=Wi((function(e,t){return e<=t}));function da(e){if(!e)return[];if(Ws(e))return aa(e)?mn(e):Ai(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=mo(e);return(t==S?un:t==D?dn:Ua)(e)}function fa(e){return e?(e=ga(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function pa(e){var t=fa(e),n=t%1;return t===t?n?t-n:t:0}function ma(e){return e?ar(pa(e),0,g):0}function ga(e){if("number"==typeof e)return e;if(la(e))return m;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ye.test(e);return n||we.test(e)?dt(e.slice(2),n?2:8):ge.test(e)?m:+e}function ya(e){return Di(e,Pa(e))}function va(e){return null==e?"":ui(e)}var wa=Pi((function(e,t){if(Eo(t)||Ws(t))Di(t,Na(t),e);else for(var n in t)Le.call(t,n)&&tr(e,n,t[n])})),ba=Pi((function(e,t){Di(t,Pa(t),e)})),_a=Pi((function(e,t,n,r){Di(t,Pa(t),e,r)})),xa=Pi((function(e,t,n,r){Di(t,Na(t),e,r)})),Ta=no(sr);var Ea=$r((function(e,t){e=Ie(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&bo(t[0],t[1],o)&&(r=1);++n<r;)for(var s=t[n],a=Pa(s),l=-1,u=a.length;++l<u;){var c=a[l],h=e[c];(h===i||Us(h,Pe[c])&&!Le.call(e,c))&&(e[c]=s[c])}return e})),Sa=$r((function(e){return e.push(i,Zi),kt(Ra,i,e)}));function Ia(e,t,n){var r=null==e?i:Tr(e,t);return r===i?n:r}function ka(e,t){return null!=e&&go(e,t,Cr)}var Ca=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),el(rl)),Aa=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),lo),Da=$r(Dr);function Na(e){return Ws(e)?$n(e):Mr(e)}function Pa(e){return Ws(e)?$n(e,!0):jr(e)}var Oa=Pi((function(e,t,n){zr(e,t,n)})),Ra=Pi((function(e,t,n,r){zr(e,t,n,r)})),La=no((function(e,t){var n={};if(null==e)return n;var r=!1;t=Lt(t,(function(t){return t=wi(t,e),r||(r=t.length>1),t})),Di(e,io(e),n),r&&(n=lr(n,7,eo));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Ma=no((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return ka(e,n)}))}(e,t)}));function ja(e,t){if(null==e)return{};var n=Lt(io(e),(function(e){return[e]}));return t=lo(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Fa=$i(Na),Va=$i(Pa);function Ua(e){return null==e?[]:en(e,Na(e))}var Ba=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?za(t):t)}));function za(e){return $a(va(e).toLowerCase())}function qa(e){return(e=va(e))&&e.replace(_e,on).replace(tt,"")}var Ka=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ha=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Wa=Li("toLowerCase");var Ga=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Qa=Mi((function(e,t,n){return e+(n?" ":"")+$a(t)}));var Ya=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$a=Li("toUpperCase");function Xa(e,t,n){return e=va(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Ja=$r((function(e,t){try{return kt(e,i,t)}catch(n){return $s(n)?n:new ae(n)}})),Za=no((function(e,t){return At(t,(function(t){t=jo(t),or(e,t,As(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Vi(),nl=Vi(!0);function rl(e){return e}function il(e){return Lr("function"==typeof e?e:lr(e,1))}var ol=$r((function(e,t){return function(n){return Dr(n,e,t)}})),sl=$r((function(e,t){return function(n){return Dr(e,n,t)}}));function al(e,t,n){var r=Na(t),i=xr(t,r);null!=n||ea(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Na(t)));var o=!(ea(n)&&"chain"in n)||!!n.chain,s=Xs(e);return At(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ai(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Mt([this.value()],arguments))})})),e}function ll(){}var ul=qi(Lt),cl=qi(Nt),hl=qi(Vt);function dl(e){return _o(e)?Gt(jo(e)):function(e){return function(t){return Tr(t,e)}}(e)}var fl=Hi(),pl=Hi(!0);function ml(){return[]}function gl(){return!1}var yl=zi((function(e,t){return e+t}),0),vl=Qi("ceil"),wl=zi((function(e,t){return e/t}),1),bl=Qi("floor");var _l=zi((function(e,t){return e*t}),1),xl=Qi("round"),Tl=zi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Ae(o);return e=pa(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=ks,Un.assign=wa,Un.assignIn=ba,Un.assignInWith=_a,Un.assignWith=xa,Un.at=Ta,Un.before=Cs,Un.bind=As,Un.bindAll=Za,Un.bindKey=Ds,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ks(e)?e:[e]},Un.chain=ds,Un.chunk=function(e,t,r){t=(r?bo(e,t,r):t===i)?1:Qt(pa(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,l=n(ft(o/t));s<o;)l[a++]=ri(e,s,s+=t);return l},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(Ks(r)?Ai(r):[r],yr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?Lt(e,(function(e){if("function"!=typeof e[1])throw new Ae(o);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Na(e);return function(n){return ur(n,e,t)}}(lr(e,1))},Un.constant=el,Un.countBy=ms,Un.create=function(e,t){var n=Bn(e);return null==t?n:ir(n,t)},Un.curry=function e(t,n,r){var o=Xi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.curryRight=function e(t,n,r){var o=Xi(t,l,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.debounce=Ns,Un.defaults=Ea,Un.defaultsDeep=Sa,Un.defer=Ps,Un.delay=Os,Un.difference=Uo,Un.differenceBy=Bo,Un.differenceWith=zo,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:pa(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:pa(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?fi(e,lo(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?fi(e,lo(t,3),!0):[]},Un.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&bo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=pa(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:pa(r))<0&&(r+=o),r=n>r?0:ma(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Ks(e)?Pt:gr)(e,lo(t,3))},Un.flatMap=function(e,t){return yr(Ts(e,t),1)},Un.flatMapDeep=function(e,t){return yr(Ts(e,t),f)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:pa(n),yr(Ts(e,t),n)},Un.flatten=Ho,Un.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:pa(t)):[]},Un.flip=function(e){return Xi(e,512)},Un.flow=tl,Un.flowRight=nl,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:xr(e,Na(e))},Un.functionsIn=function(e){return null==e?[]:xr(e,Pa(e))},Un.groupBy=bs,Un.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},Un.intersection=Go,Un.intersectionBy=Qo,Un.intersectionWith=Yo,Un.invert=Ca,Un.invertBy=Aa,Un.invokeMap=_s,Un.iteratee=il,Un.keyBy=xs,Un.keys=Na,Un.keysIn=Pa,Un.map=Ts,Un.mapKeys=function(e,t){var n={};return t=lo(t,3),br(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=lo(t,3),br(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(lr(e,1))},Un.matchesProperty=function(e,t){return Br(e,lr(t,1))},Un.memoize=Rs,Un.merge=Oa,Un.mergeWith=Ra,Un.method=ol,Un.methodOf=sl,Un.mixin=al,Un.negate=Ls,Un.nthArg=function(e){return e=pa(e),$r((function(t){return qr(t,e)}))},Un.omit=La,Un.omitBy=function(e,t){return ja(e,Ls(lo(t)))},Un.once=function(e){return Cs(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Ks(t)||(t=null==t?[]:[t]),Ks(n=r?i:n)||(n=null==n?[]:[n]),Kr(e,t,n))},Un.over=ul,Un.overArgs=Ms,Un.overEvery=cl,Un.overSome=hl,Un.partial=js,Un.partialRight=Fs,Un.partition=Es,Un.pick=Ma,Un.pickBy=ja,Un.property=dl,Un.propertyOf=function(e){return function(t){return null==e?i:Tr(e,t)}},Un.pull=Xo,Un.pullAll=Jo,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,lo(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},Un.pullAt=Zo,Un.range=fl,Un.rangeRight=pl,Un.rearg=Vs,Un.reject=function(e,t){return(Ks(e)?Pt:gr)(e,Ls(lo(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Gr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Ae(o);return $r(e,t=t===i?t:pa(t))},Un.reverse=es,Un.sampleSize=function(e,t,n){return t=(n?bo(e,t,n):t===i)?1:pa(t),(Ks(e)?Jn:Jr)(e,t)},Un.set=function(e,t,n){return null==e?e:Zr(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Zr(e,t,n,r)},Un.shuffle=function(e){return(Ks(e)?Zn:ni)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&bo(e,t,n)?(t=0,n=r):(t=null==t?0:pa(t),n=n===i?r:pa(n)),ri(e,t,n)):[]},Un.sortBy=Ss,Un.sortedUniq=function(e){return e&&e.length?ai(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?ai(e,lo(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&bo(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=va(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=ui(t))&&ln(e)?_i(mn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Ae(o);return t=null==t?0:Qt(pa(t),0),$r((function(n){var r=n[t],i=_i(n,0,t);return r&&Mt(i,r),kt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:pa(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:pa(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?fi(e,lo(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?fi(e,lo(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ae(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ns(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=fs,Un.toArray=da,Un.toPairs=Fa,Un.toPairsIn=Va,Un.toPath=function(e){return Ks(e)?Lt(e,jo):la(e)?[e]:Ai(Mo(va(e)))},Un.toPlainObject=ya,Un.transform=function(e,t,n){var r=Ks(e),i=r||Qs(e)||ua(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ea(e)&&Xs(o)?Bn(We(e)):{}}return(i?At:br)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return ks(e,1)},Un.union=ts,Un.unionBy=ns,Un.unionWith=rs,Un.uniq=function(e){return e&&e.length?ci(e):[]},Un.uniqBy=function(e,t){return e&&e.length?ci(e,lo(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ci(e,i,t):[]},Un.unset=function(e,t){return null==e||hi(e,t)},Un.unzip=is,Un.unzipWith=os,Un.update=function(e,t,n){return null==e?e:di(e,t,vi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,vi(n),r)},Un.values=Ua,Un.valuesIn=function(e){return null==e?[]:en(e,Pa(e))},Un.without=ss,Un.words=Xa,Un.wrap=function(e,t){return js(vi(t),e)},Un.xor=as,Un.xorBy=ls,Un.xorWith=us,Un.zip=cs,Un.zipObject=function(e,t){return gi(e||[],t||[],tr)},Un.zipObjectDeep=function(e,t){return gi(e||[],t||[],Zr)},Un.zipWith=hs,Un.entries=Fa,Un.entriesIn=Va,Un.extend=ba,Un.extendWith=_a,al(Un,Un),Un.add=yl,Un.attempt=Ja,Un.camelCase=Ba,Un.capitalize=za,Un.ceil=vl,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ga(n))===n?n:0),t!==i&&(t=(t=ga(t))===t?t:0),ar(ga(e),t,n)},Un.clone=function(e){return lr(e,4)},Un.cloneDeep=function(e){return lr(e,5)},Un.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||ur(e,t,Na(t))},Un.deburr=qa,Un.defaultTo=function(e,t){return null==e||e!==e?t:e},Un.divide=wl,Un.endsWith=function(e,t,n){e=va(e),t=ui(t);var r=e.length,o=n=n===i?r:ar(pa(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Un.eq=Us,Un.escape=function(e){return(e=va(e))&&X.test(e)?e.replace(Y,sn):e},Un.escapeRegExp=function(e){return(e=va(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Un.every=function(e,t,n){var r=Ks(e)?Nt:pr;return n&&bo(e,t,n)&&(t=i),r(e,lo(t,3))},Un.find=gs,Un.findIndex=qo,Un.findKey=function(e,t){return Bt(e,lo(t,3),br)},Un.findLast=ys,Un.findLastIndex=Ko,Un.findLastKey=function(e,t){return Bt(e,lo(t,3),_r)},Un.floor=bl,Un.forEach=vs,Un.forEachRight=ws,Un.forIn=function(e,t){return null==e?e:vr(e,lo(t,3),Pa)},Un.forInRight=function(e,t){return null==e?e:wr(e,lo(t,3),Pa)},Un.forOwn=function(e,t){return e&&br(e,lo(t,3))},Un.forOwnRight=function(e,t){return e&&_r(e,lo(t,3))},Un.get=Ia,Un.gt=Bs,Un.gte=zs,Un.has=function(e,t){return null!=e&&go(e,t,kr)},Un.hasIn=ka,Un.head=Wo,Un.identity=rl,Un.includes=function(e,t,n,r){e=Ws(e)?e:Ua(e),n=n&&!r?pa(n):0;var i=e.length;return n<0&&(n=Qt(i+n,0)),aa(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&qt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:pa(n);return i<0&&(i=Qt(r+i,0)),qt(e,t,i)},Un.inRange=function(e,t,n){return t=fa(t),n===i?(n=t,t=0):n=fa(n),function(e,t,n){return e>=wn(t,n)&&e<Qt(t,n)}(e=ga(e),t,n)},Un.invoke=Da,Un.isArguments=qs,Un.isArray=Ks,Un.isArrayBuffer=Hs,Un.isArrayLike=Ws,Un.isArrayLikeObject=Gs,Un.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Sr(e)==b},Un.isBuffer=Qs,Un.isDate=Ys,Un.isElement=function(e){return ta(e)&&1===e.nodeType&&!ia(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Ws(e)&&(Ks(e)||"string"==typeof e||"function"==typeof e.splice||Qs(e)||ua(e)||qs(e)))return!e.length;var t=mo(e);if(t==S||t==D)return!e.size;if(Eo(e))return!Mr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Pr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Pr(e,t,i,n):!!r},Un.isError=$s,Un.isFinite=function(e){return"number"==typeof e&&wt(e)},Un.isFunction=Xs,Un.isInteger=Js,Un.isLength=Zs,Un.isMap=na,Un.isMatch=function(e,t){return e===t||Or(e,t,co(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Or(e,t,co(t),n)},Un.isNaN=function(e){return ra(e)&&e!=+e},Un.isNative=function(e){if(To(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=ra,Un.isObject=ea,Un.isObjectLike=ta,Un.isPlainObject=ia,Un.isRegExp=oa,Un.isSafeInteger=function(e){return Js(e)&&e>=-9007199254740991&&e<=p},Un.isSet=sa,Un.isString=aa,Un.isSymbol=la,Un.isTypedArray=ua,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return ta(e)&&mo(e)==O},Un.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==Sr(e)},Un.join=function(e,t){return null==e?"":bt.call(e,t)},Un.kebabCase=Ka,Un.last=$o,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=pa(n))<0?Qt(r+o,0):wn(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):zt(e,Ht,o,!0)},Un.lowerCase=Ha,Un.lowerFirst=Wa,Un.lt=ca,Un.lte=ha,Un.max=function(e){return e&&e.length?mr(e,rl,Ir):i},Un.maxBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Ir):i},Un.mean=function(e){return Wt(e,rl)},Un.meanBy=function(e,t){return Wt(e,lo(t,2))},Un.min=function(e){return e&&e.length?mr(e,rl,Fr):i},Un.minBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Fr):i},Un.stubArray=ml,Un.stubFalse=gl,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=_l,Un.nth=function(e,t){return e&&e.length?qr(e,pa(t)):i},Un.noConflict=function(){return mt._===this&&(mt._=Ue),this},Un.noop=ll,Un.now=Is,Un.pad=function(e,t,n){e=va(e);var r=(t=pa(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ki(pt(i),n)+e+Ki(ft(i),n)},Un.padEnd=function(e,t,n){e=va(e);var r=(t=pa(t))?pn(e):0;return t&&r<t?e+Ki(t-r,n):e},Un.padStart=function(e,t,n){e=va(e);var r=(t=pa(t))?pn(e):0;return t&&r<t?Ki(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),_n(va(e).replace(se,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&bo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fa(e),t===i?(t=e,e=0):t=fa(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=xn();return wn(e+o*(t-e+ht("1e-"+((o+"").length-1))),t)}return Qr(e,t)},Un.reduce=function(e,t,n){var r=Ks(e)?jt:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,dr)},Un.reduceRight=function(e,t,n){var r=Ks(e)?Ft:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,fr)},Un.repeat=function(e,t,n){return t=(n?bo(e,t,n):t===i)?1:pa(t),Yr(va(e),t)},Un.replace=function(){var e=arguments,t=va(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,o=(t=wi(t,e)).length;for(o||(o=1,e=i);++r<o;){var s=null==e?i:e[jo(t[r])];s===i&&(r=o,s=n),e=Xs(s)?s.call(e):s}return e},Un.round=xl,Un.runInContext=e,Un.sample=function(e){return(Ks(e)?Xn:Xr)(e)},Un.size=function(e){if(null==e)return 0;if(Ws(e))return aa(e)?pn(e):e.length;var t=mo(e);return t==S||t==D?e.size:Mr(e).length},Un.snakeCase=Ga,Un.some=function(e,t,n){var r=Ks(e)?Vt:ii;return n&&bo(e,t,n)&&(t=i),r(e,lo(t,3))},Un.sortedIndex=function(e,t){return oi(e,t)},Un.sortedIndexBy=function(e,t,n){return si(e,t,lo(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Us(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return oi(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return si(e,t,lo(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Us(e[n],t))return n}return-1},Un.startCase=Qa,Un.startsWith=function(e,t,n){return e=va(e),n=null==n?0:ar(pa(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},Un.subtract=Tl,Un.sum=function(e){return e&&e.length?$t(e,rl):0},Un.sumBy=function(e,t){return e&&e.length?$t(e,lo(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&bo(e,t,n)&&(t=i),e=va(e),t=_a({},t,r,Ji);var o,s,a=_a({},t.imports,r.imports,Ji),l=Na(a),u=en(a,l),c=0,h=t.interpolate||xe,d="__p += '",f=ke((t.escape||xe).source+"|"+h.source+"|"+(h===ee?pe:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,n,r,i,a,l){return r||(r=i),d+=e.slice(c,l).replace(Te,an),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var m=Le.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new ae("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(H,""):d).replace(W,"$1").replace(G,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Ja((function(){return Ee(l,p+"return "+d).apply(i,u)}));if(g.source=d,$s(g))throw g;return g},Un.times=function(e,t){if((e=pa(e))<1||e>p)return[];var n=g,r=wn(e,g);t=lo(t),e-=g;for(var i=Xt(r,t);++n<e;)t(n);return i},Un.toFinite=fa,Un.toInteger=pa,Un.toLength=ma,Un.toLower=function(e){return va(e).toLowerCase()},Un.toNumber=ga,Un.toSafeInteger=function(e){return e?ar(pa(e),-9007199254740991,p):0===e?e:0},Un.toString=va,Un.toUpper=function(e){return va(e).toUpperCase()},Un.trim=function(e,t,n){if((e=va(e))&&(n||t===i))return Jt(e);if(!e||!(t=ui(t)))return e;var r=mn(e),o=mn(t);return _i(r,nn(r,o),rn(r,o)+1).join("")},Un.trimEnd=function(e,t,n){if((e=va(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ui(t)))return e;var r=mn(e);return _i(r,0,rn(r,mn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=va(e))&&(n||t===i))return e.replace(se,"");if(!e||!(t=ui(t)))return e;var r=mn(e);return _i(r,nn(r,mn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(ea(t)){var o="separator"in t?t.separator:o;n="length"in t?pa(t.length):n,r="omission"in t?ui(t.omission):r}var s=(e=va(e)).length;if(ln(e)){var a=mn(e);s=a.length}if(n>=s)return e;var l=n-pn(r);if(l<1)return r;var u=a?_i(a,0,l).join(""):e.slice(0,l);if(o===i)return u+r;if(a&&(l+=u.length-l),oa(o)){if(e.slice(l).search(o)){var c,h=u;for(o.global||(o=ke(o.source,va(me.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===i?l:d)}}else if(e.indexOf(ui(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},Un.unescape=function(e){return(e=va(e))&&$.test(e)?e.replace(Q,yn):e},Un.uniqueId=function(e){var t=++Me;return va(e)+t},Un.upperCase=Ya,Un.upperFirst=$a,Un.each=vs,Un.eachRight=ws,Un.first=Wo,al(Un,function(){var e={};return br(Un,(function(t,n){Le.call(Un.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Un.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),At(["drop","take"],(function(e,t){Kn.prototype[e]=function(n){n=n===i?1:Qt(pa(n),0);var r=this.__filtered__&&!t?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),At(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Kn.prototype[e]=function(){return this[n](1).value()[0]}})),At(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Kn.prototype[e]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(rl)},Kn.prototype.find=function(e){return this.filter(e).head()},Kn.prototype.findLast=function(e){return this.reverse().find(e)},Kn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new Kn(this):this.map((function(n){return Dr(n,e,t)}))})),Kn.prototype.reject=function(e){return this.filter(Ls(lo(e)))},Kn.prototype.slice=function(e,t){e=pa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=pa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Kn.prototype.toArray=function(){return this.take(g)},br(Kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Un[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&(Un.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof Kn,u=a[0],c=l||Ks(t),h=function(e){var t=o.apply(Un,Mt([e],a));return r&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,m=l&&!f;if(!s&&c){t=m?t:new Kn(this);var g=e.apply(t,a);return g.__actions__.push({func:fs,args:[h],thisArg:i}),new qn(g,d)}return p&&m?e.apply(this,a):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=De[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ks(i)?i:[],e)}return this[n]((function(n){return t.apply(Ks(n)?n:[],e)}))}})),br(Kn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Le.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:t,func:n})}})),Nn[Ui(i,2).name]=[{name:"wrapper",func:i}],Kn.prototype.clone=function(){var e=new Kn(this.__wrapped__);return e.__actions__=Ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ai(this.__views__),e},Kn.prototype.reverse=function(){if(this.__filtered__){var e=new Kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ks(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=wn(t,e+s);break;case"takeRight":e=Qt(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,u=r?a:s-1,c=this.__iteratees__,h=c.length,d=0,f=wn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var m=-1,g=e[u+=t];++m<h;){var y=c[m],v=y.iteratee,w=y.type,b=v(g);if(2==w)g=b;else if(!b){if(1==w)continue e;break e}}p[d++]=g}return p},Un.prototype.at=ps,Un.prototype.chain=function(){return ds(this)},Un.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=da(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof zn;){var r=Vo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var t=e;return this.__actions__.length&&(t=new Kn(this)),(t=t.reverse()).__actions__.push({func:fs,args:[es],thisArg:i}),new qn(t,this.__chain__)}return this.thru(es)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Xe&&(Un.prototype[Xe]=function(){return this}),Un}();mt._=vn,(r=function(){return vn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},725:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))n.call(o,u)&&(a[u]=o[u]);if(t){s=t(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(a[s[c]]=o[s[c]])}}return a}},573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(54),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},54:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,o,s){var a=i||"<<anonymous>>",l=s||r;if(null==n[r])return t?new Error("Required "+o+" `"+l+"` was not specified in `"+a+"`."):null;for(var u=arguments.length,c=Array(u>6?u-6:0),h=6;h<u;h++)c[h-6]=arguments[h];return e.apply(void 0,[n,r,a,o,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(725),o=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var l=!1,u=null,c=!1,h=null,d={onError:function(e){l=!0,u=e}};function f(e,t,n,r,i,o,s,c,h){l=!1,u=null,a.apply(d,arguments)}var p=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,a,d,p){if(f.apply(this,arguments),l){if(!l)throw Error(s(198));var m=u;l=!1,u=null,c||(c=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,w={};function b(){if(v)for(var e in w){var t=w[e],n=v.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!x[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in x[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,l=r;if(T.hasOwnProperty(l))throw Error(s(99,l));T[l]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&_(u[i],a,l);i=!0}else o.registrationName?(_(o.registrationName,a,l),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function _(e,t,n){if(E[e])throw Error(s(100,e));E[e]=t,S[e]=t.eventTypes[n].dependencies}var x=[],T={},E={},S={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(s(102,t));w[t]=r,n=!0}}n&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,A=null,D=null;function N(e){if(e=m(e)){if("function"!==typeof C)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){A?D?D.push(e):D=[e]:A=e}function O(){if(A){var e=A,t=D;if(D=A=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function R(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var j=R,F=!1,V=!1;function U(){null===A&&null===D||(M(),O())}function B(e,t,n){if(V)return e(t,n);V=!0;try{return j(e,t,n)}finally{V=!1,U()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,K={},H={};function W(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new W(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new W(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new W(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new W(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new W(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new W(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new W(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new W(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new W(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new W(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new W(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);G[t]=new W(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new W(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new W(e,1,!1,e.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(H,e)||!q.call(K,e)&&(z.test(e)?H[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function xe(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function Se(e,t){Ee(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Pe(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Ve,Ue=(Ve=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function Be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},Ke={},He={};function We(e){if(Ke[e])return Ke[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in He)return Ke[e]=n[t];return e}k&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ge=We("animationend"),Qe=We("animationiteration"),Ye=We("animationstart"),$e=We("transitionend"),Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(ot(e,at),st)throw Error(s(95));if(c)throw e=h,c=!1,h=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!k)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=On(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,l=0;l<x.length;l++){var u=x[l];u&&(u=u.extractEvents(r,t,o,i,s))&&(a=it(a,u))}lt(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xe.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,yt,vt,wt=!1,bt=[],_t=null,xt=null,Tt=null,Et=new Map,St=new Map,It=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Dt(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=At(t,n,r,i,o),null!==t&&(null!==(t=Rn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=On(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Rn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){Ot(e)&&n.delete(t)}function Lt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Rn(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Ot(_t)&&(_t=null),null!==xt&&Ot(xt)&&(xt=null),null!==Tt&&Ot(Tt)&&(Tt=null),Et.forEach(Rt),St.forEach(Rt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Lt)))}function jt(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Mt(_t,e),null!==xt&&Mt(xt,e),null!==Tt&&Mt(Tt,e),Et.forEach(t),St.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Pt(n),null===n.blockedOn&&It.shift()}var Ft={},Vt=new Map,Ut=new Map,Bt=["abort","abort",Ge,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$e,"transitionEnd","waiting","waiting"];function zt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Ut.set(r,t),Vt.set(r,o),Ft[i]=o}}zt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),zt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),zt(Bt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<qt.length;Kt++)Ut.set(qt[Kt],0);var Ht=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,Gt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Ut.get(t);switch(void 0===r?2:r){case 0:r=$t.bind(null,t,1,e);break;case 1:r=Xt.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function $t(e,t,n,r){F||M();var i=Jt,o=F;F=!0;try{L(i,e,t,n,r)}finally{(F=o)||U()}}function Xt(e,t,n,r){Wt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Gt)if(0<bt.length&&-1<kt.indexOf(e))e=At(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Dt(e,r);else if(-1<kt.indexOf(e))e=At(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Nt(_t,e,t,n,r,i),!0;case"dragenter":return xt=Nt(xt,e,t,n,r,i),!0;case"mouseover":return Tt=Nt(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Et.set(o,Nt(Et.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Nt(St.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Dt(e,r),e=ft(e,r,null,t);try{B(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=On(n=ut(r)))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{B(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Re;function un(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function cn(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$",vn="/$",wn="$?",bn="$!",_n=null,xn=null;function Tn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function En(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn||n===bn||n===wn){if(0===t)return e;t--}else n===vn&&t++}e=e.previousSibling}return null}var An=Math.random().toString(36).slice(2),Dn="__reactInternalInstance$"+An,Nn="__reactEventHandlers$"+An,Pn="__reactContainere$"+An;function On(e){var t=e[Dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[Dn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[Dn])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function Rn(e){return!(e=e[Dn]||e[Pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Mn(e){return e[Nn]||null}function jn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Fn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Vn(e,t,n){(t=Fn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=jn(t);for(t=n.length;0<t--;)Vn(n[t],"captured",e);for(t=0;t<n.length;t++)Vn(n[t],"bubbled",e)}}function Bn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Fn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function zn(e){e&&e.dispatchConfig.registrationName&&Bn(e._targetInst,null,e)}function qn(e){ot(e,Un)}var Kn=null,Hn=null,Wn=null;function Gn(){if(Wn)return Wn;var e,t,n=Hn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Wn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function $n(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function Xn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Xn,e.release=Jn}i($n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),$n.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},$n.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn($n);var er=$n.extend({data:null}),tr=$n.extend({data:null}),nr=[9,13,27,32],rr=k&&"CompositionEvent"in window,ir=null;k&&"documentMode"in document&&(ir=document.documentMode);var or=k&&"TextEvent"in window&&!ir,sr=k&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function cr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:lr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var o=lr.compositionStart;break e;case"compositionend":o=lr.compositionEnd;break e;case"compositionupdate":o=lr.compositionUpdate;break e}o=void 0}else dr?cr(e,n)&&(o=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=lr.compositionStart);return o?(sr&&"ko"!==n.locale&&(dr||o!==lr.compositionStart?o===lr.compositionEnd&&dr&&(i=Gn()):(Hn="value"in(Kn=r)?Kn.value:Kn.textContent,dr=!0)),o=er.getPooled(o,t,n,r),i?o.data=i:null!==(i=hr(n))&&(o.data=i),qn(o),i=o):i=null,(e=or?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&cr(e,t)?(e=Gn(),Wn=Hn=Kn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sr&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yr(e,t,n){return(e=$n.getPooled(gr.change,e,t,n)).type="change",P(n),qn(e),e}var vr=null,wr=null;function br(e){lt(e)}function _r(e){if(_e(Ln(e)))return e}function xr(e,t){if("change"===e)return t}var Tr=!1;function Er(){vr&&(vr.detachEvent("onpropertychange",Sr),wr=vr=null)}function Sr(e){if("value"===e.propertyName&&_r(wr))if(e=yr(wr,e,ut(e)),F)lt(e);else{F=!0;try{R(br,e)}finally{F=!1,U()}}}function Ir(e,t,n){"focus"===e?(Er(),wr=n,(vr=t).attachEvent("onpropertychange",Sr)):"blur"===e&&Er()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(wr)}function Cr(e,t){if("click"===e)return _r(t)}function Ar(e,t){if("input"===e||"change"===e)return _r(t)}k&&(Tr=ct("input")&&(!document.documentMode||9<document.documentMode));var Dr={eventTypes:gr,_isInputEventSupported:Tr,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=xr;else if(mr(i))if(Tr)s=Ar;else{s=kr;var a=Ir}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Cr);if(s&&(s=s(e,t)))return yr(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Nr=$n.extend({view:null,detail:null}),Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Rr(){return Or}var Lr=0,Mr=0,jr=!1,Fr=!1,Vr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,jr?"mousemove"===e.type?e.screenX-t:0:(jr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,Fr?"mousemove"===e.type?e.screenY-t:0:(Fr=!0,0)}}),Ur=Vr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Br={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},zr={eventTypes:Br,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?On(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Vr,l=Br.mouseLeave,u=Br.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Ur,l=Br.pointerLeave,u=Br.pointerEnter,c="pointer");if(e=null==s?o:Ln(s),o=null==t?o:Ln(t),(l=a.getPooled(l,s,n,r)).type=c+"leave",l.target=e,l.relatedTarget=o,(n=a.getPooled(u,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=e,c=t,(r=s)&&c)e:{for(u=c,s=0,e=a=r;e;e=jn(e))s++;for(e=0,t=u;t;t=jn(t))e++;for(;0<s-e;)a=jn(a),s--;for(;0<e-s;)u=jn(u),e--;for(;s--;){if(a===u||a===u.alternate)break e;a=jn(a),u=jn(u)}a=null}else a=null;for(u=a,a=[];r&&r!==u&&(null===(s=r.alternate)||s!==u);)a.push(r),r=jn(r);for(r=[];c&&c!==u&&(null===(s=c.alternate)||s!==u);)r.push(c),c=jn(c);for(c=0;c<a.length;c++)Bn(a[c],"bubbled",l);for(c=r.length;0<c--;)Bn(r[c],"captured",n);return 0===(64&i)?[l]:[l,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Kr=Object.prototype.hasOwnProperty;function Hr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Kr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Wr=k&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,$r=null,Xr=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Xr||null==Qr||Qr!==hn(n)?null:("selectionStart"in(n=Qr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},$r&&Hr($r,n)?null:($r=n,(e=$n.getPooled(Gr.select,Yr,e,t)).type="select",e.target=Qr,qn(e),e))}var Zr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),o=S.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Ln(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,$r=null);break;case"blur":$r=Yr=Qr=null;break;case"mousedown":Xr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Xr=!1,Jr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},ei=$n.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=$n.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},si=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?oi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Vr.extend({dataTransfer:null}),li=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rr}),ui=$n.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=Vr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=si;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=li;break;case Ge:case Qe:case Ye:e=ei;break;case $e:e=ui;break;case"scroll":e=Nr;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ur;break;default:e=$n}return qn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(s(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,m=Rn,g=Ln,I({SimpleEventPlugin:hi,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Dr,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},yi={current:gi},vi={current:!1},wi=gi;function bi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xi(){pi(vi),pi(yi)}function Ti(e,t,n){if(yi.current!==gi)throw Error(s(168));mi(yi,t),mi(vi,n)}function Ei(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,ge(t)||"Unknown",o));return i({},n,{},r)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,wi=yi.current,mi(yi,e),mi(vi,vi.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ei(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,pi(vi),pi(yi),mi(yi,e)):pi(vi),mi(vi,n)}var ki=o.unstable_runWithPriority,Ci=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Di=o.unstable_requestPaint,Ni=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,Ri=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Mi=o.unstable_LowPriority,ji=o.unstable_IdlePriority,Fi={},Vi=o.unstable_shouldYield,Ui=void 0!==Di?Di:function(){},Bi=null,zi=null,qi=!1,Ki=Ni(),Hi=1e4>Ki?Ni:function(){return Ni()-Ki};function Wi(){switch(Pi()){case Oi:return 99;case Ri:return 98;case Li:return 97;case Mi:return 96;case ji:return 95;default:throw Error(s(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Ri;case 97:return Li;case 96:return Mi;case 95:return ji;default:throw Error(s(332))}}function Qi(e,t){return e=Gi(e),ki(e,t)}function Yi(e,t,n){return e=Gi(e),Ci(e,t,n)}function $i(e){return null===Bi?(Bi=[e],zi=Ci(Oi,Ji)):Bi.push(e),Fi}function Xi(){if(null!==zi){var e=zi;zi=null,Ai(e)}Ji()}function Ji(){if(!qi&&null!==Bi){qi=!0;var e=0;try{var t=Bi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(n){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ci(Oi,Xi),n}finally{qi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function eo(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var to={current:null},no=null,ro=null,io=null;function oo(){io=ro=no=null}function so(e){var t=to.current;pi(to),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function lo(e,t){no=e,io=ro=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ms=!0),e.firstContext=null)}function uo(e,t){if(io!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(io=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ro){if(null===no)throw Error(s(308));ro=t,no.dependencies={expirationTime:0,firstContext:t,responders:null}}else ro=ro.next=t;return e._currentValue}var co=!1;function ho(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function po(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function mo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function go(e,t){var n=e.alternate;null!==n&&fo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function yo(e,t,n,r){var o=e.updateQueue;co=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}s=a,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==s){l=s.next;var u=o.baseState,c=0,h=null,d=null,f=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=u):f=f.next=m,a>c&&(c=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),xl(a,p.suspenseConfig);e:{var g=e,y=p;switch(a=t,m=n,y.tag){case 1:if("function"===typeof(g=y.payload)){u=g.call(m,u,a);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=y.payload)?g.call(m,u,a):g)||void 0===a)break e;u=i({},u,a);break e;case 2:co=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=o.shared.pending))break;p=s.next=a.next,a.next=l,o.baseQueue=s=a,o.shared.pending=null}}null===f?h=u:f.next=d,o.baseState=h,o.baseQueue=f,Tl(c),e.expirationTime=c,e.memoizedState=u}}function vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var wo=$.ReactCurrentBatchConfig,bo=(new r.Component).refs;function _o(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var xo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=wo.suspense;(i=po(r=cl(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=wo.suspense;(i=po(r=cl(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ul(),r=wo.suspense;(r=po(n=cl(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),mo(e,r),hl(e,n)}};function To(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Hr(n,r)||!Hr(i,o))}function Eo(e,t,n){var r=!1,i=gi,o=t.contextType;return"object"===typeof o&&null!==o?o=uo(o):(i=_i(t)?wi:yi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):gi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=xo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function Io(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=bo,ho(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=uo(o):(o=_i(t)?wi:yi.current,i.context=bi(e,o)),yo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(_o(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&xo.enqueueReplaceState(i,i.state,null),yo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function Co(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===bo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ao(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Do(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Co(e,t,n),r.return=e,r):((r=Kl(n.type,n.key,n.props,null,e.mode,r)).ref=Co(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Hl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Wl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Kl(t.type,t.key,t.props,null,e.mode,n)).ref=Co(e,null,t),n.return=e,n;case te:return(t=Gl(t,e.mode,n)).return=e,t}if(ko(t)||me(t))return(t=Hl(t,e.mode,n,null)).return=e,t;Ao(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(ko(n)||me(n))return null!==i?null:h(e,t,n,r,null);Ao(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Ao(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=me(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case ee:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===ne){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Co(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===ne?((r=Hl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Kl(o.type,o.key,o.props,null,e.mode,l)).ref=Co(e,r,o),l.return=e,e=l)}return a(e);case te:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gl(o,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Wl(o,e.mode,l)).return=e,e=r),a(e);if(ko(o))return m(e,r,o,l);if(me(o))return g(e,r,o,l);if(c&&Ao(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var No=Do(!0),Po=Do(!1),Oo={},Ro={current:Oo},Lo={current:Oo},Mo={current:Oo};function jo(e){if(e===Oo)throw Error(s(174));return e}function Fo(e,t){switch(mi(Mo,t),mi(Lo,e),mi(Ro,Oo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:je(null,"");break;default:t=je(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Ro),mi(Ro,t)}function Vo(){pi(Ro),pi(Lo),pi(Mo)}function Uo(e){jo(Mo.current);var t=jo(Ro.current),n=je(t,e.type);t!==n&&(mi(Lo,e),mi(Ro,n))}function Bo(e){Lo.current===e&&(pi(Ro),pi(Lo))}var zo={current:0};function qo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===wn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ko(e,t){return{responder:e,props:t}}var Ho=$.ReactCurrentDispatcher,Wo=$.ReactCurrentBatchConfig,Go=0,Qo=null,Yo=null,$o=null,Xo=!1;function Jo(){throw Error(s(321))}function Zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,o){if(Go=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ho.current=null===e||null===e.memoizedState?Ts:Es,e=n(r,i),t.expirationTime===Go){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,$o=Yo=null,t.updateQueue=null,Ho.current=Ss,e=n(r,i)}while(t.expirationTime===Go)}if(Ho.current=xs,t=null!==Yo&&null!==Yo.next,Go=0,$o=Yo=Qo=null,Xo=!1,t)throw Error(s(300));return e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$o?Qo.memoizedState=$o=e:$o=$o.next=e,$o}function ns(){if(null===Yo){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=Yo.next;var t=null===$o?Qo.memoizedState:$o.next;if(null!==t)$o=t,Yo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yo=e).memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},null===$o?Qo.memoizedState=$o=e:$o=$o.next=e}return $o}function rs(e,t){return"function"===typeof t?t(e):t}function is(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=o=null,u=i;do{var c=u.expirationTime;if(c<Go){var h={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,o=r):l=l.next=h,c>Qo.expirationTime&&(Qo.expirationTime=c,Tl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),xl(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=a,qr(r,t.memoizedState)||(Ms=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function os(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);qr(o,t.memoizedState)||(Ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ss(e){var t=ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=_s.bind(null,Qo,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ls(){return ns().memoizedState}function us(e,t,n,r){var i=ts();Qo.effectTag|=e,i.memoizedState=as(1|t,n,void 0,void 0===r?null:r)}function cs(e,t,n,r){var i=ns();r=void 0===r?null:r;var o=void 0;if(null!==Yo){var s=Yo.memoizedState;if(o=s.destroy,null!==r&&Zo(r,s.deps))return void as(t,n,o,r)}Qo.effectTag|=e,i.memoizedState=as(1|t,n,o,r)}function hs(e,t){return us(516,4,e,t)}function ds(e,t){return cs(516,4,e,t)}function fs(e,t){return cs(4,2,e,t)}function ps(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ms(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,cs(4,2,ps.bind(null,t,e),n)}function gs(){}function ys(e,t){return ts().memoizedState=[e,void 0===t?null:t],e}function vs(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ws(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bs(e,t,n){var r=Wi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Wo.suspense;Wo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Wo.suspense=r}}))}function _s(e,t,n){var r=ul(),i=wo.suspense;i={expirationTime:r=cl(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Qo||null!==o&&o===Qo)Xo=!0,i.expirationTime=Go,Qo.expirationTime=Go;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,qr(a,s))return}catch(l){}hl(e,r)}}var xs={readContext:uo,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useResponder:Jo,useDeferredValue:Jo,useTransition:Jo},Ts={readContext:uo,useCallback:ys,useContext:uo,useEffect:hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,us(4,2,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_s.bind(null,Qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ts().memoizedState=e},useState:ss,useDebugValue:gs,useResponder:Ko,useDeferredValue:function(e,t){var n=ss(e),r=n[0],i=n[1];return hs((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ss(!1),n=t[0];return t=t[1],[ys(bs.bind(null,t,e),[t,e]),n]}},Es={readContext:uo,useCallback:vs,useContext:uo,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:ws,useReducer:is,useRef:ls,useState:function(){return is(rs)},useDebugValue:gs,useResponder:Ko,useDeferredValue:function(e,t){var n=is(rs),r=n[0],i=n[1];return ds((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=is(rs),n=t[0];return t=t[1],[vs(bs.bind(null,t,e),[t,e]),n]}},Ss={readContext:uo,useCallback:vs,useContext:uo,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:ws,useReducer:os,useRef:ls,useState:function(){return os(rs)},useDebugValue:gs,useResponder:Ko,useDeferredValue:function(e,t){var n=os(rs),r=n[0],i=n[1];return ds((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=os(rs),n=t[0];return t=t[1],[vs(bs.bind(null,t,e),[t,e]),n]}},Is=null,ks=null,Cs=!1;function As(e,t){var n=Bl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ds(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ns(e){if(Cs){var t=ks;if(t){var n=t;if(!Ds(e,t)){if(!(t=kn(n.nextSibling))||!Ds(e,t))return e.effectTag=-1025&e.effectTag|2,Cs=!1,void(Is=e);As(Is,n)}Is=e,ks=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Cs=!1,Is=e}}function Ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Is=e}function Os(e){if(e!==Is)return!1;if(!Cs)return Ps(e),Cs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!En(t,e.memoizedProps))for(t=ks;t;)As(e,t),t=kn(t.nextSibling);if(Ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn){if(0===t){ks=kn(e.nextSibling);break e}t--}else n!==yn&&n!==bn&&n!==wn||t++}e=e.nextSibling}ks=null}}else ks=Is?kn(e.stateNode.nextSibling):null;return!0}function Rs(){ks=Is=null,Cs=!1}var Ls=$.ReactCurrentOwner,Ms=!1;function js(e,t,n,r){t.child=null===e?Po(t,null,n,r):No(t,e.child,n,r)}function Fs(e,t,n,r,i){n=n.render;var o=t.ref;return lo(t,i),r=es(e,t,n,r,o,i),null===e||Ms?(t.effectTag|=1,js(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Vs(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||zl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Us(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Hr)(i,r)&&e.ref===t.ref)?ta(e,t,o):(t.effectTag|=1,(e=ql(s,r)).ref=t.ref,e.return=t,t.child=e)}function Us(e,t,n,r,i,o){return null!==e&&Hr(e.memoizedProps,r)&&e.ref===t.ref&&(Ms=!1,i<o)?(t.expirationTime=e.expirationTime,ta(e,t,o)):zs(e,t,n,r,o)}function Bs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function zs(e,t,n,r,i){var o=_i(n)?wi:yi.current;return o=bi(t,o),lo(t,i),n=es(e,t,n,r,o,i),null===e||Ms?(t.effectTag|=1,js(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function qs(e,t,n,r,i){if(_i(n)){var o=!0;Si(t)}else o=!1;if(lo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Eo(t,n,r),Io(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=uo(u):u=bi(t,u=_i(n)?wi:yi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&So(t,s,r,u),co=!1;var d=t.memoizedState;s.state=d,yo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||vi.current||co?("function"===typeof c&&(_o(t,n,c,r),l=t.memoizedState),(a=co||To(t,n,a,r,d,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,fo(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:eo(t.type,a),l=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=uo(u):u=bi(t,u=_i(n)?wi:yi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&So(t,s,r,u),co=!1,l=t.memoizedState,s.state=l,yo(t,r,s,i),d=t.memoizedState,a!==r||l!==d||vi.current||co?("function"===typeof c&&(_o(t,n,c,r),d=t.memoizedState),(c=co||To(t,n,a,r,l,d,u))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=u,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ks(e,t,n,r,o,i)}function Ks(e,t,n,r,i,o){Bs(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&Ii(t,n,!1),ta(e,t,o);r=t.stateNode,Ls.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=No(t,e.child,null,o),t.child=No(t,null,a,o)):js(e,t,a,o),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Hs(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Fo(e,t.containerInfo)}var Ws,Gs,Qs,Ys,$s={dehydrated:null,retryTime:0};function Xs(e,t,n){var r,i=t.mode,o=t.pendingProps,s=zo.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),mi(zo,1&s),null===e){if(void 0!==o.fallback&&Ns(t),a){if(a=o.fallback,(o=Hl(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Hl(a,i,n,null)).return=t,o.sibling=n,t.memoizedState=$s,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Po(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(n=ql(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=ql(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=$s,t.child=n,i}return n=No(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=o.fallback,(o=Hl(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Hl(a,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=$s,t.child=o,n}return t.memoizedState=null,t.child=No(t,e,o.children,n)}function Js(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ao(e.return,t)}function Zs(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(js(e,t,r.children,n),0!==(2&(r=zo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n);else if(19===e.tag)Js(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(zo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===qo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===qo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zs(t,!0,n,null,o,t.lastEffect);break;case"together":Zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Tl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&xi(),null;case 3:return Vo(),pi(vi),pi(yi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Os(t)||(t.effectTag|=4),Gs(t),null;case 5:Bo(t),n=jo(Mo.current);var o=t.type;if(null!==e&&null!=t.stateNode)Qs(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=jo(Ro.current),Os(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Dn]=t,r[Nn]=a,o){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Xe.length;e++)Qt(Xe[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Te(r,a),Qt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),un(n,"onChange");break;case"textarea":Ne(r,a),Qt("invalid",r),un(n,"onChange")}for(var l in sn(o,a),e=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):E.hasOwnProperty(l)&&null!=u&&un(n,l)}switch(o){case"input":be(r),Ie(r,a,!0);break;case"textarea":be(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Me(o)),e===ln?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Dn]=t,e[Nn]=r,Ws(e,t,!1,!1),t.stateNode=e,l=an(o,r),o){case"iframe":case"object":case"embed":Qt("load",e),u=r;break;case"video":case"audio":for(u=0;u<Xe.length;u++)Qt(Xe[u],e);u=r;break;case"source":Qt("error",e),u=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),u=r;break;case"form":Qt("reset",e),Qt("submit",e),u=r;break;case"details":Qt("toggle",e),u=r;break;case"input":Te(e,r),u=xe(e,r),Qt("invalid",e),un(n,"onChange");break;case"option":u=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Qt("invalid",e),un(n,"onChange");break;case"textarea":Ne(e,r),u=De(e,r),Qt("invalid",e),un(n,"onChange");break;default:u=r}sn(o,u);var c=u;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Ue(e,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&Be(e,h):"number"===typeof h&&Be(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(E.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&X(e,a,h,l))}switch(o){case"input":be(e),Ie(e,r,!1);break;case"textarea":be(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ae(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=cn)}Tn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ys(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=jo(Mo.current),jo(Ro.current),Os(t)?(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Dn]=t,t.stateNode=n)}return null;case 13:return pi(zo),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Os(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zo.current)?qa===Oa&&(qa=Ma):(qa!==Oa&&qa!==Ma||(qa=ja),0!==Qa&&null!==Ua&&($l(Ua,za),Xl(Ua,Qa)))),(n||r)&&(t.effectTag|=4),null);case 4:return Vo(),Gs(t),null;case 10:return so(t),null;case 19:if(pi(zo),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(a=r.rendering)){if(o)na(r,!1);else if(qa!==Oa||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=qo(a))){for(t.effectTag|=64,na(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi(zo,1&zo.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=qo(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Hi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Hi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Hi(),n.sibling=null,t=zo.current,mi(zo,o?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function ia(e){switch(e.tag){case 1:_i(e.type)&&xi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Vo(),pi(vi),pi(yi),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Bo(e),null;case 13:return pi(zo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(zo),null;case 4:return Vo(),null;case 10:return so(e),null;default:return null}}function oa(e,t){return{value:e,source:t,stack:ye(t)}}Ws=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Gs=function(){},Qs=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a,l,u=t.stateNode;switch(jo(Ro.current),e=null,n){case"input":s=xe(u,s),r=xe(u,r),e=[];break;case"option":s=Ce(u,s),r=Ce(u,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=De(u,s),r=De(u,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(u.onclick=cn)}for(a in sn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in u=s[a])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(E.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,c)):"children"===a?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(E.hasOwnProperty(a)?(null!=c&&un(o,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ys=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var sa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function la(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ll(e,n)}else t.current=null}function ua(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:eo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:eo(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&vo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Tn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&jt(n)))))}throw Error(s(163))}function fa(e,t,n){switch("function"===typeof Vl&&Vl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Ll(i,o)}}e=e.next}while(e!==r)}))}break;case 1:la(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ll(e,n)}}(t,n);break;case 5:la(t);break;case 4:wa(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Be(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?ya(e,n,t):va(e,n,t)}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function wa(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,h=u;;)if(fa(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(fa(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ca(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ee(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var a=o[i],l=o[i+1];"style"===a?rn(n,l):"dangerouslySetInnerHTML"===a?Ue(n,l):"children"===a?Be(n,l):X(n,a,l,t)}switch(e){case"input":Se(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ae(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ae(n,!!r.multiple,r.defaultValue,!0):Ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,jt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,$a=Hi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _a(t);case 19:return void _a(t)}throw Error(s(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new sa),t.forEach((function(t){var r=jl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var xa="function"===typeof WeakMap?WeakMap:Map;function Ta(e,t,n){(n=po(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,el=r),aa(e,t)},n}function Ea(e,t,n){(n=po(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tl?tl=new Set([this]):tl.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Sa,Ia=Math.ceil,ka=$.ReactCurrentDispatcher,Ca=$.ReactCurrentOwner,Aa=0,Da=8,Na=16,Pa=32,Oa=0,Ra=1,La=2,Ma=3,ja=4,Fa=5,Va=Aa,Ua=null,Ba=null,za=0,qa=Oa,Ka=null,Ha=1073741823,Wa=1073741823,Ga=null,Qa=0,Ya=!1,$a=0,Xa=500,Ja=null,Za=!1,el=null,tl=null,nl=!1,rl=null,il=90,ol=null,sl=0,al=null,ll=0;function ul(){return(Va&(Na|Pa))!==Aa?1073741821-(Hi()/10|0):0!==ll?ll:ll=1073741821-(Hi()/10|0)}function cl(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Wi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Va&Na)!==Aa)return za;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Ua&&e===za&&--e,e}function hl(e,t){if(50<sl)throw sl=0,al=null,Error(s(185));if(null!==(e=dl(e,t))){var n=Wi();1073741823===t?(Va&Da)!==Aa&&(Va&(Na|Pa))===Aa?gl(e):(pl(e),Va===Aa&&Xi()):pl(e),(4&Va)===Aa||98!==n&&99!==n||(null===ol?ol=new Map([[e,t]]):(void 0===(n=ol.get(e))||n>t)&&ol.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ua===i&&(Tl(t),qa===ja&&$l(i,za)),Xl(i,t)),i}function fl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=$i(gl.bind(null,e));else{var t=fl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ul();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Fi&&Ai(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?$i(gl.bind(null,e)):Yi(r,ml.bind(null,e),{timeout:10*(1073741821-t)-Hi()}),e.callbackNode=t}}}function ml(e,t){if(ll=0,t)return Jl(e,t=ul()),pl(e),null;var n=fl(e);if(0!==n){if(t=e.callbackNode,(Va&(Na|Pa))!==Aa)throw Error(s(327));if(Pl(),e===Ua&&n===za||wl(e,n),null!==Ba){var r=Va;Va|=Na;for(var i=_l();;)try{Sl();break}catch(l){bl(e,l)}if(oo(),Va=r,ka.current=i,qa===Ra)throw t=Ka,wl(e,n),$l(e,n),pl(e),t;if(null===Ba)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qa,Ua=null,r){case Oa:case Ra:throw Error(s(345));case La:Jl(e,2<n?2:n);break;case Ma:if($l(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),1073741823===Ha&&10<(i=$a+Xa-Hi())){if(Ya){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,wl(e,n);break}}if(0!==(o=fl(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Sn(Al.bind(null,e),i);break}Al(e);break;case ja:if($l(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),Ya&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,wl(e,n);break}if(0!==(i=fl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Wa?r=10*(1073741821-Wa)-Hi():1073741823===Ha?r=0:(r=10*(1073741821-Ha)-5e3,0>(r=(i=Hi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ia(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Sn(Al.bind(null,e),r);break}Al(e);break;case Fa:if(1073741823!==Ha&&null!==Ga){o=Ha;var a=Ga;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Hi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){$l(e,n),e.timeoutHandle=Sn(Al.bind(null,e),r);break}}Al(e);break;default:throw Error(s(329))}if(pl(e),e.callbackNode===t)return ml.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Va&(Na|Pa))!==Aa)throw Error(s(327));if(Pl(),e===Ua&&t===za||wl(e,t),null!==Ba){var n=Va;Va|=Na;for(var r=_l();;)try{El();break}catch(i){bl(e,i)}if(oo(),Va=n,ka.current=r,qa===Ra)throw n=Ka,wl(e,t),$l(e,t),pl(e),n;if(null!==Ba)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ua=null,Al(e),pl(e)}return null}function yl(e,t){var n=Va;Va|=1;try{return e(t)}finally{(Va=n)===Aa&&Xi()}}function vl(e,t){var n=Va;Va&=-2,Va|=Da;try{return e(t)}finally{(Va=n)===Aa&&Xi()}}function wl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,In(n)),null!==Ba)for(n=Ba.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&xi();break;case 3:Vo(),pi(vi),pi(yi);break;case 5:Bo(r);break;case 4:Vo();break;case 13:case 19:pi(zo);break;case 10:so(r)}n=n.return}Ua=e,Ba=ql(e.current,null),za=t,qa=Oa,Ka=null,Wa=Ha=1073741823,Ga=null,Qa=0,Ya=!1}function bl(e,t){for(;;){try{if(oo(),Ho.current=xs,Xo)for(var n=Qo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Go=0,$o=Yo=Qo=null,Xo=!1,null===Ba||null===Ba.return)return qa=Ra,Ka=t,Ba=null;e:{var i=e,o=Ba.return,s=Ba,a=t;if(t=za,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.expirationTime=u.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var c=0!==(1&zo.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=po(1073741823,null);y.tag=2,mo(s,y)}s.expirationTime=1073741823;break e}a=void 0,s=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new xa,a=new Set,v.set(l,a)):void 0===(a=v.get(l))&&(a=new Set,v.set(l,a)),!a.has(s)){a.add(s);var w=Ml.bind(null,i,l,s);l.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(s))}qa!==Fa&&(qa=La),a=oa(a,s),h=o;do{switch(h.tag){case 3:l=a,h.effectTag|=4096,h.expirationTime=t,go(h,Ta(h,l,t));break e;case 1:l=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===tl||!tl.has(_)))){h.effectTag|=4096,h.expirationTime=t,go(h,Ea(h,l,t));break e}}h=h.return}while(null!==h)}Ba=kl(Ba)}catch(x){t=x;continue}break}}function _l(){var e=ka.current;return ka.current=xs,null===e?xs:e}function xl(e,t){e<Ha&&2<e&&(Ha=e),null!==t&&e<Wa&&2<e&&(Wa=e,Ga=t)}function Tl(e){e>Qa&&(Qa=e)}function El(){for(;null!==Ba;)Ba=Il(Ba)}function Sl(){for(;null!==Ba&&!Vi();)Ba=Il(Ba)}function Il(e){var t=Sa(e.alternate,e,za);return e.memoizedProps=e.pendingProps,null===t&&(t=kl(e)),Ca.current=null,t}function kl(e){Ba=e;do{var t=Ba.alternate;if(e=Ba.return,0===(2048&Ba.effectTag)){if(t=ra(t,Ba,za),1===za||1!==Ba.childExpirationTime){for(var n=0,r=Ba.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ba.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ba.firstEffect),null!==Ba.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ba.firstEffect),e.lastEffect=Ba.lastEffect),1<Ba.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ba:e.firstEffect=Ba,e.lastEffect=Ba))}else{if(null!==(t=ia(Ba)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ba.sibling))return t;Ba=e}while(null!==Ba);return qa===Oa&&(qa=Fa),null}function Cl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Al(e){var t=Wi();return Qi(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{Pl()}while(null!==rl);if((Va&(Na|Pa))!==Aa)throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Cl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ua&&(Ba=Ua=null,za=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Va;Va|=Pa,Ca.current=null,_n=Gt;var a=mn();if(gn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(I){l=null;break e}var d=0,f=-1,p=-1,m=0,g=0,y=a,v=null;t:for(;;){for(var w;y!==l||0!==c&&3!==y.nodeType||(f=d+c),y!==h||0!==u&&3!==y.nodeType||(p=d+u),3===y.nodeType&&(d+=y.nodeValue.length),null!==(w=y.firstChild);)v=y,y=w;for(;;){if(y===a)break t;if(v===l&&++m===c&&(f=d),v===h&&++g===u&&(p=d),null!==(w=y.nextSibling))break;v=(y=v).parentNode}y=w}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;xn={activeElementDetached:null,focusedElem:a,selectionRange:l},Gt=!1,Ja=i;do{try{Nl()}catch(I){if(null===Ja)throw Error(s(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=i;do{try{for(a=e,l=t;null!==Ja;){var b=Ja.effectTag;if(16&b&&Be(Ja.stateNode,""),128&b){var _=Ja.alternate;if(null!==_){var x=_.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:ga(Ja),Ja.effectTag&=-3;break;case 6:ga(Ja),Ja.effectTag&=-3,ba(Ja.alternate,Ja);break;case 1024:Ja.effectTag&=-1025;break;case 1028:Ja.effectTag&=-1025,ba(Ja.alternate,Ja);break;case 4:ba(Ja.alternate,Ja);break;case 8:wa(a,c=Ja,l),pa(c)}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(s(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);if(x=xn,_=mn(),b=x.focusedElem,l=x.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==l&&gn(b)&&(_=l.start,void 0===(x=l.end)&&(x=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(x,b.value.length)):(x=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(x=x.getSelection(),c=b.textContent.length,a=Math.min(l.start,c),l=void 0===l.end?a:Math.min(l.end,c),!x.extend&&a>l&&(c=l,l=a,a=c),c=fn(b,a),h=fn(b,l),c&&h&&(1!==x.rangeCount||x.anchorNode!==c.node||x.anchorOffset!==c.offset||x.focusNode!==h.node||x.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),x.removeAllRanges(),a>l?(x.addRange(_),x.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),x.addRange(_))))),_=[];for(x=b;x=x.parentNode;)1===x.nodeType&&_.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(x=_[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Gt=!!_n,xn=_n=null,e.current=n,Ja=i;do{try{for(b=e;null!==Ja;){var T=Ja.effectTag;if(36&T&&da(b,Ja.alternate,Ja),128&T){_=void 0;var E=Ja.ref;if(null!==E){var S=Ja.stateNode;Ja.tag,_=S,"function"===typeof E?E(_):E.current=_}}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(s(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=null,Ui(),Va=o}else e.current=n;if(nl)nl=!1,rl=e,il=t;else for(Ja=i;null!==Ja;)t=Ja.nextEffect,Ja.nextEffect=null,Ja=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===al?sl++:(sl=0,al=e):sl=0,"function"===typeof Fl&&Fl(n.stateNode,r),pl(e),Za)throw Za=!1,e=el,el=null,e;return(Va&Da)!==Aa||Xi(),null}function Nl(){for(;null!==Ja;){var e=Ja.effectTag;0!==(256&e)&&ua(Ja.alternate,Ja),0===(512&e)||nl||(nl=!0,Yi(97,(function(){return Pl(),null}))),Ja=Ja.nextEffect}}function Pl(){if(90!==il){var e=97<il?97:il;return il=90,Qi(e,Ol)}}function Ol(){if(null===rl)return!1;var e=rl;if(rl=null,(Va&(Na|Pa))!==Aa)throw Error(s(331));var t=Va;for(Va|=Pa,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ca(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(s(330));Ll(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Va=t,Xi(),!0}function Rl(e,t,n){mo(e,t=Ta(e,t=oa(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Ll(e,t){if(3===e.tag)Rl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tl||!tl.has(r))){mo(n,e=Ea(n,e=oa(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ua===e&&za===n?qa===ja||qa===Ma&&1073741823===Ha&&Hi()-$a<Xa?wl(e,za):Ya=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function jl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cl(t=ul(),e,null)),null!==(e=dl(e,t))&&pl(e)}Sa=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||vi.current)Ms=!0;else{if(r<n){switch(Ms=!1,t.tag){case 3:Hs(t),Rs();break;case 5:if(Uo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&Si(t);break;case 4:Fo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(to,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Xs(e,t,n):(mi(zo,1&zo.current),null!==(t=ta(e,t,n))?t.sibling:null);mi(zo,1&zo.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(zo,zo.current),!r)return null}return ta(e,t,n)}Ms=!1}}else Ms=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),lo(t,n),i=es(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var o=!0;Si(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ho(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&_o(t,r,a,e),i.updater=xo,t.stateNode=i,i._reactInternalFiber=t,Io(t,r,e,n),t=Ks(null,t,r,!0,o,n)}else t.tag=0,js(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return zl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=eo(i,e),o){case 0:t=zs(null,t,i,e,n);break e;case 1:t=qs(null,t,i,e,n);break e;case 11:t=Fs(null,t,i,e,n);break e;case 14:t=Vs(null,t,i,eo(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,qs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:if(Hs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,fo(e,t),yo(t,r,null,n),(r=t.memoizedState.element)===i)Rs(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(ks=kn(t.stateNode.containerInfo.firstChild),Is=t,i=Cs=!0),i)for(n=Po(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else js(e,t,r,n),Rs();t=t.child}return t;case 5:return Uo(t),null===e&&Ns(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,En(r,i)?a=null:null!==o&&En(r,o)&&(t.effectTag|=16),Bs(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(js(e,t,a,n),t=t.child),t;case 6:return null===e&&Ns(t),null;case 13:return Xs(e,t,n);case 4:return Fo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):js(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return js(e,t,t.pendingProps,n),t.child;case 8:case 12:return js(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var l=t.type._context;if(mi(to,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=qr(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===i.children&&!vi.current){t=ta(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===l.tag&&((c=po(n,null)).tag=2,mo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),ao(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}js(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,lo(t,n),r=r(i=uo(i,o.unstable_observedBits)),t.effectTag|=1,js(e,t,r,n),t.child;case 14:return o=eo(i=t.type,t.pendingProps),Vs(e,t,i,o=eo(i.type,o),r,n);case 15:return Us(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,Si(t)):e=!1,lo(t,n),Eo(t,r,i),Io(t,r,i,n),Ks(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(s(156,t.tag))};var Fl=null,Vl=null;function Ul(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Bl(e,t,n,r){return new Ul(e,t,n,r)}function zl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=Bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kl(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)zl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Hl(n.children,i,o,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=Bl(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ue:return(e=Bl(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=o,e;case ce:return(e=Bl(19,n,t,i)).elementType=ce,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case le:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Bl(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Hl(e,t,n,r){return(e=Bl(7,e,r,t)).expirationTime=n,e}function Wl(e,t,n){return(e=Bl(6,e,null,t)).expirationTime=n,e}function Gl(e,t,n){return(t=Bl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function $l(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Xl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Jl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zl(e,t,n,r){var i=t.current,o=ul(),a=wo.suspense;o=cl(o,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=Ei(n,u,l);break e}}n=l}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mo(i,t),hl(i,o),o}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function ru(e,t,n){var r=new Ql(e,t,n=null!=n&&!0===n.hydrate),i=Bl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ho(i),e[Pn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);kt.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=eu(s);a.call(e)}}Zl(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var l=i;i=function(){var e=eu(s);l.call(e)}}vl((function(){Zl(t,s,e,i)}))}return eu(s)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ru.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Pn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(ul(),150,100);hl(e,t),nu(e,t)}},yt=function(e){13===e.tag&&(hl(e,3),nu(e,3))},vt=function(e){if(13===e.tag){var t=ul();hl(e,t=cl(t,e,null)),nu(e,t)}},C=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(s(90));_e(r),Se(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ae(e,!!n.multiple,t,!1)}},R=yl,L=function(e,t,n,r,i){var o=Va;Va|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(Va=o)===Aa&&Xi()}},M=function(){(Va&(1|Na|Pa))===Aa&&(function(){if(null!==ol){var e=ol;ol=null,e.forEach((function(e,t){Jl(t,e),pl(t)})),Xi()}}(),Pl())},j=function(e,t){var n=Va;Va|=2;try{return e(t)}finally{(Va=n)===Aa&&Xi()}};var au={Events:[Rn,Ln,Mn,I,T,qn,function(e){ot(e,zn)},P,O,Jt,lt,Pl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Fl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Vl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:On,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Va&(Na|Pa))!==Aa)throw Error(s(187));var n=Va;Va|=1;try{return Qi(99,e.bind(null,t))}finally{Va=n,Xi()}},t.hydrate=function(e,t,n){if(!iu(t))throw Error(s(200));return ou(null,e,t,!0,n)},t.render=function(e,t,n){if(!iu(t))throw Error(s(200));return ou(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(s(40));return!!e._reactRootContainer&&(vl((function(){ou(null,null,e,!1,(function(){e._reactRootContainer=null,e[Pn]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return ou(e,t,n,!1,r)},t.version="16.14.0"},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.jsx=u,t.jsxs=u},117:(e,t,n)=>{"use strict";var r=n(725),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}function _(){}function x(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var T=x.prototype=new _;T.constructor=x,r(T,b.prototype),T.isPureReactComponent=!0;var E={current:null},S=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,D=[];function N(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+L(i=e[l],l);a+=O(i,u,n,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)a+=O(i=i.value,u=t+L(i,l++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function R(e,t,n){return null==e?0:O(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),R(e,j,t=N(t,o,r,i)),P(t)}var V={current:null};function U(){var e=V.current;if(null===e)throw Error(y(321));return e}var B={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,M,t=N(null,null,t,n)),P(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(y(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=u,t.PureComponent=x,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)S.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";var n,r,i,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,l=null,u=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(u,0),n}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var y=!1,v=null,w=-1,b=5,_=0;o=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,T=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();_=e+b;try{v(!0,e)?T.postMessage(null):(y=!1,v=null)}catch(n){throw T.postMessage(null),n}}else y=!1},n=function(e){v=e,y||(y=!0,T.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,l=e[a];if(void 0!==s&&0>k(s,n))void 0!==l&&0>k(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],A=[],D=1,N=null,P=3,O=!1,R=!1,L=!1;function M(e){for(var t=S(A);null!==t;){if(null===t.callback)I(A);else{if(!(t.startTime<=e))break;I(A),t.sortIndex=t.expirationTime,E(C,t)}t=S(A)}}function j(e){if(L=!1,M(e),!R)if(null!==S(C))R=!0,n(F);else{var t=S(A);null!==t&&r(j,t.startTime-e)}}function F(e,n){R=!1,L&&(L=!1,i()),O=!0;var s=P;try{for(M(n),N=S(C);null!==N&&(!(N.expirationTime>n)||e&&!o());){var a=N.callback;if(null!==a){N.callback=null,P=N.priorityLevel;var l=a(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?N.callback=l:N===S(C)&&I(C),M(n)}else I(C);N=S(C)}if(null!==N)var u=!0;else{var c=S(A);null!==c&&r(j,c.startTime-n),u=!1}return u}finally{N=null,P=s,O=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||O||(R=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var l=s.delay;l="number"===typeof l&&0<l?a+l:a,s="number"===typeof s.timeout?s.timeout:V(e)}else s=V(e),l=a;return e={id:D++,callback:o,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(e.sortIndex=l,E(A,e),null===S(C)&&e===S(A)&&(L?i():L=!0,r(j,l-a))):(e.sortIndex=s,E(C,e),R||O||(R=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=S(C);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},391:e=>{"use strict";var t=function(){};e.exports=t},91:e=>{"use strict";e.exports=JSON.parse('{"fixation":{"randomize_duration":true},"honeycomb":{"randomize_order":true,"repetitions":5,"timeline_variables":[{"stimulus":"assets/blue.png","correct_response":"f"},{"stimulus":"assets/orange.png","correct_response":"j"}]}}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>$e,SDK_VERSION:()=>$t,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>zt,_addOrOverwriteComponent:()=>qt,_apps:()=>Ut,_clearComponents:()=>Gt,_components:()=>Bt,_getProvider:()=>Ht,_registerComponent:()=>Kt,_removeServiceInstance:()=>Wt,deleteApp:()=>en,getApp:()=>Jt,getApps:()=>Zt,initializeApp:()=>Xt,onLog:()=>nn,registerVersion:()=>tn,setLogLevel:()=>rn});var t=n(791),r=n(164),i=n(763),o=n.n(i);function s(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;var a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u=l((function(e){let{include:t,exclude:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e=>{const r=t=>"string"===typeof t?e===t:t.test(e);return t?t.some(r):!n||!n.some(r)};for(const[i,o]of(e=>{const t=new Set;do{for(const n of Reflect.ownKeys(e))t.add([e,n])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t})(e.constructor.prototype)){if("constructor"===o||!r(o))continue;const t=Reflect.getOwnPropertyDescriptor(i,o);t&&"function"===typeof t.value&&(e[o]=e[o].bind(e))}return e}));class c extends Error{constructor(){super("".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The global `jsPsych` variable is no longer available in jsPsych v7."," Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.")),this.name="MigrationError"}}function h(e){return[...new Set(e)]}function d(e){if(!e)return e;let t;if(Array.isArray(e)){t=[];for(const n of e)t.push(d(n));return t}if("object"===typeof e&&null!==e){t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=d(e[n]));return t}return e}window.jsPsych={get init(){throw new c("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new c},get randomization(){throw new c},get turk(){throw new c},get pluginAPI(){throw new c},get ALL_KEYS(){throw new c('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new c('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};var f,p=Object.freeze({__proto__:null,deepCopy:d,deepMerge:function e(t,n){let r={};for(const i in t)t.hasOwnProperty(i)&&("object"===typeof t[i]&&n.hasOwnProperty(i)?r[i]=e(t[i],n[i]):r[i]=t[i]);for(const i in n)n.hasOwnProperty(i)&&(r.hasOwnProperty(i)&&"object"===typeof n[i]?r[i]=e(r[i],n[i]):r[i]=n[i]);return r},unique:h});class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){return this.sum()/this.count()}median(){if(0===this.values.length)return;const e=this.values.slice(0).sort((function(e,t){return e-t})),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const n of this.values)t+=Math.pow(n-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)"undefined"===typeof e[t]?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const n of this.values)e(n)&&t.push(n);return new m(t)}}class g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new g([this.trials[this.trials.length-1]])}first(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new g:(e>this.trials.length&&(e=this.trials.length),new g(this.trials.slice(0,e)))}last(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new g:(e>this.trials.length&&(e=this.trials.length),new g(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new g(d(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return 0!=this.trials.length&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;t=Array.isArray(e)?d(e):d([e]);const n=[];for(const r of this.trials){let e=!1;for(const n of t){let t=!0;for(const e of Object.keys(n))"undefined"!==typeof r[e]&&r[e]===n[e]||(t=!1);if(t){e=!0;break}}e&&n.push(r)}return new g(n)}filterCustom(e){return new g(this.trials.filter(e))}filterColumns(e){return new g(this.trials.map((t=>Object.fromEntries(e.filter((e=>e in t)).map((e=>[e,t[e]]))))))}select(e){const t=[];for(const n of this.trials)"undefined"!==typeof n[e]&&t.push(n[e]);return new m(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=d(this.trials);for(const n of t)for(const t of e)delete n[t];return new g(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const n of Object.keys(t))e.includes(n)||e.push(n);return e}csv(){return function(e){const t="object"!=typeof e?JSON.parse(e):e;let n="",r="";const i=[];for(const o of t)for(const e in o){let t=e+"";t='"'+t.replace(/"/g,'""')+'",',i.includes(e)||(i.push(e),n+=t)}n=n.slice(0,-1),r+=n+"\r\n";for(const o of t){n="";for(const e of i){let t="undefined"===typeof o[e]?"":o[e];"object"==typeof t&&(t=JSON.stringify(t)),n+='"'+(t+"").replace(/"/g,'""')+'",'}n=n.slice(0,-1),r+=n+"\r\n"}return r}(this.trials)}json(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?JSON.stringify(this.trials,null,"\t"):JSON.stringify(this.trials)}localSave(e,t){let n;if("json"===(e=e.toLowerCase()))n=this.json();else{if("csv"!==e)throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');n=this.csv()}!function(e,t){const n=new Blob([e],{type:"text/plain"});let r="";r="undefined"!==typeof window.webkitURL?window.webkitURL.createObjectURL(n):window.URL.createObjectURL(n);const i=document.createElement("a");i.id="jspsych-download-as-text-link",i.style.display="none",i.download=t,i.href=r,i.click()}(n,t)}}class y{constructor(e){this.jsPsych=e,this.dataProperties={},this.reset()}reset(){this.allData=new g,this.interactionData=new g}get(){return this.allData}getInteractionData(){return this.interactionData}write(e){const t=this.jsPsych.getProgress(),n=this.jsPsych.getCurrentTrial(),r={trial_type:n.type.info.name,trial_index:t.current_trial_global,time_elapsed:this.jsPsych.getTotalTime(),internal_node_id:this.jsPsych.getCurrentTimelineNodeID()};this.allData.push(Object.assign(Object.assign(Object.assign(Object.assign({},e),n.data),r),this.dataProperties))}addProperties(e){this.allData.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.allData.addToLast(e)}getDataByTimelineNode(e){return this.allData.filterCustom((t=>t.internal_node_id.slice(0,e.length)===e))}getLastTrialData(){return this.allData.top()}getLastTimelineData(){const e=this.getLastTrialData().select("internal_node_id").values[0];if("undefined"===typeof e)return new g;{const t=e.substr(0,e.lastIndexOf("-"));return this.getDataByTimelineNode(t)}}displayData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";e=e.toLowerCase(),"json"!=e&&"csv"!=e&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json");const t="json"===e?this.allData.json(!0):this.allData.csv();this.jsPsych.getDisplayElement().innerHTML='<pre id="jspsych-data-display"></pre>',document.getElementById("jspsych-data-display").textContent=t}urlVariables(){return"undefined"==typeof this.query_string&&(this.query_string=function(){const e=window.location.search.substr(1).split("&"),t={};for(let n=0;n<e.length;++n){const r=e[n].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}createInteractionListeners(){window.addEventListener("blur",(()=>{const e={event:"blur",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)})),window.addEventListener("focus",(()=>{const e={event:"focus",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)}));const e=()=>{const e={event:document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)};document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e)}_customInsert(e){this.allData=new g(e)}_fullreset(){this.reset(),this.dataProperties={}}}class v{constructor(){this.hardwareConnected=!1,document.addEventListener("jspsych-activate",(e=>{this.hardwareConnected=!0}))}hardware(e){const t=new CustomEvent("jspsych",{detail:e});document.dispatchEvent(t)}}class w{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=n,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,u(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of Array.from(this.listeners))t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,n){return!(!t&&this.heldKeys.has(n))&&("ALL_KEYS"===e||"NO_KEYS"!==e&&e.includes(n))}getKeyboardResponse(e){let{callback_function:t,valid_responses:n="ALL_KEYS",rt_method:r="performance",persist:i,audio_context:o,audio_context_start_time:s,allow_held_key:a=!1,minimum_valid_rt:l=this.minimumValidRt}=e;"performance"!==r&&"audio"!==r&&(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),r="performance");const u="performance"===r?performance.now():1e3*s;this.registerRootListeners(),this.areResponsesCaseSensitive||"string"===typeof n||(n=n.map((e=>e.toLowerCase())));const c=e=>{const s=Math.round(("performance"==r?performance.now():1e3*o.currentTime)-u);if(s<l)return;const h=this.toLowerCaseIfInsensitive(e.key);this.isResponseValid(n,a,h)&&(e.preventDefault(),i||this.cancelKeyboardResponse(c),t({key:h,rt:s}))};return this.listeners.add(c),c}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(!("string"!==typeof e&&null!==e||"string"!==typeof t&&null!==t))return"string"===typeof e&&"string"===typeof t?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():null===e&&null===t;console.error("Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.")}}!function(e){e[e.BOOL=0]="BOOL",e[e.STRING=1]="STRING",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.FUNCTION=4]="FUNCTION",e[e.KEY=5]="KEY",e[e.KEYS=6]="KEYS",e[e.SELECT=7]="SELECT",e[e.HTML_STRING=8]="HTML_STRING",e[e.IMAGE=9]="IMAGE",e[e.AUDIO=10]="AUDIO",e[e.VIDEO=11]="VIDEO",e[e.OBJECT=12]="OBJECT",e[e.COMPLEX=13]="COMPLEX",e[e.TIMELINE=14]="TIMELINE"}(f||(f={}));const b={data:{type:f.OBJECT,pretty_name:"Data",default:{}},on_start:{type:f.FUNCTION,pretty_name:"On start",default:function(){}},on_finish:{type:f.FUNCTION,pretty_name:"On finish",default:function(){}},on_load:{type:f.FUNCTION,pretty_name:"On load",default:function(){}},post_trial_gap:{type:f.INT,pretty_name:"Post trial gap",default:null},css_classes:{type:f.STRING,pretty_name:"Custom CSS classes",default:null},simulation_options:{type:f.COMPLEX,default:null}},x=[f.AUDIO,f.IMAGE,f.VIDEO];class T{constructor(e,t){this.useWebaudio=e,this.webaudioContext=t,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}initAudio(){this.context=this.useWebaudio?this.webaudioContext:null}audioContext(){return null!==this.context&&"running"!==this.context.state&&this.context.resume(),this.context}getAudioBuffer(e){return new Promise(((t,n)=>{"undefined"==typeof this.audio_buffers[e]||"tmp"==this.audio_buffers[e]?this.preloadAudio([e],(()=>{t(this.audio_buffers[e])}),(()=>{}),(e=>{n(e.error)})):t(this.audio_buffers[e])}))}preloadAudio(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=h(e.flat());let o=0;if(0==e.length)return void n();const s=function(s){const a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType="arraybuffer",a.onload=()=>{t.context.decodeAudioData(a.response,(i=>{t.audio_buffers[s]=i,o++,r(s),o==e.length&&n()}),(e=>{i({source:s,error:e})}))},a.onerror=e=>{let t=e;404==a.status&&(t="404"),i({source:s,error:t})},a.onloadend=e=>{404==a.status&&i({source:s,error:"404"})},a.send(),t.preload_requests.push(a)},a=function(s){const a=new Audio,l=()=>{t.audio_buffers[s]=a,o++,r(s),o==e.length&&n(),a.removeEventListener("canplaythrough",l)};a.addEventListener("canplaythrough",l),a.addEventListener("error",(function e(t){i({source:a.src,error:t}),a.removeEventListener("error",e)})),a.addEventListener("abort",(function e(t){i({source:a.src,error:t}),a.removeEventListener("abort",e)})),a.src=s,t.preload_requests.push(a)};for(const l of e)"undefined"!==typeof this.audio_buffers[l]?(o++,r(l),o==e.length&&n()):(this.audio_buffers[l]="tmp",null!==this.audioContext()?s(l):a(l))}preloadImages(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=h(e.flat());var i=0;if(0!==e.length)for(let o=0;o<e.length;o++){const s=new Image,a=e[o];s.onload=()=>{i++,n(a),i===e.length&&t()},s.onerror=e=>{r({source:a,error:e})},s.src=a,this.img_cache[a]=s,this.preload_requests.push(s)}else t()}preloadVideo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=h(e.flat());let i=0;if(0!==e.length)for(const o of e){const s=this.video_buffers,a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="blob",a.onload=()=>{if(200===a.status||0===a.status){const r=a.response;s[o]=URL.createObjectURL(r),i++,n(o),i===e.length&&t()}},a.onerror=e=>{let t=e;404==a.status&&(t="404"),r({source:o,error:t})},a.onloadend=e=>{404==a.status&&r({source:o,error:"404"})},a.send(),this.preload_requests.push(a)}else t()}getAutoPreloadList(e){const t=Object.fromEntries(x.map((e=>[e,new Set]))),n=(e,r)=>{var i,o,s,a;if("undefined"!==typeof e.timeline)for(const t of e.timeline)n(t,null!==(i=e.type)&&void 0!==i?i:r);else if(null===(s=null!==(o=e.type)&&void 0!==o?o:r)||void 0===s?void 0:s.info){const{name:n,parameters:i}=(null!==(a=e.type)&&void 0!==a?a:r).info;this.preloadMap.has(n)||this.preloadMap.set(n,Object.fromEntries(Object.entries(i).filter((e=>{let[t,{type:n,preload:r}]=e;return x.includes(n)&&(null===r||void 0===r||r)})).map((e=>{let[t,{type:n}]=e;return[t,n]}))));for(const[r,o]of Object.entries(this.preloadMap.get(n))){const n=e[r],i=t[o];if("string"===typeof n)i.add(n);else if(Array.isArray(n))for(const e of n.flat())"string"===typeof e&&i.add(e)}}};return n({timeline:e}),{images:[...t[f.IMAGE]],audio:[...t[f.AUDIO]],video:[...t[f.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const n=new MediaRecorder(e,t);this.camera_recorder=n}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class E{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?this.setJsPsychTimeout((()=>{this.keyDown(e),this.keyUp(e)}),t):(this.keyDown(e),this.keyUp(e))}clickTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?this.setJsPsychTimeout((()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}),t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n>0?this.setJsPsychTimeout((()=>{e.value=t}),n):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let n;if("NO_KEYS"==e)n=null;else if("ALL_KEYS"==e)n=t[Math.floor(Math.random()*t.length)];else{const t=e.flat();n=t[Math.floor(Math.random()*t.length)]}return n}mergeSimulationData(e,t){return Object.assign(Object.assign({},e),null===t||void 0===t?void 0:t.data)}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&"NO_KEYS"==e.choices&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const n=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<n&&(t.rt=null,t.response=null)}}}class S{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const n=window.setTimeout(e,t);return this.timeout_handlers.push(n),n}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}var I={exports:{}};(function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.alea=o})(0,I,!1);var k=I.exports,C=l(k),A={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xor128=o}(0,e,!1)}(A);var D=A.exports,N={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xorwow=o}(0,e,!1)}(N);var P=N.exports,O={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(o.x&&i(o,n),s.state=function(){return i(n,{})}),s}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xorshift7=o}(0,e,!1)}(O);var R=O.exports,L={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,s,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=a[127&o]^=r+s)?i+1:0);for(i>=128&&(a[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;e.w=s,e.X=a,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(o.X&&i(o,n),s.state=function(){return i(n,{})}),s}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xor4096=o}(0,e,!1)}(L);var M=L.exports,j={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.tychei=o}(0,e,!1)}(j);var F=j.exports,V={exports:{}};!function(e){!function(t,n,r){var i,o=256,s="random",a=r.pow(o,6),l=r.pow(2,52),u=2*l,c=o-1;function h(e,c,h){var y=[],v=m(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,g(n)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(e)),g(e)}catch(a){var r=t.navigator,s=r&&r.plugins;return[+new Date,t,s,t.screen,g(n)]}}():e,3),y),w=new d(y),b=function(){for(var e=w.g(6),t=a,n=0;e<l;)e=(e+n)*o,t*=o,n=w.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|w.g(4)},b.quick=function(){return w.g(4)/4294967296},b.double=b,m(g(w.S),n),(c.pass||h||function(e,t,n,i){return i&&(i.S&&f(i,w),e.state=function(){return f(w,{})}),n?(r[s]=e,t):e})(b,v,"global"in c?c.global:this==r,c.state)}function d(e){var t,n=e.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<o;)a[i]=i++;for(i=0;i<o;i++)a[i]=a[s=c&s+e[i%n]+(t=a[i])],a[s]=t;(r.g=function(e){for(var t,n=0,i=r.i,s=r.j,a=r.S;e--;)t=a[i=c&i+1],n=n*o+a[c&(a[i]=a[s=c&s+t])+(a[s]=t)];return r.i=i,r.j=s,n})(o)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(p(e[n],t-1))}catch(o){}return r.length?r:"string"==i?e:e+"\0"}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(r.random(),n),e.exports){e.exports=h;try{i=require("crypto")}catch(y){}}else r["seed"+s]=h}("undefined"!==typeof self?self:a,[],Math)}(V);var U=k,B=D,z=P,q=R,K=M,H=F,W=V.exports;W.alea=U,W.xor128=B,W.xorwow=z,W.xorshift7=q,W.xor4096=K,W.tychei=H;var G=W,Q=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function Y(e){var t;const n=null!==(t=e)&&void 0!==t&&t.seed?new G(e.seed):null;function r(){return e&&e.maxLength>1?function(){var t,n=!1;for(;!n;)(t=i()).length<=e.maxLength&&(n=!0);return t}():i()}function i(){return Q[o(Q.length)]}function o(e){const t=n?n():Math.random();return Math.floor(t*e)}if("undefined"===typeof e)return r();"number"===typeof e&&(e={exactly:e}),e.exactly&&(e.min=e.exactly,e.max=e.exactly),"number"!==typeof e.wordsPerString&&(e.wordsPerString=1),"function"!==typeof e.formatter&&(e.formatter=e=>e),"string"!==typeof e.separator&&(e.separator=" ");for(var s=e.min+o(e.max+1-e.min),a=[],l="",u=0,c=0;c<s*e.wordsPerString;c++)u===e.wordsPerString-1?l+=e.formatter(r(),u):l+=e.formatter(r(),u)+e.separator,u++,(c+1)%e.wordsPerString===0&&(a.push(l),l="",u=0);return"string"===typeof e.join&&(a=a.join(e.join)),a}var $=Y;Y.wordList=Q;var X=l($);function J(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Array.isArray(e),i=Array.isArray(t);if(r)if(i){if(e.length!=t.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),t.length<e.length){let n=[];for(let r=0;r<e.length;r++)n.push(t);t=n}else t=t.slice(0,e.length)}else{let n=[];for(let r=0;r<e.length;r++)n.push(t);t=n}else i?(t=[t[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(e=[e],t=[t]);let o=[];for(let a=0;a<e.length;a++)for(let n=0;n<t[a];n++)null==e[a]||"object"!=typeof e[a]?o.push(e[a]):o.push(Object.assign({},e[a]));let s=Z(o);return n&&(s=function(e){const t={};for(const n of e)for(const e of Object.keys(n))"undefined"===typeof t[e]&&(t[e]=[]),t[e].push(n[e]);return t}(s)),s}function Z(e){Array.isArray(e)||console.error("Argument to shuffle() must be an array.");const t=e.slice(0);let n,r,i=t.length;for(;i;)r=Math.floor(Math.random()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.length;if(1==n)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),Z(e[0]);let r=[];for(let a=0;a<n;a++)r.push(a);t&&(r=Z(r));const i=[];let o=null;for(let a=0;a<n;a++)o=null===o?e[a].length:Math.min(o,e[a].length),i.push(Z(e[a]));const s=[];for(let a=0;a<o;a++)for(let e=0;e<r.length;e++)s.push(i[r[e]][a]);return s}function te(e,t){return Array.isArray(e)||console.error("First argument to sampleWithoutReplacement() must be an array"),t>e.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),Z(e).slice(0,t)}function ne(e,t,n){Array.isArray(e)||console.error("First argument to sampleWithReplacement() must be an array");const r=[];if("undefined"!==typeof n){n.length!==e.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");let t=0;for(const e of n)t+=e;for(const e of n)r.push(e/t)}else for(let s=0;s<e.length;s++)r.push(1/e.length);const i=[r[0]];for(let s=1;s<r.length;s++)i.push(r[s]+i[s-1]);const o=[];for(let s=0;s<t;s++){const t=Math.random();let n=0;for(;t>i[n];)n++;o.push(e[n])}return o}function re(e,t){return function(){var e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t+e}function ie(e){return-Math.log(Math.random())/e}var oe=Object.freeze({__proto__:null,factorial:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[{}];for(const[i,o]of Object.entries(e)){const e=[];for(const t of o)for(const n of r)e.push(Object.assign(Object.assign({},n),{[i]:t}));r=e}return J(r,t,n)},randomID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="";const n="0123456789abcdefghjklmnopqrstuvwxyz";for(let r=0;r<e;r++)t+=n[Math.floor(35*Math.random())];return t},randomInt:function(e,t){if(t<e)throw new Error("Upper boundary must be less than or equal to lower boundary");return e+Math.floor(Math.random()*(t-e+1))},randomWords:function(e){return X(e)},repeat:J,sampleBernoulli:function(e){return Math.random()<=e?1:0},sampleExGaussian:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=re(e,t)+ie(n);if(r)for(;i<=0;)i=re(e,t)+ie(n);return i},sampleExponential:ie,sampleNormal:re,sampleWithReplacement:ne,sampleWithoutReplacement:te,setSeed:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random().toString();return Math.random=C(e),e},shuffle:Z,shuffleAlternateGroups:ee,shuffleNoRepeats:function(e,t){Array.isArray(e)||console.error("First argument to shuffleNoRepeats() must be an array."),"undefined"!==typeof t&&"function"!==typeof t&&console.error("Second argument to shuffleNoRepeats() must be a function."),"undefined"==typeof t&&(t=function(e,t){return e===t});const n=Z(e);for(let r=0;r<n.length-1;r++)if(t(n[r],n[r+1])){let e=Math.floor(Math.random()*(n.length-2))+1;for(;t(n[r+1],n[e])||t(n[r+1],n[e+1])||t(n[r+1],n[e-1])||t(n[r],n[e]);)e=Math.floor(Math.random()*(n.length-2))+1;const i=n[e];n[e]=n[r+1],n[r+1]=i}return n}});function se(){const e={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},t=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":n[1]},n=t(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map((function(r){e[r]=unescape(t(n,r))})),e.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==e.assignmentId,e.outsideTurk=!e.previewMode&&""===e.hitId&&""==e.assignmentId&&""==e.workerId,e}var ae=Object.freeze({__proto__:null,submitToTurk:function(e){const t=se(),n=t.assignmentId,r=t.turkSubmitTo;if(!n||!r)return;const i=document.createElement("form");i.method="POST",i.action=r+"/mturk/externalSubmit?assignmentId="+n;for(const o in e)if(e.hasOwnProperty(o)){const t=document.createElement("input");t.type="hidden",t.name=o,t.id=o,t.value=e[o],i.appendChild(t)}document.body.appendChild(i),i.submit()},turkInfo:se});class le{constructor(e,t,n,r){if(this.jsPsych=e,this.progress={current_location:-1,current_variable_set:0,current_repetition:0,current_iteration:0,done:!1},this.parent_node=n,this.relative_id="undefined"===typeof n?0:r,"undefined"!==typeof t.timeline){this.timeline_parameters={timeline:[],loop_function:t.loop_function,conditional_function:t.conditional_function,sample:t.sample,randomize_order:"undefined"!=typeof t.randomize_order&&t.randomize_order,repetitions:"undefined"==typeof t.repetitions?1:t.repetitions,timeline_variables:"undefined"==typeof t.timeline_variables?[{}]:t.timeline_variables,on_timeline_finish:t.on_timeline_finish,on_timeline_start:t.on_timeline_start},this.setTimelineVariablesOrder();var i=Object.assign({},t);delete i.timeline,delete i.conditional_function,delete i.loop_function,delete i.randomize_order,delete i.repetitions,delete i.timeline_variables,delete i.sample,delete i.on_timeline_start,delete i.on_timeline_finish,this.node_trial_data=i;for(var o=0;o<t.timeline.length;o++){var s=Object.assign({},i,t.timeline[o]);if("object"==typeof i.data&&"object"==typeof t.timeline[o].data){var a=Object.assign({},i.data,t.timeline[o].data);s.data=a}this.timeline_parameters.timeline.push(new le(this.jsPsych,s,this,o))}}else"undefined"===typeof t.type&&console.error('Trial level node is missing the "type" parameter. The parameters for the node are: '+JSON.stringify(t)),this.trial_parameters=Object.assign({},t)}trial(){return"undefined"==typeof this.timeline_parameters?d(this.trial_parameters):this.progress.current_location>=this.timeline_parameters.timeline.length?null:this.timeline_parameters.timeline[this.progress.current_location].trial()}markCurrentTrialComplete(){"undefined"===typeof this.timeline_parameters?this.progress.done=!0:this.timeline_parameters.timeline[this.progress.current_location].markCurrentTrialComplete()}nextRepetiton(){this.setTimelineVariablesOrder(),this.progress.current_location=-1,this.progress.current_variable_set=0,this.progress.current_repetition++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}setTimelineVariablesOrder(){const e=this.timeline_parameters;if("undefined"!==typeof e&&"undefined"!==typeof e.timeline_variables){for(var t=[],n=0;n<e.timeline_variables.length;n++)t.push(n);"undefined"!==typeof e.sample&&("custom"==e.sample.type?t=e.sample.fn(t):"with-replacement"==e.sample.type?t=ne(t,e.sample.size,e.sample.weights):"without-replacement"==e.sample.type?t=te(t,e.sample.size):"fixed-repetitions"==e.sample.type?t=J(t,e.sample.size,!1):"alternate-groups"==e.sample.type?t=ee(e.sample.groups,e.sample.randomize_group_order):console.error('Invalid type in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"')),e.randomize_order&&(t=Z(t)),this.progress.order=t}}nextSet(){this.progress.current_location=-1,this.progress.current_variable_set++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}advance(){const e=this.progress,t=this.timeline_parameters,n=this.jsPsych.internal;if(e.done)return!0;if(-1==e.current_location){if("undefined"!==typeof t){if("undefined"!==typeof t.conditional_function&&0==e.current_repetition&&0==e.current_variable_set){n.call_immediate=!0;var r=t.conditional_function();if(n.call_immediate=!1,0==r)return e.done=!0,!0}"undefined"!==typeof t.on_timeline_start&&0==e.current_variable_set&&t.on_timeline_start()}return e.current_location=0,this.advance()}if("undefined"!==typeof t){for(var i=!1;e.current_location<t.timeline.length&&0==i;){if(!t.timeline[e.current_location].advance())return i=!0,!1;e.current_location++}return e.current_variable_set<e.order.length-1?(this.nextSet(),this.advance()):e.current_repetition<t.repetitions-1?(this.nextRepetiton(),"undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),this.advance()):("undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),"undefined"!==typeof t.loop_function?(n.call_immediate=!0,t.loop_function(this.generatedData())?(this.reset(),n.call_immediate=!1,this.parent_node.advance()):(e.done=!0,n.call_immediate=!1,!0)):(e.done=!0,!0))}}isComplete(){return this.progress.done}getTimelineVariableValue(e){if("undefined"!=typeof this.timeline_parameters)return this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]][e]}findTimelineVariable(e){var t=this.getTimelineVariableValue(e);return"undefined"==typeof t?"undefined"!==typeof this.parent_node?this.parent_node.findTimelineVariable(e):void 0:t}timelineVariable(e){if("undefined"==typeof this.timeline_parameters){const t=this.findTimelineVariable(e);return"undefined"===typeof t&&console.warn("Timeline variable "+e+" not found."),t}{var t=Math.max(0,this.progress.current_location);t==this.timeline_parameters.timeline.length&&(t-=1);const n=this.timeline_parameters.timeline[t].timelineVariable(e);return"undefined"===typeof n&&console.warn("Timeline variable "+e+" not found."),n}}allTimelineVariables(){for(var e=this.allTimelineVariablesNames(),t={},n=0;n<e.length;n++)t[e[n]]=this.timelineVariable(e[n]);return t}allTimelineVariablesNames(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("undefined"!==typeof this.timeline_parameters){e=e.concat(Object.keys(this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]]));var t=Math.max(0,this.progress.current_location);return t==this.timeline_parameters.timeline.length&&(t-=1),this.timeline_parameters.timeline[t].allTimelineVariablesNames(e)}if("undefined"==typeof this.timeline_parameters)return e}length(){var e=0;if("undefined"===typeof this.timeline_parameters)return 1;for(var t=0;t<this.timeline_parameters.timeline.length;t++)e+=this.timeline_parameters.timeline[t].length();return e}percentComplete(){for(var e=this.length(),t=0,n=0;n<this.timeline_parameters.timeline.length;n++)this.timeline_parameters.timeline[n].isComplete()&&(t+=this.timeline_parameters.timeline[n].length());return t/e*100}reset(){if(this.progress.current_location=-1,this.progress.current_repetition=0,this.progress.current_variable_set=0,this.progress.current_iteration++,this.progress.done=!1,this.setTimelineVariablesOrder(),"undefined"!=typeof this.timeline_parameters)for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}end(){this.progress.done=!0}endActiveNode(){"undefined"==typeof this.timeline_parameters?(this.end(),this.parent_node.end()):this.timeline_parameters.timeline[this.progress.current_location].endActiveNode()}ID(){var e="";return"undefined"==typeof this.parent_node?"0."+this.progress.current_iteration:(e+=this.parent_node.ID()+"-",e+=this.relative_id+"."+this.progress.current_iteration)}activeID(){return"undefined"==typeof this.timeline_parameters?this.ID():this.timeline_parameters.timeline[this.progress.current_location].activeID()}generatedData(){return this.jsPsych.data.getDataByTimelineNode(this.ID())}trialsOfType(e){if("undefined"==typeof this.timeline_parameters)return this.trial_parameters.type==e?this.trial_parameters:[];for(var t=[],n=0;n<this.timeline_parameters.timeline.length;n++){var r=this.timeline_parameters.timeline[n].trialsOfType(e);t=t.concat(r)}return t}insert(e){"undefined"===typeof this.timeline_parameters?console.error("Cannot add new trials to a trial-level node."):this.timeline_parameters.timeline.push(new le(this.jsPsych,Object.assign(Object.assign({},this.node_trial_data),e),this,this.timeline_parameters.timeline.length))}}function ue(e){return new Promise((t=>setTimeout(t,e)))}class ce{version(){return"7.3.4"}constructor(e){this.extensions={},this.turk=ae,this.randomization=oe,this.utils=p,this.opts={},this.global_trial_index=0,this.current_trial={},this.current_trial_finished=!1,this.paused=!1,this.waiting=!1,this.file_protocol=!1,this.simulation_mode=null,this.webaudio_context=null,this.internal={call_immediate:!1},this.progress_bar_amount=0,e=Object.assign({display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,exclusions:{},show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[]},e),this.opts=e,u(this),this.webaudio_context="undefined"!==typeof window&&"undefined"!==typeof window.AudioContext?new AudioContext:null,"file:"!=window.location.protocol||!1!==e.override_safe_mode&&"undefined"!==typeof e.override_safe_mode||(e.use_webaudio=!1,this.file_protocol=!0,console.warn("jsPsych detected that it is running via the file:// protocol and not on a web server. To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. For more information, see: https://www.jspsych.org/overview/running-experiments")),this.data=new y(this),this.pluginAPI=function(e){const t=e.getInitSettings(),n=u(new w(e.getDisplayContainerElement,t.case_sensitive_responses,t.minimum_valid_rt)),r=u(new S),i=u(new T(t.use_webaudio,e.webaudio_context)),o=u(new v),s=u(new E(e.getDisplayContainerElement,r.setTimeout));return Object.assign({},n,r,i,o,s)}(this);for(const t of e.extensions)this.extensions[t.type.info.name]=new t.type(this);this.pluginAPI.initAudio()}run(e){return s(this,void 0,void 0,(function*(){"undefined"===typeof e&&console.error("No timeline declared in jsPsych.run. Cannot start experiment."),0===e.length&&console.error("No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment."),this.timelineDescription=e,this.timeline=new le(this,{timeline:e}),yield this.prepareDom(),yield this.checkExclusions(this.opts.exclusions),yield this.loadExtensions(this.opts.extensions),document.documentElement.setAttribute("jspsych","present"),this.startExperiment(),yield this.finished}))}simulate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-only",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(this,void 0,void 0,(function*(){this.simulation_mode=t,this.simulation_options=n,yield this.run(e)}))}getProgress(){return{total_trials:"undefined"===typeof this.timeline?void 0:this.timeline.length(),current_trial_global:this.global_trial_index,percent_complete:"undefined"===typeof this.timeline?0:this.timeline.percentComplete()}}getStartTime(){return this.exp_start_time}getTotalTime(){return"undefined"===typeof this.exp_start_time?0:(new Date).getTime()-this.exp_start_time.getTime()}getDisplayElement(){return this.DOM_target}getDisplayContainerElement(){return this.DOM_container}finishTrial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(this.current_trial_finished)return;this.current_trial_finished=!0,"undefined"!==typeof this.current_trial.css_classes&&Array.isArray(this.current_trial.css_classes)&&this.DOM_target.classList.remove(...this.current_trial.css_classes),this.data.write(e);const n=this.data.getLastTrialData().values()[0],r=this.current_trial;if("object"===typeof r.save_trial_parameters)for(const s of Object.keys(r.save_trial_parameters)){const e=r.save_trial_parameters[s];!0===e&&("undefined"===typeof r[s]?console.warn('Invalid parameter specified in save_trial_parameters. Trial has no property called "'.concat(s,'".')):"function"===typeof r[s]?n[s]=r[s].toString():n[s]=r[s]),!1===e&&"internal_node_id"!==s&&"trial_index"!==s&&delete n[s]}const i=(null!==(t=r.extensions)&&void 0!==t?t:[]).map((e=>this.extensions[e.type.info.name].on_finish(e.params))),o=()=>{this.internal.call_immediate=!0,"function"===typeof r.on_finish&&r.on_finish(n),this.opts.on_trial_finish(n),this.opts.on_data_update(n),this.internal.call_immediate=!1,"data-only"===this.simulation_mode?this.nextTrial():null===typeof r.post_trial_gap||"undefined"===typeof r.post_trial_gap?this.opts.default_iti>0?setTimeout(this.nextTrial,this.opts.default_iti):this.nextTrial():r.post_trial_gap>0?setTimeout(this.nextTrial,r.post_trial_gap):this.nextTrial()};if(i.some((e=>"function"===typeof e.then)))Promise.all(i.map((e=>Promise.resolve(e).then((e=>{Object.assign(n,e)}))))).then(o);else{for(const e of i)Object.assign(n,e);o()}}endExperiment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.timeline.end_message=e,this.timeline.end(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}endCurrentTimeline(){this.timeline.endActiveNode()}getCurrentTrial(){return this.current_trial}getInitSettings(){return this.opts}getCurrentTimelineNodeID(){return this.timeline.activeID()}timelineVariable(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.internal.call_immediate||!0===t?this.timeline.timelineVariable(e):{timelineVariablePlaceholder:!0,timelineVariableFunction:()=>this.timeline.timelineVariable(e)}}getAllTimelineVariables(){return this.timeline.allTimelineVariables()}addNodeToEndOfTimeline(e,t){this.timeline.insert(e)}pauseExperiment(){this.paused=!0}resumeExperiment(){this.paused=!1,this.waiting&&(this.waiting=!1,this.nextTrial())}loadFail(e){e=e||"<p>The experiment failed to load.</p>",this.DOM_target.innerHTML=e}getSafeModeStatus(){return this.file_protocol}getTimeline(){return this.timelineDescription}prepareDom(){return s(this,void 0,void 0,(function*(){"complete"!==document.readyState&&(yield new Promise((e=>{window.addEventListener("load",e)})));const e=this.opts;if("undefined"===typeof e.display_element){null===document.querySelector("body")&&document.documentElement.appendChild(document.createElement("body")),document.querySelector("html").style.height="100%",document.querySelector("body").style.margin="0px",document.querySelector("body").style.height="100%",document.querySelector("body").style.width="100%",e.display_element=document.querySelector("body")}else{const t=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);null===t?console.error("The display_element specified in initJsPsych() does not exist in the DOM."):e.display_element=t}e.display_element.innerHTML='<div class="jspsych-content-wrapper"><div id="jspsych-content"></div></div>',this.DOM_container=e.display_element,this.DOM_target=document.querySelector("#jspsych-content"),null!==e.experiment_width&&(this.DOM_target.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,-1===e.display_element.className.indexOf("jspsych-display-element")&&(e.display_element.className+=" jspsych-display-element"),this.DOM_target.className+="jspsych-content",this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close)}))}loadExtensions(e){return s(this,void 0,void 0,(function*(){try{yield Promise.all(e.map((e=>this.extensions[e.type.info.name].initialize(e.params||{}))))}catch(t){throw console.error(t),new Error(t)}}))}startExperiment(){this.finished=new Promise((e=>{this.resolveFinishedPromise=e})),!0===this.opts.show_progress_bar&&this.drawProgressBar(this.opts.message_progress_bar),this.exp_start_time=new Date,this.timeline.advance(),this.doTrial(this.timeline.trial())}finishExperiment(){const e=this.opts.on_finish(this.data.get()),t=()=>{"undefined"!==typeof this.timeline.end_message&&(this.DOM_target.innerHTML=this.timeline.end_message),this.resolveFinishedPromise()};e?Promise.resolve(e).then(t):t()}nextTrial(){if(this.paused)return void(this.waiting=!0);this.global_trial_index++,this.timeline.markCurrentTrialComplete();const e=this.timeline.advance();!0===this.opts.show_progress_bar&&!0===this.opts.auto_update_progress_bar&&this.updateProgressBar(),e?this.finishExperiment():this.doTrial(this.timeline.trial())}doTrial(e){if(this.current_trial=e,this.current_trial_finished=!1,this.evaluateTimelineVariables(e),"string"===typeof e.type)throw new c("A string was provided as the trial's `type` parameter. Since jsPsych v7, the `type` parameter needs to be a plugin object.");if(e.type=Object.assign(Object.assign({},u(new e.type(this))),{info:e.type.info}),this.evaluateFunctionParameters(e),this.setDefaultValues(e),this.internal.call_immediate=!0,this.opts.on_trial_start(e),"function"===typeof e.on_start&&e.on_start(e),Array.isArray(e.extensions))for(const o of e.extensions)this.extensions[o.type.info.name].on_start(o.params);this.DOM_container.focus(),this.DOM_target.scrollTop=0,"undefined"!==typeof e.css_classes&&(Array.isArray(e.css_classes)||"string"!==typeof e.css_classes||(e.css_classes=[e.css_classes]),Array.isArray(e.css_classes)&&this.DOM_target.classList.add(...e.css_classes));const t=()=>{if("function"===typeof e.on_load&&e.on_load(),Array.isArray(e.extensions))for(const t of e.extensions)this.extensions[t.type.info.name].on_load(t.params)};let n,r,i;this.simulation_mode||(n=e.type.trial(this.DOM_target,e,t)),this.simulation_mode&&(e.type.simulate?(e.simulation_options||(r=this.simulation_options.default),e.simulation_options&&("string"==typeof e.simulation_options?this.simulation_options[e.simulation_options]?r=this.simulation_options[e.simulation_options]:this.simulation_options.default?(console.log('No matching simulation options found for "'.concat(e.simulation_options,'". Using "default" options.')),r=this.simulation_options.default):(console.log('No matching simulation options found for "'.concat(e.simulation_options,'" and no "default" options provided. Using the default values provided by the plugin.')),r={}):r=e.simulation_options),i=this.utils.deepMerge(this.simulation_options.default,r),i=this.utils.deepCopy(i),i=this.replaceFunctionsWithValues(i,null),n=!1===(null===i||void 0===i?void 0:i.simulate)?e.type.trial(this.DOM_target,e,t):e.type.simulate(e,(null===i||void 0===i?void 0:i.mode)||this.simulation_mode,i,t)):n=e.type.trial(this.DOM_target,e,t));n&&"function"==typeof n.then||this.simulation_mode&&(!this.simulation_mode||!1!==(null===i||void 0===i?void 0:i.simulate))||t(),this.internal.call_immediate=!1}evaluateTimelineVariables(e){for(const t of Object.keys(e))"object"===typeof e[t]&&null!==e[t]&&"undefined"!==typeof e[t].timelineVariablePlaceholder&&(e[t]=e[t].timelineVariableFunction()),"object"===typeof e[t]&&null!==e[t]&&"timeline"!==t&&"timeline_variables"!==t&&this.evaluateTimelineVariables(e[t])}evaluateFunctionParameters(e){this.internal.call_immediate=!0;for(const t of Object.keys(e))"type"!==t&&("undefined"!==typeof b[t]&&b[t].type!==f.FUNCTION&&(e[t]=this.replaceFunctionsWithValues(e[t],null)),"undefined"!==typeof e.type.info.parameters[t]&&e.type.info.parameters[t].type!==f.FUNCTION&&(e[t]=this.replaceFunctionsWithValues(e[t],e.type.info.parameters[t])));this.internal.call_immediate=!1}replaceFunctionsWithValues(e,t){if(null===e)return e;if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=this.replaceFunctionsWithValues(e[n],t);else if("object"===typeof e)if(null!==t&&t.nested)for(const n of Object.keys(e))"object"===typeof t.nested[n]&&t.nested[n].type!==f.FUNCTION&&(e[n]=this.replaceFunctionsWithValues(e[n],t.nested[n]));else for(const n of Object.keys(e))"type"!==n&&"timeline"!==n&&"timeline_variables"!==n&&(e[n]=this.replaceFunctionsWithValues(e[n],null));else if("function"===typeof e)return e();return e}setDefaultValues(e){for(const t in e.type.info.parameters)e.type.info.parameters[t].type===f.COMPLEX?("undefined"===typeof e[t]&&e.type.info.parameters[t].default&&(e[t]=e.type.info.parameters[t].default),!0===e.type.info.parameters[t].array&&Array.isArray(e[t])&&e[t].forEach((function(n,r){for(const i in e.type.info.parameters[t].nested)"undefined"!==typeof e[t][r][i]&&null!==e[t][r][i]||("undefined"===typeof e.type.info.parameters[t].nested[i].default?console.error("You must specify a value for the ".concat(i," parameter (nested in the ").concat(t," parameter) in the ").concat(e.type.info.name," plugin.")):e[t][r][i]=e.type.info.parameters[t].nested[i].default)}))):"undefined"!==typeof e[t]&&null!==e[t]||("undefined"===typeof e.type.info.parameters[t].default?console.error("You must specify a value for the ".concat(t," parameter in the ").concat(e.type.info.name," plugin.")):e[t]=e.type.info.parameters[t].default)}checkExclusions(e){return s(this,void 0,void 0,(function*(){if((e.min_width||e.min_height||e.audio)&&console.warn("The exclusions option in `initJsPsych()` is deprecated and will be removed in a future version. We recommend using the browser-check plugin instead. See https://www.jspsych.org/latest/plugins/browser-check/."),e.min_width||e.min_height){const t=e.min_width||0,n=e.min_height||0;if(window.innerWidth<t||window.innerHeight<n){for(this.getDisplayElement().innerHTML="<p>Your browser window is too small to complete this experiment. Please maximize the size of your browser window. If your browser window is already maximized, you will not be able to complete this experiment.</p><p>The minimum width is "+t+"px. Your current width is "+window.innerWidth+"px.</p><p>The minimum height is "+n+"px. Your current height is "+window.innerHeight+"px.</p>";window.innerWidth<t||window.innerHeight<n;)yield ue(100);this.getDisplayElement().innerHTML=""}}if("undefined"!==typeof e.audio&&e.audio&&!window.hasOwnProperty("AudioContext")&&!window.hasOwnProperty("webkitAudioContext"))throw this.getDisplayElement().innerHTML="<p>Your browser does not support the WebAudio API, which means that you will not be able to complete the experiment.</p><p>Browsers that support the WebAudio API include Chrome, Firefox, Safari, and Edge.</p>",new Error}))}drawProgressBar(e){document.querySelector(".jspsych-display-element").insertAdjacentHTML("afterbegin",'<div id="jspsych-progressbar-container"><span>'+e+'</span><div id="jspsych-progressbar-outer"><div id="jspsych-progressbar-inner"></div></div></div>')}updateProgressBar(){this.setProgressBar(this.getProgress().percent_complete/100)}setProgressBar(e){e=Math.max(Math.min(1,e),0),document.querySelector("#jspsych-progressbar-inner").style.width=100*e+"%",this.progress_bar_amount=e}getProgressBarCompleted(){return this.progress_bar_amount}}function he(e){const t=new ce(e);return Object.defineProperties(t,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map((e=>{let[t,n]=e;return[t,{get(){throw new c(n)}}]})))),t}"undefined"!==typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);const de={name:"html-keyboard-response",parameters:{stimulus:{type:f.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:f.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:f.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:f.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:f.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:f.BOOL,pretty_name:"Response ends trial",default:!0}}};class fe{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var r={rt:null,key:null};const i=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof o&&this.jsPsych.pluginAPI.cancelKeyboardResponse(o);var n={rt:r.rt,stimulus:t.stimulus,response:r.key};e.innerHTML="",this.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var o=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",null==r.key&&(r=n),t.response_ends_trial&&i()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(i,t.trial_duration)}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}}fe.info=de;const pe={name:"html-button-response",parameters:{stimulus:{type:f.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:f.STRING,pretty_name:"Choices",default:void 0,array:!0},button_html:{type:f.HTML_STRING,pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0},prompt:{type:f.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:f.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:f.INT,pretty_name:"Trial duration",default:null},margin_vertical:{type:f.STRING,pretty_name:"Margin vertical",default:"0px"},margin_horizontal:{type:f.STRING,pretty_name:"Margin horizontal",default:"8px"},response_ends_trial:{type:f.BOOL,pretty_name:"Response ends trial",default:!0}}};class me{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-button-response-stimulus">'+t.stimulus+"</div>",r=[];if(Array.isArray(t.button_html))t.button_html.length==t.choices.length?r=t.button_html:console.error("Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var i=0;i<t.choices.length;i++)r.push(t.button_html);n+='<div id="jspsych-html-button-response-btngroup">';for(i=0;i<t.choices.length;i++){var o=r[i].replace(/%choice%/g,t.choices[i]);n+='<div class="jspsych-html-button-response-button" style="display: inline-block; margin:'+t.margin_vertical+" "+t.margin_horizontal+'" id="jspsych-html-button-response-button-'+i+'" data-choice="'+i+'">'+o+"</div>"}n+="</div>",null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var s=performance.now();for(i=0;i<t.choices.length;i++)e.querySelector("#jspsych-html-button-response-button-"+i).addEventListener("click",(e=>{u(e.currentTarget.getAttribute("data-choice"))}));var a={rt:null,button:null};const l=()=>{this.jsPsych.pluginAPI.clearAllTimeouts();var n={rt:a.rt,stimulus:t.stimulus,response:a.button};e.innerHTML="",this.jsPsych.finishTrial(n)};function u(n){var r=performance.now(),i=Math.round(r-s);a.button=parseInt(n),a.rt=i,e.querySelector("#jspsych-html-button-response-stimulus").className+=" responded";for(var o=document.querySelectorAll(".jspsych-html-button-response-button button"),u=0;u<o.length;u++)o[u].setAttribute("disabled","disabled");t.response_ends_trial&&l()}null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-button-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(l,t.trial_duration)}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.clickTarget(i.querySelector('div[data-choice="'.concat(r.response,'"] button')),r.rt)}}me.info=pe;var ge=n(485),ye=n(661);const ve=(e,t)=>e+Math.floor(Math.random()*Math.floor(t));f.COMPLEX,f.HTML_STRING,f.STRING,f.INT,f.INT,f.BOOL,f.STRING,f.BOOL,f.HTML_STRING,f.STRING,f.BOOL;const we={name:"image-keyboard-response",parameters:{stimulus:{type:f.IMAGE,pretty_name:"Stimulus",default:void 0},stimulus_height:{type:f.INT,pretty_name:"Image height",default:null},stimulus_width:{type:f.INT,pretty_name:"Image width",default:null},maintain_aspect_ratio:{type:f.BOOL,pretty_name:"Maintain aspect ratio",default:!0},choices:{type:f.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:f.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:f.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:f.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:f.BOOL,pretty_name:"Response ends trial",default:!0},render_on_canvas:{type:f.BOOL,pretty_name:"Render on canvas",default:!0}}};class be{constructor(e){this.jsPsych=e}trial(e,t){var n,r;if(t.render_on_canvas){var i=!1;if(e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild);var o=document.createElement("canvas");o.id="jspsych-image-keyboard-response-stimulus",o.style.margin="0",o.style.padding="0";var s=o.getContext("2d");(l=new Image).onload=()=>{i||(a(),s.drawImage(l,0,0,r,n))},l.src=t.stimulus;const a=()=>{null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=l.naturalWidth*(t.stimulus_height/l.naturalHeight))):n=l.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=l.naturalHeight*(t.stimulus_width/l.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=l.naturalWidth),o.height=n,o.width=r};a(),e.insertBefore(o,null),l.complete&&Number.isFinite(r)&&Number.isFinite(n)&&(s.drawImage(l,0,0,r,n),i=!0),null!==t.prompt&&e.insertAdjacentHTML("beforeend",t.prompt)}else{var a='<img src="'+t.stimulus+'" id="jspsych-image-keyboard-response-stimulus">';null!==t.prompt&&(a+=t.prompt),e.innerHTML=a;var l=e.querySelector("#jspsych-image-keyboard-response-stimulus");null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=l.naturalWidth*(t.stimulus_height/l.naturalHeight))):n=l.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=l.naturalHeight*(t.stimulus_width/l.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=l.naturalWidth),l.style.height=n.toString()+"px",l.style.width=r.toString()+"px"}var u={rt:null,key:null};const c=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof h&&this.jsPsych.pluginAPI.cancelKeyboardResponse(h);var n={rt:u.rt,stimulus:t.stimulus,response:u.key};e.innerHTML="",this.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var h=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-image-keyboard-response-stimulus").className+=" responded",null==u.key&&(u=n),t.response_ends_trial&&c()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-image-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration?this.jsPsych.pluginAPI.setTimeout((()=>{c()}),t.trial_duration):!1===t.response_ends_trial&&console.warn("The experiment may be deadlocked. Try setting a trial duration or set response_ends_trial to true.")}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}}be.info=we;n(890);f.HTML_STRING,f.INT,f.INT,f.INT,f.INT,f.HTML_STRING,f.INT,f.STRING,f.BOOL,f.HTML_STRING,f.INT,f.INT,f.BOOL;f.COMPLEX,f.HTML_STRING,f.STRING,f.BOOL,f.BOOL,f.STRING,f.BOOL,f.HTML_STRING,f.STRING,f.BOOL;const _e={USE_PHOTODIODE:!1,USE_EEG:!1,USE_ELECTRON:!0,USE_MTURK:!1};const xe=JSON.parse('{"u2":"honeycomb","i8":"3.2.4"}');function Te(e){return new URLSearchParams(window.location.search).get(e)}function Ee(){return Te("PROLIFIC_PID")}const Se=JSON.parse('{"name":"Honeycomb Task","prompts":{"continue":{"prompt":"Press any key to continue.","button":"Continue"},"settingUp":"Setting up..."},"trials":{"honeycomb":{"welcome":"Welcome to the experiment. Press any key to begin.","instructions":{"read":"Please read the following instructions carefully.","circle":"In this experiment, a circle will appear in the center of the screen.","example":{"start":"If the circle is ","middle":", press the letter ","end":" on the keyboard as fast as you can."},"next":"Click next to begin."},"debrief":{"accuracy":{"start":"You responded correctly on ","end":"% of the trials."},"reactionTime":{"start":"Your average response time was ","end":"ms."},"complete":"Press any key to complete the experiment. Thank you!"},"finish":"This experiment has ended."},"adjustVolume":"Set tablet volume to 50/100.","camera":{"start":"Make sure the camera is pointing to you and your face is within the camera area.","end":"The camera recording has ended"},"eventMarker":{"connected":"Event marker connected.","not_connected":"No event marker connected."},"holdUpMarker":"Make sure the photodiode is covering the spot and any external recordings have begun before continuing.","quiz":{"ask":{"age":"What\'s your age?","demographics_age":"How old are you?","demographics_ethnicity":"What is your ethnicity?","demographics_race":"What is your race?","demographics_english":"Are you fluent in English?","demographics_gender":"What is your gender?","diagnoses":"Have you ever been diagnosed with Parkinson\'s disease, Schizophrenia, Obsessive-Compulsive Disorder, or Depression?"},"prompt":{"ius":{"preamble":{"start":"This questionnaire is designed to measure intolerance of uncertainty.","middle":"Please answer the following questions as honestly as you can.","end":"There are no right or wrong answers, and there are no trick questions."},"upset":"1. Unforeseen events upset me greatly.","frustration":"2. It frustrates me not having all the information I need.","full_life":"3. Uncertainty keeps me from living a full life.","surprise_avoid":"4. One should always look ahead so as to avoid surprises.","unforeseen_spoil":"5. A small unforeseen event can spoil everything, even with the best of planning.","uncertainty_paralysis":"6. When it\'s time to act, uncertainty paralyzes me.","uncertainty_malfunction":"7. When I am uncertain I can\'t function very well.","future":"8. I always want to know what the future has in store of me.","surprise_intolerance":"9. I can\'t stand being taken by surprise","doubt_paralysis":"10. The smallest doubt can stop me from acting.","organize":"11. I should be able to organize everything in advance.","escape":"12. I must get away from all uncertain situations."},"preamble":{"demo_1":"Demographics (1/3)","demo_2":"Demographics (2/3)","demo_3":"Demographics (3/3)","survey_1":"Survey (1/1)"}},"answer":{"age":"Answer 12 no matter what.","abstain":"Prefer not to answer.","ius":{"not":"1 - Not at all characteristic of me","little":"2 - A little characteristic of me","somewhat":"3 - Somewhat characteristic of me","very":"4 - Very characteristic of me","entirely":"5 - Entirely characteristic of me","abstain":"Prefer not to answer"},"debriefing":{"confirm_completion":"Confirm Completion"},"demographics_ethnicity":{"hispanic_latino":"Hispanic or Latino","no_hispanic_latino":"NOT Hispanic or Latino"},"demographics_race":{"asian":"Asian","african_american":"African-American","caucasian":"Caucasian","native_american_alaskan":"Native American/Alaskan","native_hawaiian_pacific_islander":"Native Hawaiian or Pacific Islander","other":"Other"},"demographics_binary":{"yes":"YES","no":"NO"},"demographics_gender":{"female":"Female","male":"Male","other":"Other","abstain":"Prefer to not say"},"demographics_diagnoses":{"no":"NO","parkinsons":"Parkinson\'s Disease","schizophrenia":"Schizophrenia","ocd":"Obsessive Compulsive Disorder","depression":"Depression"}},"direction":{"slider":{"right":"Move the slider to the right.","left":"Move the slider to the left."}}},"welcome":"Welcome! Here are your instructions"}}');var Ie=n(141);const ke=xe.u2,Ce=xe.i8,Ae=(Ie.eventCodes.open_task,he().turk.turkInfo()),De=!Ae.outsideTurk,Ne="".concat(Ae.workerId,":").concat(Ae.assignmentId);let Pe=!0;try{window.require("electron")}catch(Kb){Pe=!1}const Oe=Ee()&&!De||!1,Re=(Le={USE_PHOTODIODE:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_PHOTODIODE&&Pe,USE_EEG:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_EEG&&Pe,USE_ELECTRON:Pe,USE_MTURK:De,USE_VOLUME:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VOLUME,USE_CAMERA:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VIDEO&&Pe,USE_PROLIFIC:Oe,USE_FIREBASE:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE},(0,i.extend)(_e,Le));var Le;let Me={fixation:{durations:[250,500,750,1e3,1250,1500,1750,2e3],default_duration:1e3,randomize_duration:!1}};try{Me=o().merge(Me,n(91))}catch(Kb){console.warn("Unable to load task settings from config.json")}const je=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(je(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Ve;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(e){return function(e){const t=je(e);return Fe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Be=function(e){try{return Fe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ze(e[n],t[n]));return e}const qe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ke=()=>{try{return qe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},He=()=>{var e;return null===(e=Ke())||void 0===e?void 0:e.config};class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ge(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return!function(){var e;const t=null===(e=Ke())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){try{return"object"===typeof indexedDB}catch(e){return!1}}class $e extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Je,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new $e(n,o,t)}}const Je=/\{\$([^}]+)}/g;function Ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function et(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(tt(n)&&tt(o)){if(!et(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e,t){const n=new rt(e,t);return n.subscribe.bind(n)}class rt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=it),void 0===r.error&&(r.error=it),void 0===r.complete&&(r.complete=it);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function it(){}function ot(e){return e&&e._delegate?e._delegate:e}class st{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const at="[DEFAULT]";class lt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new We;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:at})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===at?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return this.component?this.component.multipleInstances?e:at:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ct=[];var ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ht||(ht={}));const dt={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},ft=ht.INFO,pt={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},mt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class gt{constructor(e){this.name=e,this._logLevel=ft,this._logHandler=mt,this._userLogHandler=null,ct.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const yt=(e,t)=>t.some((t=>e instanceof t));let vt,wt;const bt=new WeakMap,_t=new WeakMap,xt=new WeakMap,Tt=new WeakMap,Et=new WeakMap;let St={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ct(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function It(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(wt||(wt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(At(this),n),Ct(bt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ct(e.apply(At(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(At(this),t,...r);return xt.set(o,t.sort?t.sort():[t]),Ct(o)}}function kt(e){return"function"===typeof e?It(e):(e instanceof IDBTransaction&&function(e){if(_t.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));_t.set(e,t)}(e),yt(e,vt||(vt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,St):e)}function Ct(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Ct(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&bt.set(t,e)})).catch((()=>{})),Et.set(t,e),t}(e);if(Tt.has(e))return Tt.get(e);const t=kt(e);return t!==e&&(Tt.set(e,t),Et.set(t,e)),t}const At=e=>Et.get(e);const Dt=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],Pt=new Map;function Ot(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Pt.get(t))return Pt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Nt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Dt.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Pt.set(t,o),o}St=(e=>({...e,get:(t,n,r)=>Ot(t,n)||e.get(t,n,r),has:(t,n)=>!!Ot(t,n)||e.has(t,n)}))(St);class Rt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Lt="@firebase/app",Mt="0.9.23",jt=new gt("@firebase/app"),Ft="[DEFAULT]",Vt={[Lt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ut=new Map,Bt=new Map;function zt(e,t){try{e.container.addComponent(t)}catch(n){jt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function qt(e,t){e.container.addOrOverwriteComponent(t)}function Kt(e){const t=e.name;if(Bt.has(t))return jt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Bt.set(t,e);for(const n of Ut.values())zt(n,e);return!0}function Ht(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ft;Ht(e,t).clearInstance(n)}function Gt(){Bt.clear()}const Qt=new Xe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new st("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const $t="10.6.0";function Xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qt.create("bad-app-name",{appName:String(i)});if(n||(n=He()),!n)throw Qt.create("no-options");const o=Ut.get(i);if(o){if(et(n,o.options)&&et(r,o.config))return o;throw Qt.create("duplicate-app",{appName:i})}const s=new ut(i);for(const l of Bt.values())s.addComponent(l);const a=new Yt(n,r,s);return Ut.set(i,a),a}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft;const t=Ut.get(e);if(!t&&e===Ft&&He())return Xt();if(!t)throw Qt.create("no-app",{appName:e});return t}function Zt(){return Array.from(Ut.values())}async function en(e){const t=e.name;Ut.has(t)&&(Ut.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function tn(e,t,n){var r;let i=null!==(r=Vt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void jt.warn(e.join(" "))}Kt(new st("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function nn(e,t){if(null!==e&&"function"!==typeof e)throw Qt.create("invalid-log-argument");!function(e,t){for(const n of ct){let r=null;t&&t.level&&(r=dt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:ht[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function rn(e){var t;t=e,ct.forEach((e=>{e.setLogLevel(t)}))}const on="firebase-heartbeat-database",sn=1,an="firebase-heartbeat-store";let ln=null;function un(){return ln||(ln=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Ct(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Ct(s.result),e.oldVersion,e.newVersion,Ct(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(on,sn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(an)}}).catch((e=>{throw Qt.create("idb-open",{originalErrorMessage:e.message})}))),ln}async function cn(e,t){try{const n=(await un()).transaction(an,"readwrite"),r=n.objectStore(an);await r.put(t,hn(e)),await n.done}catch(n){if(n instanceof $e)jt.warn(n.message);else{const e=Qt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});jt.warn(e.message)}}}function hn(e){return"".concat(e.name,"!").concat(e.options.appId)}class dn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e;const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=fn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=fn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),mn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ue(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fn(){return(new Date).toISOString().substring(0,10)}class pn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ye()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Kb){t(Kb)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await un();return await t.transaction(an).objectStore(an).get(hn(e))}catch(t){if(t instanceof $e)jt.warn(t.message);else{const e=Qt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});jt.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function mn(e){return Ue(JSON.stringify({version:2,heartbeats:e})).length}var gn;gn="",Kt(new st("platform-logger",(e=>new Rt(e)),"PRIVATE")),Kt(new st("heartbeat",(e=>new dn(e)),"PRIVATE")),tn(Lt,Mt,gn),tn(Lt,Mt,"esm2017"),tn("fire-js","");class yn{constructor(e,t){this._delegate=e,this.firebase=t,zt(e,new st("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),en(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){zt(this._delegate,e)}_addOrOverwriteComponent(e){qt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const vn=new Xe("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const wn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ze(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:tn,setLogLevel:rn,onLog:nn,apps:null,SDK_VERSION:$t,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(Kt(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw vn.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&ze(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ze(n,e=e||Ft))throw vn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(yn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ze(n,e)},createSubscribe:nt,ErrorFactory:Xe,deepExtend:ze}),n}(),bn=new gt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){bn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&bn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _n=wn;!function(e){tn("@firebase/app-compat","0.2.23",e)}();_n.registerVersion("firebase","10.6.0","app-compat");var xn,Tn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},En={},Sn=Sn||{},In=Tn||self;function kn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Cn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var An="closure_uid_"+(1e9*Math.random()>>>0),Dn=0;function Nn(e,t,n){return e.call.apply(e.bind,arguments)}function Pn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function On(e,t,n){return(On=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nn:Pn).apply(null,arguments)}function Rn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ln(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Mn(){this.s=this.s,this.o=this.o}Mn.prototype.s=!1,Mn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,An)&&e[An]||(e[An]=++Dn))},Mn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Fn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Vn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(kn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Un(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Un.prototype.h=function(){this.defaultPrevented=!0};var Bn=function(){if(!In.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{In.addEventListener("test",(()=>{}),t),In.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function zn(e){return/^[\s\xa0]*$/.test(e)}function qn(){var e=In.navigator;return e&&(e=e.userAgent)?e:""}function Kn(e){return-1!=qn().indexOf(e)}function Hn(e){return Hn[" "](e),e}Hn[" "]=function(){};var Wn,Gn,Qn=Kn("Opera"),Yn=Kn("Trident")||Kn("MSIE"),$n=Kn("Edge"),Xn=$n||Yn,Jn=Kn("Gecko")&&!(-1!=qn().toLowerCase().indexOf("webkit")&&!Kn("Edge"))&&!(Kn("Trident")||Kn("MSIE"))&&!Kn("Edge"),Zn=-1!=qn().toLowerCase().indexOf("webkit")&&!Kn("Edge");function er(){var e=In.document;return e?e.documentMode:void 0}e:{var tr="",nr=function(){var e=qn();return Jn?/rv:([^\);]+)(\)|;)/.exec(e):$n?/Edge\/([\d\.]+)/.exec(e):Yn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Zn?/WebKit\/(\S+)/.exec(e):Qn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(nr&&(tr=nr?nr[1]:""),Yn){var rr=er();if(null!=rr&&rr>parseFloat(tr)){Wn=String(rr);break e}}Wn=tr}if(In.document&&Yn){var ir=er();Gn=ir||(parseInt(Wn,10)||void 0)}else Gn=void 0;var or=Gn;function sr(e,t){if(Un.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Jn){e:{try{Hn(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ar[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&sr.$.h.call(this)}}Ln(sr,Un);var ar={2:"touch",3:"pen",4:"mouse"};sr.prototype.h=function(){sr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var lr="closure_listenable_"+(1e6*Math.random()|0),ur=0;function cr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++ur,this.fa=this.ia=!1}function hr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function dr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function fr(e){const t={};for(const n in e)t[n]=e[n];return t}const pr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<pr.length;t++)n=pr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gr(e){this.src=e,this.g={},this.h=0}function yr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=jn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(hr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function vr(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}gr.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=vr(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new cr(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var wr="closure_lm_"+(1e6*Math.random()|0),br={};function _r(e,t,n,r,i){if(r&&r.once)return Tr(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)_r(e,t[o],n,r,i);return null}return n=Dr(n),e&&e[lr]?e.O(t,n,Cn(r)?!!r.capture:!!r,i):xr(e,t,n,!1,r,i)}function xr(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Cn(i)?!!i.capture:!!i,a=Cr(e);if(a||(e[wr]=a=new gr(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=kr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Bn||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ir(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Tr(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Tr(e,t[o],n,r,i);return null}return n=Dr(n),e&&e[lr]?e.P(t,n,Cn(r)?!!r.capture:!!r,i):xr(e,t,n,!0,r,i)}function Er(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Er(e,t[o],n,r,i);else r=Cn(r)?!!r.capture:!!r,n=Dr(n),e&&e[lr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=vr(o=e.g[t],n,r,i))&&(hr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Cr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=vr(t,n,r,i)),(n=-1<e?t[e]:null)&&Sr(n))}function Sr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[lr])yr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ir(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Cr(t))?(yr(n,e),0==n.h&&(n.src=null,t[wr]=null)):hr(e)}}}function Ir(e){return e in br?br[e]:br[e]="on"+e}function kr(e,t){if(e.fa)e=!0;else{t=new sr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Sr(e),e=n.call(r,t)}return e}function Cr(e){return(e=e[wr])instanceof gr?e:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dr(e){return"function"===typeof e?e:(e[Ar]||(e[Ar]=function(t){return e.handleEvent(t)}),e[Ar])}function Nr(){Mn.call(this),this.i=new gr(this),this.S=this,this.J=null}function Pr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Un(t,e);else if(t instanceof Un)t.target=t.target||e;else{var i=t;mr(t=new Un(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Or(s,r,!0,t)&&i}if(i=Or(s=t.g=e,r,!0,t)&&i,i=Or(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Or(s=t.g=n[o],r,!1,t)&&i}function Or(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&yr(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Ln(Nr,Mn),Nr.prototype[lr]=!0,Nr.prototype.removeEventListener=function(e,t,n,r){Er(this,e,t,n,r)},Nr.prototype.N=function(){if(Nr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hr(n[r]);delete t.g[e],t.h--}}this.J=null},Nr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Nr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Rr=In.JSON.stringify;function Lr(){var e=zr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Mr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new jr),(e=>e.reset()));class jr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Fr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Vr(e){In.setTimeout((()=>{throw e}),0)}let Ur,Br=!1,zr=new class{constructor(){this.h=this.g=null}add(e,t){const n=Mr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},qr=()=>{const e=In.Promise.resolve(void 0);Ur=()=>{e.then(Kr)}};var Kr=()=>{for(var e;e=Lr();){try{e.h.call(e.g)}catch(n){Vr(n)}var t=Mr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Br=!1};function Hr(e,t){Nr.call(this),this.h=e||1,this.g=t||In,this.j=On(this.qb,this),this.l=Date.now()}function Wr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Gr(e,t,n){if("function"===typeof e)n&&(e=On(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=On(e.handleEvent,e)}return 2147483647<Number(t)?-1:In.setTimeout(e,t||0)}function Qr(e){e.g=Gr((()=>{e.g=null,e.i&&(e.i=!1,Qr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ln(Hr,Nr),(xn=Hr.prototype).ga=!1,xn.T=null,xn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pr(this,"tick"),this.ga&&(Wr(this),this.start()))}},xn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xn.N=function(){Hr.$.N.call(this),Wr(this),delete this.g};class Yr extends Mn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(In.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(e){Mn.call(this),this.h=e,this.g={}}Ln($r,Mn);var Xr=[];function Jr(e,t,n,r){Array.isArray(n)||(n&&(Xr[0]=n.toString()),n=Xr);for(var i=0;i<n.length;i++){var o=_r(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Zr(e){dr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Sr(e)}),e),e.g={}}function ei(){this.g=!0}function ti(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Rr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}$r.prototype.N=function(){$r.$.N.call(this),Zr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ei.prototype.Ea=function(){this.g=!1},ei.prototype.info=function(){};var ni={},ri=null;function ii(){return ri=ri||new Nr}function oi(e){Un.call(this,ni.Ta,e)}function si(e){const t=ii();Pr(t,new oi(t))}function ai(e,t){Un.call(this,ni.STAT_EVENT,e),this.stat=t}function li(e){const t=ii();Pr(t,new ai(t,e))}function ui(e,t){Un.call(this,ni.Ua,e),this.size=t}function ci(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return In.setTimeout((function(){e()}),t)}ni.Ta="serverreachability",Ln(oi,Un),ni.STAT_EVENT="statevent",Ln(ai,Un),ni.Ua="timingevent",Ln(ui,Un);var hi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},di={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fi(){}function pi(e){return e.h||(e.h=e.i())}function mi(){}fi.prototype.h=null;var gi,yi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vi(){Un.call(this,"d")}function wi(){Un.call(this,"c")}function bi(){}function _i(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new $r(this),this.P=Ti,e=Xn?125:void 0,this.V=new Hr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new xi}function xi(){this.i=null,this.g="",this.h=!1}Ln(vi,Un),Ln(wi,Un),Ln(bi,fi),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},gi=new bi;var Ti=45e3,Ei={},Si={};function Ii(e,t,n){e.L=1,e.v=Hi(Ui(t)),e.s=n,e.S=!0,ki(e,null)}function ki(e,t){e.G=Date.now(),Ni(e),e.A=Ui(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),io(n.i,"t",r),e.C=0,n=e.l.J,e.h=new xi,e.g=ss(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Yr(On(e.Pa,e,e.g),e.O)),Jr(e.U,e.g,"readystatechange",e.nb),t=e.I?fr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),si(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ci(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ai(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Di(e,n),r==Si){4==t&&(e.o=4,li(14),i=!1),ti(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ei){e.o=4,li(15),ti(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ti(e.j,e.m,r,null),Mi(e,r)}Ci(e)&&r!=Si&&r!=Ei&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,li(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jo(t),t.M=!0,li(11))):(ti(e.j,e.m,n,"[Invalid Chunked Response]"),Li(e),Ri(e))}function Di(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Si:(n=Number(t.substring(n,r)),isNaN(n)?Ei:(r+=1)+n>t.length?Si:(t=t.slice(r,r+n),e.C=r+n,t))}function Ni(e){e.Y=Date.now()+e.P,Pi(e,e.P)}function Pi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ci(On(e.lb,e),t)}function Oi(e){e.B&&(In.clearTimeout(e.B),e.B=null)}function Ri(e){0==e.l.H||e.J||ts(e.l,e)}function Li(e){Oi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Wr(e.V),Zr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Mi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ho(n.i,e)))if(!e.K&&ho(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;es(n),Ko(n)}Xo(n),li(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ci(On(n.ib,n),6e3));if(1>=co(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else rs(n,11)}else if((e.K||n.g==e)&&es(n),!zn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(fo(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ki(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=os(r,r.J?r.pa:null,r.Y),s.K){po(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(Oi(a),Ni(a)),r.g=s}else $o(r);0<n.j.length&&Wo(n)}else"stop"!=u[0]&&"close"!=u[0]||rs(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?rs(n,7):qo(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}si()}catch(u){}}function ji(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(kn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(kn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(kn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(xn=_i.prototype).setTimeout=function(e){this.P=e},xn.nb=function(e){e=e.target;const t=this.M;t&&3==jo(e)?t.l():this.Pa(e)},xn.Pa=function(e){try{if(e==this.g)e:{const c=jo(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Xn||this.g&&(this.h.h||this.g.ja()||Fo(this.g)))){this.J||4!=c||7==t||si(),Oi(this);var n=this.g.da();this.ca=n;t:if(Ci(this)){var r=Fo(this.g);e="";var i=r.length,o=4==jo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Li(this),Ri(this);var s="";break t}this.h.i=new In.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,li(12),Li(this),Ri(this);break e}ti(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,n)}this.S?(Ai(this,c,s),Xn&&this.i&&3==c&&(Jr(this.U,this.V,"tick",this.mb),this.V.start())):(ti(this.j,this.m,s,null),Mi(this,s)),4==c&&Li(this),this.i&&!this.J&&(4==c?ts(this.l,this):(this.i=!1,Ni(this)))}else(function(e){const t={};e=(e.g&&2<=jo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(zn(e[r]))continue;var n=Fr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,li(12)):(this.o=0,li(13)),Li(this),Ri(this)}}}catch(c){}},xn.mb=function(){if(this.g){var e=jo(this.g),t=this.g.ja();this.C<t.length&&(Oi(this),Ai(this,e,t),this.i&&4!=e&&Ni(this))}},xn.cancel=function(){this.J=!0,Li(this)},xn.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(si(),li(17)),Li(this),this.o=2,Ri(this)):Pi(this,this.Y-e)};var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Vi){this.h=e.h,Bi(this,e.j),this.s=e.s,this.g=e.g,zi(this,e.m),this.l=e.l;var t=e.i,n=new eo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),qi(this,n),this.o=e.o}else e&&(t=String(e).match(Fi))?(this.h=!1,Bi(this,t[1]||"",!0),this.s=Wi(t[2]||""),this.g=Wi(t[3]||"",!0),zi(this,t[4]),this.l=Wi(t[5]||"",!0),qi(this,t[6]||"",!0),this.o=Wi(t[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}function Ui(e){return new Vi(e)}function Bi(e,t,n){e.j=n?Wi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function zi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function qi(e,t,n){t instanceof eo?(e.i=t,function(e,t){t&&!e.j&&(to(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(no(this,t),io(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Gi(t,Ji)),e.i=new eo(t,e.h))}function Ki(e,t,n){e.i.set(t,n)}function Hi(e){return Ki(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Qi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Qi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Vi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gi(t,Yi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gi(t,Yi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gi(n,"/"==n.charAt(0)?Xi:$i,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gi(n,Zi)),e.join("")};var Yi=/[#\/\?@]/g,$i=/[#\?:]/g,Xi=/[#\?]/g,Ji=/[#\?@]/g,Zi=/#/g;function eo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function to(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function no(e,t){to(e),t=oo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ro(e,t){return to(e),t=oo(e,t),e.g.has(t)}function io(e,t,n){no(e,t),0<n.length&&(e.i=null,e.g.set(oo(e,t),Fn(n)),e.h+=n.length)}function oo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(xn=eo.prototype).add=function(e,t){to(this),this.i=null,e=oo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},xn.forEach=function(e,t){to(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},xn.ta=function(){to(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},xn.Z=function(e){to(this);let t=[];if("string"===typeof e)ro(this,e)&&(t=t.concat(this.g.get(oo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},xn.set=function(e,t){return to(this),this.i=null,ro(this,e=oo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},xn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},xn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var so=class{constructor(e,t){this.g=e,this.map=t}};function ao(e){this.l=e||lo,In.PerformanceNavigationTiming?e=0<(e=In.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(In.g&&In.g.Ka&&In.g.Ka()&&In.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lo=10;function uo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function co(e){return e.h?1:e.g?e.g.size:0}function ho(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fo(e,t){e.g?e.g.add(t):e.h=t}function po(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Fn(e.i)}ao.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var go,yo=class{stringify(e){return In.JSON.stringify(e,void 0)}parse(e){return In.JSON.parse(e,void 0)}};function vo(){this.g=new yo}function wo(e,t,n){const r=n||"";try{ji(e,(function(e,n){let i=e;Cn(e)&&(i=Rr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function _o(e){this.l=e.ec||null,this.j=e.ob||!1}function xo(e,t){Nr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=To,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ln(_o,fi),_o.prototype.g=function(){return new xo(this.l,this.j)},_o.prototype.i=(go={},function(){return go}),Ln(xo,Nr);var To=0;function Eo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function So(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Io(e)}function Io(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(xn=xo.prototype).open=function(e,t){if(this.readyState!=To)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Io(this)},xn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||In).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},xn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,So(this)),this.readyState=To},xn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof In.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Eo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},xn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?So(this):Io(this),3==this.readyState&&Eo(this)}},xn.Za=function(e){this.g&&(this.response=this.responseText=e,So(this))},xn.Ya=function(e){this.g&&(this.response=e,So(this))},xn.ka=function(){this.g&&So(this)},xn.setRequestHeader=function(e,t){this.v.append(e,t)},xn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},xn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ko=In.JSON.parse;function Co(e){Nr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ao,this.L=this.M=!1}Ln(Co,Nr);var Ao="",Do=/^https?$/i,No=["POST","PUT"];function Po(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Oo(e),Lo(e)}function Oo(e){e.F||(e.F=!0,Pr(e,"complete"),Pr(e,"error"))}function Ro(e){if(e.h&&"undefined"!=typeof Sn&&(!e.C[1]||4!=jo(e)||2!=e.da()))if(e.v&&4==jo(e))Gr(e.La,0,e);else if(Pr(e,"readystatechange"),4==jo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Fi)[1]||null;!i&&In.self&&In.self.location&&(i=In.self.location.protocol.slice(0,-1)),r=!Do.test(i?i.toLowerCase():"")}n=r}if(n)Pr(e,"complete"),Pr(e,"success");else{e.m=6;try{var o=2<jo(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Oo(e)}}finally{Lo(e)}}}function Lo(e,t){if(e.g){Mo(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Pr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Mo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(In.clearTimeout(e.A),e.A=null)}function jo(e){return e.g?e.g.readyState:0}function Fo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ao:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Hs){return null}}function Vo(e){let t="";return dr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Uo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ki(e,t,n))}function Bo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zo(e){this.Ga=0,this.j=[],this.l=new ei,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bo("baseRetryDelayMs",5e3,e),this.hb=Bo("retryDelaySeedMs",1e4,e),this.eb=Bo("forwardChannelMaxRetries",2,e),this.xa=Bo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ao(e&&e.concurrentRequestLimit),this.Ja=new vo,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qo(e){if(Ho(e),3==e.H){var t=e.W++,n=Ui(e.I);if(Ki(n,"SID",e.K),Ki(n,"RID",t),Ki(n,"TYPE","terminate"),Qo(e,n),(t=new _i(e,e.l,t)).L=2,t.v=Hi(Ui(n)),n=!1,In.navigator&&In.navigator.sendBeacon)try{n=In.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&In.Image&&((new Image).src=t.v,n=!0),n||(t.g=ss(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ni(t)}is(e)}function Ko(e){e.g&&(Jo(e),e.g.cancel(),e.g=null)}function Ho(e){Ko(e),e.u&&(In.clearTimeout(e.u),e.u=null),es(e),e.i.cancel(),e.m&&("number"===typeof e.m&&In.clearTimeout(e.m),e.m=null)}function Wo(e){if(!uo(e.i)&&!e.m){e.m=!0;var t=e.Na;Ur||qr(),Br||(Ur(),Br=!0),zr.add(t,e),e.C=0}}function Go(e,t){var n;n=t?t.m:e.W++;const r=Ui(e.I);Ki(r,"SID",e.K),Ki(r,"RID",n),Ki(r,"AID",e.V),Qo(e,r),e.o&&e.s&&Uo(r,e.o,e.s),n=new _i(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Yo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),fo(e.i,n),Ii(n,r,t)}function Qo(e,t){e.na&&dr(e.na,(function(e,n){Ki(t,n,e)})),e.h&&ji({},(function(e,n){Ki(t,n,e)}))}function Yo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?On(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{wo(a,e,"req"+n+"_")}catch(ll){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function $o(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ur||qr(),Br||(Ur(),Br=!0),zr.add(t,e),e.A=0}}function Xo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ci(On(e.Ma,e),ns(e,e.A)),e.A++,!0)}function Jo(e){null!=e.B&&(In.clearTimeout(e.B),e.B=null)}function Zo(e){e.g=new _i(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ui(e.wa);Ki(t,"RID","rpc"),Ki(t,"SID",e.K),Ki(t,"AID",e.V),Ki(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ki(t,"TO",e.qa),Ki(t,"TYPE","xmlhttp"),Qo(e,t),e.o&&e.s&&Uo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Hi(Ui(t)),n.s=null,n.S=!0,ki(n,e)}function es(e){null!=e.v&&(In.clearTimeout(e.v),e.v=null)}function ts(e,t){var n=null;if(e.g==t){es(e),Jo(e),e.g=null;var r=2}else{if(!ho(e.i,t))return;n=t.F,po(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Pr(r=ii(),new ui(r,n)),Wo(e)}else $o(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(co(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ci(On(e.Na,e,t),ns(e,e.C)),e.C++,!0))}(e,t)||2==r&&Xo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rs(e,5);break;case 4:rs(e,10);break;case 3:rs(e,6);break;default:rs(e,2)}}function ns(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function rs(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=On(e.pb,e);n||(n=new Vi("//www.google.com/images/cleardot.gif"),In.location&&"http"==In.location.protocol||Bi(n,"https"),Hi(n)),function(e,t){const n=new ei;if(In.Image){const r=new Image;r.onload=Rn(bo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Rn(bo,n,r,"TestLoadImage: error",!1,t),r.onabort=Rn(bo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Rn(bo,n,r,"TestLoadImage: timeout",!1,t),In.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else li(2);e.H=0,e.h&&e.h.za(t),is(e),Ho(e)}function is(e){if(e.H=0,e.ma=[],e.h){const t=mo(e.i);0==t.length&&0==e.j.length||(Vn(e.ma,t),Vn(e.ma,e.j),e.i.i.length=0,Fn(e.j),e.j.length=0),e.h.ya()}}function os(e,t,n){var r=n instanceof Vi?Ui(n):new Vi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),zi(r,r.m);else{var i=In.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Vi(null);r&&Bi(o,r),t&&(o.g=t),i&&zi(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Ki(r,n,t),Ki(r,"VER",e.ra),Qo(e,r),r}function ss(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Co(new _o({ob:!0})):new Co(e.va)).Oa(e.J),t}function as(){}function ls(){if(Yn&&!(10<=Number(or)))throw Error("Environmental error: no available transport.")}function us(e,t){Nr.call(this),this.g=new zo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!zn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ds(this)}function cs(e){vi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hs(){wi.call(this),this.status=1}function ds(e){this.g=e}function fs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ps(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function ms(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(xn=Co.prototype).Oa=function(e){this.M=e},xn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gi.g(),this.C=this.u?pi(this.u):pi(gi),this.g.onreadystatechange=On(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Po(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=In.FormData&&e instanceof In.FormData,!(0<=jn(No,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Mo(this),0<this.B&&((this.L=function(e){return Yn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=On(this.ua,this)):this.A=Gr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Po(this,o)}},xn.ua=function(){"undefined"!=typeof Sn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},xn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Pr(this,"complete"),Pr(this,"abort"),Lo(this))},xn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lo(this,!0)),Co.$.N.call(this)},xn.La=function(){this.s||(this.G||this.v||this.l?Ro(this):this.kb())},xn.kb=function(){Ro(this)},xn.isActive=function(){return!!this.g},xn.da=function(){try{return 2<jo(this)?this.g.status:-1}catch(go){return-1}},xn.ja=function(){try{return this.g?this.g.responseText:""}catch(go){return""}},xn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ko(t)}},xn.Ia=function(){return this.m},xn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(xn=zo.prototype).ra=8,xn.H=1,xn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new _i(this,this.l,e);let o=this.s;if(this.U&&(o?(o=fr(o),mr(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yo(this,i,t),Ki(n=Ui(this.I),"RID",e),Ki(n,"CVER",22),this.F&&Ki(n,"X-HTTP-Session-Id",this.F),Qo(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Vo(o)))+"&"+t:this.o&&Uo(n,this.o,o)),fo(this.i,i),this.bb&&Ki(n,"TYPE","init"),this.P?(Ki(n,"$req",t),Ki(n,"SID","null"),i.aa=!0,Ii(i,n,null)):Ii(i,n,t),this.H=2}}else 3==this.H&&(e?Go(this,e):0==this.j.length||uo(this.i)||Go(this))},xn.Ma=function(){if(this.u=null,Zo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ci(On(this.jb,this),e)}},xn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,li(10),Ko(this),Zo(this))},xn.ib=function(){null!=this.v&&(this.v=null,Ko(this),Xo(this),li(19))},xn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),li(2)):(this.l.info("Failed to ping google.com"),li(1))},xn.isActive=function(){return!!this.h&&this.h.isActive(this)},(xn=as.prototype).Ba=function(){},xn.Aa=function(){},xn.za=function(){},xn.ya=function(){},xn.isActive=function(){return!0},xn.Va=function(){},ls.prototype.g=function(e,t){return new us(e,t)},Ln(us,Nr),us.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;li(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=os(e,null,e.Y),Wo(e)},us.prototype.close=function(){qo(this.g)},us.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Rr(e),e=n);t.j.push(new so(t.fb++,e)),3==t.H&&Wo(t)},us.prototype.N=function(){this.g.h=null,delete this.j,qo(this.g),delete this.g,us.$.N.call(this)},Ln(cs,vi),Ln(hs,wi),Ln(ds,as),ds.prototype.Ba=function(){Pr(this.g,"a")},ds.prototype.Aa=function(e){Pr(this.g,new cs(e))},ds.prototype.za=function(e){Pr(this.g,new hs)},ds.prototype.ya=function(){Pr(this.g,"b")},Ln(fs,(function(){this.blockSize=-1})),fs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)ps(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){ps(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){ps(this,r),i=0;break}}this.h=i,this.i+=t},fs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var gs={};function ys(e){return-128<=e&&128>e?function(e,t){var n=gs;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ms([0|e],0>e?-1:0)})):new ms([0|e],0>e?-1:0)}function vs(e){if(isNaN(e)||!isFinite(e))return bs;if(0>e)return Ss(vs(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ws;return new ms(t,0)}var ws=4294967296,bs=ys(0),_s=ys(1),xs=ys(16777216);function Ts(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Es(e){return-1==e.h}function Ss(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ms(n,~e.h).add(_s)}function Is(e,t){return e.add(Ss(t))}function ks(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Cs(e,t){this.g=e,this.h=t}function As(e,t){if(Ts(t))throw Error("division by zero");if(Ts(e))return new Cs(bs,bs);if(Es(e))return t=As(Ss(e),t),new Cs(Ss(t.g),Ss(t.h));if(Es(t))return t=As(e,Ss(t)),new Cs(Ss(t.g),t.h);if(30<e.g.length){if(Es(e)||Es(t))throw Error("slowDivide_ only works with positive integers.");for(var n=_s,r=t;0>=r.X(e);)n=Ds(n),r=Ds(r);var i=Ns(n,1),o=Ns(r,1);for(r=Ns(r,2),n=Ns(n,2);!Ts(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Ns(r,1),n=Ns(n,1)}return t=Is(e,i.R(t)),new Cs(i,t)}for(i=bs;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=vs(n)).R(t);Es(s)||0<s.X(e);)s=(o=vs(n-=r)).R(t);Ts(o)&&(o=_s),i=i.add(o),e=Is(e,s)}return new Cs(i,e)}function Ds(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ms(n,e.h)}function Ns(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new ms(i,e.h)}(xn=ms.prototype).ea=function(){if(Es(this))return-Ss(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ws+r)*t,t*=ws}return e},xn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ts(this))return"0";if(Es(this))return"-"+Ss(this).toString(e);for(var t=vs(Math.pow(e,6)),n=this,r="";;){var i=As(n,t).g,o=((0<(n=Is(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ts(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},xn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},xn.X=function(e){return Es(e=Is(this,e))?-1:Ts(e)?0:1},xn.abs=function(){return Es(this)?Ss(this):this},xn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ms(n,-2147483648&n[n.length-1]?-1:0)},xn.R=function(e){if(Ts(this)||Ts(e))return bs;if(Es(this))return Es(e)?Ss(this).R(Ss(e)):Ss(Ss(this).R(e));if(Es(e))return Ss(this.R(Ss(e)));if(0>this.X(xs)&&0>e.X(xs))return vs(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,ks(n,2*r+2*i),n[2*r+2*i+1]+=o*l,ks(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,ks(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,ks(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ms(n,0)},xn.gb=function(e){return As(this,e).h},xn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ms(n,this.h&e.h)},xn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ms(n,this.h|e.h)},xn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ms(n,this.h^e.h)},ls.prototype.createWebChannel=ls.prototype.g,us.prototype.send=us.prototype.u,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,di.COMPLETE="complete",mi.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",Nr.prototype.listen=Nr.prototype.O,Co.prototype.listenOnce=Co.prototype.P,Co.prototype.getLastError=Co.prototype.Sa,Co.prototype.getLastErrorCode=Co.prototype.Ia,Co.prototype.getStatus=Co.prototype.da,Co.prototype.getResponseJson=Co.prototype.Wa,Co.prototype.getResponseText=Co.prototype.ja,Co.prototype.send=Co.prototype.ha,Co.prototype.setWithCredentials=Co.prototype.Oa,fs.prototype.digest=fs.prototype.l,fs.prototype.reset=fs.prototype.reset,fs.prototype.update=fs.prototype.j,ms.prototype.add=ms.prototype.add,ms.prototype.multiply=ms.prototype.R,ms.prototype.modulo=ms.prototype.gb,ms.prototype.compare=ms.prototype.X,ms.prototype.toNumber=ms.prototype.ea,ms.prototype.toString=ms.prototype.toString,ms.prototype.getBits=ms.prototype.D,ms.fromNumber=vs,ms.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ss(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=vs(Math.pow(n,8)),i=bs,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=vs(Math.pow(n,s)),i=i.R(s).add(vs(a))):i=(i=i.R(r)).add(vs(a))}return i};var Ps=En.createWebChannelTransport=function(){return new ls},Os=En.getStatEventTarget=function(){return ii()},Rs=En.ErrorCode=hi,Ls=En.EventType=di,Ms=En.Event=ni,js=En.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Fs=En.FetchXmlHttpFactory=_o,Vs=En.WebChannel=mi,Us=En.XhrIo=Co,Bs=En.Md5=fs,zs=En.Integer=ms;const qs="@firebase/firestore";class Ks{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ks.UNAUTHENTICATED=new Ks(null),Ks.GOOGLE_CREDENTIALS=new Ks("google-credentials-uid"),Ks.FIRST_PARTY=new Ks("first-party-uid"),Ks.MOCK_USER=new Ks("mock-user");let Hs="10.5.2";const Ws=new gt("@firebase/firestore");function Gs(){return Ws.logLevel}function Qs(e){if(Ws.logLevel<=ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Xs);Ws.debug("Firestore (".concat(Hs,"): ").concat(e),...i)}}function Ys(e){if(Ws.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Xs);Ws.error("Firestore (".concat(Hs,"): ").concat(e),...i)}}function $s(e){if(Ws.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Xs);Ws.warn("Firestore (".concat(Hs,"): ").concat(e),...i)}}function Xs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Hs,") INTERNAL ASSERTION FAILED: ")+e;throw Ys(t),new Error(t)}function Zs(e,t){e||Js()}function ea(e,t){return e}const ta={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class na extends $e{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ra{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ia{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class oa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ks.UNAUTHENTICATED)))}shutdown(){}}class sa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class aa{constructor(e){this.t=e,this.currentUser=Ks.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ra,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Qs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Qs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ra)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Qs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zs("string"==typeof t.accessToken),new ia(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zs(null===e||"string"==typeof e),new Ks(e)}}class la{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ks.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ua{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new la(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ks.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ca{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ha{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Qs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Qs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Qs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Qs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Zs("string"==typeof e.token),this.R=e.token,new ca(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function da(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class fa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=da(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function pa(e,t){return e<t?-1:e>t?1:0}function ma(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function ga(e){return e+"\0"}class ya{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new na(ta.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new na(ta.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new na(ta.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new na(ta.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ya.fromMillis(Date.now())}static fromDate(e){return ya.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ya(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pa(this.nanoseconds,e.nanoseconds):pa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class va{constructor(e){this.timestamp=e}static fromTimestamp(e){return new va(e)}static min(){return new va(new ya(0,0))}static max(){return new va(new ya(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wa{constructor(e,t,n){void 0===t?t=0:t>e.length&&Js(),void 0===n?n=e.length-t:n>e.length-t&&Js(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ba extends wa{construct(e,t,n){return new ba(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new na(ta.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ba(e)}static emptyPath(){return new ba([])}}const _a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xa extends wa{construct(e,t,n){return new xa(e,t,n)}static isValidIdentifier(e){return _a.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new na(ta.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new na(ta.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new na(ta.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new na(ta.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xa(t)}static emptyPath(){return new xa([])}}class Ta{constructor(e){this.path=e}static fromPath(e){return new Ta(ba.fromString(e))}static fromName(e){return new Ta(ba.fromString(e).popFirst(5))}static empty(){return new Ta(ba.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ba.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ba.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ta(new ba(e.slice()))}}class Ea{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Sa(e){return e.fields.find((e=>2===e.kind))}function Ia(e){return e.fields.filter((e=>2!==e.kind))}Ea.UNKNOWN_ID=-1;class ka{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ca{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ca(0,Na.min())}}function Aa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=va.fromTimestamp(1e9===r?new ya(n+1,0):new ya(n,r));return new Na(i,Ta.empty(),t)}function Da(e){return new Na(e.readTime,e.key,-1)}class Na{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Na(va.min(),Ta.empty(),-1)}static max(){return new Na(va.max(),Ta.empty(),-1)}}function Pa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ta.comparator(e.documentKey,t.documentKey),0!==n?n:pa(e.largestBatchId,t.largestBatchId))}const Oa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ra{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function La(e){if(e.code!==ta.FAILED_PRECONDITION||e.message!==Oa)throw e;Qs("LocalStore","Unexpectedly lost primary lease")}class Ma{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Js(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ma(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ma?t:Ma.resolve(t)}catch(e){return Ma.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ma.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ma.reject(t)}static resolve(e){return new Ma(((t,n)=>{t(e)}))}static reject(e){return new Ma(((t,n)=>{n(e)}))}static waitFor(e){return new Ma(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Ma.resolve(!1);for(const n of e)t=t.next((e=>e?Ma.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ma(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ma(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class ja{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ra,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ua(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ha(t.target.error);this.V.reject(new Ua(e,n))}}static open(e,t,n,r){try{return new ja(t,e.transaction(r,n))}catch(e){throw new Ua(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Qs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new za(t)}}class Fa{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Fa.S(Ge())&&Ys("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qs("SimpleDb","Removing database:",e),qa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ye())return!1;if(Fa.C())return!0;const e=Ge(),t=Fa.S(e),n=0<t&&t<10,r=Fa.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Qs("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ua(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new na(ta.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new na(ta.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ua(e,r))},r.onupgradeneeded=e=>{Qs("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Qs("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=ja.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Ma.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Qs("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Va{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return qa(this.k.delete())}}class Ua extends na{constructor(e,t){super(ta.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ba(e){return"IndexedDbTransactionError"===e.name}class za{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Qs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qa(n)}add(e){return Qs("SimpleDb","ADD",this.store.name,e,e),qa(this.store.add(e))}get(e){return qa(this.store.get(e)).next((t=>(void 0===t&&(t=null),Qs("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Qs("SimpleDb","DELETE",this.store.name,e),qa(this.store.delete(e))}count(){return Qs("SimpleDb","COUNT",this.store.name),qa(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Ma(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ma(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Qs("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Ma(((n,r)=>{t.onerror=e=>{const t=Ha(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Ma(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Va(i),s=t(i.primaryKey,i.value,o);if(s instanceof Ma){const e=s.catch((e=>(o.done(),Ma.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>Ma.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qa(e){return new Ma(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ha(e.target.error);n(t)}}))}let Ka=!1;function Ha(e){const t=Fa.S(Ge());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new na("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ka||(Ka=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Wa{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Qs("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Qs("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){Ba(e)?Qs("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await La(e)}await this.ee(6e4)}))}}class Ga{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Ma.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Qs("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Qs("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Da(t);Pa(r,n)>0&&(n=r)})),new Na(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ya(e){return null==e}function $a(e){return 0===e&&1/e==-1/0}function Xa(e){return"number"==typeof e&&Number.isInteger(e)&&!$a(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ja(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=el(t)),t=Za(e.get(n),t);return el(t)}function Za(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function el(e){return e+"\x01\x01"}function tl(e){const t=e.length;if(Zs(t>=2),2===t)return Zs("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ba.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Js(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Js()}o=t+2}return new ba(r)}Qa._e=-1;const nl=["userId","batchId"];function rl(e,t){return[e,Ja(t)]}function il(e,t,n){return[e,Ja(t),n]}const ol={},sl=["prefixPath","collectionGroup","readTime","documentId"],al=["prefixPath","collectionGroup","documentId"],ll=["collectionGroup","readTime","prefixPath","documentId"],ul=["canonicalId","targetId"],cl=["targetId","path"],hl=["path","targetId"],dl=["collectionId","parent"],fl=["indexId","uid"],pl=["uid","sequenceNumber"],ml=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gl=["indexId","uid","orderedDocumentKey"],yl=["userId","collectionPath","documentId"],vl=["userId","collectionPath","largestBatchId"],wl=["userId","collectionGroup","largestBatchId"],bl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_l=[...bl,"documentOverlays"],xl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tl=xl,El=[...Tl,"indexConfiguration","indexState","indexEntries"];class Sl extends Ra{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Il(e,t){const n=ea(e);return Fa.M(n.ae,t)}function kl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Al(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Dl{constructor(e,t){this.comparator=e,this.root=t||Pl.EMPTY}insert(e,t){return new Dl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pl.BLACK,null,null))}remove(e){return new Dl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Pl.RED,this.left=null!=r?r:Pl.EMPTY,this.right=null!=i?i:Pl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Pl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Pl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Js();if(this.right.isRed())throw Js();const e=this.left.check();if(e!==this.right.check())throw Js();return e+(this.isRed()?0:1)}}Pl.EMPTY=null,Pl.RED=!0,Pl.BLACK=!1,Pl.EMPTY=new class{constructor(){this.size=0}get key(){throw Js()}get value(){throw Js()}get color(){throw Js()}get left(){throw Js()}get right(){throw Js()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Pl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ol{constructor(e){this.comparator=e,this.data=new Dl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rl(this.data.getIterator())}getIteratorFrom(e){return new Rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ol))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ol(this.comparator);return t.data=e,t}}class Rl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ll(e){return e.hasNext()?e.getNext():void 0}class Ml{constructor(e){this.fields=e,e.sort(xa.comparator)}static empty(){return new Ml([])}unionWith(e){let t=new Ol(xa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ml(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class jl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new jl("Invalid base64 string: "+e):e}}(e);return new Fl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Fl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fl.EMPTY_BYTE_STRING=new Fl("");const Vl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(e){if(Zs(!!e),"string"==typeof e){let t=0;const n=Vl.exec(e);if(Zs(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Bl(e.seconds),nanos:Bl(e.nanos)}}function Bl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zl(e){return"string"==typeof e?Fl.fromBase64String(e):Fl.fromUint8Array(e)}function ql(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kl(e){const t=e.mapValue.fields.__previous_value__;return ql(t)?Kl(t):t}function Hl(e){const t=Ul(e.mapValue.fields.__local_write_time__.timestampValue);return new ya(t.seconds,t.nanos)}class Wl{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}const Ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yl={nullValue:"NULL_VALUE"};function $l(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ql(e)?4:cu(e)?9007199254740991:10:Js()}function Xl(e,t){if(e===t)return!0;const n=$l(e);if(n!==$l(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hl(e).isEqual(Hl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ul(e.timestampValue),r=Ul(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zl(e.bytesValue).isEqual(zl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bl(e.geoPointValue.latitude)===Bl(t.geoPointValue.latitude)&&Bl(e.geoPointValue.longitude)===Bl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bl(e.integerValue)===Bl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Bl(e.doubleValue),r=Bl(t.doubleValue);return n===r?$a(n)===$a(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ma(e.arrayValue.values||[],t.arrayValue.values||[],Xl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(kl(n)!==kl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xl(n[i],r[i])))return!1;return!0}(e,t);default:return Js()}}function Jl(e,t){return void 0!==(e.values||[]).find((e=>Xl(e,t)))}function Zl(e,t){if(e===t)return 0;const n=$l(e),r=$l(t);if(n!==r)return pa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Bl(e.integerValue||e.doubleValue),r=Bl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return eu(e.timestampValue,t.timestampValue);case 4:return eu(Hl(e),Hl(t));case 5:return pa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=zl(e),r=zl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=pa(n[i],r[i]);if(0!==e)return e}return pa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pa(Bl(e.latitude),Bl(t.latitude));return 0!==n?n:pa(Bl(e.longitude),Bl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Zl(n[i],r[i]);if(e)return e}return pa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ql.mapValue&&t===Ql.mapValue)return 0;if(e===Ql.mapValue)return 1;if(t===Ql.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=pa(r[s],o[s]);if(0!==e)return e;const t=Zl(n[r[s]],i[o[s]]);if(0!==t)return t}return pa(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Js()}}function eu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pa(e,t);const n=Ul(e),r=Ul(t),i=pa(n.seconds,r.seconds);return 0!==i?i:pa(n.nanos,r.nanos)}function tu(e){return nu(e)}function nu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ul(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return zl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ta.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=nu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(nu(e.fields[i]));return n+"}"}(e.mapValue):Js()}function ru(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function iu(e){return!!e&&"integerValue"in e}function ou(e){return!!e&&"arrayValue"in e}function su(e){return!!e&&"nullValue"in e}function au(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lu(e){return!!e&&"mapValue"in e}function uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=uu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=uu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function cu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function hu(e){return"nullValue"in e?Yl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ru(Gl.empty(),Ta.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Js()}function du(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ru(Gl.empty(),Ta.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ql:Js()}function fu(e,t){const n=Zl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function pu(e,t){const n=Zl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class mu{constructor(e){this.value=e}static empty(){return new mu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=xa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=uu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());lu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];lu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Cl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new mu(uu(this.value))}}function gu(e){const t=[];return Cl(e.fields,((e,n)=>{const r=new xa([e]);if(lu(n)){const e=gu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ml(t)}class yu{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new yu(e,0,va.min(),va.min(),va.min(),mu.empty(),0)}static newFoundDocument(e,t,n,r){return new yu(e,1,t,va.min(),n,r,0)}static newNoDocument(e,t){return new yu(e,2,t,va.min(),va.min(),mu.empty(),0)}static newUnknownDocument(e,t){return new yu(e,3,t,va.min(),va.min(),mu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(va.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=va.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class vu{constructor(e,t){this.position=e,this.inclusive=t}}function wu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Ta.comparator(Ta.fromName(s.referenceValue),n.key):Zl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function bu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xl(e.position[n],t.position[n]))return!1;return!0}class _u{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function xu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Tu{}class Eu extends Tu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ru(e,t,n):"array-contains"===t?new Fu(e,n):"in"===t?new Vu(e,n):"not-in"===t?new Uu(e,n):"array-contains-any"===t?new Bu(e,n):new Eu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Lu(e,n):new Mu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zl(t,this.value)):null!==t&&$l(this.value)===$l(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Js()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Su extends Tu{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Su(e,t)}matches(e){return Iu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Iu(e){return"and"===e.op}function ku(e){return"or"===e.op}function Cu(e){return Au(e)&&Iu(e)}function Au(e){for(const t of e.filters)if(t instanceof Su)return!1;return!0}function Du(e){if(e instanceof Eu)return e.field.canonicalString()+e.op.toString()+tu(e.value);if(Cu(e))return e.filters.map((e=>Du(e))).join(",");{const t=e.filters.map((e=>Du(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Nu(e,t){return e instanceof Eu?function(e,t){return t instanceof Eu&&e.op===t.op&&e.field.isEqual(t.field)&&Xl(e.value,t.value)}(e,t):e instanceof Su?function(e,t){return t instanceof Su&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Nu(n,t.filters[r])),!0)}(e,t):void Js()}function Pu(e,t){const n=e.filters.concat(t);return Su.create(n,e.op)}function Ou(e){return e instanceof Eu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(tu(e.value))}(e):e instanceof Su?function(e){return e.op.toString()+" {"+e.getFilters().map(Ou).join(" ,")+"}"}(e):"Filter"}class Ru extends Eu{constructor(e,t,n){super(e,t,n),this.key=Ta.fromName(n.referenceValue)}matches(e){const t=Ta.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lu extends Eu{constructor(e,t){super(e,"in",t),this.keys=ju("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Mu extends Eu{constructor(e,t){super(e,"not-in",t),this.keys=ju("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ju(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ta.fromName(e.referenceValue)))}class Fu extends Eu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&Jl(t.arrayValue,this.value)}}class Vu extends Eu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jl(this.value.arrayValue,t)}}class Uu extends Eu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jl(this.value.arrayValue,t)}}class Bu extends Eu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Jl(this.value.arrayValue,e)))}}class zu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function qu(e){return new zu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ku(e){const t=ea(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Du(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ya(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>tu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>tu(e))).join(",")),t.ce=e}return t.ce}function Hu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bu(e.startAt,t.startAt)&&bu(e.endAt,t.endAt)}function Wu(e){return Ta.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Gu(e,t){return e.filters.filter((e=>e instanceof Eu&&e.field.isEqual(t)))}function Qu(e,t,n){let r=Yl,i=!0;for(const o of Gu(e,t)){let e=Yl,t=!0;switch(o.op){case"<":case"<=":e=hu(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Yl}fu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];fu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Yu(e,t,n){let r=Ql,i=!0;for(const o of Gu(e,t)){let e=Ql,t=!0;switch(o.op){case">=":case">":e=du(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Ql}pu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];pu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class $u{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Xu(e,t,n,r,i,o,s,a){return new $u(e,t,n,r,i,o,s,a)}function Ju(e){return new $u(e)}function Zu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ec(e){return null!==e.collectionGroup}function tc(e){const t=ea(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ol(xa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new _u(r,n))})),e.has(xa.keyField().canonicalString())||t.le.push(new _u(xa.keyField(),n))}return t.le}function nc(e){const t=ea(e);return t.he||(t.he=rc(t,tc(e))),t.he}function rc(e,t){if("F"===e.limitType)return qu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new _u(e.field,t)}));const n=e.endAt?new vu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new vu(e.startAt.position,e.startAt.inclusive):null;return qu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ic(e,t){const n=e.filters.concat([t]);return new $u(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function oc(e,t,n){return new $u(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sc(e,t){return Hu(nc(e),nc(t))&&e.limitType===t.limitType}function ac(e){return"".concat(Ku(nc(e)),"|lt:").concat(e.limitType)}function lc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ou(e))).join(", "),"]")),Ya(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>tu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>tu(e))).join(",")),"Target(".concat(t,")")}(nc(e)),"; limitType=").concat(e.limitType,")")}function uc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ta.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of tc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=wu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tc(e),t))&&!(e.endAt&&!function(e,t,n){const r=wu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tc(e),t))}(e,t)}function cc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hc(e){return(t,n)=>{let r=!1;for(const i of tc(e)){const e=dc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function dc(e,t,n){const r=e.field.isKeyField()?Ta.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zl(r,i):Js()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Js()}}class fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Al(this.inner)}size(){return this.innerSize}}const pc=new Dl(Ta.comparator);function mc(){return pc}const gc=new Dl(Ta.comparator);function yc(){let e=gc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function vc(e){let t=gc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function wc(){return _c()}function bc(){return _c()}function _c(){return new fc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const xc=new Dl(Ta.comparator),Tc=new Ol(Ta.comparator);function Ec(){let e=Tc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Sc=new Ol(pa);function Ic(){return Sc}function kc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(t)?"-0":t}}function Cc(e){return{integerValue:""+e}}function Ac(e,t){return Xa(t)?Cc(t):kc(e,t)}class Dc{constructor(){this._=void 0}}function Nc(e,t,n){return e instanceof Rc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ql(t)&&(t=Kl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Lc?Mc(e,t):e instanceof jc?Fc(e,t):function(e,t){const n=Oc(e,t),r=Uc(n)+Uc(e.Ie);return iu(n)&&iu(e.Ie)?Cc(r):kc(e.serializer,r)}(e,t)}function Pc(e,t,n){return e instanceof Lc?Mc(e,t):e instanceof jc?Fc(e,t):n}function Oc(e,t){return e instanceof Vc?function(e){return iu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Rc extends Dc{}class Lc extends Dc{constructor(e){super(),this.elements=e}}function Mc(e,t){const n=Bc(t);for(const r of e.elements)n.some((e=>Xl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class jc extends Dc{constructor(e){super(),this.elements=e}}function Fc(e,t){let n=Bc(t);for(const r of e.elements)n=n.filter((e=>!Xl(e,r)));return{arrayValue:{values:n}}}class Vc extends Dc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Uc(e){return Bl(e.integerValue||e.doubleValue)}function Bc(e){return ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class zc{constructor(e,t){this.field=e,this.transform=t}}class qc{constructor(e,t){this.version=e,this.transformResults=t}}class Kc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kc}static exists(e){return new Kc(void 0,e)}static updateTime(e){return new Kc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wc{}function Gc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rh(e.key,Kc.none()):new Jc(e.key,e.data,Kc.none());{const n=e.data,r=mu.empty();let i=new Ol(xa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Zc(e.key,r,new Ml(i.toArray()),Kc.none())}}function Qc(e,t,n){e instanceof Jc?function(e,t,n){const r=e.value.clone(),i=th(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zc?function(e,t,n){if(!Hc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=th(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(eh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yc(e,t,n,r){return e instanceof Jc?function(e,t,n,r){if(!Hc(e.precondition,t))return n;const i=e.value.clone(),o=nh(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Zc?function(e,t,n,r){if(!Hc(e.precondition,t))return n;const i=nh(e.fieldTransforms,r,t),o=t.data;return o.setAll(eh(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Hc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $c(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Oc(r.transform,e||null);null!=i&&(null===n&&(n=mu.empty()),n.set(r.field,i))}return n||null}function Xc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ma(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lc&&t instanceof Lc||e instanceof jc&&t instanceof jc?ma(e.elements,t.elements,Xl):e instanceof Vc&&t instanceof Vc?Xl(e.Ie,t.Ie):e instanceof Rc&&t instanceof Rc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jc extends Wc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Zc extends Wc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function th(e,t,n){const r=new Map;Zs(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Pc(s,a,n[i]))}return r}function nh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Nc(e,o,t))}return r}class rh extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ih extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Qc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Yc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Yc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=bc();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Gc(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(va.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ec())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,((e,t)=>Xc(e,t)))&&ma(this.baseMutations,e.baseMutations,((e,t)=>Xc(e,t)))}}class sh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Zs(e.mutations.length===n.length);let r=xc;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new sh(e,t,n,r)}}class ah{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class lh{constructor(e,t){this.count=e,this.unchangedNames=t}}var uh,ch;function hh(e){switch(e){default:return Js();case ta.CANCELLED:case ta.UNKNOWN:case ta.DEADLINE_EXCEEDED:case ta.RESOURCE_EXHAUSTED:case ta.INTERNAL:case ta.UNAVAILABLE:case ta.UNAUTHENTICATED:return!1;case ta.INVALID_ARGUMENT:case ta.NOT_FOUND:case ta.ALREADY_EXISTS:case ta.PERMISSION_DENIED:case ta.FAILED_PRECONDITION:case ta.ABORTED:case ta.OUT_OF_RANGE:case ta.UNIMPLEMENTED:case ta.DATA_LOSS:return!0}}function dh(e){if(void 0===e)return Ys("GRPC error has no .code"),ta.UNKNOWN;switch(e){case uh.OK:return ta.OK;case uh.CANCELLED:return ta.CANCELLED;case uh.UNKNOWN:return ta.UNKNOWN;case uh.DEADLINE_EXCEEDED:return ta.DEADLINE_EXCEEDED;case uh.RESOURCE_EXHAUSTED:return ta.RESOURCE_EXHAUSTED;case uh.INTERNAL:return ta.INTERNAL;case uh.UNAVAILABLE:return ta.UNAVAILABLE;case uh.UNAUTHENTICATED:return ta.UNAUTHENTICATED;case uh.INVALID_ARGUMENT:return ta.INVALID_ARGUMENT;case uh.NOT_FOUND:return ta.NOT_FOUND;case uh.ALREADY_EXISTS:return ta.ALREADY_EXISTS;case uh.PERMISSION_DENIED:return ta.PERMISSION_DENIED;case uh.FAILED_PRECONDITION:return ta.FAILED_PRECONDITION;case uh.ABORTED:return ta.ABORTED;case uh.OUT_OF_RANGE:return ta.OUT_OF_RANGE;case uh.UNIMPLEMENTED:return ta.UNIMPLEMENTED;case uh.DATA_LOSS:return ta.DATA_LOSS;default:return Js()}}(ch=uh||(uh={}))[ch.OK=0]="OK",ch[ch.CANCELLED=1]="CANCELLED",ch[ch.UNKNOWN=2]="UNKNOWN",ch[ch.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ch[ch.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ch[ch.NOT_FOUND=5]="NOT_FOUND",ch[ch.ALREADY_EXISTS=6]="ALREADY_EXISTS",ch[ch.PERMISSION_DENIED=7]="PERMISSION_DENIED",ch[ch.UNAUTHENTICATED=16]="UNAUTHENTICATED",ch[ch.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ch[ch.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ch[ch.ABORTED=10]="ABORTED",ch[ch.OUT_OF_RANGE=11]="OUT_OF_RANGE",ch[ch.UNIMPLEMENTED=12]="UNIMPLEMENTED",ch[ch.INTERNAL=13]="INTERNAL",ch[ch.UNAVAILABLE=14]="UNAVAILABLE",ch[ch.DATA_LOSS=15]="DATA_LOSS";let fh=null;function ph(){return new TextEncoder}const mh=new zs([4294967295,4294967295],0);function gh(e){const t=ph().encode(e),n=new Bs;return n.update(t),new Uint8Array(n.digest())}function yh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new zs([n,r],0),new zs([i,o],0)]}class vh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new wh("Invalid padding: ".concat(t));if(n<0)throw new wh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new wh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new wh("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=zs.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(zs.fromNumber(n)));return 1===r.compare(mh)&&(r=new zs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=gh(e),[n,r]=yh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new vh(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=gh(e),[n,r]=yh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bh(va.min(),r,new Dl(pa),mc(),Ec())}}class _h{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new _h(n,t,Ec(),Ec(),Ec())}}class xh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Th{constructor(e,t){this.targetId=e,this.fe=t}}class Eh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sh{constructor(){this.ge=0,this.pe=Ch(),this.ye=Fl.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ec(),t=Ec(),n=Ec();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Js()}})),new _h(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Ch()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class Ih{constructor(e){this.Le=e,this.ke=new Map,this.qe=mc(),this.Qe=kh(),this.Ke=new Dl(pa)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Js()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Wu(i))if(0===n){const e=new Ta(i.path);this.We(t,e,yu.newNoDocument(e,va.min()))}else Zs(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==fh||fh.tt(function(e,t,n,r,i){var o,s,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=zl(n).toUint8Array()}catch(e){if(e instanceof jl)return $s("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new vh(o,r,i)}catch(e){return $s(e instanceof wh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Wu(i.target)){const t=new Ta(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,yu.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Ec();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new bh(e,t,this.Ke,this.qe,n);return this.qe=mc(),this.Qe=kh(),this.Ke=new Dl(pa),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Sh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ol(pa),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Qs("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Sh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function kh(){return new Dl(Ta.comparator)}function Ch(){return new Dl(Ta.comparator)}const Ah={asc:"ASCENDING",desc:"DESCENDING"},Dh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nh={and:"AND",or:"OR"};class Ph{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Oh(e,t){return e.useProto3Json||Ya(t)?t:{value:t}}function Rh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Mh(e,t){return Rh(e,t.toTimestamp())}function jh(e){return Zs(!!e),va.fromTimestamp(function(e){const t=Ul(e);return new ya(t.seconds,t.nanos)}(e))}function Fh(e,t){return function(e){return new ba(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Vh(e){const t=ba.fromString(e);return Zs(ad(t)),t}function Uh(e,t){return Fh(e.databaseId,t.path)}function Bh(e,t){const n=Vh(t);if(n.get(1)!==e.databaseId.projectId)throw new na(ta.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new na(ta.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ta(Hh(n))}function zh(e,t){return Fh(e.databaseId,t)}function qh(e){const t=Vh(e);return 4===t.length?ba.emptyPath():Hh(t)}function Kh(e){return new ba(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hh(e){return Zs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wh(e,t,n){return{name:Uh(e,t),fields:n.value.mapValue.fields}}function Gh(e,t,n){const r=Bh(e,t.name),i=jh(t.updateTime),o=t.createTime?jh(t.createTime):va.min(),s=new mu({mapValue:{fields:t.fields}}),a=yu.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Qh(e,t){let n;if(t instanceof Jc)n={update:Wh(e,t.key,t.value)};else if(t instanceof rh)n={delete:Uh(e,t.key)};else if(t instanceof Zc)n={update:Wh(e,t.key,t.data),updateMask:sd(t.fieldMask)};else{if(!(t instanceof ih))return Js();n={verify:Uh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Rc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Js()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Mh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Js()}(e,t.precondition)),n}function Yh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Kc.updateTime(jh(e.updateTime)):void 0!==e.exists?Kc.exists(e.exists):Kc.none()}(t.currentDocument):Kc.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Zs("REQUEST_TIME"===t.setToServerValue),n=new Rc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Lc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new jc(e)}else"increment"in t?n=new Vc(e,t.increment):Js();const r=xa.fromServerFormat(t.fieldPath);return new zc(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Bh(e,t.update.name),o=new mu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ml(t.map((e=>xa.fromServerFormat(e))))}(t.updateMask);return new Zc(i,o,e,n,r)}return new Jc(i,o,n,r)}if(t.delete){const r=Bh(e,t.delete);return new rh(r,n)}if(t.verify){const r=Bh(e,t.verify);return new ih(r,n)}return Js()}function $h(e,t){return{documents:[zh(e,t.path)]}}function Xh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=zh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=zh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return od(Su.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:rd(e.field),direction:ed(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Oh(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Jh(e){let t=qh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zs(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Zh(e);return t instanceof Su&&Cu(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new _u(id(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ya(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new vu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new vu(n,t)}(n.endAt)),Xu(t,i,s,o,a,"F",l,u)}function Zh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=id(e.unaryFilter.field);return Eu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=id(e.unaryFilter.field);return Eu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=id(e.unaryFilter.field);return Eu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=id(e.unaryFilter.field);return Eu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Js()}}(e):void 0!==e.fieldFilter?function(e){return Eu.create(id(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Js()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Su.create(e.compositeFilter.filters.map((e=>Zh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Js()}}(e.compositeFilter.op))}(e):Js()}function ed(e){return Ah[e]}function td(e){return Dh[e]}function nd(e){return Nh[e]}function rd(e){return{fieldPath:e.canonicalString()}}function id(e){return xa.fromServerFormat(e.fieldPath)}function od(e){return e instanceof Eu?function(e){if("=="===e.op){if(au(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NAN"}};if(su(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(au(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NOT_NAN"}};if(su(e.value))return{unaryFilter:{field:rd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rd(e.field),op:td(e.op),value:e.value}}}(e):e instanceof Su?function(e){const t=e.getFilters().map((e=>od(e)));return 1===t.length?t[0]:{compositeFilter:{op:nd(e.op),filters:t}}}(e):Js()}function sd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ad(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ld{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:va.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:va.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new ld(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ld(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ud{constructor(e){this.ut=e}}function cd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Uh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Rh(e,t.version.toTimestamp()),createTime:Rh(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:dd(t.version)};else{if(!t.isUnknownDocument())return Js();r.unknownDocument={path:n.path.toArray(),version:dd(t.version)}}return r}function hd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function dd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function fd(e){const t=new ya(e.seconds,e.nanoseconds);return va.fromTimestamp(t)}function pd(e,t){const n=(t.baseMutations||[]).map((t=>Yh(e.ut,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Yh(e.ut,t))),i=ya.fromMillis(t.localWriteTimeMs);return new oh(t.batchId,i,n,r)}function md(e){const t=fd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?fd(e.lastLimboFreeSnapshotVersion):va.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Zs(1===e.documents.length),nc(Ju(qh(e.documents[0])))}(e.query):function(e){return nc(Jh(e))}(e.query),new ld(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Fl.fromBase64String(e.resumeToken))}function gd(e,t){const n=dd(t.snapshotVersion),r=dd(t.lastLimboFreeSnapshotVersion);let i;i=Wu(t.target)?$h(e.ut,t.target):Xh(e.ut,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ku(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yd(e){const t=Jh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oc(t,t.limit,"L"):t}function vd(e,t){return new ah(t.largestBatchId,Yh(e.ut,t.overlayMutation))}function wd(e,t){const n=t.path.lastSegment();return[e,Ja(t.path.popLast()),n]}function bd(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:dd(r.readTime),documentKey:Ja(r.documentKey.path),largestBatchId:r.largestBatchId}}class _d{getBundleMetadata(e,t){return xd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:fd(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return xd(e).put(function(e){return{bundleId:e.id,createTime:dd(jh(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Td(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:yd(e.bundledQuery),readTime:fd(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Td(e).put(function(e){return{name:e.name,readTime:dd(jh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function xd(e){return Il(e,"bundles")}function Td(e){return Il(e,"namedQueries")}class Ed{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new Ed(e,n)}getOverlay(e,t){return Sd(e).get(wd(this.userId,t)).next((e=>e?vd(this.serializer,e):null))}getOverlays(e,t){const n=wc();return Ma.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new ah(t,i);r.push(this.lt(e,o))})),Ma.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ja(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Sd(e).H("collectionPathOverlayIndex",r))})),Ma.waitFor(i)}getOverlaysForCollection(e,t,n){const r=wc(),i=Ja(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Sd(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=vd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=wc();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sd(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=vd(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return Sd(e).put(function(e,t,n){const[r,i,o]=wd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qh(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function Sd(e){return Il(e,"documentOverlays")}class Id{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Bl(e.integerValue));else if("doubleValue"in e){const n=Bl(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),$a(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(zl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?cu(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Js()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Ta.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function kd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Cd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=kd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Id.St=new Id;class Ad{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=Cd(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=Cd(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Dd{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Nd{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Pd{constructor(){this.Wt=new Ad,this.Gt=new Dd(this.Wt),this.zt=new Nd(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Od{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Od(this.indexId,this.documentKey,this.arrayValue,n)}}function Rd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Ld(e.arrayValue,t.arrayValue),0!==n?n:(n=Ld(e.directionalValue,t.directionalValue),0!==n?n:Ta.comparator(e.documentKey,t.documentKey)))}function Ld(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Md{constructor(e){this.Jt=new Ol(((e,t)=>xa.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Zs(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Sa(e);if(void 0!==t&&!this.tn(t))return!1;const n=Ia(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Yt.length||!this.rn(this.Yt[o++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ol(xa.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ka(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ka(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ka(n.field,"asc"===n.dir?0:1)));return new Ea(Ea.UNKNOWN_ID,this.collectionId,t,Ca.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jd(e){var t,n;if(Zs(e instanceof Eu||e instanceof Su),e instanceof Eu){if(e instanceof Vu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Eu.create(e.field,"==",t))))||[];return Su.create(r,"or")}return e}const r=e.filters.map((e=>jd(e)));return Su.create(r,e.op)}function Fd(e){if(0===e.getFilters().length)return[];const t=zd(jd(e));return Zs(Bd(t)),Vd(t)||Ud(t)?[t]:t.getFilters()}function Vd(e){return e instanceof Eu}function Ud(e){return e instanceof Su&&Cu(e)}function Bd(e){return Vd(e)||Ud(e)||function(e){if(e instanceof Su&&ku(e)){for(const t of e.getFilters())if(!Vd(t)&&!Ud(t))return!1;return!0}return!1}(e)}function zd(e){if(Zs(e instanceof Eu||e instanceof Su),e instanceof Eu)return e;if(1===e.filters.length)return zd(e.filters[0]);const t=e.filters.map((e=>zd(e)));let n=Su.create(t,e.op);return n=Hd(n),Bd(n)?n:(Zs(n instanceof Su),Zs(Iu(n)),Zs(n.filters.length>1),n.filters.reduce(((e,t)=>qd(e,t))))}function qd(e,t){let n;return Zs(e instanceof Eu||e instanceof Su),Zs(t instanceof Eu||t instanceof Su),n=e instanceof Eu?t instanceof Eu?function(e,t){return Su.create([e,t],"and")}(e,t):Kd(e,t):t instanceof Eu?Kd(t,e):function(e,t){if(Zs(e.filters.length>0&&t.filters.length>0),Iu(e)&&Iu(t))return Pu(e,t.getFilters());const n=ku(e)?e:t,r=ku(e)?t:e,i=n.filters.map((e=>qd(e,r)));return Su.create(i,"or")}(e,t),Hd(n)}function Kd(e,t){if(Iu(t))return Pu(t,e.getFilters());{const n=t.filters.map((t=>qd(e,t)));return Su.create(n,"or")}}function Hd(e){if(Zs(e instanceof Eu||e instanceof Su),e instanceof Eu)return e;const t=e.getFilters();if(1===t.length)return Hd(t[0]);if(Au(e))return e;const n=t.map((e=>Hd(e))),r=[];return n.forEach((t=>{t instanceof Eu?r.push(t):t instanceof Su&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Su.create(r,e.op)}class Wd{constructor(){this.on=new Gd}addToCollectionParentIndex(e,t){return this.on.add(t),Ma.resolve()}getCollectionParents(e,t){return Ma.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Ma.resolve()}deleteFieldIndex(e,t){return Ma.resolve()}deleteAllFieldIndexes(e){return Ma.resolve()}createTargetIndexes(e,t){return Ma.resolve()}getDocumentsMatchingTarget(e,t){return Ma.resolve(null)}getIndexType(e,t){return Ma.resolve(0)}getFieldIndexes(e,t){return Ma.resolve([])}getNextCollectionGroupToUpdate(e){return Ma.resolve(null)}getMinOffset(e,t){return Ma.resolve(Na.min())}getMinOffsetFromCollectionGroup(e,t){return Ma.resolve(Na.min())}updateCollectionGroup(e,t,n){return Ma.resolve()}updateIndexEntries(e,t){return Ma.resolve()}}class Gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ol(ba.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ol(ba.comparator)).toArray()}}const Qd=new Uint8Array(0);class Yd{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Gd,this.an=new fc((e=>Ku(e)),((e,t)=>Hu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Ja(r)};return $d(e).put(i)}return Ma.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[ga(t),""],!1,!0);return $d(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(tl(r.parent))}return n}))}addFieldIndex(e,t){const n=Jd(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Zd(e);return i.next((e=>{n.put(bd(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Jd(e),r=Zd(e),i=Xd(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jd(e),n=Xd(e),r=Zd(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Ma.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Md(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Xd(e);let r=!0;const i=new Map;return Ma.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ec();const r=[];return Ma.forEach(i,((i,o)=>{Qs("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Ku(t)));const s=function(e,t){const n=Sa(t);if(void 0===n)return null;for(const r of Gu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Ia(t))for(const t of Gu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Ia(t)){const t=0===i.kind?Qu(e,i.fieldPath,e.startAt):Yu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new vu(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of Ia(t)){const t=0===i.kind?Yu(e,i.fieldPath,e.endAt):Qu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new vu(n,r)}(o,i),c=this.ln(i,o,l),h=this.ln(i,o,u),d=this.hn(i,o,a),f=this.Pn(i.indexId,s,c,l.inclusive,h,u.inclusive,d);return Ma.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Ta.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Ma.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Fd(Su.create(e.filters,"and")).map((t=>qu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.In(t[c/l]):Qd,h=this.Tn(e,a,n[c%l],r),d=this.En(e,a,i[c%l],o),f=s.map((t=>this.Tn(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}Tn(e,t,n,r){const i=new Od(e,Ta.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new Od(e,Ta.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new Md(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return Ma.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Ol(xa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Pd;for(const r of Ia(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Id.St.ht(e,i)}return n.Ut()}In(e){const t=new Pd;return Id.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Pd;return Id.St.ht(ru(this.databaseId,t),n.jt(function(e){const t=Ia(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Pd);let i=0;for(const o of Ia(e)){const e=n[i++];for(const n of r)if(this.Rn(t,o.fieldPath)&&ou(e))r=this.Vn(r,o,e);else{const t=n.jt(o.kind);Id.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new Pd;n.seed(e.Ut()),Id.St.ht(o,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Eu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Jd(e),r=Zd(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Ma.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ca(t.sequenceNumber,new Na(fd(t.readTime),new Ta(tl(t.documentKey)),t.largestBatchId)):Ca.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ka(xa.fromServerFormat(t),n)}));return new Ea(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pa(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Jd(e),i=Zd(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Ma.forEach(t,(t=>i.put(bd(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Ma.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Ma.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Ma.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?Ma.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Xd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Xd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Xd(e);let i=new Ol(Rd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new Od(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new Ol(Rd);const r=this.dn(t,e);if(null==r)return n;const i=Sa(t);if(null!=i){const o=e.data.field(i.fieldPath);if(ou(o))for(const i of o.arrayValue.values||[])n=n.add(new Od(t.indexId,e.key,this.In(i),r))}else n=n.add(new Od(t.indexId,e.key,Qd,r));return n}yn(e,t,n,r,i){Qs("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Ll(o),l=Ll(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Ll(s)):t?(i(a),a=Ll(o)):(a=Ll(o),l=Ll(s))}}(r,i,Rd,(r=>{o.push(this.wn(e,t,n,r))}),(r=>{o.push(this.Sn(e,t,n,r))})),Ma.waitFor(o)}fn(e){let t=1;return Zd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Rd(e,t))).filter(((e,t,n)=>!t||0!==Rd(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=Rd(o,e),i=Rd(o,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(o),r.push(o.Ht());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Qd,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Qd,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Rd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ef)}getMinOffset(e,t){return Ma.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Js())))).next(ef)}}function $d(e){return Il(e,"collectionParents")}function Xd(e){return Il(e,"indexEntries")}function Jd(e){return Il(e,"indexConfiguration")}function Zd(e){return Il(e,"indexState")}function ef(e){Zs(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Pa(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Na(t.readTime,t.documentKey,n)}const tf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class nf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new nf(e,nf.DEFAULT_COLLECTION_PERCENTILE,nf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{Zs(1===a)})));const u=[];for(const c of n.mutations){const e=il(t,c.key.path,n.batchId);o.push(i.delete(e)),u.push(c.key)}return Ma.waitFor(o).next((()=>u))}function of(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Js();t=e.noDocument}return JSON.stringify(t).length}nf.DEFAULT_COLLECTION_PERCENTILE=10,nf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nf.DEFAULT=new nf(41943040,nf.DEFAULT_COLLECTION_PERCENTILE,nf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nf.DISABLED=new nf(-1,0,0);class sf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Zs(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new sf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lf(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=uf(e),o=lf(e);return o.add({}).next((s=>{Zs("number"==typeof s);const a=new oh(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Qh(e.ut,t))),i=n.mutations.map((t=>Qh(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new Ol(((e,t)=>pa(e.canonicalString(),t.canonicalString())));for(const e of r){const t=il(this.userId,e.key.path,s);c=c.add(e.key.path.popLast()),u.push(o.put(l)),u.push(i.put(t,ol))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[s]=a.keys()})),Ma.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return lf(e).get(t).next((e=>e?(Zs(e.userId===this.userId),pd(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?Ma.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return lf(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Zs(t.batchId>=n),i=pd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return lf(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lf(e).W("userMutationsIndex",t).next((e=>e.map((e=>pd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return uf(e).Y({range:r},((n,r,o)=>{const[s,a,l]=n,u=tl(a);if(s===this.userId&&t.path.isEqual(u))return lf(e).get(l).next((e=>{if(!e)throw Js();Zs(e.userId===this.userId),i.push(pd(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ol(pa);const r=[];return t.forEach((t=>{const i=rl(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=uf(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,l=tl(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),Ma.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rl(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Ol(pa);return uf(e).Y({range:o},((e,t,i)=>{const[o,a,l]=e,u=tl(a);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(s=s.add(l)):i.done()})).next((()=>this.vn(e,s)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(lf(e).get(t).next((e=>{if(null===e)throw Js();Zs(e.userId===this.userId),n.push(pd(this.serializer,e))})))})),Ma.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return rf(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),Ma.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ma.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return uf(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=tl(e[1]);r.push(t)}else n.done()})).next((()=>{Zs(0===r.length)}))}))}containsKey(e,t){return af(e,this.userId,t)}Mn(e){return cf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function af(e,t,n){const r=rl(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return uf(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function lf(e){return Il(e,"mutations")}function uf(e){return Il(e,"documentMutations")}function cf(e){return Il(e,"mutationQueues")}class hf{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new hf(0)}static Nn(){return new hf(-1)}}class df{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new hf(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>va.fromTimestamp(new ya(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ff(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Zs(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return ff(e).Y(((o,s)=>{const a=md(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Ma.waitFor(i))).next((()=>r))}forEachTarget(e,t){return ff(e).Y(((e,n)=>{const r=md(n);t(r)}))}Bn(e){return pf(e).get("targetGlobalKey").next((e=>(Zs(null!==e),e)))}Ln(e,t){return pf(e).put("targetGlobalKey",t)}kn(e,t){return ff(e).put(gd(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ku(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return ff(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=md(n);Hu(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=mf(e);return t.forEach((t=>{const o=Ja(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Ma.waitFor(r)}removeMatchingKeys(e,t,n){const r=mf(e);return Ma.forEach(t,(t=>{const i=Ja(t.path);return Ma.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=mf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mf(e);let i=Ec();return r.Y({range:n,J:!0},((e,t,n)=>{const r=tl(e[1]),o=new Ta(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Ja(t.path),r=IDBKeyRange.bound([n],[ga(n)],!1,!0);let i=0;return mf(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return ff(e).get(t).next((e=>e?md(e):null))}}function ff(e){return Il(e,"targets")}function pf(e){return Il(e,"targetGlobal")}function mf(e){return Il(e,"targetDocuments")}function gf(e,t){let[n,r]=e,[i,o]=t;const s=pa(n,i);return 0===s?pa(r,o):s}class yf{constructor(e){this.Qn=e,this.buffer=new Ol(gf),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Qs("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ba(e)?Qs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await La(e)}await this.Gn(3e5)}))}}class wf{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ma.resolve(Qa._e);const n=new yf(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qs("LruGarbageCollector","Garbage collection skipped; disabled"),Ma.resolve(tf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Qs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),tf):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,o,s,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Qs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Gs()<=ht.DEBUG&&Qs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Ma.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function bf(e,t){return new wf(e,t)}class _f{constructor(e,t){this.db=e,this.garbageCollector=bf(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return xf(e,n)}removeReference(e,t,n){return xf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return xf(e,t)}Xn(e,t){return function(e,t){let n=!1;return cf(e).Z((r=>af(e,r,t).next((e=>(e&&(n=!0),Ma.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((o,s)=>{if(s<=t){const t=this.Xn(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,va.min()),mf(e).delete(function(e){return[0,Ja(e.path)]}(o)))))}));r.push(t)}})).next((()=>Ma.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return xf(e,t)}Zn(e,t){const n=mf(e);let r,i=Qa._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==Qa._e&&t(new Ta(tl(r)),i),i=l,r=a):i=Qa._e})).next((()=>{i!==Qa._e&&t(new Ta(tl(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xf(e,t){return mf(e).put(function(e,t){return{targetId:0,path:Ja(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Tf{constructor(){this.changes=new fc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ma.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ef{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Cf(e).put(n)}removeEntry(e,t,n){return Cf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],hd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=yu.newInvalidDocument(t);return Cf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:yu.newInvalidDocument(t)};return Cf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},((e,r)=>{n={document:this.tr(t,r),size:of(r)}})).next((()=>n))}getEntries(e,t){let n=mc();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=mc(),r=new Dl(Ta.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,of(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return Ma.resolve();let r=new Ol(Nf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Af(r.first()),Af(r.last())),o=r.getIterator();let s=o.getNext();return Cf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ta.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&Nf(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(Af(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),hd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cf(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=mc();for(const i of e){const e=this.tr(Ta.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(uc(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=mc();const o=Df(t,n),s=Df(t,Na.max());return Cf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.tr(Ta.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new If(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return kf(e).get("remoteDocumentGlobalKey").next((e=>(Zs(!!e),e)))}er(e,t){return kf(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gh(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ta.fromSegments(t.noDocument.path),r=fd(t.noDocument.readTime);n=yu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Js();{const e=Ta.fromSegments(t.unknownDocument.path),r=fd(t.unknownDocument.version);n=yu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ya(e[0],e[1]);return va.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(va.min()))return e}return yu.newInvalidDocument(e)}}function Sf(e){return new Ef(e)}class If extends Tf{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new fc((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Ol(((e,t)=>pa(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=cd(this._r.serializer,o);r=r.add(i.path.popLast());const l=of(a);n+=l-s.size,t.push(this._r.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=cd(this._r.serializer,o.convertToNoDocument(va.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),Ma.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function kf(e){return Il(e,"remoteDocumentGlobal")}function Cf(e){return Il(e,"remoteDocumentsV14")}function Af(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Df(e,t){const n=t.documentKey.path.toArray();return[e,hd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Nf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=pa(n[o],r[o]),i)return i;return i=pa(n.length,r.length),i||(i=pa(n[n.length-2],r[r.length-2]),i||pa(n[n.length-1],r[r.length-1]))}class Pf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Of{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Yc(n.mutation,e,Ml.empty(),ya.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ec()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec();const r=wc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=yc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=wc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ec())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=mc();const o=_c(),s=_c();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Zc)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Yc(s.mutation,t,s.mutation.getFieldMask(),ya.now())):o.set(t.key,Ml.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Pf(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=_c();let r=new Dl(((e,t)=>e-t)),i=Ec();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Ml.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Ec()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,u=bc();l.forEach((e=>{if(!i.has(e)){const r=Gc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Ma.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ta.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ec(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ma.resolve(wc());let s=-1,a=i;return o.next((t=>Ma.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Ma.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ec()))).next((e=>({batchId:s,changes:vc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ta(t)).next((e=>{let t=yc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=yc();return this.indexManager.getCollectionParents(e,i).next((s=>Ma.forEach(s,(s=>{const a=function(e,t){return new $u(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,yu.newInvalidDocument(r)))}));let n=yc();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Yc(o.mutation,r,Ml.empty(),ya.now()),uc(t,r)&&(n=n.insert(e,r))})),n}))}}class Rf{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Ma.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:jh(e.createTime)}}(t)),Ma.resolve()}getNamedQuery(e,t){return Ma.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:yd(e.bundledQuery),readTime:jh(e.readTime)}}(t)),Ma.resolve()}}class Lf{constructor(){this.overlays=new Dl(Ta.comparator),this.lr=new Map}getOverlay(e,t){return Ma.resolve(this.overlays.get(t))}getOverlays(e,t){const n=wc();return Ma.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Ma.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Ma.resolve()}getOverlaysForCollection(e,t,n){const r=wc(),i=t.length+1,o=new Ta(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ma.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Dl(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=wc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=wc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Ma.resolve(s)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ah(t,n));let i=this.lr.get(t);void 0===i&&(i=Ec(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class Mf{constructor(){this.hr=new Ol(jf.Pr),this.Ir=new Ol(jf.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new jf(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new jf(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Ta(new ba([])),n=new jf(t,e),r=new jf(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Ta(new ba([])),n=new jf(t,e),r=new jf(t,e+1);let i=Ec();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new jf(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class jf{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Ta.comparator(e.key,t.key)||pa(e.gr,t.gr)}static Tr(e,t){return pa(e.gr,t.gr)||Ta.comparator(e.key,t.key)}}class Ff{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Ol(jf.Pr)}checkEmpty(e){return Ma.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oh(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.yr=this.yr.add(new jf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Ma.resolve(o)}lookupMutationBatch(e,t){return Ma.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Ma.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ma.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Ma.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new jf(t,0),r=new jf(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Ma.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ol(pa);return t.forEach((e=>{const t=new jf(e,0),r=new jf(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Ma.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ta.isDocumentKey(i)||(i=i.child(""));const o=new jf(new Ta(i),0);let s=new Ol(pa);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gr)),!0)}),o),Ma.resolve(this.br(s))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Zs(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Ma.forEach(t.mutations,(r=>{const i=new jf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new jf(t,0),r=this.yr.firstAfterOrEqual(n);return Ma.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ma.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vf{constructor(e){this.Cr=e,this.docs=new Dl(Ta.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ma.resolve(n?n.document.mutableCopy():yu.newInvalidDocument(t))}getEntries(e,t){let n=mc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():yu.newInvalidDocument(e))})),Ma.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=mc();const o=t.path,s=new Ta(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Pa(Da(s),n)<=0||(r.has(s.key)||uc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Ma.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Js()}vr(e,t){return Ma.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Uf(this)}getSize(e){return Ma.resolve(this.size)}}class Uf extends Tf{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Ma.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Bf{constructor(e){this.persistence=e,this.Fr=new fc((e=>Ku(e)),Hu),this.lastRemoteSnapshotVersion=va.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Mf,this.targetCount=0,this.Nr=hf.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Ma.resolve()}getLastRemoteSnapshotVersion(e){return Ma.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ma.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Ma.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Ma.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new hf(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Ma.resolve()}updateTargetData(e,t){return this.kn(t),Ma.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Ma.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Ma.waitFor(i).next((()=>r))}getTargetCount(e){return Ma.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Ma.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Ma.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ma.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Ma.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Ma.resolve(n)}containsKey(e,t){return Ma.resolve(this.Or.containsKey(t))}}class zf{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Qa(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Bf(this),this.indexManager=new Wd,this.remoteDocumentCache=function(e){return new Vf(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new ud(t),this.Kr=new Rf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Ff(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Qs("MemoryPersistence","Starting transaction:",e);const r=new qf(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Ma.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class qf extends Ra{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Gr=new Mf,this.zr=null}static jr(e){return new Kf(e)}get Hr(){if(this.zr)return this.zr;throw Js()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Ma.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Ma.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Ma.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ma.forEach(this.Hr,(n=>{const r=Ta.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,va.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Ma.or([()=>Ma.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Hf{constructor(e){this.serializer=e}N(e,t,n,r){const i=new ja("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nl,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Ma.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wf(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:va.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Ma.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Zr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(o=o.next((()=>this.ei(i)))),n<8&&r>=8&&(o=o.next((()=>this.ti(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ni(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:yl});t.createIndex("collectionPathOverlayIndex",vl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:sl});t.createIndex("documentKeyIndex",al),t.createIndex("collectionGroupIndex",ll)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.ii(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fl}).createIndex("sequenceNumberIndex",pl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ml}).createIndex("documentKeyIndex",gl,{unique:!1})}(e)))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=of(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Ma.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Ma.forEach(n,(n=>{Zs(n.userId===t.userId);const r=pd(this.serializer,n);return rf(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new ba(n),s=function(e){return[0,Ja(e)]}(o);r.push(t.get(s).next((n=>n?Ma.resolve():(n=>t.put({targetId:0,path:Ja(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Ma.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:dl});const n=t.store("collectionParents"),r=new Gd,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ja(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ba(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=tl(r);return i(s.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=md(n),i=gd(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Ta(ba.fromString(e.document.name).popFirst(5)):e.noDocument?Ta.fromSegments(e.noDocument.path):e.unknownDocument?Ta.fromSegments(e.unknownDocument.path):Js()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Ma.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=Sf(this.serializer),i=new zf(Kf.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ec();pd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Ma.forEach(n,((e,n)=>{const o=new Ks(n),s=Ed.ct(this.serializer,o),a=i.getIndexManager(o),l=sf.ct(o,this.serializer,a,i.referenceDelegate);return new Of(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Sl(t,Qa._e),e).next()}))}))}}function Wf(e){e.createObjectStore("targetDocuments",{keyPath:cl}).createIndex("documentTargetsIndex",hl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ul,{unique:!0}),e.createObjectStore("targetGlobal")}const Gf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qf{constructor(e,t,n,r,i,o,s,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=o,this.document=s,this.oi=l,this._i=u,this.ai=c,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Qf.D())throw new na(ta.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _f(this,r),this.Ii=t+"main",this.serializer=new ud(a),this.Ti=new Fa(this.Ii,this.ai,new Hf(this.serializer)),this.qr=new df(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sf(this.serializer),this.Kr=new _d,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===u&&Ys("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new na(ta.FAILED_PRECONDITION,Gf);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Qa(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Ba(e))return Qs("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return Yf(e).get("owner").next((e=>Ma.resolve(this.wi(e))))}Si(e){return $f(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Il(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Ma.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Ma.resolve(!0):Yf(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new na(ta.FAILED_PRECONDITION,Gf);return!1}}return!(!this.networkEnabled||!this.inForeground)||$f(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Qs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Sl(e,Qa._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>$f(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return sf.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yd(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ed.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Qs("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?El:14===e?Tl:13===e?xl:12===e?_l:11===e?bl:void Js()}(this.ai);let o;return this.Ti.runTransaction(e,r,i,(r=>(o=new Sl(r,this.Lr?this.Lr.next():Qa._e),"readwrite-primary"===t?this.fi(o).next((e=>!!e||this.gi(o))).next((t=>{if(!t)throw Ys("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new na(ta.FAILED_PRECONDITION,Oa);return n(o)})).next((e=>this.yi(o).next((()=>e)))):this.Li(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Li(e){return Yf(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new na(ta.FAILED_PRECONDITION,Gf)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yf(e).put("owner",t)}static D(){return Fa.D()}pi(e){const t=Yf(e);return t.get("owner").next((e=>this.wi(e)?(Qs("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ma.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ys("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;Qe()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Qs("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ys("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Ys("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Yf(e){return Il(e,"owner")}function $f(e){return Il(e,"clientMetadata")}function Xf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Jf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Ec(),r=Ec();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jf(e,t.fromCache,n,r)}}class Zf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ep{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Zf;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Gs()<=ht.DEBUG&&Qs("QueryEngine","SDK will not create cache indexes for query:",lc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Ma.resolve()):(Gs()<=ht.DEBUG&&Qs("QueryEngine","Query:",lc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Gs()<=ht.DEBUG&&Qs("QueryEngine","The SDK decides to create cache indexes for query:",lc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nc(t))):Ma.resolve())}zi(e,t){if(Zu(t))return Ma.resolve(null);let n=nc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=oc(t,null,"F"),n=nc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ec(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Yi(t,r);return this.Zi(t,o,i,n.readTime)?this.zi(e,oc(t,null,"F")):this.Xi(e,o,t,n)}))))})))))}ji(e,t,n,r){return Zu(t)||r.isEqual(va.min())?Ma.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const o=this.Yi(t,i);return this.Zi(t,o,n,r)?Ma.resolve(null):(Gs()<=ht.DEBUG&&Qs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lc(t)),this.Xi(e,o,t,Aa(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Ol(hc(e));return t.forEach(((t,r)=>{uc(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Gs()<=ht.DEBUG&&Qs("QueryEngine","Using full collection scan to execute query:",lc(t)),this.Gi.getDocumentsMatchingQuery(e,t,Na.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class tp{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Dl(pa),this.ns=new fc((e=>Ku(e)),Hu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Of(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function np(e,t,n,r){return new tp(e,t,n,r)}async function rp(e,t){const n=ea(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Ec();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function ip(e){const t=ea(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function op(e,t,n){let r=Ec(),i=Ec();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=mc();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(va.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Qs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{us:r,cs:i}}))}function sp(e,t){const n=ea(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ap(e,t){const n=ea(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Ma.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new ld(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function lp(e,t,n){const r=ea(e),i=r.ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ba(e))throw e;Qs("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function up(e,t,n){const r=ea(e);let i=va.min(),o=Ec();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ea(e),i=r.ns.get(n);return void 0!==i?Ma.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,nc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:va.min(),n?o:Ec()))).next((e=>(dp(r,cc(t),e),{documents:e,ls:o})))))}function cp(e,t){const n=ea(e),r=ea(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function hp(e,t){const n=ea(e),r=n.rs.get(t)||va.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,Aa(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(dp(n,t,e),e)))}function dp(e,t,n){let r=e.rs.get(t)||va.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec();const r=await ap(e,nc(yd(t.bundledQuery))),i=ea(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=jh(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(e,t);const s=r.withResumeToken(Fl.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(s.targetId,s),i.qr.updateTargetData(e,s).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function pp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function mp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function gp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class yp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new na(r.error.code,r.error.message))),o?new yp(e,t,r.state,i):(Ys("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new na(n.error.code,n.error.message))),i?new vp(e,n.state,r):(Ys("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ic();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Xa(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new wp(e,i):(Ys("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class bp{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bp(t.clientId,t.onlineState):(Ys("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class _p{constructor(){this.activeTargetIds=Ic()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xp{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Dl(pa),this.started=!1,this.ps=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=pp(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new _p),this.Ss=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(pp(this.persistenceKey,n));if(e){const t=wp.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(gp(this.persistenceKey,e));if(n){const r=vp.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gp(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Qs("SharedClientState","READ",e,t),t}setItem(e,t){Qs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Qs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Qs("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Ys("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Qa._e;if(null!=e)try{const n=JSON.parse(e);Zs("number"==typeof n),t=n}catch(e){Ys("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Qa._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new yp(this.currentUser,e,t,n),i=mp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=mp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=gp(this.persistenceKey,e),i=new vp(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return wp.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yp.Ts(new Ks(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return vp.Ts(r,t)}Ms(e){return bp.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Qs("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.Xs(o,s).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Ic();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Tp{constructor(){this.eo=new _p,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new _p,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ep{ro(e){}shutdown(){}}class Sp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Qs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Qs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ip=null;function kp(){return null===Ip?Ip=268435456+Math.round(2147483648*Math.random()):Ip++,"0x"+Ip.toString(16)}const Cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ap{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Dp="WebChannelConnection";class Np extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const o=kp(),s=this.So(e,t);Qs("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,s,a,n).then((t=>(Qs("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw $s("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}Co(e,t,n,r,i,o){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Cp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=kp();return new Promise(((o,s)=>{const a=new Us;a.setWithCredentials(!0),a.listenOnce(Ls.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Rs.NO_ERROR:const t=a.getResponseJson();Qs(Dp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Rs.TIMEOUT:Qs(Dp,"RPC '".concat(e,"' ").concat(i," timed out")),s(new na(ta.DEADLINE_EXCEEDED,"Request time out"));break;case Rs.HTTP_ERROR:const n=a.getStatus();if(Qs(Dp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ta).indexOf(t)>=0?t:ta.UNKNOWN}(t.status);s(new na(e,t.message))}else s(new na(ta.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new na(ta.UNAVAILABLE,"Connection failed."));break;default:Js()}}finally{Qs(Dp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Qs(Dp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=kp(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ps(),s=Os(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Fs({})),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Qs(Dp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=o.createWebChannel(u,a);let h=!1,d=!1;const f=new Ap({co:t=>{d?Qs(Dp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Qs(Dp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},lo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Vs.EventType.OPEN,(()=>{d||Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,Vs.EventType.CLOSE,(()=>{d||(d=!0,Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(c,Vs.EventType.ERROR,(t=>{d||(d=!0,$s(Dp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new na(ta.UNAVAILABLE,"The operation could not be completed")))})),p(c,Vs.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Zs(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=uh[e];if(void 0!==t)return dh(t)}(t),i=s.message;void 0===n&&(n=ta.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Ro(new na(n,i)),c.close()}else Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(s,Ms.STAT_EVENT,(t=>{t.stat===js.PROXY?Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===js.NOPROXY&&Qs(Dp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Pp(){return"undefined"!=typeof window?window:null}function Op(){return"undefined"!=typeof document?document:null}function Rp(e){return new Ph(e,!0)}class Lp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Qs("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Mp{constructor(e,t,n,r,i,o,s,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Lp(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===ta.RESOURCE_EXHAUSTED?(Ys(t.toString()),Ys("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===ta.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new na(ta.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Qs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Qs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jp extends Mp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Js()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Zs(void 0===t||"string"==typeof t),Fl.fromBase64String(t||"")):(Zs(void 0===t||t instanceof Uint8Array),Fl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?ta.UNKNOWN:dh(e.code);return new na(t,e.message||"")}(s);n=new Eh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bh(e,r.document.name),o=jh(r.document.updateTime),s=r.document.createTime?jh(r.document.createTime):va.min(),a=new mu({mapValue:{fields:r.document.fields}}),l=yu.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new xh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Bh(e,r.document),o=r.readTime?jh(r.readTime):va.min(),s=yu.newNoDocument(i,o),a=r.removedTargetIds||[];n=new xh([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Bh(e,r.document),o=r.removedTargetIds||[];n=new xh([],o,i,null)}else{if(!("filter"in t))return Js();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new lh(r,i),s=e.targetId;n=new Th(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return va.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?va.min():t.readTime?jh(t.readTime):va.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Kh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wu(r)?{documents:$h(e,r)}:{query:Xh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Lh(e,t.resumeToken);const r=Oh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(va.min())>0){n.readTime=Rh(e,t.snapshotVersion.toTimestamp());const r=Oh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Js()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Kh(this.serializer),t.removeTarget=e,this.e_(t)}}class Fp extends Mp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Zs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Zs(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?jh(e.updateTime):jh(t);return n.isEqual(va.min())&&(n=jh(t)),new qc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=jh(e.commitTime);return this.listener.I_(n,t)}return Zs(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Kh(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Qh(this.serializer,e)))};this.e_(t)}}class Vp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new na(ta.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.wo(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ta.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new na(ta.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ta.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new na(ta.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Up{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Ys(t),this.f_=!1):Qs("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Bp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{$p(this)&&(Qs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ea(e);t.C_.add(4),await qp(t),t.M_.set("Unknown"),t.C_.delete(4),await zp(t)}(this))}))})),this.M_=new Up(n,r)}}async function zp(e){if($p(e))for(const t of e.v_)await t(!0)}async function qp(e){for(const t of e.v_)await t(!1)}function Kp(e,t){const n=ea(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Yp(n)?Qp(n):pm(n).Ho()&&Wp(n,t))}function Hp(e,t){const n=ea(e),r=pm(n);n.D_.delete(t),r.Ho()&&Gp(n,t),0===n.D_.size&&(r.Ho()?r.Zo():$p(n)&&n.M_.set("Unknown"))}function Wp(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(va.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pm(e).u_(t)}function Gp(e,t){e.x_.Oe(t),pm(e).c_(t)}function Qp(e){e.x_=new Ih({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),pm(e).start(),e.M_.g_()}function Yp(e){return $p(e)&&!pm(e).jo()&&e.D_.size>0}function $p(e){return 0===ea(e).C_.size}function Xp(e){e.x_=void 0}async function Jp(e){e.D_.forEach(((t,n)=>{Wp(e,t)}))}async function Zp(e,t){Xp(e),Yp(e)?(e.M_.w_(t),Qp(e)):e.M_.set("Unknown")}async function em(e,t,n){if(e.M_.set("Online"),t instanceof Eh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Qs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tm(e,n)}else if(t instanceof xh?e.x_.$e(t):t instanceof Th?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(va.min()))try{const t=await ip(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(Fl.EMPTY_BYTE_STRING,r.snapshotVersion)),Gp(e,t);const i=new ld(r.target,t,n,r.sequenceNumber);Wp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Qs("RemoteStore","Failed to raise snapshot:",t),await tm(e,t)}}async function tm(e,t,n){if(!Ba(t))throw t;e.C_.add(1),await qp(e),e.M_.set("Offline"),n||(n=()=>ip(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Qs("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await zp(e)}))}function nm(e,t){return t().catch((n=>tm(e,n,t)))}async function rm(e){const t=ea(e),n=mm(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;im(t);)try{const e=await sp(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,om(t,e)}catch(e){await tm(t,e)}sm(t)&&am(t)}function im(e){return $p(e)&&e.b_.length<10}function om(e,t){e.b_.push(t);const n=mm(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function sm(e){return $p(e)&&!mm(e).jo()&&e.b_.length>0}function am(e){mm(e).start()}async function lm(e){mm(e).E_()}async function um(e){const t=mm(e);for(const n of e.b_)t.P_(n.mutations)}async function cm(e,t,n){const r=e.b_.shift(),i=sh.from(r,t,n);await nm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await rm(e)}async function hm(e,t){t&&mm(e).h_&&await async function(e,t){if(function(e){return hh(e)&&e!==ta.ABORTED}(t.code)){const n=e.b_.shift();mm(e).Yo(),await nm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rm(e)}}(e,t),sm(e)&&am(e)}async function dm(e,t){const n=ea(e);n.asyncQueue.verifyOperationInProgress(),Qs("RemoteStore","RemoteStore received new credentials");const r=$p(n);n.C_.add(3),await qp(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await zp(n)}async function fm(e,t){const n=ea(e);t?(n.C_.delete(2),await zp(n)):t||(n.C_.add(2),await qp(n),n.M_.set("Unknown"))}function pm(e){return e.O_||(e.O_=function(e,t,n){const r=ea(e);return r.A_(),new jp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Jp.bind(null,e),Io:Zp.bind(null,e),a_:em.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Yp(e)?Qp(e):e.M_.set("Unknown")):(await e.O_.stop(),Xp(e))}))),e.O_}function mm(e){return e.N_||(e.N_=function(e,t,n){const r=ea(e);return r.A_(),new Fp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:lm.bind(null,e),Io:hm.bind(null,e),T_:um.bind(null,e),I_:cm.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await rm(e)):(await e.N_.stop(),e.b_.length>0&&(Qs("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class gm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new gm(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new na(ta.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(e,t){if(Ys("AsyncQueue","".concat(t,": ").concat(e)),Ba(e))return new na(ta.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class vm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ta.comparator(t.key,n.key):(e,t)=>Ta.comparator(e.key,t.key),this.keyedMap=yc(),this.sortedSet=new Dl(this.comparator)}static emptySet(e){return new vm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new vm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wm{constructor(){this.B_=new Dl(Ta.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Js():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class bm{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new bm(e,t,vm.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class _m{constructor(){this.k_=void 0,this.listeners=[]}}class xm{constructor(){this.queries=new fc((e=>ac(e)),sc),this.onlineState="Unknown",this.q_=new Set}}async function Tm(e,t){const n=ea(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new _m),i)try{o.k_=await n.onListen(r)}catch(e){const n=ym(e,"Initialization of query '".concat(lc(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Q_(n.onlineState),o.k_&&t.K_(o.k_)&&km(n)}async function Em(e,t){const n=ea(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Sm(e,t){const n=ea(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&km(n)}function Im(e,t,n){const r=ea(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function km(e){e.q_.forEach((e=>{e.next()}))}class Cm{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new bm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=bm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Am{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Dm{constructor(e){this.serializer=e}hs(e){return Bh(this.serializer,e)}Ps(e){return e.metadata.exists?Gh(this.serializer,e.document,!1):yu.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return jh(e)}}class Nm{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=ba.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new Dm(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ec()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ea(e);let o=Ec(),s=mc();for(const u of n){const e=t.hs(u.metadata.name);u.document&&(o=o.add(e));const n=t.Ps(u);n.setReadTime(t.Is(u.metadata.readTime)),s=s.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await ap(i,function(e){return nc(Ju(ba.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>op(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new Dm(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await fp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function Pm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Om{constructor(e){this.key=e}}class Rm{constructor(e){this.key=e}}class Lm{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ec(),this.mutatedKeys=Ec(),this._a=hc(e),this.aa=new vm(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new wm,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=uc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ha(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this._a(c,a)>0||l&&this._a(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(s=!0)),f&&(c?(o=o.add(c),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:o,la:n,Zi:s,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const i=e.la.L_();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Js()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n);const o=t?this.Ia():[],s=0===this.oa.size&&this.current?1:0,a=s!==this.sa;return this.sa=s,0!==i.length||a?{snapshot:new bm(this.query,e.aa,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new wm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ec(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new Rm(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Om(n))})),t}da(e){this.ia=e.ls,this.oa=Ec();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return bm.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Mm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class jm{constructor(e){this.key=e,this.Ra=!1}}class Fm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new fc((e=>ac(e)),sc),this.fa=new Map,this.ga=new Set,this.pa=new Dl(Ta.comparator),this.ya=new Map,this.wa=new Mf,this.Sa={},this.ba=new Map,this.Da=hf.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Vm(e,t){const n=hg(e);let r,i;const o=n.ma.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const e=await ap(n.localStore,nc(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Um(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Kp(n.remoteStore,e)}return i}async function Um(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await up(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return Xm(e,t.targetId,s.Ta),s.snapshot}(e,t,n,r);const o=await up(e.localStore,t,!0),s=new Lm(t,o.ls),a=s.ca(o.documents),l=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,l);Xm(e,n,u.Ta);const c=new Mm(t,n,s);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),u.snapshot}async function Bm(e,t){const n=ea(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!sc(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Hp(n.remoteStore,r.targetId),Ym(n,r.targetId)})).catch(La)):(Ym(n,r.targetId),await lp(n.localStore,r.targetId,!0))}async function zm(e,t){const n=ea(e);try{const e=await function(e,t){const n=ea(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,o.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Fl.EMPTY_BYTE_STRING,va.min()).withLastLimboFreeSnapshotVersion(va.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&s.push(n.qr.updateTargetData(e,u))}));let a=mc(),l=Ec();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(op(e,o,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(va.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Ma.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Zs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Zs(r.Ra):e.removedDocuments.size>0&&(Zs(r.Ra),r.Ra=!1))})),await eg(n,e,t)}catch(e){await La(e)}}function qm(e,t,n){const r=ea(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ea(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&km(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Km(e,t,n){const r=ea(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),o=i&&i.key;if(o){let e=new Dl(Ta.comparator);e=e.insert(o,yu.newNoDocument(o,va.min()));const n=Ec().add(o),i=new bh(va.min(),new Map,new Dl(pa),e,n);await zm(r,i),r.pa=r.pa.remove(o),r.ya.delete(t),Zm(r)}else await lp(r.localStore,t,!1).then((()=>Ym(r,t,n))).catch(La)}async function Hm(e,t){const n=ea(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ea(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Ma.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Zs(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ec();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Qm(n,r,null),Gm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eg(n,e)}catch(e){await La(e)}}async function Wm(e,t,n){const r=ea(e);try{const e=await function(e,t){const n=ea(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Zs(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Qm(r,t,n),Gm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await eg(r,e)}catch(n){await La(n)}}function Gm(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Qm(e,t,n){const r=ea(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function Ym(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||$m(e,t)}))}function $m(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Hp(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Zm(e))}function Xm(e,t,n){for(const r of n)r instanceof Om?(e.wa.addReference(r.key,t),Jm(e,r)):r instanceof Rm?(Qs("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||$m(e,r.key)):Js()}function Jm(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Qs("SyncEngine","New document in limbo: "+n),e.ga.add(r),Zm(e))}function Zm(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Ta(ba.fromString(t)),r=e.Da.next();e.ya.set(r,new jm(n)),e.pa=e.pa.insert(n,r),Kp(e.remoteStore,new ld(nc(Ju(n.path)),r,"TargetPurposeLimboResolution",Qa._e))}}async function eg(e,t,n){const r=ea(e),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{s.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Jf.Qi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Va.a_(i),await async function(e,t){const n=ea(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ma.forEach(t,(t=>Ma.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ma.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ba(e))throw e;Qs("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,o))}async function tg(e,t){const n=ea(e);if(!n.currentUser.isEqual(t)){Qs("SyncEngine","User change. New user:",t.toKey());const e=await rp(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new na(ta.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await eg(n,e._s)}}function ng(e,t){const n=ea(e),r=n.ya.get(t);if(r&&r.Ra)return Ec().add(r.key);{let e=Ec();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function rg(e,t){const n=ea(e),r=await up(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&Xm(n,t.targetId,i.Ta),i}async function ig(e,t){const n=ea(e);return hp(n.localStore,t).then((e=>eg(n,e)))}async function og(e,t,n,r){const i=ea(e),o=await function(e,t){const n=ea(e),r=ea(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Ma.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await rm(i.remoteStore):"acknowledged"===n||"rejected"===n?(Qm(i,t,r||null),Gm(i,t),function(e,t){ea(ea(e).mutationQueue).Fn(t)}(i.localStore,t)):Js(),await eg(i,o)):Qs("SyncEngine","Cannot apply mutation batch with id: "+t)}async function sg(e,t,n){const r=ea(e),i=[],o=[];for(const s of t){let e;const t=r.fa.get(s);if(t&&0!==t.length){e=await ap(r.localStore,nc(t[0]));for(const e of t){const t=r.ma.get(e),n=await rg(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await cp(r.localStore,s);e=await ap(r.localStore,t),await Um(r,ag(t),s,!1,e.resumeToken)}i.push(e)}return r.Va.a_(o),i}function ag(e){return Xu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function lg(e){return function(e){return ea(ea(e).persistence).Bi()}(ea(e).localStore)}async function ug(e,t,n,r){const i=ea(e);if(i.Ca)return void Qs("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await hp(i.localStore,cc(o[0])),r=bh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Fl.EMPTY_BYTE_STRING);await eg(i,e,r);break}case"rejected":await lp(i.localStore,t,!0),Ym(i,t,r);break;default:Js()}}async function cg(e,t,n){const r=hg(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Qs("SyncEngine","Adding an already active target "+e);continue}const t=await cp(r.localStore,e),n=await ap(r.localStore,t);await Um(r,ag(t),n.targetId,!1,n.resumeToken),Kp(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await lp(r.localStore,e,!1).then((()=>{Hp(r.remoteStore,e),Ym(r,e)})).catch(La)}}function hg(e){const t=ea(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ng.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Km.bind(null,t),t.Va.a_=Sm.bind(null,t.eventManager),t.Va.Fa=Im.bind(null,t.eventManager),t}function dg(e){const t=ea(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wm.bind(null,t),t}class fg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Rp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return np(this.persistence,new ep,e.initialUser,this.serializer)}createPersistence(e){return new zf(Kf.jr,this.serializer)}createSharedClientState(e){return new Tp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pg extends fg{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await dg(this.xa.syncEngine),await rm(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return np(this.persistence,new ep,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new vf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ga(t,this.persistence);return new Wa(e.asyncQueue,n)}createPersistence(e){const t=Xf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nf.withCacheSize(this.cacheSizeBytes):nf.DEFAULT;return new Qf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Pp(),Op(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Tp}}class mg extends pg{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof xp&&(this.sharedClientState.syncEngine={Ys:og.bind(null,t),Zs:ug.bind(null,t),Xs:cg.bind(null,t),Bi:lg.bind(null,t),Js:ig.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=ea(e);if(hg(n),dg(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await sg(n,e.toArray());n.Ca=!0,await fm(n.remoteStore,!0);for(const r of t)Kp(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Ym(n,i),lp(n.localStore,i,!0)))),Hp(n.remoteStore,i)})),await t,await sg(n,e),function(e){const t=ea(e);t.ya.forEach(((e,n)=>{Hp(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new Dl(Ta.comparator)}(n),n.Ca=!1,await fm(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Pp();if(!xp.D(t))throw new na(ta.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=tg.bind(null,this.syncEngine),await fm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new xm}createDatastore(e){const t=Rp(e.databaseInfo.databaseId),n=function(e){return new Np(e)}(e.databaseInfo);return function(e,t,n,r){return new Vp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Bp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>qm(this.syncEngine,e,0)),Sp.D()?new Sp:new Ep)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Fm(e,t,n,r,i,o);return s&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ea(e);Qs("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await qp(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function yg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Ys("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class wg{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new ra,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new Am(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class bg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new na(ta.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=ea(e),r=Kh(n.serializer)+"/documents",i={documents:t.map((e=>Uh(n.serializer,e)))},o=await n.Co("BatchGetDocuments",r,i,t.length),s=new Map;o.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Zs(!!t.found),t.found.name,t.found.updateTime;const n=Bh(e,t.found.name),r=jh(t.found.updateTime),i=t.found.createTime?jh(t.found.createTime):va.min(),o=new mu({mapValue:{fields:t.found.fields}});return yu.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Zs(!!t.missing),Zs(!!t.readTime);const n=Bh(e,t.missing),r=jh(t.readTime);return yu.newNoDocument(n,r)}(e,t):Js()}(n.serializer,e);s.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=s.get(e.toString());Zs(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ta.fromPath(t);this.mutations.push(new ih(n,this.precondition(n)))})),await async function(e,t){const n=ea(e),r=Kh(n.serializer)+"/documents",i={writes:t.map((e=>Qh(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Js();t=va.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new na(ta.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(va.min())?Kc.exists(!1):Kc.updateTime(t):Kc.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(va.min()))throw new na(ta.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kc.updateTime(t)}return Kc.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _g{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new Lp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new bg(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Ya(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hh(t)}return!1}}class xg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ks.UNAUTHENTICATED,this.clientId=fa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Qs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Qs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new na(ta.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ym(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Tg(e,t){e.asyncQueue.verifyOperationInProgress(),Qs("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Eg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ig(e);Qs("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>dm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>dm(t.remoteStore,n))),e._onlineComponents=t}function Sg(e){return"FirebaseError"===e.name?e.code===ta.FAILED_PRECONDITION||e.code===ta.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ig(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Qs("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Sg(n))throw n;$s("Error using user provided cache. Falling back to memory cache: "+n),await Tg(e,new fg)}}else Qs("FirestoreClient","Using default OfflineComponentProvider"),await Tg(e,new fg);return e._offlineComponents}async function kg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Qs("FirestoreClient","Using user provided OnlineComponentProvider"),await Eg(e,e._uninitializedComponentsProvider._online)):(Qs("FirestoreClient","Using default OnlineComponentProvider"),await Eg(e,new gg))),e._onlineComponents}function Cg(e){return Ig(e).then((e=>e.persistence))}function Ag(e){return Ig(e).then((e=>e.localStore))}function Dg(e){return kg(e).then((e=>e.remoteStore))}function Ng(e){return kg(e).then((e=>e.syncEngine))}function Pg(e){return kg(e).then((e=>e.datastore))}async function Og(e){const t=await kg(e),n=t.eventManager;return n.onListen=Vm.bind(null,t.syncEngine),n.onUnlisten=Bm.bind(null,t.syncEngine),n}function Rg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ra;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new vg({next:o=>{t.enqueueAndForget((()=>Em(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new na(ta.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new na(ta.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Cm(Ju(n.path),o,{includeMetadataChanges:!0,J_:!0});return Tm(e,s)}(await Og(e),e.asyncQueue,t,n,r))),r.promise}function Lg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ra;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new vg({next:n=>{t.enqueueAndForget((()=>Em(e,s))),n.fromCache&&"server"===r.source?i.reject(new na(ta.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Cm(n,o,{includeMetadataChanges:!0,J_:!0});return Tm(e,s)}(await Og(e),e.asyncQueue,t,n,r))),r.promise}function Mg(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?ph().encode(e):e,function(e,t){return new wg(e,t)}(function(e,t){if(e instanceof Uint8Array)return yg(e,t);if(e instanceof ArrayBuffer)return yg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Rp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ea(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ea(e),r=jh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Pm(r));const i=new Nm(r,e.localStore,t.serializer);let o=await t.Ma();for(;o;){const e=await i.ea(o);e&&n._updateProgress(e),o=await t.Ma()}const s=await i.complete();return await eg(e,s.ra,void 0),await function(e,t){const n=ea(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.na)}catch(e){return $s("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Ng(e),i,r)}))}function jg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fg=new Map;function Vg(e,t,n){if(!n)throw new na(ta.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ug(e,t,n,r){if(!0===t&&!0===r)throw new na(ta.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Bg(e){if(!Ta.isDocumentKey(e))throw new na(ta.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zg(e){if(Ta.isDocumentKey(e))throw new na(ta.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function qg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Js()}function Kg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new na(ta.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qg(e);throw new na(ta.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Hg(e,t){if(t<=0)throw new na(ta.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Wg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new na(ta.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new na(ta.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ug("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new na(ta.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new na(ta.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new na(ta.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new na(ta.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new na(ta.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new oa;switch(e.type){case"firstParty":return new ua(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new na(ta.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fg.get(e);t&&(Qs("ComponentProvider","Removing Datastore"),Fg.delete(e),t.terminate())}(this),Promise.resolve()}}function Qg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Kg(e,Gg))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ks.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new na(ta.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ks(o)}e._authCredentials=new sa(new ia(t,n))}}class Yg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yg(this.firestore,e,this._query)}}class $g{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $g(this.firestore,e,this._key)}}class Xg extends Yg{constructor(e,t,n){super(e,t,Ju(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $g(this.firestore,null,new Ta(e))}withConverter(e){return new Xg(this.firestore,e,this._path)}}function Jg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ot(e),Vg("collection","path",t),e instanceof Gg){const n=ba.fromString(t,...r);return zg(n),new Xg(e,null,n)}{if(!(e instanceof $g||e instanceof Xg))throw new na(ta.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ba.fromString(t,...r));return zg(n),new Xg(e.firestore,null,n)}}function Zg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ot(e),1===arguments.length&&(t=fa.newId()),Vg("doc","path",t),e instanceof Gg){const n=ba.fromString(t,...r);return Bg(n),new $g(e,null,new Ta(n))}{if(!(e instanceof $g||e instanceof Xg))throw new na(ta.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ba.fromString(t,...r));return Bg(n),new $g(e.firestore,e instanceof Xg?e.converter:null,new Ta(n))}}function ey(e,t){return e=ot(e),t=ot(t),(e instanceof $g||e instanceof Xg)&&(t instanceof $g||t instanceof Xg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ty(e,t){return e=ot(e),t=ot(t),e instanceof Yg&&t instanceof Yg&&e.firestore===t.firestore&&sc(e._query,t._query)&&e.converter===t.converter}class ny{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Lp(this,"async_queue_retry"),this.iu=()=>{const e=Op();e&&Qs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Op();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Op();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new ra;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Ba(e))throw e;Qs("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ys("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=gm.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Js()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function ry(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class iy{constructor(){this._progressObserver={},this._taskCompletionResolver=new ra,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class oy extends Gg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ny,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ay(this),this._firestoreClient.terminate()}}function sy(e){return e._firestoreClient||ay(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ay(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Wl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,jg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new xg(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ly(e,t,n){const r=new ra;return e.asyncQueue.enqueue((async()=>{try{await Tg(e,n),await Eg(e,t),r.resolve()}catch(e){const n=e;if(!Sg(n))throw n;$s("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function uy(e){return function(e){const t=new ra;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ea(e);$p(n.remoteStore)||Qs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ea(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=ym(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Ng(e),t))),t.promise}(sy(e=Kg(e,oy)))}function cy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Cg(e),n=await Dg(e);return t.setNetworkEnabled(!0),function(e){const t=ea(e);return t.C_.delete(0),zp(t)}(n)}))}(sy(e=Kg(e,oy)))}function hy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Cg(e),n=await Dg(e);return t.setNetworkEnabled(!1),async function(e){const t=ea(e);t.C_.add(0),await qp(t),t.M_.set("Offline")}(n)}))}(sy(e=Kg(e,oy)))}function dy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ea(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await Ag(e),t)))}(sy(e=Kg(e,oy)),t).then((t=>t?new Yg(e,null,t.query):null))}function fy(e){if(e._initialized||e._terminated)throw new na(ta.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class py{constructor(e){this._byteString=e}static fromBase64String(e){try{return new py(Fl.fromBase64String(e))}catch(e){throw new na(ta.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new py(Fl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class my{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new na(ta.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gy{constructor(e){this._methodName=e}}class yy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new na(ta.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new na(ta.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pa(this._lat,e._lat)||pa(this._long,e._long)}}const vy=/^__.*__$/;class wy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Zc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}}class by{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Zc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _y(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Js()}}class xy{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return zy(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(_y(this.Iu)&&vy.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Ty{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rp(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new xy({Iu:e,methodName:t,gu:n,path:xa.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ey(e){const t=e._freezeSettings(),n=Rp(e._databaseId);return new Ty(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sy(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.pu(o.merge||o.mergeFields?2:0,t,n,i);Fy("Data must be an object, but it was:",s,r);const a=My(r,s);let l,u;if(o.merge)l=new Ml(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Vy(t,r,n);if(!s.contains(i))throw new na(ta.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));qy(e,i)||e.push(i)}l=new Ml(e),u=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=s.fieldTransforms;return new wy(new mu(a),l,u)}class Iy extends gy{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iy}}function ky(e,t,n){return new xy({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Cy extends gy{_toFieldTransform(e){return new zc(e.path,new Rc)}isEqual(e){return e instanceof Cy}}class Ay extends gy{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=ky(this,e,!0),n=this.yu.map((e=>Ly(e,t))),r=new Lc(n);return new zc(e.path,r)}isEqual(e){return this===e}}class Dy extends gy{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=ky(this,e,!0),n=this.yu.map((e=>Ly(e,t))),r=new jc(n);return new zc(e.path,r)}isEqual(e){return this===e}}class Ny extends gy{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Vc(e.serializer,Ac(e.serializer,this.wu));return new zc(e.path,t)}isEqual(e){return this===e}}function Py(e,t,n,r){const i=e.pu(1,t,n);Fy("Data must be an object, but it was:",i,r);const o=[],s=mu.empty();Cl(r,((e,r)=>{const a=By(t,e,n);r=ot(r);const l=i.Ru(a);if(r instanceof Iy)o.push(a);else{const e=Ly(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Ml(o);return new by(s,a,i.fieldTransforms)}function Oy(e,t,n,r,i,o){const s=e.pu(1,t,n),a=[Vy(t,r,n)],l=[i];if(o.length%2!=0)throw new na(ta.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(Vy(t,o[d])),l.push(o[d+1]);const u=[],c=mu.empty();for(let d=a.length-1;d>=0;--d)if(!qy(u,a[d])){const e=a[d];let t=l[d];t=ot(t);const n=s.Ru(e);if(t instanceof Iy)u.push(e);else{const r=Ly(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new Ml(u);return new by(c,h,s.fieldTransforms)}function Ry(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ly(n,e.pu(r?4:3,t))}function Ly(e,t){if(jy(e=ot(e)))return Fy("Unsupported field value:",t,e),My(e,t);if(e instanceof gy)return function(e,t){if(!_y(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ly(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ot(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ac(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ya.fromDate(e);return{timestampValue:Rh(t.serializer,n)}}if(e instanceof ya){const n=new ya(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Rh(t.serializer,n)}}if(e instanceof yy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof py)return{bytesValue:Lh(t.serializer,e._byteString)};if(e instanceof $g){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Fh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(qg(e)))}(e,t)}function My(e,t){const n={};return Al(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cl(e,((e,r)=>{const i=Ly(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ya||e instanceof yy||e instanceof py||e instanceof $g||e instanceof gy)}function Fy(e,t,n){if(!jy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=qg(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function Vy(e,t,n){if((t=ot(t))instanceof my)return t._internalPath;if("string"==typeof t)return By(e,t);throw zy("Field path arguments must be of type string or ",e,!1,void 0,n)}const Uy=new RegExp("[~\\*/\\[\\]]");function By(e,t,n){if(t.search(Uy)>=0)throw zy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new my(...t.split("."))._internalPath}catch(Ln){throw zy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function zy(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new na(ta.INVALID_ARGUMENT,a+e+l)}function qy(e,t){return e.some((e=>e.isEqual(t)))}class Ky{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $g(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hy extends Ky{data(){return super.data()}}function Wy(e,t){return"string"==typeof t?By(e,t):t instanceof my?t._internalPath:t._delegate._internalPath}function Gy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new na(ta.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qy{}class Yy extends Qy{}function $y(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Qy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Jy)).length,n=e.filter((e=>e instanceof Xy)).length;if(t>1||t>0&&n>0)throw new na(ta.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Xy extends Yy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xy(e,t,n)}_apply(e){const t=this._parse(e);return sv(e._query,t),new Yg(e.firestore,e.converter,ic(e._query,t))}_parse(e){const t=Ey(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new na(ta.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){ov(s,o);const t=[];for(const n of s)t.push(iv(r,e,n));a={arrayValue:{values:t}}}else a=iv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ov(s,o),a=Ry(n,t,s,"in"===o||"not-in"===o);return Eu.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Jy extends Qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Su.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)sv(n,i),n=ic(n,i)}(e._query,t),new Yg(e.firestore,e.converter,ic(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zy extends Yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new na(ta.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new na(ta.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(t,n)}(e._query,this._field,this._direction);return new Yg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new $u(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class ev extends Yy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ev(e,t,n)}_apply(e){return new Yg(e.firestore,e.converter,oc(e._query,this._limit,this._limitType))}}class tv extends Yy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new tv(e,t,n)}_apply(e){const t=rv(e,this.type,this._docOrFields,this._inclusive);return new Yg(e.firestore,e.converter,function(e,t){return new $u(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class nv extends Yy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new nv(e,t,n)}_apply(e){const t=rv(e,this.type,this._docOrFields,this._inclusive);return new Yg(e.firestore,e.converter,function(e,t){return new $u(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function rv(e,t,n,r){if(n[0]=ot(n[0]),n[0]instanceof Ky)return function(e,t,n,r,i){if(!r)throw new na(ta.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of tc(e))if(s.field.isKeyField())o.push(ru(t,r.key));else{const e=r.data.field(s.field);if(ql(e))throw new na(ta.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new na(ta.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new vu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Ey(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new na(ta.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new na(ta.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!ec(e)&&-1!==o.indexOf("/"))throw new na(ta.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(ba.fromString(o));if(!Ta.isDocumentKey(n))throw new na(ta.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ta(n);a.push(ru(t,i))}else{const e=Ry(n,r,o);a.push(e)}}return new vu(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function iv(e,t,n){if("string"==typeof(n=ot(n))){if(""===n)throw new na(ta.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ec(t)&&-1!==n.indexOf("/"))throw new na(ta.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ba.fromString(n));if(!Ta.isDocumentKey(r))throw new na(ta.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ru(e,new Ta(r))}if(n instanceof $g)return ru(e,n._key);throw new na(ta.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(qg(n),"."))}function ov(e,t){if(!Array.isArray(e)||0===e.length)throw new na(ta.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new na(ta.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new na(ta.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class av{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Js()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Cl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new yy(Bl(e.latitude),Bl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Kl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const t=Ul(e);return new ya(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ba.fromString(e);Zs(ad(n));const r=new Gl(n.get(1),n.get(3)),i=new Ta(n.popFirst(5));return r.isEqual(t)||Ys("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function lv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class uv extends av{constructor(e){super(),this.firestore=e}convertBytes(e){return new py(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $g(this.firestore,null,t)}}class cv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hv extends Ky{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new dv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Wy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class dv extends hv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class fv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new dv(this._firestore,this._userDataWriter,n.key,n,new cv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new na(ta.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new dv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new cv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new dv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:pv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Js()}}function mv(e,t){return e instanceof hv&&t instanceof hv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof fv&&t instanceof fv&&e._firestore===t._firestore&&ty(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class gv extends av{constructor(e){super(),this.firestore=e}convertBytes(e){return new py(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $g(this.firestore,null,t)}}function yv(e){e=Kg(e,$g);const t=Kg(e.firestore,oy),n=sy(t),r=new gv(t);return function(e,t){const n=new ra;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ea(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new na(ta.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ym(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Ag(e),t,n))),n.promise}(n,e._key).then((n=>new hv(t,r,e._key,n,new cv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function vv(e){e=Kg(e,Yg);const t=Kg(e.firestore,oy),n=sy(t),r=new gv(t);return function(e,t){const n=new ra;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await up(e,t,!0),i=new Lm(t,r.ls),o=i.ca(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=ym(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Ag(e),t,n))),n.promise}(n,e._query).then((n=>new fv(t,r,e,n)))}function wv(e,t,n){e=Kg(e,$g);const r=Kg(e.firestore,oy),i=lv(e.converter,t,n);return Tv(r,[Sy(Ey(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kc.none())])}function bv(e,t,n){e=Kg(e,$g);const r=Kg(e.firestore,oy),i=Ey(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=ot(t))||t instanceof my?Oy(i,"updateDoc",e._key,t,n,a):Py(i,"updateDoc",e._key,t),Tv(r,[o.toMutation(e._key,Kc.exists(!0))])}function _v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=ot(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||ry(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(ry(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,h,d;if(e instanceof $g)h=Kg(e.firestore,oy),d=Ju(e._key.path),c={next:t=>{n[l]&&n[l](Ev(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Kg(e,Yg);h=Kg(t.firestore,oy),d=t._query;const r=new gv(h);c={next:e=>{n[l]&&n[l](new fv(h,r,t,e))},error:n[l+1],complete:n[l+2]},Gy(e._query)}return function(e,t,n,r){const i=new vg(r),o=new Cm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Tm(await Og(e),o))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>Em(await Og(e),o)))}}(sy(h),d,u,c)}function xv(e,t){return function(e,t){const n=new vg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ea(e).q_.add(t),t.next()}(await Og(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ea(e).q_.delete(t)}(await Og(e),n)))}}(sy(e=Kg(e,oy)),ry(t)?t:{next:t})}function Tv(e,t){return function(e,t){const n=new ra;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=dg(e);try{const e=await function(e,t){const n=ea(e),r=ya.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ec());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=mc(),l=Ec();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=$c(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Zc(e.key,t,gu(t.value.mapValue),Kc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:vc(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new Dl(pa)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await eg(r,e.changes),await rm(r.remoteStore)}catch(e){const t=ym(e,"Failed to persist write");n.reject(t)}}(await Ng(e),t,n))),n.promise}(sy(e),t)}function Ev(e,t,n){const r=n.docs.get(t._key),i=new gv(e);return new hv(e,i,t._key,r,new cv(n.hasPendingWrites,n.fromCache),t.converter)}const Sv={maxAttempts:5};class Iv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ey(e)}set(e,t,n){this._verifyNotCommitted();const r=kv(e,this._firestore),i=lv(r.converter,t,n),o=Sy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Kc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=kv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=ot(t))||t instanceof my?Oy(this._dataReader,"WriteBatch.update",r._key,t,n,s):Py(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Kc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kv(e,this._firestore);return this._mutations=this._mutations.concat(new rh(t._key,Kc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new na(ta.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kv(e,t){if((e=ot(e)).firestore!==t)throw new na(ta.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Cv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ey(e)}get(e){const t=kv(e,this._firestore),n=new uv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Js();const r=e[0];if(r.isFoundDocument())return new Ky(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ky(this._firestore,n,t._key,null,t.converter);throw Js()}))}set(e,t,n){const r=kv(e,this._firestore),i=lv(r.converter,t,n),o=Sy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=kv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=ot(t))||t instanceof my?Oy(this._dataReader,"Transaction.update",r._key,t,n,s):Py(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=kv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kv(e,this._firestore),n=new gv(this._firestore);return super.get(e).then((e=>new hv(this._firestore,n,t._key,e._document,new cv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hs=e}($t),Kt(new st("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new oy(new aa(e.getProvider("auth-internal")),new ha(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new na(ta.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),tn(qs,"4.3.2",e),tn(qs,"4.3.2","esm2017")}();function Av(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new na("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Dv(){if("undefined"===typeof Uint8Array)throw new na("unimplemented","Uint8Arrays are not available in this environment.")}function Nv(){if("undefined"==typeof atob)throw new na("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Pv{constructor(e){this._delegate=e}static fromBase64String(e){return Nv(),new Pv(py.fromBase64String(e))}static fromUint8Array(e){return Dv(),new Pv(py.fromUint8Array(e))}toBase64(){return Nv(),this._delegate.toBase64()}toUint8Array(){return Dv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ov(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Rv{enableIndexedDbPersistence(e,t){return function(e,t){fy(e=Kg(e,oy));const n=sy(e);if(n._uninitializedComponentsProvider)throw new na(ta.FAILED_PRECONDITION,"SDK cache is already specified.");$s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new gg;return ly(n,i,new pg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){fy(e=Kg(e,oy));const t=sy(e);if(t._uninitializedComponentsProvider)throw new na(ta.FAILED_PRECONDITION,"SDK cache is already specified.");$s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new gg;return ly(t,r,new mg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new na(ta.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ra;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Fa.D())return Promise.resolve();const t=e+"main";await Fa.delete(t)}(Xf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Lv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||$s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Qg(this._delegate,e,t,n)}enableNetwork(){return cy(this._delegate)}disableNetwork(){return hy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ug("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uy(this._delegate)}onSnapshotsInSync(e){return xv(this._delegate,e)}get app(){if(!this._appCompat)throw new na("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yv(this,Jg(this._delegate,e))}catch(t){throw Bv(t,"collection()","Firestore.collection()")}}doc(e){try{return new Uv(this,Zg(this._delegate,e))}catch(t){throw Bv(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wv(this,function(e,t){if(e=Kg(e,Gg),Vg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new na(ta.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Yg(e,null,function(e){return new $u(ba.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Bv(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Kg(e,oy);const r=Object.assign(Object.assign({},Sv),n);return function(e){if(e.maxAttempts<1)throw new na(ta.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new ra;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Pg(e);new _g(e.asyncQueue,i,n,t,r).run()})),r.promise}(sy(e),(n=>t(new Cv(e,n))),r)}(this._delegate,(t=>e(new jv(this,t))))}batch(){return sy(this._delegate),new Fv(new Iv(this._delegate,(e=>Tv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=sy(e=Kg(e,oy)),r=new iy;return Mg(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return dy(this._delegate,e).then((e=>e?new Wv(this,e):null))}}class Mv extends av{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pv(new py(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Uv.forKey(t,this.firestore,null)}}class jv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mv(e)}get(e){const t=$v(e);return this._delegate.get(t).then((e=>new Kv(this._firestore,new hv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=$v(e);return n?(Av("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=$v(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=$v(e);return this._delegate.delete(t),this}}class Fv{constructor(e){this._delegate=e}set(e,t,n){const r=$v(e);return n?(Av("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=$v(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=$v(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new dv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Vv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Vv(e,new Mv(e),t),r.set(t,i)),i}}Vv.INSTANCES=new WeakMap;class Uv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new na("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Uv(t,new $g(t._delegate,n,new Ta(e)))}static forKey(e,t,n){return new Uv(t,new $g(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Yv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yv(this.firestore,Jg(this._delegate,e))}catch(t){throw Bv(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ot(e))instanceof $g&&ey(this._delegate,e)}set(e,t){t=Av("DocumentReference.set",t);try{return t?wv(this._delegate,e,t):wv(this._delegate,e)}catch(n){throw Bv(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?bv(this._delegate,e):bv(this._delegate,e,t,...r)}catch(o){throw Bv(o,"updateDoc()","DocumentReference.update()")}}delete(){return Tv(Kg((e=this._delegate).firestore,oy),[new rh(e._key,Kc.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=zv(t),i=qv(t,(e=>new Kv(this.firestore,new hv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return _v(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?yv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Kg(e,$g);const t=Kg(e.firestore,oy);return Rg(sy(t),e._key,{source:"server"}).then((n=>Ev(t,e,n)))}(this._delegate):function(e){e=Kg(e,$g);const t=Kg(e.firestore,oy);return Rg(sy(t),e._key).then((n=>Ev(t,e,n)))}(this._delegate),t.then((e=>new Kv(this.firestore,new hv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Uv(this.firestore,e?this._delegate.withConverter(Vv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bv(e,t,n){return e.message=e.message.replace(t,n),e}function zv(e){for(const t of e)if("object"===typeof t&&!Ov(t))return t;return{}}function qv(e,t){var n,r;let i;return i=Ov(e[0])?e[0]:Ov(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Kv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Uv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mv(this._delegate,e._delegate)}}class Hv extends Kv{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Js(),t}}class Wv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mv(e)}where(e,t,n){try{return new Wv(this.firestore,$y(this._delegate,function(e,t,n){const r=t,i=Wy("where",e);return Xy._create(i,r,n)}(e,t,n)))}catch(r){throw Bv(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Wv(this.firestore,$y(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Wy("orderBy",e);return Zy._create(n,t)}(e,t)))}catch(n){throw Bv(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wv(this.firestore,$y(this._delegate,(Hg("limit",t=e),ev._create("limit",t,"F"))))}catch(t){throw Bv(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Wv(this.firestore,$y(this._delegate,(Hg("limitToLast",t=e),ev._create("limitToLast",t,"L"))))}catch(t){throw Bv(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Wv(this.firestore,$y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tv._create("startAt",t,!0)}(...arguments)))}catch(e){throw Bv(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Wv(this.firestore,$y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tv._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Bv(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Wv(this.firestore,$y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nv._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Bv(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Wv(this.firestore,$y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nv._create("endAt",t,!0)}(...arguments)))}catch(e){throw Bv(e,"endAt()","Query.endAt()")}}isEqual(e){return ty(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?vv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Kg(e,Yg);const t=Kg(e.firestore,oy),n=sy(t),r=new gv(t);return Lg(n,e._query,{source:"server"}).then((n=>new fv(t,r,e,n)))}(this._delegate):function(e){e=Kg(e,Yg);const t=Kg(e.firestore,oy),n=sy(t),r=new gv(t);return Gy(e._query),Lg(n,e._query).then((n=>new fv(t,r,e,n)))}(this._delegate),t.then((e=>new Qv(this.firestore,new fv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=zv(t),i=qv(t,(e=>new Qv(this.firestore,new fv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return _v(this._delegate,r,i)}withConverter(e){return new Wv(this.firestore,e?this._delegate.withConverter(Vv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Gv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Qv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Wv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Hv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Gv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Hv(this._firestore,n))}))}isEqual(e){return mv(this._delegate,e._delegate)}}class Yv extends Wv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Uv(this.firestore,e):null}doc(e){try{return new Uv(this.firestore,void 0===e?Zg(this._delegate):Zg(this._delegate,e))}catch(t){throw Bv(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Kg(e.firestore,oy),r=Zg(e),i=lv(e.converter,t);return Tv(n,[Sy(Ey(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Kc.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Uv(this.firestore,e)))}isEqual(e){return ey(this._delegate,e._delegate)}withConverter(e){return new Yv(this.firestore,e?this._delegate.withConverter(Vv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $v(e){return Kg(e,$g)}class Xv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new my(...t)}static documentId(){return new Xv(xa.keyField().canonicalString())}isEqual(e){return(e=ot(e))instanceof my&&this._delegate._internalPath.isEqual(e._internalPath)}}class Jv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Cy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Jv(e)}static delete(){const e=new Iy("deleteField");return e._methodName="FieldValue.delete",new Jv(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ay("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Jv(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dy("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Jv(e)}static increment(e){const t=new Ny("increment",e);return t._methodName="FieldValue.increment",new Jv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Zv={Firestore:Lv,GeoPoint:yy,Timestamp:ya,Blob:Pv,Transaction:jv,WriteBatch:Fv,DocumentReference:Uv,DocumentSnapshot:Kv,Query:Wv,QueryDocumentSnapshot:Hv,QuerySnapshot:Qv,CollectionReference:Yv,FieldPath:Xv,FieldValue:Jv,setLogLevel:function(e){var t;t=e,Ws.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var ew,tw;(function(e,t){e.INTERNAL.registerComponent(new st("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Zv)))})(ew=_n,((e,t)=>new Lv(e,t,new Rv))),ew.registerVersion("@firebase/firestore-compat","0.3.22"),_n.initializeApp({apiKey:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_apiKey,authDomain:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_authDomain,databaseURL:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_databaseURL,projectId:null!==(tw={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_projectId)&&void 0!==tw?tw:"no-firebase",storageBucket:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_storageBucket,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_messagingSenderId,appId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_appId});const nw=_n.firestore();"localhost"===window.location.hostname&&nw.useEmulator("localhost",8080);const rw=(e,t)=>nw.doc("participant_responses/".concat(e,"/participants/").concat(t)),iw=(e,t,n)=>nw.doc("".concat(rw(e,t).path,"/data/").concat(n));var ow=n(184);function sw(){return(0,ow.jsx)("div",{className:"centered-h-v",children:(0,ow.jsx)("div",{className:"width-50 alert alert-danger",children:"Please ask your task provider to enable firebase."})})}function aw(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=0===Object.keys(r).length?"":" "+Object.entries(r).map((e=>{let[t,n]=e;return"".concat(t,'="').concat(n,'"')})).join(" "),"<".concat(e).concat(n,">").concat(t,"</").concat(e,">")}function lw(e){return aw("b",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function uw(e){return aw("div",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function cw(e){return aw("p",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function hw(){const e=function(e){return aw("span",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}("",{id:"photodiode-spot",class:"photodiode-spot"});return uw(e,{id:"photodiode-box",class:Re.USE_PHOTODIODE?"photodiode-box visible":"photodiode-box invisible"})}function dw(e){return uw(e,{class:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"center_container":arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"main-prompt":"main"})}function fw(e){const t=function(e){return aw("h1",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(Se.trials.camera.start);return{type:fe,stimulus:dw(t,!0)+hw(),trial_duration:e,on_load:()=>{if(Re.USE_CAMERA){try{window.cameraCapture.stop(),window.screenCapture.stop()}catch(Kb){window.alert("Your video recording was not saved")}console.log("Recording finished")}}}}const pw={name:"fullscreen",parameters:{fullscreen_mode:{type:f.BOOL,pretty_name:"Fullscreen mode",default:!0,array:!1},message:{type:f.HTML_STRING,pretty_name:"Message",default:"<p>The experiment will switch to full screen mode when you press the button below</p>",array:!1},button_label:{type:f.STRING,pretty_name:"Button label",default:"Continue",array:!1},delay_after:{type:f.INT,pretty_name:"Delay after",default:1e3,array:!1}}};class mw{constructor(e){this.jsPsych=e,this.rt=null,this.start_time=0}trial(e,t){"undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element?this.endTrial(e,!1,t):t.fullscreen_mode?this.showDisplay(e,t):(this.exitFullScreen(),this.endTrial(e,!0,t))}showDisplay(e,t){e.innerHTML="\n      ".concat(t.message,'\n      <button id="jspsych-fullscreen-btn" class="jspsych-btn">').concat(t.button_label,"</button>\n    "),e.querySelector("#jspsych-fullscreen-btn").addEventListener("click",(()=>{this.rt=Math.round(performance.now()-this.start_time),this.enterFullScreen(),this.endTrial(e,!0,t)})),this.start_time=performance.now()}endTrial(e,t,n){e.innerHTML="",this.jsPsych.pluginAPI.setTimeout((()=>{var e={success:t,rt:this.rt};this.jsPsych.finishTrial(e)}),n.delay_after)}enterFullScreen(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}exitFullScreen(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={success:!0,rt:this.jsPsych.randomization.sampleExGaussian(1e3,100,.005,!0)};return this.jsPsych.pluginAPI.mergeSimulationData(n,t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();!1===r.success?this.endTrial(i,!1,e):(this.trial(i,e),n(),this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-fullscreen-btn"),r.rt))}}mw.info=pw;const gw={type:mw,fullscreen_mode:!0},yw={type:mw,fullscreen_mode:!1},vw={name:"instructions",parameters:{pages:{type:f.HTML_STRING,pretty_name:"Pages",default:void 0,array:!0},key_forward:{type:f.KEY,pretty_name:"Key forward",default:"ArrowRight"},key_backward:{type:f.KEY,pretty_name:"Key backward",default:"ArrowLeft"},allow_backward:{type:f.BOOL,pretty_name:"Allow backward",default:!0},allow_keys:{type:f.BOOL,pretty_name:"Allow keys",default:!0},show_clickable_nav:{type:f.BOOL,pretty_name:"Show clickable nav",default:!1},show_page_number:{type:f.BOOL,pretty_name:"Show page number",default:!1},page_label:{type:f.STRING,pretty_name:"Page label",default:"Page"},button_label_previous:{type:f.STRING,pretty_name:"Button label previous",default:"Previous"},button_label_next:{type:f.STRING,pretty_name:"Button label next",default:"Next"}}};class ww{constructor(e){this.jsPsych=e}trial(e,t){var n=0,r=[],i=performance.now(),o=i;function s(e){e.target.removeEventListener("click",s),"jspsych-instructions-back"===this.id?u():"jspsych-instructions-next"===this.id&&l()}function a(){var r=t.pages[n],i="";if(t.show_page_number&&(i="<span style='margin: 0 1em;' class='jspsych-instructions-pagenum'>"+t.page_label+" "+(n+1)+"/"+t.pages.length+"</span>"),t.show_clickable_nav){var o="<div class='jspsych-instructions-nav' style='padding: 10px 0px;'>";if(t.allow_backward)o+="<button id='jspsych-instructions-back' class='jspsych-btn' style='margin-right: 5px;' "+(n>0?"":"disabled='disabled'")+">&lt; "+t.button_label_previous+"</button>";t.pages.length>1&&t.show_page_number&&(o+=i),r+=o+="<button id='jspsych-instructions-next' class='jspsych-btn'style='margin-left: 5px;'>"+t.button_label_next+" &gt;</button></div>",e.innerHTML=r,0!=n&&t.allow_backward&&e.querySelector("#jspsych-instructions-back").addEventListener("click",s),e.querySelector("#jspsych-instructions-next").addEventListener("click",s)}else t.show_page_number&&t.pages.length>1&&(r+="<div class='jspsych-instructions-pagenum'>"+i+"</div>"),e.innerHTML=r}function l(){c(),++n>=t.pages.length?h():a()}function u(){c(),n--,a()}function c(){var e=performance.now(),t=Math.round(e-o);r.push({page_index:n,viewing_time:t}),o=e}const h=()=>{t.allow_keys&&this.jsPsych.pluginAPI.cancelKeyboardResponse(f),e.innerHTML="";var n={view_history:r,rt:Math.round(performance.now()-i)};this.jsPsych.finishTrial(n)},d=e=>{f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:d,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1,allow_held_key:!1}),this.jsPsych.pluginAPI.compareKeys(e.key,t.key_backward)&&0!==n&&t.allow_backward&&u(),this.jsPsych.pluginAPI.compareKeys(e.key,t.key_forward)&&l()};if(a(),t.allow_keys)var f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:d,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1})}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){var n,r,i,o,s,a;let l=0,u=0,c=[];if(!(null===(n=t.data)||void 0===n?void 0:n.view_history)&&!(null===(r=t.data)||void 0===r?void 0:r.rt))for(;l!==e.pages.length;){const t=Math.round(this.jsPsych.randomization.sampleExGaussian(3e3,300,1/300));c.push({page_index:l,viewing_time:t}),u+=t,0!=l&&e.allow_backward?1==this.jsPsych.randomization.sampleBernoulli(.9)?l++:l--:l++}if(!(null===(i=t.data)||void 0===i?void 0:i.view_history)&&(null===(o=t.data)||void 0===o?void 0:o.rt)){for(u=t.data.rt;l!==e.pages.length;)c.push({page_index:l,viewing_time:null}),0!=l&&e.allow_backward?1==this.jsPsych.randomization.sampleBernoulli(.9)?l++:l--:l++;const n=t.data.rt/c.length;let r=0;for(const e of c){const t=Math.round(this.jsPsych.randomization.sampleExGaussian(n,n/10,1/(n/10)));e.viewing_time=t,r+=t}const i=t.data.rt-r,o=Math.round(i/c.length);for(const e of c)e.viewing_time+=o}if((null===(s=t.data)||void 0===s?void 0:s.view_history)&&!(null===(a=t.data)||void 0===a?void 0:a.rt)){c=t.data.view_history,u=0;for(const e of t.data.view_history)u+=e.viewing_time}const h={view_history:c,rt:u},d=this.jsPsych.pluginAPI.mergeSimulationData(h,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,d),d}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n();const o=t=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_forward,t):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-instructions-next"),t)},s=t=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_backward,t):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-instructions-back"),t)};let a=0,l=0;for(let u=0;u<r.view_history.length;u++)u==r.view_history.length-1?o(l+r.view_history[u].viewing_time):(r.view_history[u+1].page_index>a&&o(l+r.view_history[u].viewing_time),r.view_history[u+1].page_index<a&&s(l+r.view_history[u].viewing_time),l+=r.view_history[u].viewing_time,a=r.view_history[u+1].page_index)}}ww.info=vw;const bw={name:"preload",parameters:{auto_preload:{type:f.BOOL,pretty_name:"Auto-preload",default:!1},trials:{type:f.TIMELINE,pretty_name:"Trials",default:[]},images:{type:f.STRING,pretty_name:"Images",default:[],array:!0},audio:{type:f.STRING,pretty_name:"Audio",default:[],array:!0},video:{type:f.STRING,pretty_name:"Video",default:[],array:!0},message:{type:f.HTML_STRING,pretty_name:"Message",default:null},show_progress_bar:{type:f.BOOL,pretty_name:"Show progress bar",default:!0},continue_after_error:{type:f.BOOL,pretty_name:"Continue after error",default:!1},error_message:{type:f.HTML_STRING,pretty_name:"Error message",default:"The experiment failed to load."},show_detailed_errors:{type:f.BOOL,pretty_name:"Show detailed errors",default:!1},max_load_time:{type:f.INT,pretty_name:"Max load time",default:null},on_error:{type:f.FUNCTION,pretty_name:"On error",default:null},on_success:{type:f.FUNCTION,pretty_name:"On success",default:null}}};class _w{constructor(e){this.jsPsych=e}trial(e,t){var n=null,r=!1,i=[],o=[],s=[],a=[],l=this.jsPsych.getSafeModeStatus(),u=[],c=[],h=[];if(t.auto_preload){var d=this.jsPsych.getTimeline(),f=this.jsPsych.pluginAPI.getAutoPreloadList(d);u=u.concat(f.images),c=c.concat(f.audio),h=h.concat(f.video)}if(t.trials.length>0){var p=this.jsPsych.pluginAPI.getAutoPreloadList(t.trials);u=u.concat(p.images),c=c.concat(p.audio),h=h.concat(p.video)}u=u.concat(t.images),c=c.concat(t.audio),h=h.concat(t.video),u=this.jsPsych.utils.unique(u.flat()),c=this.jsPsych.utils.unique(c.flat()),h=this.jsPsych.utils.unique(h.flat()),l&&(h=[]);var m="";null!==t.message&&(m+=t.message),t.show_progress_bar&&(m+="\n            <div id='jspsych-loading-progress-bar-container' style='height: 10px; width: 300px; background-color: #ddd; margin: auto;'>\n              <div id='jspsych-loading-progress-bar' style='height: 10px; width: 0%; background-color: #777;'></div>\n            </div>"),e.innerHTML=m;const g=()=>{if(x++,t.show_progress_bar){var n=x/_*100,r=e.querySelector("#jspsych-loading-progress-bar");null!==r&&(r.style.width=n+"%")}},y=()=>{"undefined"!==typeof r&&!1===r&&(this.jsPsych.pluginAPI.clearAllTimeouts(),this.jsPsych.pluginAPI.cancelPreloads(),n=!0,b())},v=()=>{this.jsPsych.pluginAPI.cancelPreloads(),"undefined"===typeof n||!1!==n&&null!==n||(r=!0,T<_&&(n=!1),I("timeout"),a.push("<p><strong>Loading timed out.</strong><br>Consider compressing your stimuli files, loading your files in smaller batches,<br>and/or increasing the <i>max_load_time</i> parameter.</p>"),t.continue_after_error?b():w())},w=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),this.jsPsych.pluginAPI.cancelPreloads(),e.innerHTML=t.error_message,t.show_detailed_errors&&(e.innerHTML+="<p><strong>Error details:</strong></p>",a.forEach((t=>{e.innerHTML+=t})))},b=()=>{this.jsPsych.pluginAPI.clearAllTimeouts();var t={success:n,timeout:r,failed_images:i,failed_audio:o,failed_video:s};e.innerHTML="",this.jsPsych.finishTrial(t)};null!==t.max_load_time&&this.jsPsych.pluginAPI.setTimeout(v,t.max_load_time);var _=u.length+c.length+h.length,x=0,T=0;if(0==_)y();else{const e=e=>{this.jsPsych.pluginAPI.preloadVideo(h,e,S,E)},t=e=>{this.jsPsych.pluginAPI.preloadAudio(c,e,S,E)},n=e=>{this.jsPsych.pluginAPI.preloadImages(u,e,S,E)};h.length>0&&e((()=>{})),c.length>0&&t((()=>{})),u.length>0&&n((()=>{}))}function E(e){g(),null==n&&(n=!1);var r="unknown file";e.source&&(r=e.source),e.error&&e.error.path&&e.error.path.length>0&&("img"==e.error.path[0].localName?i.push(r):"audio"==e.error.path[0].localName?o.push(r):"video"==e.error.path[0].localName&&s.push(r));var l="<p><strong>Error loading file: "+r+"</strong><br>";e.error.statusText&&(l+="File request response status: "+e.error.statusText+"<br>"),"404"==e.error&&(l+="404 - file not found.<br>"),"undefined"!==typeof e.error.loaded&&null!==e.error.loaded&&0!==e.error.loaded?l+=e.error.loaded+" bytes transferred.":l+="File did not begin loading. Check that file path is correct and reachable by the browser,<br>and that loading is not blocked by cross-origin resource sharing (CORS) errors.",l+="</p>",a.push(l),I(r),x==_&&(t.continue_after_error?b():w())}function S(e){g(),function(e){null!==t.on_success&&t.on_success(e)}(e),++T==_?y():x==_&&(t.continue_after_error?b():w())}function I(e){null!==t.on_error&&t.on_error(e)}}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){return this.jsPsych.pluginAPI.mergeSimulationData({success:!0,timeout:!1,failed_images:[],failed_audio:[],failed_video:[]},t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.jsPsych.getDisplayElement();this.trial(r,e),n()}}_w.info=bw;const xw=Se.trials.honeycomb,Tw={type:fe,stimulus:cw(xw.welcome)},Ew={type:ww,pages:[cw(xw.instructions.read),cw(xw.instructions.circle),...Me.honeycomb.timeline_variables.map((e=>{let{stimulus:t,correct_response:n}=e;const r=t.substring(t.lastIndexOf("/")+1,t.indexOf("."));return uw(cw(xw.instructions.example.start+lw(r)+xw.instructions.example.middle+lw(n)+xw.instructions.example.end)+function(){return aw("img","",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({src:t}))})),cw(xw.instructions.next)],show_clickable_nav:!0,post_trial_gap:500},Sw={type:_w,message:cw(Se.prompts.settingUp),images:Me.honeycomb.timeline_variables.map((e=>{let{stimulus:t}=e;return t}))},Iw=e=>({type:fe,stimulus:()=>{const t=e.data.get().filter({task:"response"}),n=t.filter({correct:!0}),r=Math.round(n.count()/t.count()*100),i=Math.round(n.select("rt").mean()),o=xw.debrief;return cw(o.accuracy.start+r+o.accuracy.end)+cw(o.reactionTime.start+i+o.reactionTime.end)+cw(o.complete)}}),kw=function(e,t){const n={responseType:fe,duration:t.responseType&&t.responseType.name==me.name?null:1e3,stimulus:"",message:"",onstart:!1,responseEndsTrial:!1,taskCode:1,numBlinks:1,buttons:t.responseType&&t.responseType.name==fe.name?null:["OK"]},{responseType:r,duration:i,message:o,stimulus:s,onstart:a,responseEndsTrial:l,taskCode:u,numBlinks:c,buttons:h}={...n,...t};let d=""!==o?a?(0,ye.baseStimulus)("<h1>".concat(o,"</h1>"),!0,!0):(0,ye.baseStimulus)("<h1>".concat(o,"</h1>"),!0):s;return e.USE_PHOTODIODE&&(d+=(0,ge.photodiodeGhostBox)()),{type:r,stimulus:a?"":d,trial_duration:i,response_ends_trial:l,choices:h,on_start:e=>{a&&(e.stimulus=d)},on_load:()=>(0,ge.pdSpotEncode)(u,c,e),on_finish:e=>e.code=u}}(Re,{duration:5e3,message:xw.finish});function Cw(e){const{fixation:t,honeycomb:n}=Me,r=function(e,t){const{duration:n,jitter:r,taskCode:i,numBlinks:o}={duration:1e3,jitter:50,taskCode:1,numBlinks:1,...t};let s='<div class="center_container"><div id="fixation-dot"> </div></div>';return e.USE_PHOTODIODE&&(s+=(0,ge.photodiodeGhostBox)()),{type:fe,stimulus:s,response_ends_trial:!1,trial_duration:ve(n,r),on_load:()=>(0,ge.pdSpotEncode)(i,o,e),on_finish:e=>e.code=i}}(Re,{duration:t.randomize_duration?e.randomization.sampleWithoutReplacement(t.durations,1)[0]:t.default_duration});return{timeline:[r,{type:be,stimulus:e.timelineVariable("stimulus"),choices:n.timeline_variables.map((e=>e.correct_response)),data:{task:"response",correct_response:e.timelineVariable("correct_response")},on_finish:t=>{t.correct=e.pluginAPI.compareKeys(t.response,t.correct_response)}}],randomize_order:n.randomize_order,repetitions:n.repetitions,timeline_variables:n.timeline_variables}}const Aw={on_trial_finish:e=>console.log("Trial ".concat(e.internal_node_id," just finished:"),e),default_iti:250};function Dw(e,t,n){console.log("Building timeline for participant ".concat(n," on study ").concat(t));const r=function(e){const t=Cw(e),n=Iw(e);return[Tw,gw,Sw,Ew,t,n,kw,yw]}(e);return Re.USE_CAMERA&&(r.unshift(function(e){document.title=ke;const t=aw("video","",{id:"camera",width:640,height:480,autoplay:!0}),n=uw(cw(Se.trials.camera.start)+t,{class:"d-flex flex-column align-items-center"});return{type:me,stimulus:dw(n,!0)+hw(),choices:[Se.prompts.continue.button],response_ends_trial:!0,on_load:()=>{const t=e.data.get().values()[0].participant_id,n=document.getElementById("camera"),r=function(e,r){console.log(e),"cameraCapture"===r&&(n.srcObject=e);const i=[];window[r]=new MediaRecorder(e,{mimeType:"video/webm"}),window[r].addEventListener("dataavailable",(e=>{e.data.size>0&&i.push(e.data)})),window[r].addEventListener("stop",(()=>{const e=new Blob(i);let n=!1;if(!Re.USE_ELECTRON)throw new Error("cameraStart trial is only available when running inside Electron");{const e=window.require("electron");n=e.ipcRenderer}const o=new FileReader,s="pid_".concat(t,"_").concat(r,"_").concat(Date.now(),".webm");o.onload=()=>{if(2===o.readyState){const t=Buffer.from(o.result);n.send("save_video",s,t),console.log("Saving ".concat(JSON.stringify({fileName:s,size:e.size})))}},o.readAsArrayBuffer(e)}))};navigator.mediaDevices.getUserMedia({video:!0}).then((e=>r(e,"cameraCapture")));let i=!1;if(!Re.USE_ELECTRON)throw new Error("cameraStart trial is only available when running inside Electron");i=window.require("electron").desktopCapturer,i.getSources({types:["window"]}).then((async e=>{for(const t of e)t.name===ke&&navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t.id}}}).then((e=>{r(e,"screenCapture")})).catch((e=>console.log(e)))}))},on_finish:()=>{if(Re.USE_CAMERA)try{window.cameraCapture.start(),window.screenCapture.start()}catch(Kb){window.alert("Camera permissions were not given, if you choose to proceed, your recording will not be saved. Please restart the experiment after you have given permission.")}}}}(e)),r.push(fw(5e3))),r}function Nw(e){let{studyID:n,participantID:r,taskVersion:i,dataUpdateFunction:o,dataFinishFunction:s}=e;const a="experimentWindow",l=t.useRef(null),u={...Aw,display_element:a,on_data_update:e=>o(e),on_finish:e=>s(e)},c=t.useMemo((()=>{const e=(new Date).toISOString();Re.USE_FIREBASE&&async function(e,t,n){try{const r=iw(e,t,n);return await r.set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform}),console.log("Initialized experiment:",e,t,n),!0}catch(Kb){return console.error("Unable to initialize the experiment:\n",Kb),!1}}(n,r,e);const t=he(u);return t.data.addProperties({study_id:n,participant_id:r,start_date:e,task_version:i}),t}),[n,r,i]),h=Dw(c,n,r),d=t.useCallback((e=>{if(e.redispatched)return;const t=new e.constructor(e.type,e);t.redispatched=!0,l.current.dispatchEvent(t)}),[]);return t.useEffect((()=>(window.addEventListener("keyup",d,!0),window.addEventListener("keydown",d,!0),c.run(h),()=>{window.removeEventListener("keyup",d,!0),window.removeEventListener("keydown",d,!0);try{c.endExperiment("Ended Experiment")}catch(e){console.error("Experiment closed before unmount")}}))),(0,ow.jsx)("div",{id:a,ref:l,className:"App"})}function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pw.apply(this,arguments)}function Ow(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Rw=n(694),Lw=n.n(Rw),Mw=(n(573),n(7)),jw=n.n(Mw),Fw=["as","className","type","tooltip"],Vw={type:jw().string,tooltip:jw().bool,as:jw().elementType},Uw=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"div":r,o=e.className,s=e.type,a=void 0===s?"valid":s,l=e.tooltip,u=void 0!==l&&l,c=Ow(e,Fw);return t.createElement(i,Pw({},c,{ref:n,className:Lw()(o,a+"-"+(u?"tooltip":"feedback"))}))}));Uw.displayName="Feedback",Uw.propTypes=Vw;const Bw=Uw;const zw=t.createContext({controlId:void 0});var qw=t.createContext({});qw.Consumer,qw.Provider;function Kw(e,n){var r=(0,t.useContext)(qw);return e||r[n]||n}var Hw=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],Ww=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,o=e.bsCustomPrefix,s=e.className,a=e.type,l=void 0===a?"checkbox":a,u=e.isValid,c=void 0!==u&&u,h=e.isInvalid,d=void 0!==h&&h,f=e.isStatic,p=e.as,m=void 0===p?"input":p,g=Ow(e,Hw),y=(0,t.useContext)(zw),v=y.controlId,w=y.custom?[o,"custom-control-input"]:[i,"form-check-input"];return i=Kw(w[0],w[1]),t.createElement(m,Pw({},g,{ref:n,type:l,id:r||v,className:Lw()(s,i,c&&"is-valid",d&&"is-invalid",f&&"position-static")}))}));Ww.displayName="FormCheckInput";const Gw=Ww;var Qw=["bsPrefix","bsCustomPrefix","className","htmlFor"],Yw=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.bsCustomPrefix,o=e.className,s=e.htmlFor,a=Ow(e,Qw),l=(0,t.useContext)(zw),u=l.controlId,c=l.custom?[i,"custom-control-label"]:[r,"form-check-label"];return r=Kw(c[0],c[1]),t.createElement("label",Pw({},a,{ref:n,htmlFor:s||u,className:Lw()(o,r)}))}));Yw.displayName="FormCheckLabel";const $w=Yw;var Xw=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],Jw=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,o=e.bsCustomPrefix,s=e.inline,a=void 0!==s&&s,l=e.disabled,u=void 0!==l&&l,c=e.isValid,h=void 0!==c&&c,d=e.isInvalid,f=void 0!==d&&d,p=e.feedbackTooltip,m=void 0!==p&&p,g=e.feedback,y=e.className,v=e.style,w=e.title,b=void 0===w?"":w,_=e.type,x=void 0===_?"checkbox":_,T=e.label,E=e.children,S=e.custom,I=e.as,k=void 0===I?"input":I,C=Ow(e,Xw),A="switch"===x||S,D=A?[o,"custom-control"]:[i,"form-check"];i=Kw(D[0],D[1]);var N=(0,t.useContext)(zw).controlId,P=(0,t.useMemo)((function(){return{controlId:r||N,custom:A}}),[N,A,r]),O=A||null!=T&&!1!==T&&!E,R=t.createElement(Gw,Pw({},C,{type:"switch"===x?"checkbox":x,ref:n,isValid:h,isInvalid:f,isStatic:!O,disabled:u,as:k}));return t.createElement(zw.Provider,{value:P},t.createElement("div",{style:v,className:Lw()(y,i,A&&"custom-"+x,a&&i+"-inline")},E||t.createElement(t.Fragment,null,R,O&&t.createElement($w,{title:b},T),(h||f)&&t.createElement(Bw,{type:h?"valid":"invalid",tooltip:m},g))))}));Jw.displayName="FormCheck",Jw.Input=Gw,Jw.Label=$w;const Zw=Jw;var eb=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],tb=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,o=e.bsCustomPrefix,s=e.className,a=e.isValid,l=e.isInvalid,u=e.lang,c=e.as,h=void 0===c?"input":c,d=Ow(e,eb),f=(0,t.useContext)(zw),p=f.controlId,m=f.custom?[o,"custom-file-input"]:[i,"form-control-file"];return i=Kw(m[0],m[1]),t.createElement(h,Pw({},d,{ref:n,id:r||p,type:"file",lang:u,className:Lw()(s,i,a&&"is-valid",l&&"is-invalid")}))}));tb.displayName="FormFileInput";const nb=tb;var rb=["bsPrefix","bsCustomPrefix","className","htmlFor"],ib=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.bsCustomPrefix,o=e.className,s=e.htmlFor,a=Ow(e,rb),l=(0,t.useContext)(zw),u=l.controlId,c=l.custom?[i,"custom-file-label"]:[r,"form-file-label"];return r=Kw(c[0],c[1]),t.createElement("label",Pw({},a,{ref:n,htmlFor:s||u,className:Lw()(o,r),"data-browse":a["data-browse"]}))}));ib.displayName="FormFileLabel";const ob=ib;var sb=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],ab=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,o=e.bsCustomPrefix,s=e.disabled,a=void 0!==s&&s,l=e.isValid,u=void 0!==l&&l,c=e.isInvalid,h=void 0!==c&&c,d=e.feedbackTooltip,f=void 0!==d&&d,p=e.feedback,m=e.className,g=e.style,y=e.label,v=e.children,w=e.custom,b=e.lang,_=e["data-browse"],x=e.as,T=void 0===x?"div":x,E=e.inputAs,S=void 0===E?"input":E,I=Ow(e,sb),k=w?[o,"custom"]:[i,"form-file"];i=Kw(k[0],k[1]);var C=(0,t.useContext)(zw).controlId,A=(0,t.useMemo)((function(){return{controlId:r||C,custom:w}}),[C,w,r]),D=null!=y&&!1!==y&&!v,N=t.createElement(nb,Pw({},I,{ref:n,isValid:u,isInvalid:h,disabled:a,as:S,lang:b}));return t.createElement(zw.Provider,{value:A},t.createElement(T,{style:g,className:Lw()(m,i,w&&"custom-file")},v||t.createElement(t.Fragment,null,w?t.createElement(t.Fragment,null,N,D&&t.createElement(ob,{"data-browse":_},y)):t.createElement(t.Fragment,null,D&&t.createElement(ob,null,y),N),(u||h)&&t.createElement(Bw,{type:u?"valid":"invalid",tooltip:f},p))))}));ab.displayName="FormFile",ab.Input=nb,ab.Label=ob;const lb=ab;n(391);var ub=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],cb=t.forwardRef((function(e,n){var r,i,o=e.bsPrefix,s=e.bsCustomPrefix,a=e.type,l=e.size,u=e.htmlSize,c=e.id,h=e.className,d=e.isValid,f=void 0!==d&&d,p=e.isInvalid,m=void 0!==p&&p,g=e.plaintext,y=e.readOnly,v=e.custom,w=e.as,b=void 0===w?"input":w,_=Ow(e,ub),x=(0,t.useContext)(zw).controlId,T=v?[s,"custom"]:[o,"form-control"];if(o=Kw(T[0],T[1]),g)(i={})[o+"-plaintext"]=!0,r=i;else if("file"===a){var E;(E={})[o+"-file"]=!0,r=E}else if("range"===a){var S;(S={})[o+"-range"]=!0,r=S}else if("select"===b&&v){var I;(I={})[o+"-select"]=!0,I[o+"-select-"+l]=l,r=I}else{var k;(k={})[o]=!0,k[o+"-"+l]=l,r=k}return t.createElement(b,Pw({},_,{type:a,size:u,ref:n,readOnly:y,id:c||x,className:Lw()(h,r,f&&"is-valid",m&&"is-invalid")}))}));cb.displayName="FormControl";const hb=Object.assign(cb,{Feedback:Bw});var db=["bsPrefix","className","children","controlId","as"],fb=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,o=e.children,s=e.controlId,a=e.as,l=void 0===a?"div":a,u=Ow(e,db);r=Kw(r,"form-group");var c=(0,t.useMemo)((function(){return{controlId:s}}),[s]);return t.createElement(zw.Provider,{value:c},t.createElement(l,Pw({},u,{ref:n,className:Lw()(i,r)}),o))}));fb.displayName="FormGroup";const pb=fb;var mb=["bsPrefix","className","as"],gb=["xl","lg","md","sm","xs"],yb=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,o=e.as,s=void 0===o?"div":o,a=Ow(e,mb),l=Kw(r,"col"),u=[],c=[];return gb.forEach((function(e){var t,n,r,i=a[e];if(delete a[e],"object"===typeof i&&null!=i){var o=i.span;t=void 0===o||o,n=i.offset,r=i.order}else t=i;var s="xs"!==e?"-"+e:"";t&&u.push(!0===t?""+l+s:""+l+s+"-"+t),null!=r&&c.push("order"+s+"-"+r),null!=n&&c.push("offset"+s+"-"+n)})),u.length||u.push(l),t.createElement(s,Pw({},a,{ref:n,className:Lw().apply(void 0,[i].concat(u,c))}))}));yb.displayName="Col";const vb=yb;var wb=["as","bsPrefix","column","srOnly","className","htmlFor"],bb=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,o=e.bsPrefix,s=e.column,a=e.srOnly,l=e.className,u=e.htmlFor,c=Ow(e,wb),h=(0,t.useContext)(zw).controlId;o=Kw(o,"form-label");var d="col-form-label";"string"===typeof s&&(d=d+" "+d+"-"+s);var f=Lw()(l,o,a&&"sr-only",s&&d);return u=u||h,s?t.createElement(vb,Pw({ref:n,as:"label",className:f,htmlFor:u},c)):t.createElement(i,Pw({ref:n,className:f,htmlFor:u},c))}));bb.displayName="FormLabel",bb.defaultProps={column:!1,srOnly:!1};const _b=bb;var xb=["bsPrefix","className","as","muted"],Tb=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,o=e.as,s=void 0===o?"small":o,a=e.muted,l=Ow(e,xb);return r=Kw(r,"form-text"),t.createElement(s,Pw({},l,{ref:n,className:Lw()(i,r,a&&"text-muted")}))}));Tb.displayName="FormText";const Eb=Tb;var Sb=t.forwardRef((function(e,n){return t.createElement(Zw,Pw({},e,{ref:n,type:"switch"}))}));Sb.displayName="Switch",Sb.Input=Zw.Input,Sb.Label=Zw.Label;const Ib=Sb;var kb=/-(.)/g;var Cb=["className","bsPrefix","as"],Ab=function(e){return e[0].toUpperCase()+(t=e,t.replace(kb,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var Db=["bsPrefix","inline","className","validated","as"],Nb=function(e,n){var r=void 0===n?{}:n,i=r.displayName,o=void 0===i?Ab(e):i,s=r.Component,a=r.defaultProps,l=t.forwardRef((function(n,r){var i=n.className,o=n.bsPrefix,a=n.as,l=void 0===a?s||"div":a,u=Ow(n,Cb),c=Kw(o,e);return t.createElement(l,Pw({ref:r,className:Lw()(i,c)},u))}));return l.defaultProps=a,l.displayName=o,l}("form-row"),Pb=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.inline,o=e.className,s=e.validated,a=e.as,l=void 0===a?"form":a,u=Ow(e,Db);return r=Kw(r,"form"),t.createElement(l,Pw({},u,{ref:n,className:Lw()(o,s&&"was-validated",i&&r+"-inline")}))}));Pb.displayName="Form",Pb.defaultProps={inline:!1},Pb.Row=Nb,Pb.Group=pb,Pb.Control=hb,Pb.Check=Zw,Pb.File=lb,Pb.Switch=Ib,Pb.Label=_b,Pb.Text=Eb;const Ob=Pb;const Rb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};var Lb=["as","disabled","onKeyDown"];function Mb(e){return!e||"#"===e.trim()}var jb=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"a":r,o=e.disabled,s=e.onKeyDown,a=Ow(e,Lb),l=function(e){var t=a.href,n=a.onClick;(o||Mb(t))&&e.preventDefault(),o?e.stopPropagation():n&&n(e)};return Mb(a.href)&&(a.role=a.role||"button",a.href=a.href||"#"),o&&(a.tabIndex=-1,a["aria-disabled"]=!0),t.createElement(i,Pw({ref:n},a,{onClick:l,onKeyDown:Rb((function(e){" "===e.key&&(e.preventDefault(),l(e))}),s)}))}));jb.displayName="SafeAnchor";const Fb=jb;var Vb=["bsPrefix","variant","size","active","className","block","type","as"],Ub=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.variant,o=e.size,s=e.active,a=e.className,l=e.block,u=e.type,c=e.as,h=Ow(e,Vb),d=Kw(r,"btn"),f=Lw()(a,d,s&&"active",i&&d+"-"+i,l&&d+"-block",o&&d+"-"+o);if(h.href)return t.createElement(Fb,Pw({},h,{as:c,ref:n,className:Lw()(f,h.disabled&&"disabled")}));n&&(h.ref=n),u?h.type=u:c||(h.type="button");var p=c||"button";return t.createElement(p,Pw({},h,{className:f}))}));Ub.displayName="Button",Ub.defaultProps={variant:"primary",active:!1,disabled:!1};const Bb=Ub;function zb(e){let{handleLogin:n,initialParticipantID:r,initialStudyID:i,validationFunction:o}=e;const[s,a]=t.useState(r),[l,u]=t.useState(i),[c,h]=t.useState(!1);return(0,t.useEffect)((()=>{a(r)}),[r]),(0,t.useEffect)((()=>{u(i)}),[i]),(0,ow.jsx)("div",{className:"centered-h-v",children:(0,ow.jsxs)("div",{className:"width-50",children:[(0,ow.jsxs)(Ob,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),o(l,s).then((e=>{h(!e),e&&n(l,s)}))},children:[(0,ow.jsxs)(Ob.Group,{className:"width-100",size:"lg",controlId:"participantID",children:[(0,ow.jsx)(Ob.Label,{children:"Participant ID"}),(0,ow.jsx)(Ob.Control,{autoFocus:!0,type:"participantID",value:s,onChange:e=>a(e.target.value)})]}),(0,ow.jsxs)(Ob.Group,{className:"width-100",size:"lg",controlId:"studyID",children:[(0,ow.jsx)(Ob.Label,{children:"Study ID"}),(0,ow.jsx)(Ob.Control,{type:"studyID",value:l,onChange:e=>u(e.target.value)})]}),(0,ow.jsx)(Bb,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:0===l.length||0===s.length,children:"Log In"})]}),c?(0,ow.jsx)("div",{className:"alert alert-danger",role:"alert",children:"No matching experiment found for this participant and study"}):null]})})}function qb(){const[e,n]=t.useState(!1),[r,i]=t.useState(!1),[o,s]=t.useState(),[a,l]=t.useState(!1),[u,c]=t.useState(""),[h,d]=t.useState(""),[f,p]=t.useState("default");t.useEffect((()=>{if(console.log({"Honeycomb Configuration":Re,"Task Settings":Me}),Re.USE_ELECTRON){const{ipcRenderer:e}=window.require("electron");s(e),e.send("updateEnvironmentVariables",Re);const t=e.sendSync("syncCredentials");t.participantID&&c(t.participantID),t.studyID&&d(t.studyID),p("desktop")}else if(Re.USE_MTURK)window.lodash=_.noConflict(),l(new PsiTurk(Ne,"/complete")),p("mturk"),S("mturk",Ne);else if(Re.USE_PROLIFIC){const e=Ee();Re.USE_FIREBASE&&e?(p("firebase"),S("prolific",e)):i(!0)}else if(Re.USE_FIREBASE){const e=Te("studyID"),t=Te("participantID");null!==e&&d(e),null!==t&&c(t),p("firebase")}else p("default")}),[]);const m=async()=>!0,g=(e,t)=>async function(e,t){try{return await rw(e,t).get(),!0}catch(Kb){return console.error("Unable to validate the experiment:\n",Kb),!1}}(e,t),y=()=>{},v=e=>{!async function(e){const t=e.study_id,n=e.participant_id,r=e.start_date;try{const i=iw(t,n,r);await i.collection("trials").add(e)}catch(Kb){console.error("Unable to add trial:\n",Kb)}}(e)},w=e=>{o.send("data",e)},b=e=>{a.recordTrialData(e)},x=e=>{e.localSave("csv","neuro-task.csv")},T=()=>{o.send("end","true")},E=()=>{(async()=>{a.saveData({success:()=>a.completeHIT(),error:()=>i(!0)})})()},S=t.useCallback(((e,t)=>{d(e),c(t),n(!0)}),[]);return r?(0,ow.jsx)(sw,{}):e?(0,ow.jsx)(Nw,{studyID:h,participantID:u,taskVersion:Ce,dataUpdateFunction:{desktop:w,firebase:v,mturk:b,default:y}[f],dataFinishFunction:{desktop:T,mturk:E,firebase:y,default:x}[f]}):(0,ow.jsx)(zb,{validationFunction:{desktop:m,default:m,firebase:g}[f],initialStudyID:h,initialParticipantID:u,handleLogin:S})}r.render((0,ow.jsx)(qb,{}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.59dc77d7.js.map