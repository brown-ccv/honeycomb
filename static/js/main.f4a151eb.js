/*! For license information please see main.f4a151eb.js.LICENSE.txt */
(()=>{var e={613:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,i){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,l=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},u=s.push,c=s.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,m=p.call(Object),g={},y=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},v=function(e){return null!=e&&e===e.window},w=r.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var r,i,s=(n=n||w).createElement("script");if(s.text=e,t)for(r in b)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);n.head.appendChild(s).parentNode.removeChild(s)}function E(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?h[d.call(e)]||"object":typeof e}var T="3.7.1",x=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function I(e){var t=!!e&&"length"in e&&e.length,n=E(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:T,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:s.sort,splice:s.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"===typeof o&&(u=o,o=arguments[a]||{},a++),"object"===typeof o||y(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(u&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],s=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,o[t]=S.extend(u,s,r)):void 0!==r&&(o[t]=r));return o},S.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(!(t=o(e))||"function"===typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(I(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=S.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(I(Object(e))?S.merge(n,"string"===typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!x.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,s=e.length,o=!n;i<s;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,s=0,o=[];if(I(e))for(r=e.length;s<r;s++)null!=(i=t(e[s],s,n))&&o.push(i);else for(s in e)null!=(i=t(e[s],s,n))&&o.push(i);return l(o)},guid:1,support:g}),"function"===typeof Symbol&&(S.fn[Symbol.iterator]=s[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var C=s.pop,D=s.sort,A=s.splice,N="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");S.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(O,R)};var L=w,M=u;!function(){var e,t,n,i,o,l,u,h,d,p,m=M,y=S.expando,v=0,w=0,b=ee(),_=ee(),E=ee(),T=ee(),x=function(e,t){return e===t&&(o=!0),0},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+N+"*("+O+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+N+"*\\]",F=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",j=new RegExp(N+"+","g"),V=new RegExp("^"+N+"*,"+N+"*"),U=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),q=new RegExp(N+"|>"),B=new RegExp(F),z=new RegExp("^"+O+"$"),K={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},$=function(){le()},J=de((function(e){return!0===e.disabled&&k(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(s=a.call(L.childNodes),L.childNodes),s[L.childNodes.length].nodeType}catch(we){m={apply:function(e,t){M.apply(e,a.call(t))},call:function(e){M.apply(e,a.call(arguments,1))}}}function Z(e,t,n,r){var i,s,o,a,u,c,f,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!==typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!r&&(le(t),t=t||l,h)){if(11!==v&&(u=G.exec(e)))if(i=u[1]){if(9===v){if(!(o=t.getElementById(i)))return n;if(o.id===i)return m.call(n,o),n}else if(p&&(o=p.getElementById(i))&&Z.contains(t,o)&&o.id===i)return m.call(n,o),n}else{if(u[2])return m.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(i)),n}if(!T[e+" "]&&(!d||!d.test(e))){if(f=e,p=t,1===v&&(q.test(e)||U.test(e))){for((p=Q.test(e)&&ae(t.parentNode)||t)==t&&g.scope||((a=t.getAttribute("id"))?a=S.escapeSelector(a):t.setAttribute("id",a=y)),s=(c=ce(e)).length;s--;)c[s]=(a?"#"+a:":scope")+" "+he(c[s]);f=c.join(",")}try{return m.apply(n,p.querySelectorAll(f)),n}catch(w){T(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(P,"$1"),t,n,r)}function ee(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function te(e){return e[y]=!0,e}function ne(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(we){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return k(t,"input")&&t.type===e}}function ie(e){return function(t){return(k(t,"input")||k(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te((function(t){return t=+t,te((function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function ae(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function le(e){var n,r=e?e.ownerDocument||e:L;return r!=l&&9===r.nodeType&&r.documentElement?(u=(l=r).documentElement,h=!S.isXMLDoc(l),p=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,u.msMatchesSelector&&L!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",$),g.getById=ne((function(e){return u.appendChild(e).id=S.expando,!l.getElementsByName||!l.getElementsByName(S.expando).length})),g.disconnectedMatch=ne((function(e){return p.call(e,"*")})),g.scope=ne((function(){return l.querySelectorAll(":scope")})),g.cssHas=ne((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(we){return!0}})),g.getById?(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var n,r,i,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(i=t.getElementsByName(e),r=0;s=i[r++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;u.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+N+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+y+"-]").length||d.push("~="),e.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),u.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")})),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),x=function(e,t){if(e===t)return o=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument==L&&Z.contains(L,e)?-1:t===l||t.ownerDocument==L&&Z.contains(L,t)?1:i?c.call(i,e)-c.call(i,t):0:4&n?-1:1)},l):l}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(le(e),h&&!T[t+" "]&&(!d||!d.test(t)))try{var n=p.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(we){T(t,!0)}return Z(t,l,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),S.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=l&&le(e);var r=t.attrHandle[n.toLowerCase()],i=r&&f.call(t.attrHandle,n.toLowerCase())?r(e,n,!h):void 0;return void 0!==i?i:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,n=[],r=0,s=0;if(o=!g.sortStable,i=!g.sortStable&&a.call(e,0),D.call(e,x),o){for(;t=e[s++];)t===e[s]&&(r=n.push(s));for(;r--;)A.call(e,n[r],1)}return i=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(a.apply(this)))},t=S.expr={cacheLength:50,createPseudo:te,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,X),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&B.test(n)&&(t=ce(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return k(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&b(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=Z.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,f,p=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),w=!l&&!a,b=!1;if(m){if(s){for(;p;){for(h=t;h=h[p];)if(a?k(h,g):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&w){for(b=(d=(u=(c=m[y]||(m[y]={}))[e]||[])[0]===v&&u[1])&&u[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[v,d,b];break}}else if(w&&(b=d=(u=(c=t[y]||(t[y]={}))[e]||[])[0]===v&&u[1]),!1===b)for(;(h=++d&&h&&h[p]||(b=d=0)||f.pop())&&(!(a?k(h,g):1===h.nodeType)||!++b||(w&&((c=h[y]||(h[y]={}))[e]=[v,b]),h!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return i[y]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,s=i(e,n),o=s.length;o--;)e[r=c.call(e,s[o])]=!(t[r]=s[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:te((function(e){var t=[],n=[],r=ye(e.replace(P,"$1"));return r[y]?te((function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(Y,X),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}})),lang:te((function(e){return z.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(Y,X).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===u},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return k(e,"input")&&!!e.checked||k(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return H.test(e.nodeName)},button:function(e){return k(e,"input")&&"button"===e.type||k(e,"button")},text:function(e){var t;return k(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe((function(){return[0]})),last:oe((function(e,t){return[t-1]})),eq:oe((function(e,t,n){return[n<0?n+t:n]})),even:oe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:oe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:oe((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:oe((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function ue(){}function ce(e,n){var r,i,s,o,a,l,u,c=_[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=t.preFilter;a;){for(o in r&&!(i=V.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(s=[])),r=!1,(i=U.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(P," ")}),a=a.slice(r.length)),t.filter)!(i=K[o].exec(a))||u[o]&&!(i=u[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Z.error(e):_(e,l).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,s=i||r,o=n&&"parentNode"===s,a=w++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,l){var u,c,h=[v,a];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=t[y]||(t[y]={}),i&&k(t,i))t=t[r]||t;else{if((u=c[s])&&u[0]===v&&u[1]===a)return h[2]=u[2];if(c[s]=h,h[2]=e(t,n,l))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var s,o=[],a=0,l=e.length,u=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,r,i)||(o.push(s),u&&t.push(a)));return o}function me(e,t,n,r,i,s){return r&&!r[y]&&(r=me(r)),i&&!i[y]&&(i=me(i,s)),te((function(s,o,a,l){var u,h,d,f,p=[],g=[],y=o.length,v=s||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Z(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),w=!e||!s&&t?v:pe(v,p,e,a,l);if(n?n(w,f=i||(s?e:y||r)?[]:o,a,l):f=w,r)for(u=pe(f,g),r(u,[],a,l),h=u.length;h--;)(d=u[h])&&(f[g[h]]=!(w[g[h]]=d));if(s){if(i||e){if(i){for(u=[],h=f.length;h--;)(d=f[h])&&u.push(w[h]=d);i(null,f=[],u,l)}for(h=f.length;h--;)(d=f[h])&&(u=i?c.call(s,d):p[h])>-1&&(s[u]=!(o[u]=d))}}else f=pe(f===o?f.splice(y,f.length):f),i?i(null,o,f,l):m.apply(o,f)}))}function ge(e){for(var r,i,s,o=e.length,a=t.relative[e[0].type],l=a||t.relative[" "],u=a?1:0,h=de((function(e){return e===r}),l,!0),d=de((function(e){return c.call(r,e)>-1}),l,!0),f=[function(e,t,i){var s=!a&&(i||t!=n)||((r=t).nodeType?h(e,t,i):d(e,t,i));return r=null,s}];u<o;u++)if(i=t.relative[e[u].type])f=[de(fe(f),i)];else{if((i=t.filter[e[u].type].apply(null,e[u].matches))[y]){for(s=++u;s<o&&!t.relative[e[s].type];s++);return me(u>1&&fe(f),u>1&&he(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(P,"$1"),i,u<s&&ge(e.slice(u,s)),s<o&&ge(e=e.slice(s)),s<o&&he(e))}f.push(i)}return fe(f)}function ye(e,r){var i,s=[],o=[],a=E[e+" "];if(!a){for(r||(r=ce(e)),i=r.length;i--;)(a=ge(r[i]))[y]?s.push(a):o.push(a);a=E(e,function(e,r){var i=r.length>0,s=e.length>0,o=function(o,a,u,c,d){var f,p,g,y=0,w="0",b=o&&[],_=[],E=n,T=o||s&&t.find.TAG("*",d),x=v+=null==E?1:Math.random()||.1,I=T.length;for(d&&(n=a==l||a||d);w!==I&&null!=(f=T[w]);w++){if(s&&f){for(p=0,a||f.ownerDocument==l||(le(f),u=!h);g=e[p++];)if(g(f,a||l,u)){m.call(c,f);break}d&&(v=x)}i&&((f=!g&&f)&&y--,o&&b.push(f))}if(y+=w,i&&w!==y){for(p=0;g=r[p++];)g(b,_,a,u);if(o){if(y>0)for(;w--;)b[w]||_[w]||(_[w]=C.call(c));_=pe(_)}m.apply(c,_),d&&!o&&_.length>0&&y+r.length>1&&S.uniqueSort(c)}return d&&(v=x,n=E),b};return i?te(o):o}(o,s)),a.selector=e}return a}function ve(e,n,r,i){var s,o,a,l,u,c="function"===typeof e&&e,d=!i&&ce(e=c.selector||e);if(r=r||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&h&&t.relative[o[1].type]){if(!(n=(t.find.ID(a.matches[0].replace(Y,X),n)||[])[0]))return r;c&&(n=n.parentNode),e=e.slice(o.shift().value.length)}for(s=K.needsContext.test(e)?0:o.length;s--&&(a=o[s],!t.relative[l=a.type]);)if((u=t.find[l])&&(i=u(a.matches[0].replace(Y,X),Q.test(o[0].type)&&ae(n.parentNode)||n))){if(o.splice(s,1),!(e=i.length&&he(o)))return m.apply(r,i),r;break}}return(c||ye(e,d))(i,n,!h,r,!n||Q.test(e)&&ae(n.parentNode)||n),r}ue.prototype=t.filters=t.pseudos,t.setFilters=new ue,g.sortStable=y.split("").sort(x).join("")===y,le(),g.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),S.find=Z,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,Z.compile=ye,Z.select=ve,Z.setDocument=le,Z.tokenize=ce,Z.escape=S.escapeSelector,Z.getText=S.text,Z.isXML=S.isXMLDoc,Z.selectors=S.expr,Z.support=S.support,Z.uniqueSort=S.uniqueSort}();var F=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},j=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},V=S.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function q(e,t,n){return y(t)?S.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?S.grep(e,(function(e){return c.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(q(this,e||[],!1))},not:function(e){return this.pushStack(q(this,e||[],!0))},is:function(e){return!!q(this,"string"===typeof e&&V.test(e)?S(e):e||[],!1).length}});var B,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||B,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),U.test(r[1])&&S.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=w.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,B=S(w);var K=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,s=[],o="string"!==typeof e&&S(e);if(!V.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?S.uniqueSort(s):s)},index:function(e){return e?"string"===typeof e?c.call(S(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F(e,"parentNode")},parentsUntil:function(e,t,n){return F(e,"parentNode",n)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return F(e,"nextSibling")},prevAll:function(e){return F(e,"previousSibling")},nextUntil:function(e,t,n){return F(e,"nextSibling",n)},prevUntil:function(e,t,n){return F(e,"previousSibling",n)},siblings:function(e){return j((e.parentNode||{}).firstChild,e)},children:function(e){return j(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(k(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,r){var i=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=S.filter(r,i)),this.length>1&&(H[e]||S.uniqueSort(i),K.test(e)&&i.reverse()),this.pushStack(i)}}));var G=/[^\x20\t\r\n\f]+/g;function Q(e){return e}function Y(e){throw e}function X(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return S.each(e.match(G)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,r,i,s=[],o=[],a=-1,l=function(){for(i=i||e.once,r=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){S.each(n,(function(n,r){y(r)?e.unique&&u.has(r)||s.push(r):r&&r.length&&"string"!==E(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(e){return e?S.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=o=[],n||t||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];s[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var s=0;function o(e,t,n,i){return function(){var a=this,l=arguments,u=function(){var r,u;if(!(e<s)){if((r=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"===typeof r||"function"===typeof r)&&r.then,y(u)?i?u.call(r,o(s,t,Q,i),o(s,t,Y,i)):(s++,u.call(r,o(s,t,Q,i),o(s,t,Y,i),o(s,t,Q,t.notifyWith))):(n!==Q&&(a=void 0,l=[r]),(i||t.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,c.error),e+1>=s&&(n!==Y&&(a=void 0,l=[r]),t.rejectWith(a,l))}};e?c():(S.Deferred.getErrorHook?c.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(c.error=S.Deferred.getStackHook()),r.setTimeout(c))}}return S.Deferred((function(r){t[0][3].add(o(0,r,y(i)?i:Q,r.notifyWith)),t[1][3].add(o(0,r,y(e)?e:Q)),t[2][3].add(o(0,r,y(n)?n:Y))})).promise()},promise:function(e){return null!=e?S.extend(e,i):i}},s={};return S.each(t,(function(e,r){var o=r[2],a=r[5];i[r[1]]=o.add,a&&o.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=o.fireWith})),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),s=S.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||s.resolveWith(r,i)}};if(t<=1&&(X(e,s.done(o(n)).resolve,s.reject,!t),"pending"===s.state()||y(i[n]&&i[n].then)))return s.then();for(;n--;)X(i[n],o(n),s.reject);return s.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&$.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){r.setTimeout((function(){throw e}))};var J=S.Deferred();function Z(){w.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),S.ready()}S.fn.ready=function(e){return J.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||J.resolveWith(w,[S]))}}),S.ready.then=J.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?r.setTimeout(S.ready):(w.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,i,s,o){var a=0,l=e.length,u=null==n;if("object"===E(n))for(a in i=!0,n)ee(e,t,a,n[a],!0,s,o);else if(void 0!==r&&(i=!0,y(r)||(o=!0),u&&(o?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(S(e),n)})),t))for(;a<l;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return i?e:u?t.call(e):l?t(e[0],n):s},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(ne,re)}var se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=S.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[ie(t)]=n;else for(r in t)i[ie(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in r?[t]:t.match(G)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var ae=new oe,le=new oe,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function he(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ce,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ue.test(e)?JSON.parse(e):e)}(n)}catch(i){}le.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return le.hasData(e)||ae.hasData(e)},data:function(e,t,n){return le.access(e,t,n)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=le.get(s),1===s.nodeType&&!ae.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=ie(r.slice(5)),he(s,r,i[r]));ae.set(s,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){le.set(this,e)})):ee(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=le.get(s,e))||void 0!==(n=he(s,e))?n:void 0;this.each((function(){le.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){le.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ae.get(e,t),n&&(!r||Array.isArray(n)?r=ae.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),s=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,(function(){S.dequeue(e,t)}),s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:S.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),s=this,o=this.length,a=function(){--r||i.resolveWith(s,[s])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=ae.get(s[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],me=w.documentElement,ge=function(e){return S.contains(e.ownerDocument,e)},ye={composed:!0};me.getRootNode&&(ge=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===S.css(e,"display")};function we(e,t,n,r){var i,s,o=20,a=r?function(){return r.cur()}:function(){return S.css(e,t,"")},l=a(),u=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==u&&+l)&&fe.exec(S.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)S.style(e,t,c+u),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),c/=s;c*=2,S.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var be={};function _e(e){var t,n=e.ownerDocument,r=e.nodeName,i=be[r];return i||(t=n.body.appendChild(n.createElement(r)),i=S.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),be[r]=i,i)}function Ee(e,t){for(var n,r,i=[],s=0,o=e.length;s<o;s++)(r=e[s]).style&&(n=r.style.display,t?("none"===n&&(i[s]=ae.get(r,"display")||null,i[s]||(r.style.display="")),""===r.style.display&&ve(r)&&(i[s]=_e(r))):"none"!==n&&(i[s]="none",ae.set(r,"display",n)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}S.fn.extend({show:function(){return Ee(this,!0)},hide:function(){return Ee(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ve(this)?S(this).show():S(this).hide()}))}});var Te=/^(?:checkbox|radio)$/i,xe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=w.createDocumentFragment().appendChild(w.createElement("div")),t=w.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",g.option=!!e.lastChild}();var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ke(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?S.merge([e],n):n}function Ce(e,t){for(var n=0,r=e.length;n<r;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,g.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var De=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var s,o,a,l,u,c,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((s=e[f])||0===s)if("object"===E(s))S.merge(d,s.nodeType?[s]:s);else if(De.test(s)){for(o=o||h.appendChild(t.createElement("div")),a=(xe.exec(s)||["",""])[1].toLowerCase(),l=Ie[a]||Ie._default,o.innerHTML=l[1]+S.htmlPrefilter(s)+l[2],c=l[0];c--;)o=o.lastChild;S.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(r&&S.inArray(s,r)>-1)i&&i.push(s);else if(u=ge(s),o=ke(h.appendChild(s),"script"),u&&Ce(o),n)for(c=0;s=o[c++];)Se.test(s.type||"")&&n.push(s);return h}var Ne=/^([^.]*)(?:\.(.+)|)/;function Pe(){return!0}function Oe(){return!1}function Re(e,t,n,r,i,s){var o,a;if("object"===typeof t){for(a in"string"!==typeof n&&(r=r||n,n=void 0),t)Re(e,a,n,r,t[a],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Oe;else if(!i)return e;return 1===s&&(o=i,i=function(e){return S().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=S.guid++)),e.each((function(){S.event.add(this,t,i,r,n)}))}function Le(e,t,n){n?(ae.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,r=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),ae.set(this,t,r),this[t](),n=ae.get(this,t),ae.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(ae.set(this,t,S.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Pe)}})):void 0===ae.get(e,t)&&S.event.add(e,t,Pe)}S.event={global:{},add:function(e,t,n,r,i){var s,o,a,l,u,c,h,d,f,p,m,g=ae.get(e);if(se(e))for(n.handler&&(n=(s=n).handler,i=s.selector),i&&S.find.matchesSelector(me,i),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return"undefined"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(G)||[""]).length;u--;)f=m=(a=Ne.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=S.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=S.event.special[f]||{},c=S.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:p.join(".")},s),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),S.event.global[f]=!0)},remove:function(e,t,n,r,i){var s,o,a,l,u,c,h,d,f,p,m,g=ae.hasData(e)&&ae.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(G)||[""]).length;u--;)if(f=m=(a=Ne.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=S.event.special[f]||{},d=l[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)c=d[s],!i&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||S.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)S.event.remove(e,f+t[u],n,r,!0);S.isEmptyObject(l)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,o,a=new Array(arguments.length),l=S.event.fix(e),u=(ae.get(this,"events")||Object.create(null))[l.type]||[],c=S.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(o=S.event.handlers.call(this,l,u),t=0;(i=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(s=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(r=((S.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,s,o,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?S(i,this).index(u)>-1:S.find(i,this,null,[u]).length),o[i]&&s.push(r);s.length&&a.push({elem:u,handlers:s})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Te.test(t.type)&&t.click&&k(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return Te.test(t.type)&&t.click&&k(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return Te.test(t.type)&&t.click&&k(t,"input")&&ae.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Pe:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Pe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Pe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Pe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(w.documentMode){var n=ae.get(this,"handle"),r=S.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var r;if(Le(this,e,!0),!w.documentMode)return!1;(r=ae.get(this,t))||this.addEventListener(t,n),ae.set(this,t,(r||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!w.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,n),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=w.documentMode?this:r,s=ae.get(i,t);s||(w.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),ae.set(i,t,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=w.documentMode?this:r,s=ae.get(i,t)-1;s?ae.set(i,t,s):(w.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),ae.remove(i,t))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||S.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,r){return Re(this,e,t,n,r)},one:function(e,t,n,r){return Re(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){S.event.remove(this,e,n,t)}))}});var Me=/<script|<style|<link/i,Fe=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ue(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var n,r,i,s,o,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(i in ae.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)S.event.add(t,i,a[i][n]);le.hasData(e)&&(s=le.access(e),o=S.extend({},s),le.set(t,o))}}function ze(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Te.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ke(e,t,n,r){t=l(t);var i,s,o,a,u,c,h=0,d=e.length,f=d-1,p=t[0],m=y(p);if(m||d>1&&"string"===typeof p&&!g.checkClone&&Fe.test(p))return e.each((function(i){var s=e.eq(i);m&&(t[0]=p.call(this,i,s.html())),Ke(s,t,n,r)}));if(d&&(s=(i=Ae(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=s),s||r)){for(a=(o=S.map(ke(i,"script"),Ue)).length;h<d;h++)u=i,h!==f&&(u=S.clone(u,!0,!0),a&&S.merge(o,ke(u,"script"))),n.call(e[h],u,h);if(a)for(c=o[o.length-1].ownerDocument,S.map(o,qe),h=0;h<a;h++)u=o[h],Se.test(u.type||"")&&!ae.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):_(u.textContent.replace(je,""),u,c))}return e}function He(e,t,n){for(var r,i=t?S.filter(t,e):e,s=0;null!=(r=i[s]);s++)n||1!==r.nodeType||S.cleanData(ke(r)),r.parentNode&&(n&&ge(r)&&Ce(ke(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,s,o,a=e.cloneNode(!0),l=ge(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(o=ke(a),r=0,i=(s=ke(e)).length;r<i;r++)ze(s[r],o[r]);if(t)if(n)for(s=s||ke(e),o=o||ke(a),r=0,i=s.length;r<i;r++)Be(s[r],o[r]);else Be(e,a);return(o=ke(a,"script")).length>0&&Ce(o,!l&&ke(e,"script")),a},cleanData:function(e){for(var t,n,r,i=S.event.special,s=0;void 0!==(n=e[s]);s++)if(se(n)){if(t=n[ae.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[ae.expando]=void 0}n[le.expando]&&(n[le.expando]=void 0)}}}),S.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return Ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ke(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Me.test(e)&&!Ie[(xe.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ke(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ke(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(ke(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,r=[],i=S(e),s=i.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),S(i[o])[t](n),u.apply(r,n.get());return this.pushStack(r)}}));var We=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ge=/^--/,Qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ye=function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=s[i];return r},Xe=new RegExp(pe.join("|"),"i");function $e(e,t,n){var r,i,s,o,a=Ge.test(t),l=e.style;return(n=n||Qe(e))&&(o=n.getPropertyValue(t)||n[t],a&&o&&(o=o.replace(P,"$1")||void 0),""!==o||ge(e)||(o=S.style(e,t)),!g.pixelBoxStyles()&&We.test(o)&&Xe.test(t)&&(r=l.width,i=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=n.width,l.width=r,l.minWidth=i,l.maxWidth=s)),void 0!==o?o+"":o}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(u).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",o=36===t(e.right),i=36===t(e.width),c.style.position="absolute",s=12===t(c.offsetWidth/3),me.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,i,s,o,a,l,u=w.createElement("div"),c=w.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,n,i;return null==a&&(e=w.createElement("table"),t=w.createElement("tr"),n=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),a}}))}();var Ze=["Webkit","Moz","ms"],et=w.createElement("div").style,tt={};function nt(e){var t=S.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in et)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,it={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ot(e,t,n){var r=fe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function at(e,t,n,r,i,s){var o="width"===t?1:0,a=0,l=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=S.css(e,n+pe[o],!0,i)),r?("content"===n&&(l-=S.css(e,"padding"+pe[o],!0,i)),"margin"!==n&&(l-=S.css(e,"border"+pe[o]+"Width",!0,i))):(l+=S.css(e,"padding"+pe[o],!0,i),"padding"!==n?l+=S.css(e,"border"+pe[o]+"Width",!0,i):a+=S.css(e,"border"+pe[o]+"Width",!0,i));return!r&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))||0),l+u}function lt(e,t,n){var r=Qe(e),i=(!g.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),s=i,o=$e(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&k(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+at(e,t,n||(i?"border":"content"),s,r,o)+"px"}function ut(e,t,n,r,i){return new ut.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=$e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=ie(t),l=Ge.test(t),u=e.style;if(l||(t=nt(a)),o=S.cssHooks[t]||S.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:u[t];"string"===(s=typeof n)&&(i=fe.exec(n))&&i[1]&&(n=we(e,t,i),s="number"),null!=n&&n===n&&("number"!==s||l||(n+=i&&i[3]||(S.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,s,o,a=ie(t);return Ge.test(t)||(t=nt(a)),(o=S.cssHooks[t]||S.cssHooks[a])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=$e(e,t,r)),"normal"===i&&t in st&&(i=st[t]),""===n||n?(s=parseFloat(i),!0===n||isFinite(s)?s||0:i):i}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,t,r):Ye(e,it,(function(){return lt(e,t,r)}))},set:function(e,n,r){var i,s=Qe(e),o=!g.scrollboxSize()&&"absolute"===s.position,a=(o||r)&&"border-box"===S.css(e,"boxSizing",!1,s),l=r?at(e,t,r,a,s):0;return a&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-at(e,t,"border",!1,s)-.5)),l&&(i=fe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),ot(0,n,l)}}})),S.cssHooks.marginLeft=Je(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat($e(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+pe[r]+t]=s[r]||s[r-2]||s[0];return i}},"margin"!==e&&(S.cssHooks[e+t].set=ot)})),S.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,i,s={},o=0;if(Array.isArray(t)){for(r=Qe(e),i=t.length;o<i;o++)s[t[o]]=S.css(e,t[o],!1,r);return s}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=ut,ut.prototype={constructor:ut,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(S.cssNumber[n]?"":"px")},cur:function(){var e=ut.propHooks[this.prop];return e&&e.get?e.get(this):ut.propHooks._default.get(this)},run:function(e){var t,n=ut.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ut.propHooks._default.set(this),this}},ut.prototype.init.prototype=ut.prototype,ut.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ut.propHooks.scrollTop=ut.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ut.prototype.init,S.fx.step={};var ct,ht,dt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function pt(){ht&&(!1===w.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(pt):r.setTimeout(pt,S.fx.interval),S.fx.tick())}function mt(){return r.setTimeout((function(){ct=void 0})),ct=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=pe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function yt(e,t,n){for(var r,i=(vt.tweeners[t]||[]).concat(vt.tweeners["*"]),s=0,o=i.length;s<o;s++)if(r=i[s].call(n,t,e))return r}function vt(e,t,n){var r,i,s=0,o=vt.prefilters.length,a=S.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=ct||mt(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),s=0,o=u.tweens.length;s<o;s++)u.tweens[s].run(r);return a.notifyWith(e,[u,r,n]),r<1&&o?n:(o||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||mt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,s,o;for(n in e)if(i=t[r=ie(n)],s=e[n],Array.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(o=S.cssHooks[r])&&"expand"in o)for(n in s=o.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);s<o;s++)if(r=vt.prefilters[s].call(u,e,c,u.opts))return y(r.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,yt,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(vt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return we(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(G);for(var n,r=0,i=e.length;r<i;r++)n=e[r],vt.tweeners[n]=vt.tweeners[n]||[],vt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,s,o,a,l,u,c,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&ve(e),g=ae.get(e,"fxshow");for(r in n.queue||(null==(o=S._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,S.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],dt.test(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}f[r]=g&&g[r]||S.style(e,r)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=ae.get(e,"display")),"none"===(c=S.css(e,"display"))&&(u?c=u:(Ee([e],!0),u=e.style.display||u,c=S.css(e,"display"),Ee([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(e,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=ae.access(e,"fxshow",{display:u}),s&&(g.hidden=!m),m&&Ee([e],!0),d.done((function(){for(r in m||Ee([e]),ae.remove(e,"fxshow"),f)S.style(e,r,f[r])}))),l=yt(m?g[r]:0,r,d),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?vt.prefilters.unshift(e):vt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=S.isEmptyObject(e),s=S.speed(t,n,r),o=function(){var t=vt(this,S.extend({},e),s);(i||ae.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",s=S.timers,o=ae.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&ft.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=ae.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=S.timers,o=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(gt(t,!0),e,r,i)}})),S.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(ct=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),ct=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ht||(ht=!0,pt())},S.fx.stop=function(){ht=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=w.createElement("input"),t=w.createElement("select").appendChild(w.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=w.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var wt,bt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return ee(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"===typeof e.getAttribute?S.prop(e,t,n):(1===s&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?wt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(G);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||S.find.attr;bt[t]=function(e,t,r){var i,s,o=t.toLowerCase();return r||(s=bt[o],bt[o]=i,i=null!=n(e,t,r)?o:null,bt[o]=s),i}}));var _t=/^(?:input|select|textarea|button)$/i,Et=/^(?:a|area)$/i;function Tt(e){return(e.match(G)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(G)||[]}S.fn.extend({prop:function(e,t){return ee(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,r,i,s,o;return y(e)?this.each((function(t){S(this).addClass(e.call(this,t,xt(this)))})):(t=St(e)).length?this.each((function(){if(r=xt(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(s=0;s<t.length;s++)i=t[s],n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=Tt(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,r,i,s,o;return y(e)?this.each((function(t){S(this).removeClass(e.call(this,t,xt(this)))})):arguments.length?(t=St(e)).length?this.each((function(){if(r=xt(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(s=0;s<t.length;s++)for(i=t[s];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=Tt(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,s,o=typeof e,a="string"===o||Array.isArray(e);return y(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,xt(this),t),t)})):"boolean"===typeof t&&a?t?this.addClass(e):this.removeClass(e):(n=St(e),this.each((function(){if(a)for(s=S(this),i=0;i<n.length;i++)r=n[i],s.hasClass(r)?s.removeClass(r):s.addClass(r);else void 0!==e&&"boolean"!==o||((r=xt(this))&&ae.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Tt(xt(n))+" ").indexOf(t)>-1)return!0;return!1}});var It=/\r/g;S.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,S(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(It,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:Tt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:i.length;for(r=s<0?l:o?s:0;r<l;r++)if(((n=i[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=S(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,s=S.makeArray(t),o=i.length;o--;)((r=i[o]).selected=S.inArray(S.valHooks.option.get(r),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var kt=r.location,Ct={guid:Date.now()},Dt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var At=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,i){var s,o,a,l,u,c,h,d,p=[n||w],m=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(o=d=a=n=n||w,3!==n.nodeType&&8!==n.nodeType&&!At.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[S.expando]?e:new S.Event(m,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),h=S.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!v(n)){for(l=h.delegateType||m,At.test(l+m)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||w)&&p.push(a.defaultView||a.parentWindow||r)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)d=o,e.type=s>1?l:h.bindType||m,(c=(ae.get(o,"events")||Object.create(null))[e.type]&&ae.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&se(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!se(n)||u&&y(n[m])&&!v(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,Nt),n[m](),e.isPropagationStopped()&&d.removeEventListener(m,Nt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}});var Pt=/\[\]$/,Ot=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Mt(e,t,n,r){var i;if(Array.isArray(t))S.each(t,(function(t,i){n||Pt.test(e)?r(e,i):Mt(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==E(t))r(e,t);else for(i in t)Mt(e+"["+i+"]",t[i],n,r)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){i(this.name,this.value)}));else for(n in e)Mt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Lt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!Te.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Ft=/%20/g,jt=/#.*$/,Vt=/([?&])_=[^&]*/,Ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:GET|HEAD)$/,Bt=/^\/\//,zt={},Kt={},Ht="*/".concat("*"),Wt=w.createElement("a");function Gt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(G)||[];if(y(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Qt(e,t,n,r){var i={},s=e===Kt;function o(a){var l;return i[a]=!0,S.each(e[a]||[],(function(e,a){var u=a(t,n,r);return"string"!==typeof u||s||i[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)})),l}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Yt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=kt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,S.ajaxSettings),t):Yt(S.ajaxSettings,e)},ajaxPrefilter:Gt(zt),ajaxTransport:Gt(Kt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,i,s,o,a,l,u,c,h,d,f=S.ajaxSetup({},t),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?S(p):S.event,g=S.Deferred(),y=S.Callbacks("once memory"),v=f.statusCode||{},b={},_={},E="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Ut.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)T.always(e[T.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||E;return n&&n.abort(t),x(0,t),this}};if(g.promise(T),f.url=((e||f.url||kt.href)+"").replace(Bt,kt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){l=w.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Wt.protocol+"//"+Wt.host!==l.protocol+"//"+l.host}catch(I){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!==typeof f.data&&(f.data=S.param(f.data,f.traditional)),Qt(zt,f,t,T),u)return T;for(h in(c=S.event&&f.global)&&0===S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qt.test(f.type),i=f.url.replace(jt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ft,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"===typeof f.data)&&(i+=(Dt.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Vt,"$1"),d=(Dt.test(i)?"&":"?")+"_="+Ct.guid+++d),f.url=i+d),f.ifModified&&(S.lastModified[i]&&T.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&T.setRequestHeader("If-None-Match",S.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ht+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||u))return T.abort();if(E="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=Qt(Kt,f,t,T)){if(T.readyState=1,c&&m.trigger("ajaxSend",[T,f]),u)return T;f.async&&f.timeout>0&&(a=r.setTimeout((function(){T.abort("timeout")}),f.timeout));try{u=!1,n.send(b,x)}catch(I){if(u)throw I;x(-1,I)}}else x(-1,"No Transport");function x(e,t,o,l){var h,d,w,b,_,E=t;u||(u=!0,a&&r.clearTimeout(a),n=void 0,s=l||"",T.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(b=function(e,t,n){for(var r,i,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)s=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(f,T,o)),!h&&S.inArray("script",f.dataTypes)>-1&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=function(e,t,n,r){var i,s,o,a,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=u[l+" "+s]||u["* "+s]))for(i in u)if((a=i.split(" "))[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[i]:!0!==u[i]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(I){return{state:"parsererror",error:o?I:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(f,b,T,h),h?(f.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=_),(_=T.getResponseHeader("etag"))&&(S.etag[i]=_)),204===e||"HEAD"===f.type?E="nocontent":304===e?E="notmodified":(E=b.state,d=b.data,h=!(w=b.error))):(w=E,!e&&E||(E="error",e<0&&(e=0))),T.status=e,T.statusText=(t||E)+"",h?g.resolveWith(p,[d,E,T]):g.rejectWith(p,[T,E,w]),T.statusCode(v),v=void 0,c&&m.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:w]),y.fireWith(p,[T,E]),c&&(m.trigger("ajaxComplete",[T,f]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:i,data:n,success:r},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},$t=S.ajaxSettings.xhr();g.cors=!!$t&&"withCredentials"in $t,g.ajax=$t=!!$t,S.ajaxTransport((function(e){var t,n;if(g.cors||$t&&!e.crossDomain)return{send:function(i,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!==typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Xt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!==typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Jt=[],Zt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var i,s,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+i):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===s?S(r).removeProp(i):r[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(i)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),g.createHTMLDocument=function(){var e=w.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(r)):t=w),s=!n&&[],(i=U.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,s),s&&s.length&&S(s).remove(),S.merge([],i.childNodes)));var r,i,s},S.fn.load=function(e,t,n){var r,i,s,o=this,a=e.indexOf(" ");return a>-1&&(r=Tt(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),o.length>0&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var r,i,s,o,a,l,u=S.css(e,"position"),c=S(e),h={};"static"===u&&(e.style.position="relative"),a=c.offset(),s=S.css(e,"top"),l=S.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(o=(r=c.position()).top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(l)||0),y(t)&&(t=t.call(e,n,S.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):c.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||me}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return ee(this,(function(e,r,i){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i}),e,r,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Je(g.pixelPosition,(function(e,n){if(n)return n=$e(e,t),We.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){S.fn[r]=function(i,s){var o=arguments.length&&(n||"boolean"!==typeof i),a=n||(!0===i||!0===s?"margin":"border");return ee(this,(function(t,n,i){var s;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?S.css(t,n,a):S.style(t,n,i,a)}),t,o?i:void 0,o)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),i=function(){return e.apply(t||this,r.concat(a.call(arguments)))},i.guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=k,S.isFunction=y,S.isWindow=v,S.camelCase=ie,S.type=E,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var tn=r.jQuery,nn=r.$;return S.noConflict=function(e){return r.$===S&&(r.$=nn),e&&r.jQuery===S&&(r.jQuery=tn),S},"undefined"===typeof i&&(r.jQuery=r.$=S),S}))},123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))n.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var c=0;c<o.length;c++)r.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(534),s=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,s,o){var a=i||"<<anonymous>>",l=o||r;if(null==n[r])return t?new Error("Required "+s+" `"+l+"` was not specified in `"+a+"`."):null;for(var u=arguments.length,c=Array(u>6?u-6:0),h=6;h<u;h++)c[h-6]=arguments[h];return e.apply(void 0,[n,r,a,s,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(123),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function a(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var l=!1,u=null,c=!1,h=null,d={onError:function(e){l=!0,u=e}};function f(e,t,n,r,i,s,o,c,h){l=!1,u=null,a.apply(d,arguments)}var p=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,s,a,d,p){if(f.apply(this,arguments),l){if(!l)throw Error(o(198));var m=u;l=!1,u=null,c||(c=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,w={};function b(){if(v)for(var e in w){var t=w[e],n=v.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!E[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in E[n]=t,n=t.eventTypes){var i=void 0,s=n[r],a=t,l=r;if(T.hasOwnProperty(l))throw Error(o(99,l));T[l]=s;var u=s.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&_(u[i],a,l);i=!0}else s.registrationName?(_(s.registrationName,a,l),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function _(e,t,n){if(x[e])throw Error(o(100,e));x[e]=t,S[e]=t.eventTypes[n].dependencies}var E=[],T={},x={},S={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(o(102,t));w[t]=r,n=!0}}n&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,D=null,A=null;function N(e){if(e=m(e)){if("function"!==typeof C)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){D?A?A.push(e):A=[e]:D=e}function O(){if(D){var e=D,t=A;if(A=D=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function R(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=R,j=!1,V=!1;function U(){null===D&&null===A||(M(),O())}function q(e,t,n){if(V)return e(t,n);V=!0;try{return F(e,t,n)}finally{V=!1,U()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,K={},H={};function W(e,t,n,r,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new W(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new W(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new W(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new W(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new W(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new W(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new W(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new W(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new W(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new W(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new W(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);G[t]=new W(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new W(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new W(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!z.call(H,e)||!z.call(K,e)&&(B.test(e)?H[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,se=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case se:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,s=ge(e.type);n=null,r&&(n=ge(r.type)),r=s,s="",i?s=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(s=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+s}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ee(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xe(e,t){null!=(t=t.checked)&&$(e,"checked",t,!1)}function Se(e,t){xe(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function De(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Pe(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var je,Ve,Ue=(Ve=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((je=je||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=je.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function qe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ze={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},Ke={},He={};function We(e){if(Ke[e])return Ke[e];if(!ze[e])return e;var t,n=ze[e];for(t in n)if(n.hasOwnProperty(t)&&t in He)return Ke[e]=n[t];return e}k&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete ze.animationend.animation,delete ze.animationiteration.animation,delete ze.animationstart.animation),"TransitionEvent"in window||delete ze.transitionend.transition);var Ge=We("animationend"),Qe=We("animationiteration"),Ye=We("animationstart"),Xe=We("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nt(i),e;if(s===r)return nt(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function st(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(st(e,at),ot)throw Error(o(95));if(c)throw e=h,c=!1,h=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!k)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=On(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var s=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var a=null,l=0;l<E.length;l++){var u=E[l];u&&(u=u.extractEvents(r,t,s,i,o))&&(a=it(a,u))}lt(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,yt,vt,wt=!1,bt=[],_t=null,Et=null,Tt=null,xt=new Map,St=new Map,It=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Dt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function At(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Nt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=Dt(t,n,r,i,s),null!==t&&(null!==(t=Rn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=On(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void s.unstable_runWithPriority(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Rn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){Ot(e)&&n.delete(t)}function Lt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Rn(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Ot(_t)&&(_t=null),null!==Et&&Ot(Et)&&(Et=null),null!==Tt&&Ot(Tt)&&(Tt=null),xt.forEach(Rt),St.forEach(Rt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Mt(_t,e),null!==Et&&Mt(Et,e),null!==Tt&&Mt(Tt,e),xt.forEach(t),St.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Pt(n),null===n.blockedOn&&It.shift()}var jt={},Vt=new Map,Ut=new Map,qt=["abort","abort",Ge,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],s="on"+(i[0].toUpperCase()+i.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[r],eventPriority:t},Ut.set(r,t),Vt.set(r,s),jt[i]=s}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(qt,2);for(var zt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<zt.length;Kt++)Ut.set(zt[Kt],0);var Ht=s.unstable_UserBlockingPriority,Wt=s.unstable_runWithPriority,Gt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Ut.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){j||M();var i=Jt,s=j;j=!0;try{L(i,e,t,n,r)}finally{(j=s)||U()}}function $t(e,t,n,r){Wt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Gt)if(0<bt.length&&-1<kt.indexOf(e))e=Dt(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)At(e,r);else if(-1<kt.indexOf(e))e=Dt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Nt(_t,e,t,n,r,i),!0;case"dragenter":return Et=Nt(Et,e,t,n,r,i),!0;case"mouseover":return Tt=Nt(Tt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return xt.set(s,Nt(xt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,St.set(s,Nt(St.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){At(e,r),e=ft(e,r,null,t);try{q(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=On(n=ut(r)))){var i=et(n);if(null===i)n=null;else{var s=i.tag;if(13===s){if(null!==(n=tt(i)))return n;n=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{q(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var sn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(sn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Re;function un(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function cn(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$",vn="/$",wn="$?",bn="$!",_n=null,En=null;function Tn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn||n===bn||n===wn){if(0===t)return e;t--}else n===vn&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),An="__reactInternalInstance$"+Dn,Nn="__reactEventHandlers$"+Dn,Pn="__reactContainere$"+Dn;function On(e){var t=e[An];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[An]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[An])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function Rn(e){return!(e=e[An]||e[Pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Mn(e){return e[Nn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Vn(e,t,n){(t=jn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)Vn(n[t],"captured",e);for(t=0;t<n.length;t++)Vn(n[t],"bubbled",e)}}function qn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=jn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){e&&e.dispatchConfig.registrationName&&qn(e._targetInst,null,e)}function zn(e){st(e,Un)}var Kn=null,Hn=null,Wn=null;function Gn(){if(Wn)return Wn;var e,t,n=Hn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Wn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function Xn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=$n,e.release=Jn}i(Xn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),Xn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Xn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var s=new t;return i(s,n.prototype),n.prototype=s,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Xn);var er=Xn.extend({data:null}),tr=Xn.extend({data:null}),nr=[9,13,27,32],rr=k&&"CompositionEvent"in window,ir=null;k&&"documentMode"in document&&(ir=document.documentMode);var sr=k&&"TextEvent"in window&&!ir,or=k&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function cr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:lr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var s=lr.compositionStart;break e;case"compositionend":s=lr.compositionEnd;break e;case"compositionupdate":s=lr.compositionUpdate;break e}s=void 0}else dr?cr(e,n)&&(s=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(s=lr.compositionStart);return s?(or&&"ko"!==n.locale&&(dr||s!==lr.compositionStart?s===lr.compositionEnd&&dr&&(i=Gn()):(Hn="value"in(Kn=r)?Kn.value:Kn.textContent,dr=!0)),s=er.getPooled(s,t,n,r),i?s.data=i:null!==(i=hr(n))&&(s.data=i),zn(s),i=s):i=null,(e=sr?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&cr(e,t)?(e=Gn(),Wn=Hn=Kn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return or&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,zn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yr(e,t,n){return(e=Xn.getPooled(gr.change,e,t,n)).type="change",P(n),zn(e),e}var vr=null,wr=null;function br(e){lt(e)}function _r(e){if(_e(Ln(e)))return e}function Er(e,t){if("change"===e)return t}var Tr=!1;function xr(){vr&&(vr.detachEvent("onpropertychange",Sr),wr=vr=null)}function Sr(e){if("value"===e.propertyName&&_r(wr))if(e=yr(wr,e,ut(e)),j)lt(e);else{j=!0;try{R(br,e)}finally{j=!1,U()}}}function Ir(e,t,n){"focus"===e?(xr(),wr=n,(vr=t).attachEvent("onpropertychange",Sr)):"blur"===e&&xr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(wr)}function Cr(e,t){if("click"===e)return _r(t)}function Dr(e,t){if("input"===e||"change"===e)return _r(t)}k&&(Tr=ct("input")&&(!document.documentMode||9<document.documentMode));var Ar={eventTypes:gr,_isInputEventSupported:Tr,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type)var o=Er;else if(mr(i))if(Tr)o=Dr;else{o=kr;var a=Ir}else(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Cr);if(o&&(o=o(e,t)))return yr(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Nr=Xn.extend({view:null,detail:null}),Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Rr(){return Or}var Lr=0,Mr=0,Fr=!1,jr=!1,Vr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,jr?"mousemove"===e.type?e.screenY-t:0:(jr=!0,0)}}),Ur=Vr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),qr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Br={eventTypes:qr,extractEvents:function(e,t,n,r,i){var s="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(s&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!s)return null;(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?On(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var a=Vr,l=qr.mouseLeave,u=qr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Ur,l=qr.pointerLeave,u=qr.pointerEnter,c="pointer");if(e=null==o?s:Ln(o),s=null==t?s:Ln(t),(l=a.getPooled(l,o,n,r)).type=c+"leave",l.target=e,l.relatedTarget=s,(n=a.getPooled(u,t,n,r)).type=c+"enter",n.target=s,n.relatedTarget=e,c=t,(r=o)&&c)e:{for(u=c,o=0,e=a=r;e;e=Fn(e))o++;for(e=0,t=u;t;t=Fn(t))e++;for(;0<o-e;)a=Fn(a),o--;for(;0<e-o;)u=Fn(u),e--;for(;o--;){if(a===u||a===u.alternate)break e;a=Fn(a),u=Fn(u)}a=null}else a=null;for(u=a,a=[];r&&r!==u&&(null===(o=r.alternate)||o!==u);)a.push(r),r=Fn(r);for(r=[];c&&c!==u&&(null===(o=c.alternate)||o!==u);)r.push(c),c=Fn(c);for(c=0;c<a.length;c++)qn(a[c],"bubbled",l);for(c=r.length;0<c--;)qn(r[c],"captured",n);return 0===(64&i)?[l]:[l,n]}};var zr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Kr=Object.prototype.hasOwnProperty;function Hr(e,t){if(zr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Kr.call(t,n[r])||!zr(e[n[r]],t[n[r]]))return!1;return!0}var Wr=k&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,Xr=null,$r=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==Qr||Qr!==hn(n)?null:("selectionStart"in(n=Qr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Xr&&Hr(Xr,n)?null:(Xr=n,(e=Xn.getPooled(Gr.select,Yr,e,t)).type="select",e.target=Qr,zn(e),e))}var Zr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,s){if(!(s=!(i=s||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),s=S.onSelect;for(var o=0;o<s.length;o++)if(!i.has(s[o])){i=!1;break e}i=!0}s=!i}if(s)return null;switch(i=t?Ln(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,Xr=null);break;case"blur":Xr=Yr=Qr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Jr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},ei=Xn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Xn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?si[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Vr.extend({dataTransfer:null}),li=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rr}),ui=Xn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=Vr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:jt,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=oi;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=li;break;case Ge:case Qe:case Ye:e=ei;break;case Xe:e=ui;break;case"scroll":e=Nr;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ur;break;default:e=Xn}return zn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(o(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,m=Rn,g=Ln,I({SimpleEventPlugin:hi,EnterLeaveEventPlugin:Br,ChangeEventPlugin:Ar,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},yi={current:gi},vi={current:!1},wi=gi;function bi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ei(){pi(vi),pi(yi)}function Ti(e,t,n){if(yi.current!==gi)throw Error(o(168));mi(yi,t),mi(vi,n)}function xi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,ge(t)||"Unknown",s));return i({},n,{},r)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,wi=yi.current,mi(yi,e),mi(vi,vi.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=xi(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,pi(vi),pi(yi),mi(yi,e)):pi(vi),mi(vi,n)}var ki=s.unstable_runWithPriority,Ci=s.unstable_scheduleCallback,Di=s.unstable_cancelCallback,Ai=s.unstable_requestPaint,Ni=s.unstable_now,Pi=s.unstable_getCurrentPriorityLevel,Oi=s.unstable_ImmediatePriority,Ri=s.unstable_UserBlockingPriority,Li=s.unstable_NormalPriority,Mi=s.unstable_LowPriority,Fi=s.unstable_IdlePriority,ji={},Vi=s.unstable_shouldYield,Ui=void 0!==Ai?Ai:function(){},qi=null,Bi=null,zi=!1,Ki=Ni(),Hi=1e4>Ki?Ni:function(){return Ni()-Ki};function Wi(){switch(Pi()){case Oi:return 99;case Ri:return 98;case Li:return 97;case Mi:return 96;case Fi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Ri;case 97:return Li;case 96:return Mi;case 95:return Fi;default:throw Error(o(332))}}function Qi(e,t){return e=Gi(e),ki(e,t)}function Yi(e,t,n){return e=Gi(e),Ci(e,t,n)}function Xi(e){return null===qi?(qi=[e],Bi=Ci(Oi,Ji)):qi.push(e),ji}function $i(){if(null!==Bi){var e=Bi;Bi=null,Di(e)}Ji()}function Ji(){if(!zi&&null!==qi){zi=!0;var e=0;try{var t=qi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),qi=null}catch(n){throw null!==qi&&(qi=qi.slice(e+1)),Ci(Oi,$i),n}finally{zi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function es(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ts={current:null},ns=null,rs=null,is=null;function ss(){is=rs=ns=null}function os(e){var t=ts.current;pi(ts),e.type._context._currentValue=t}function as(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ls(e,t){ns=e,is=rs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Mo=!0),e.firstContext=null)}function us(e,t){if(is!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(is=e,t=1073741823),t={context:e,observedBits:t,next:null},null===rs){if(null===ns)throw Error(o(308));rs=t,ns.dependencies={expirationTime:0,firstContext:t,responders:null}}else rs=rs.next=t;return e._currentValue}var cs=!1;function hs(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fs(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ps(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ms(e,t){var n=e.alternate;null!==n&&ds(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function gs(e,t,n,r){var s=e.updateQueue;cs=!1;var o=s.baseQueue,a=s.shared.pending;if(null!==a){if(null!==o){var l=o.next;o.next=a.next,a.next=l}o=a,s.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==o){l=o.next;var u=s.baseState,c=0,h=null,d=null,f=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=u):f=f.next=m,a>c&&(c=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),El(a,p.suspenseConfig);e:{var g=e,y=p;switch(a=t,m=n,y.tag){case 1:if("function"===typeof(g=y.payload)){u=g.call(m,u,a);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=y.payload)?g.call(m,u,a):g)||void 0===a)break e;u=i({},u,a);break e;case 2:cs=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=s.effects)?s.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=s.shared.pending))break;p=o.next=a.next,a.next=l,s.baseQueue=o=a,s.shared.pending=null}}null===f?h=u:f.next=d,s.baseState=h,s.baseQueue=f,Tl(c),e.expirationTime=c,e.memoizedState=u}}function ys(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var vs=X.ReactCurrentBatchConfig,ws=(new r.Component).refs;function bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var _s={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=vs.suspense;(i=fs(r=cl(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),ps(e,i),hl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=vs.suspense;(i=fs(r=cl(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ps(e,i),hl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ul(),r=vs.suspense;(r=fs(n=cl(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),ps(e,r),hl(e,n)}};function Es(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Hr(n,r)||!Hr(i,s))}function Ts(e,t,n){var r=!1,i=gi,s=t.contextType;return"object"===typeof s&&null!==s?s=us(s):(i=_i(t)?wi:yi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):gi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_s,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function xs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_s.enqueueReplaceState(t,t.state,null)}function Ss(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ws,hs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=us(s):(s=_i(t)?wi:yi.current,i.context=bi(e,s)),gs(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_s.enqueueReplaceState(i,i.state,null),gs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Is=Array.isArray;function ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ws&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Cs(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ds(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ks(e,t,n),r.return=e,r):((r=Kl(n.type,n.key,n.props,null,e.mode,r)).ref=ks(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Hl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Wl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Kl(t.type,t.key,t.props,null,e.mode,n)).ref=ks(e,null,t),n.return=e,n;case te:return(t=Gl(t,e.mode,n)).return=e,t}if(Is(t)||me(t))return(t=Hl(t,e.mode,n,null)).return=e,t;Cs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(Is(n)||me(n))return null!==i?null:h(e,t,n,r,null);Cs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Is(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Cs(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=me(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,s,l){var u="object"===typeof s&&null!==s&&s.type===ne&&null===s.key;u&&(s=s.props.children);var c="object"===typeof s&&null!==s;if(c)switch(s.$$typeof){case ee:e:{for(c=s.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(s.type===ne){n(e,u.sibling),(r=i(u,s.props.children)).return=e,e=r;break e}}else if(u.elementType===s.type){n(e,u.sibling),(r=i(u,s.props)).ref=ks(e,u,s),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===ne?((r=Hl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=Kl(s.type,s.key,s.props,null,e.mode,l)).ref=ks(e,r,s),l.return=e,e=l)}return a(e);case te:e:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Wl(s,e.mode,l)).return=e,e=r),a(e);if(Is(s))return m(e,r,s,l);if(me(s))return g(e,r,s,l);if(c&&Cs(e,s),"undefined"===typeof s&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var As=Ds(!0),Ns=Ds(!1),Ps={},Os={current:Ps},Rs={current:Ps},Ls={current:Ps};function Ms(e){if(e===Ps)throw Error(o(174));return e}function Fs(e,t){switch(mi(Ls,t),mi(Rs,e),mi(Os,Ps),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Os),mi(Os,t)}function js(){pi(Os),pi(Rs),pi(Ls)}function Vs(e){Ms(Ls.current);var t=Ms(Os.current),n=Fe(t,e.type);t!==n&&(mi(Rs,e),mi(Os,n))}function Us(e){Rs.current===e&&(pi(Os),pi(Rs))}var qs={current:0};function Bs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===wn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zs(e,t){return{responder:e,props:t}}var Ks=X.ReactCurrentDispatcher,Hs=X.ReactCurrentBatchConfig,Ws=0,Gs=null,Qs=null,Ys=null,Xs=!1;function $s(){throw Error(o(321))}function Js(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zr(e[n],t[n]))return!1;return!0}function Zs(e,t,n,r,i,s){if(Ws=s,Gs=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ks.current=null===e||null===e.memoizedState?To:xo,e=n(r,i),t.expirationTime===Ws){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(o(301));s+=1,Ys=Qs=null,t.updateQueue=null,Ks.current=So,e=n(r,i)}while(t.expirationTime===Ws)}if(Ks.current=Eo,t=null!==Qs&&null!==Qs.next,Ws=0,Ys=Qs=Gs=null,Xs=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ys?Gs.memoizedState=Ys=e:Ys=Ys.next=e,Ys}function to(){if(null===Qs){var e=Gs.alternate;e=null!==e?e.memoizedState:null}else e=Qs.next;var t=null===Ys?Gs.memoizedState:Ys.next;if(null!==t)Ys=t,Qs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qs=e).memoizedState,baseState:Qs.baseState,baseQueue:Qs.baseQueue,queue:Qs.queue,next:null},null===Ys?Gs.memoizedState=Ys=e:Ys=Ys.next=e}return Ys}function no(e,t){return"function"===typeof t?t(e):t}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,u=i;do{var c=u.expirationTime;if(c<Ws){var h={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,c>Gs.expirationTime&&(Gs.expirationTime=c,Tl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),El(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?s=r:l.next=a,zr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);zr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function so(e){var t=eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=_o.bind(null,Gs,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Gs.updateQueue)?(t={lastEffect:null},Gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return to().memoizedState}function lo(e,t,n,r){var i=eo();Gs.effectTag|=e,i.memoizedState=oo(1|t,n,void 0,void 0===r?null:r)}function uo(e,t,n,r){var i=to();r=void 0===r?null:r;var s=void 0;if(null!==Qs){var o=Qs.memoizedState;if(s=o.destroy,null!==r&&Js(r,o.deps))return void oo(t,n,s,r)}Gs.effectTag|=e,i.memoizedState=oo(1|t,n,s,r)}function co(e,t){return lo(516,4,e,t)}function ho(e,t){return uo(516,4,e,t)}function fo(e,t){return uo(4,2,e,t)}function po(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function mo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,uo(4,2,po.bind(null,t,e),n)}function go(){}function yo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function vo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Js(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Js(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bo(e,t,n){var r=Wi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Hs.suspense;Hs.suspense=void 0===t?null:t;try{e(!1),n()}finally{Hs.suspense=r}}))}function _o(e,t,n){var r=ul(),i=vs.suspense;i={expirationTime:r=cl(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Gs||null!==s&&s===Gs)Xs=!0,i.expirationTime=Ws,Gs.expirationTime=Ws;else{if(0===e.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.eagerReducer=s,i.eagerState=a,zr(a,o))return}catch(l){}hl(e,r)}}var Eo={readContext:us,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useLayoutEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useResponder:$s,useDeferredValue:$s,useTransition:$s},To={readContext:us,useCallback:yo,useContext:us,useEffect:co,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,lo(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lo(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_o.bind(null,Gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:so,useDebugValue:go,useResponder:zs,useDeferredValue:function(e,t){var n=so(e),r=n[0],i=n[1];return co((function(){var n=Hs.suspense;Hs.suspense=void 0===t?null:t;try{i(e)}finally{Hs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=so(!1),n=t[0];return t=t[1],[yo(bo.bind(null,t,e),[t,e]),n]}},xo={readContext:us,useCallback:vo,useContext:us,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:fo,useMemo:wo,useReducer:ro,useRef:ao,useState:function(){return ro(no)},useDebugValue:go,useResponder:zs,useDeferredValue:function(e,t){var n=ro(no),r=n[0],i=n[1];return ho((function(){var n=Hs.suspense;Hs.suspense=void 0===t?null:t;try{i(e)}finally{Hs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[vo(bo.bind(null,t,e),[t,e]),n]}},So={readContext:us,useCallback:vo,useContext:us,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:fo,useMemo:wo,useReducer:io,useRef:ao,useState:function(){return io(no)},useDebugValue:go,useResponder:zs,useDeferredValue:function(e,t){var n=io(no),r=n[0],i=n[1];return ho((function(){var n=Hs.suspense;Hs.suspense=void 0===t?null:t;try{i(e)}finally{Hs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[vo(bo.bind(null,t,e),[t,e]),n]}},Io=null,ko=null,Co=!1;function Do(e,t){var n=ql(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function No(e){if(Co){var t=ko;if(t){var n=t;if(!Ao(e,t)){if(!(t=kn(n.nextSibling))||!Ao(e,t))return e.effectTag=-1025&e.effectTag|2,Co=!1,void(Io=e);Do(Io,n)}Io=e,ko=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Co=!1,Io=e}}function Po(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Io=e}function Oo(e){if(e!==Io)return!1;if(!Co)return Po(e),Co=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xn(t,e.memoizedProps))for(t=ko;t;)Do(e,t),t=kn(t.nextSibling);if(Po(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn){if(0===t){ko=kn(e.nextSibling);break e}t--}else n!==yn&&n!==bn&&n!==wn||t++}e=e.nextSibling}ko=null}}else ko=Io?kn(e.stateNode.nextSibling):null;return!0}function Ro(){ko=Io=null,Co=!1}var Lo=X.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ns(t,null,n,r):As(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return ls(t,i),r=Zs(e,t,n,r,s,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Bl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kl(n.type,null,r,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,s))}return o=e.child,i<s&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Hr)(i,r)&&e.ref===t.ref)?ta(e,t,s):(t.effectTag|=1,(e=zl(o,r)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,r,i,s){return null!==e&&Hr(e.memoizedProps,r)&&e.ref===t.ref&&(Mo=!1,i<s)?(t.expirationTime=e.expirationTime,ta(e,t,s)):Bo(e,t,n,r,s)}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Bo(e,t,n,r,i){var s=_i(n)?wi:yi.current;return s=bi(t,s),ls(t,i),n=Zs(e,t,n,r,s,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function zo(e,t,n,r,i){if(_i(n)){var s=!0;Si(t)}else s=!1;if(ls(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ts(t,n,r),Ss(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=us(u):u=bi(t,u=_i(n)?wi:yi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&xs(t,o,r,u),cs=!1;var d=t.memoizedState;o.state=d,gs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||vi.current||cs?("function"===typeof c&&(bs(t,n,c,r),l=t.memoizedState),(a=cs||Es(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ds(e,t),a=t.memoizedProps,o.props=t.type===t.elementType?a:es(t.type,a),l=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=us(u):u=bi(t,u=_i(n)?wi:yi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&xs(t,o,r,u),cs=!1,l=t.memoizedState,o.state=l,gs(t,r,o,i),d=t.memoizedState,a!==r||l!==d||vi.current||cs?("function"===typeof c&&(bs(t,n,c,r),d=t.memoizedState),(c=cs||Es(t,n,a,r,l,d,u))?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ko(e,t,n,r,s,i)}function Ko(e,t,n,r,i,s){qo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ii(t,n,!1),ta(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=As(t,e.child,null,s),t.child=As(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Fs(e,t.containerInfo)}var Wo,Go,Qo,Yo,Xo={dehydrated:null,retryTime:0};function $o(e,t,n){var r,i=t.mode,s=t.pendingProps,o=qs.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(o|=1),mi(qs,1&o),null===e){if(void 0!==s.fallback&&No(t),a){if(a=s.fallback,(s=Hl(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Hl(a,i,n,null)).return=t,s.sibling=n,t.memoizedState=Xo,t.child=s,n}return i=s.children,t.memoizedState=null,t.child=Ns(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(s=s.fallback,(n=zl(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=zl(i,s)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Xo,t.child=n,i}return n=As(t,e.child,s.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=s.fallback,(s=Hl(null,i,0,null)).return=t,s.child=e,null!==e&&(e.return=s),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Hl(a,i,n,null)).return=t,s.sibling=n,n.effectTag|=2,s.childExpirationTime=0,t.memoizedState=Xo,t.child=s,n}return t.memoizedState=null,t.child=As(t,e,s.children,n)}function Jo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),as(e.return,t)}function Zo(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=s)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=qs.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,n);else if(19===e.tag)Jo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(qs,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Bs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zo(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zo(t,!0,n,null,s,t.lastEffect);break;case"together":Zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Tl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&Ei(),null;case 3:return js(),pi(vi),pi(yi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Oo(t)||(t.effectTag|=4),Go(t),null;case 5:Us(t),n=Ms(Ls.current);var s=t.type;if(null!==e&&null!=t.stateNode)Qo(e,t,s,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ms(Os.current),Oo(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[An]=t,r[Nn]=a,s){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Qt($e[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Te(r,a),Qt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),un(n,"onChange");break;case"textarea":Ne(r,a),Qt("invalid",r),un(n,"onChange")}for(var l in on(s,a),e=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):x.hasOwnProperty(l)&&null!=u&&un(n,l)}switch(s){case"input":be(r),Ie(r,a,!0);break;case"textarea":be(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Me(s)),e===ln?"script"===s?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(s,{is:r.is}):(e=l.createElement(s),"select"===s&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,s),e[An]=t,e[Nn]=r,Wo(e,t,!1,!1),t.stateNode=e,l=an(s,r),s){case"iframe":case"object":case"embed":Qt("load",e),u=r;break;case"video":case"audio":for(u=0;u<$e.length;u++)Qt($e[u],e);u=r;break;case"source":Qt("error",e),u=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),u=r;break;case"form":Qt("reset",e),Qt("submit",e),u=r;break;case"details":Qt("toggle",e),u=r;break;case"input":Te(e,r),u=Ee(e,r),Qt("invalid",e),un(n,"onChange");break;case"option":u=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Qt("invalid",e),un(n,"onChange");break;case"textarea":Ne(e,r),u=Ae(e,r),Qt("invalid",e),un(n,"onChange");break;default:u=r}on(s,u);var c=u;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Ue(e,h):"children"===a?"string"===typeof h?("textarea"!==s||""!==h)&&qe(e,h):"number"===typeof h&&qe(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(x.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&$(e,a,h,l))}switch(s){case"input":be(e),Ie(e,r,!1);break;case"textarea":be(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?De(e,!!r.multiple,n,!1):null!=r.defaultValue&&De(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=cn)}Tn(s,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ms(Ls.current),Ms(Os.current),Oo(t)?(n=t.stateNode,r=t.memoizedProps,n[An]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[An]=t,t.stateNode=n)}return null;case 13:return pi(qs),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Oo(t):(r=null!==(s=e.memoizedState),n||null===s||null!==(s=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=s,s.nextEffect=a):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&qs.current)?za===Oa&&(za=Ma):(za!==Oa&&za!==Ma||(za=Fa),0!==Qa&&null!==Ua&&(Xl(Ua,Ba),$l(Ua,Qa)))),(n||r)&&(t.effectTag|=4),null);case 4:return js(),Go(t),null;case 10:return os(t),null;case 19:if(pi(qs),null===(r=t.memoizedState))return null;if(s=0!==(64&t.effectTag),null===(a=r.rendering)){if(s)na(r,!1);else if(za!==Oa||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Bs(a))){for(t.effectTag|=64,na(r,!1),null!==(s=e.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(s=r).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(e=s.alternate)?(s.childExpirationTime=0,s.expirationTime=a,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=e.childExpirationTime,s.expirationTime=e.expirationTime,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi(qs,1&qs.current|2),t.child}a=a.sibling}}else{if(!s)if(null!==(e=Bs(a))){if(t.effectTag|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Hi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,s=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Hi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Hi(),n.sibling=null,t=qs.current,mi(qs,s?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function ia(e){switch(e.tag){case 1:_i(e.type)&&Ei();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(js(),pi(vi),pi(yi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Us(e),null;case 13:return pi(qs),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(qs),null;case 4:return js(),null;case 10:return os(e),null;default:return null}}function sa(e,t){return{value:e,source:t,stack:ye(t)}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(){},Qo=function(e,t,n,r,s){var o=e.memoizedProps;if(o!==r){var a,l,u=t.stateNode;switch(Ms(Os.current),e=null,n){case"input":o=Ee(u,o),r=Ee(u,r),e=[];break;case"option":o=Ce(u,o),r=Ce(u,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Ae(u,o),r=Ae(u,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(u.onclick=cn)}for(a in on(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(l in u=o[a])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(x.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,c)):"children"===a?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(x.hasOwnProperty(a)?(null!=c&&un(s,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),s=e,(t.updateQueue=s)&&(t.effectTag|=4)}},Yo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var oa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function la(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ll(e,n)}else t.current=null}function ua(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:es(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:es(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ys(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ys(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Tn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function fa(e,t,n){switch("function"===typeof Vl&&Vl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(s){Ll(i,s)}}e=e.next}while(e!==r)}))}break;case 1:la(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ll(e,n)}}(t,n);break;case 5:la(t);break;case 4:wa(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(qe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?ya(e,n,t):va(e,n,t)}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function wa(e,t,n){for(var r,i,s=t,a=!1;;){if(!a){a=s.return;e:for(;;){if(null===a)throw Error(o(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===s.tag||6===s.tag){e:for(var l=e,u=s,c=n,h=u;;)if(fa(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,u=s.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(fa(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(a=!1)}s.sibling.return=s.return,s=s.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ca(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&xe(n,r),an(e,i),t=an(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?rn(n,l):"dangerouslySetInnerHTML"===a?Ue(n,l):"children"===a?qe(n,l):$(n,a,l,t)}switch(e){case"input":Se(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?De(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?De(n,!!r.multiple,r.defaultValue,!0):De(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Xa=Hi()),null!==n)e:for(e=n;;){if(5===e.tag)s=e.stateNode,r?"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,s.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(s=e.child.sibling).return=e,e=s;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _a(t);case 19:return void _a(t)}throw Error(o(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new oa),t.forEach((function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ea="function"===typeof WeakMap?WeakMap:Map;function Ta(e,t,n){(n=fs(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,el=r),aa(e,t)},n}function xa(e,t,n){(n=fs(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tl?tl=new Set([this]):tl.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Sa,Ia=Math.ceil,ka=X.ReactCurrentDispatcher,Ca=X.ReactCurrentOwner,Da=0,Aa=8,Na=16,Pa=32,Oa=0,Ra=1,La=2,Ma=3,Fa=4,ja=5,Va=Da,Ua=null,qa=null,Ba=0,za=Oa,Ka=null,Ha=1073741823,Wa=1073741823,Ga=null,Qa=0,Ya=!1,Xa=0,$a=500,Ja=null,Za=!1,el=null,tl=null,nl=!1,rl=null,il=90,sl=null,ol=0,al=null,ll=0;function ul(){return(Va&(Na|Pa))!==Da?1073741821-(Hi()/10|0):0!==ll?ll:ll=1073741821-(Hi()/10|0)}function cl(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Wi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Va&Na)!==Da)return Ba;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Ua&&e===Ba&&--e,e}function hl(e,t){if(50<ol)throw ol=0,al=null,Error(o(185));if(null!==(e=dl(e,t))){var n=Wi();1073741823===t?(Va&Aa)!==Da&&(Va&(Na|Pa))===Da?gl(e):(pl(e),Va===Da&&$i()):pl(e),(4&Va)===Da||98!==n&&99!==n||(null===sl?sl=new Map([[e,t]]):(void 0===(n=sl.get(e))||n>t)&&sl.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ua===i&&(Tl(t),za===Fa&&Xl(i,Ba)),$l(i,t)),i}function fl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(gl.bind(null,e));else{var t=fl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ul();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==ji&&Di(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(gl.bind(null,e)):Yi(r,ml.bind(null,e),{timeout:10*(1073741821-t)-Hi()}),e.callbackNode=t}}}function ml(e,t){if(ll=0,t)return Jl(e,t=ul()),pl(e),null;var n=fl(e);if(0!==n){if(t=e.callbackNode,(Va&(Na|Pa))!==Da)throw Error(o(327));if(Pl(),e===Ua&&n===Ba||wl(e,n),null!==qa){var r=Va;Va|=Na;for(var i=_l();;)try{Sl();break}catch(l){bl(e,l)}if(ss(),Va=r,ka.current=i,za===Ra)throw t=Ka,wl(e,n),Xl(e,n),pl(e),t;if(null===qa)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=za,Ua=null,r){case Oa:case Ra:throw Error(o(345));case La:Jl(e,2<n?2:n);break;case Ma:if(Xl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),1073741823===Ha&&10<(i=Xa+$a-Hi())){if(Ya){var s=e.lastPingedTime;if(0===s||s>=n){e.lastPingedTime=n,wl(e,n);break}}if(0!==(s=fl(e))&&s!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Sn(Dl.bind(null,e),i);break}Dl(e);break;case Fa:if(Xl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),Ya&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,wl(e,n);break}if(0!==(i=fl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Wa?r=10*(1073741821-Wa)-Hi():1073741823===Ha?r=0:(r=10*(1073741821-Ha)-5e3,0>(r=(i=Hi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ia(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Sn(Dl.bind(null,e),r);break}Dl(e);break;case ja:if(1073741823!==Ha&&null!==Ga){s=Ha;var a=Ga;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(s=Hi()-(10*(1073741821-s)-(0|a.timeoutMs||5e3)))<=i?0:i+r-s),10<r){Xl(e,n),e.timeoutHandle=Sn(Dl.bind(null,e),r);break}}Dl(e);break;default:throw Error(o(329))}if(pl(e),e.callbackNode===t)return ml.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Va&(Na|Pa))!==Da)throw Error(o(327));if(Pl(),e===Ua&&t===Ba||wl(e,t),null!==qa){var n=Va;Va|=Na;for(var r=_l();;)try{xl();break}catch(i){bl(e,i)}if(ss(),Va=n,ka.current=r,za===Ra)throw n=Ka,wl(e,t),Xl(e,t),pl(e),n;if(null!==qa)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ua=null,Dl(e),pl(e)}return null}function yl(e,t){var n=Va;Va|=1;try{return e(t)}finally{(Va=n)===Da&&$i()}}function vl(e,t){var n=Va;Va&=-2,Va|=Aa;try{return e(t)}finally{(Va=n)===Da&&$i()}}function wl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,In(n)),null!==qa)for(n=qa.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ei();break;case 3:js(),pi(vi),pi(yi);break;case 5:Us(r);break;case 4:js();break;case 13:case 19:pi(qs);break;case 10:os(r)}n=n.return}Ua=e,qa=zl(e.current,null),Ba=t,za=Oa,Ka=null,Wa=Ha=1073741823,Ga=null,Qa=0,Ya=!1}function bl(e,t){for(;;){try{if(ss(),Ks.current=Eo,Xs)for(var n=Gs.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ws=0,Ys=Qs=Gs=null,Xs=!1,null===qa||null===qa.return)return za=Ra,Ka=t,qa=null;e:{var i=e,s=qa.return,o=qa,a=t;if(t=Ba,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&o.mode)){var u=o.alternate;u?(o.updateQueue=u.updateQueue,o.memoizedState=u.memoizedState,o.expirationTime=u.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var c=0!==(1&qs.current),h=s;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=fs(1073741823,null);y.tag=2,ps(o,y)}o.expirationTime=1073741823;break e}a=void 0,o=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new Ea,a=new Set,v.set(l,a)):void 0===(a=v.get(l))&&(a=new Set,v.set(l,a)),!a.has(o)){a.add(o);var w=Ml.bind(null,i,l,o);l.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(o))}za!==ja&&(za=La),a=sa(a,o),h=s;do{switch(h.tag){case 3:l=a,h.effectTag|=4096,h.expirationTime=t,ms(h,Ta(h,l,t));break e;case 1:l=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===tl||!tl.has(_)))){h.effectTag|=4096,h.expirationTime=t,ms(h,xa(h,l,t));break e}}h=h.return}while(null!==h)}qa=kl(qa)}catch(E){t=E;continue}break}}function _l(){var e=ka.current;return ka.current=Eo,null===e?Eo:e}function El(e,t){e<Ha&&2<e&&(Ha=e),null!==t&&e<Wa&&2<e&&(Wa=e,Ga=t)}function Tl(e){e>Qa&&(Qa=e)}function xl(){for(;null!==qa;)qa=Il(qa)}function Sl(){for(;null!==qa&&!Vi();)qa=Il(qa)}function Il(e){var t=Sa(e.alternate,e,Ba);return e.memoizedProps=e.pendingProps,null===t&&(t=kl(e)),Ca.current=null,t}function kl(e){qa=e;do{var t=qa.alternate;if(e=qa.return,0===(2048&qa.effectTag)){if(t=ra(t,qa,Ba),1===Ba||1!==qa.childExpirationTime){for(var n=0,r=qa.child;null!==r;){var i=r.expirationTime,s=r.childExpirationTime;i>n&&(n=i),s>n&&(n=s),r=r.sibling}qa.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=qa.firstEffect),null!==qa.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=qa.firstEffect),e.lastEffect=qa.lastEffect),1<qa.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=qa:e.firstEffect=qa,e.lastEffect=qa))}else{if(null!==(t=ia(qa)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=qa.sibling))return t;qa=e}while(null!==qa);return za===Oa&&(za=ja),null}function Cl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Dl(e){var t=Wi();return Qi(99,Al.bind(null,e,t)),null}function Al(e,t){do{Pl()}while(null!==rl);if((Va&(Na|Pa))!==Da)throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Cl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ua&&(qa=Ua=null,Ba=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var s=Va;Va|=Pa,Ca.current=null,_n=Gt;var a=mn();if(gn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(I){l=null;break e}var d=0,f=-1,p=-1,m=0,g=0,y=a,v=null;t:for(;;){for(var w;y!==l||0!==c&&3!==y.nodeType||(f=d+c),y!==h||0!==u&&3!==y.nodeType||(p=d+u),3===y.nodeType&&(d+=y.nodeValue.length),null!==(w=y.firstChild);)v=y,y=w;for(;;){if(y===a)break t;if(v===l&&++m===c&&(f=d),v===h&&++g===u&&(p=d),null!==(w=y.nextSibling))break;v=(y=v).parentNode}y=w}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;En={activeElementDetached:null,focusedElem:a,selectionRange:l},Gt=!1,Ja=i;do{try{Nl()}catch(I){if(null===Ja)throw Error(o(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=i;do{try{for(a=e,l=t;null!==Ja;){var b=Ja.effectTag;if(16&b&&qe(Ja.stateNode,""),128&b){var _=Ja.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&b){case 2:ga(Ja),Ja.effectTag&=-3;break;case 6:ga(Ja),Ja.effectTag&=-3,ba(Ja.alternate,Ja);break;case 1024:Ja.effectTag&=-1025;break;case 1028:Ja.effectTag&=-1025,ba(Ja.alternate,Ja);break;case 4:ba(Ja.alternate,Ja);break;case 8:wa(a,c=Ja,l),pa(c)}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(o(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);if(E=En,_=mn(),b=E.focusedElem,l=E.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==l&&gn(b)&&(_=l.start,void 0===(E=l.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),c=b.textContent.length,a=Math.min(l.start,c),l=void 0===l.end?a:Math.min(l.end,c),!E.extend&&a>l&&(c=l,l=a,a=c),c=fn(b,a),h=fn(b,l),c&&h&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),a>l?(E.addRange(_),E.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Gt=!!_n,En=_n=null,e.current=n,Ja=i;do{try{for(b=e;null!==Ja;){var T=Ja.effectTag;if(36&T&&da(b,Ja.alternate,Ja),128&T){_=void 0;var x=Ja.ref;if(null!==x){var S=Ja.stateNode;Ja.tag,_=S,"function"===typeof x?x(_):x.current=_}}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(o(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=null,Ui(),Va=s}else e.current=n;if(nl)nl=!1,rl=e,il=t;else for(Ja=i;null!==Ja;)t=Ja.nextEffect,Ja.nextEffect=null,Ja=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===al?ol++:(ol=0,al=e):ol=0,"function"===typeof jl&&jl(n.stateNode,r),pl(e),Za)throw Za=!1,e=el,el=null,e;return(Va&Aa)!==Da||$i(),null}function Nl(){for(;null!==Ja;){var e=Ja.effectTag;0!==(256&e)&&ua(Ja.alternate,Ja),0===(512&e)||nl||(nl=!0,Yi(97,(function(){return Pl(),null}))),Ja=Ja.nextEffect}}function Pl(){if(90!==il){var e=97<il?97:il;return il=90,Qi(e,Ol)}}function Ol(){if(null===rl)return!1;var e=rl;if(rl=null,(Va&(Na|Pa))!==Da)throw Error(o(331));var t=Va;for(Va|=Pa,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ca(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(o(330));Ll(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Va=t,$i(),!0}function Rl(e,t,n){ps(e,t=Ta(e,t=sa(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Ll(e,t){if(3===e.tag)Rl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tl||!tl.has(r))){ps(n,e=xa(n,e=sa(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ua===e&&Ba===n?za===Fa||za===Ma&&1073741823===Ha&&Hi()-Xa<$a?wl(e,Ba):Ya=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function Fl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cl(t=ul(),e,null)),null!==(e=dl(e,t))&&pl(e)}Sa=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||vi.current)Mo=!0;else{if(r<n){switch(Mo=!1,t.tag){case 3:Ho(t),Ro();break;case 5:if(Vs(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&Si(t);break;case 4:Fs(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(ts,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?$o(e,t,n):(mi(qs,1&qs.current),null!==(t=ta(e,t,n))?t.sibling:null);mi(qs,1&qs.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(qs,qs.current),!r)return null}return ta(e,t,n)}Mo=!1}}else Mo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),ls(t,n),i=Zs(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var s=!0;Si(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hs(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&bs(t,r,a,e),i.updater=_s,t.stateNode=i,i._reactInternalFiber=t,Ss(t,r,e,n),t=Ko(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,s=t.tag=function(e){if("function"===typeof e)return Bl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=es(i,e),s){case 0:t=Bo(null,t,i,e,n);break e;case 1:t=zo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,es(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 1:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ds(e,t),gs(t,r,null,n),(r=t.memoizedState.element)===i)Ro(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(ko=kn(t.stateNode.containerInfo.firstChild),Io=t,i=Co=!0),i)for(n=Ns(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fo(e,t,r,n),Ro();t=t.child}return t;case 5:return Vs(t),null===e&&No(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,xn(r,i)?a=null:null!==s&&xn(r,s)&&(t.effectTag|=16),qo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fo(e,t,a,n),t=t.child),t;case 6:return null===e&&No(t),null;case 13:return $o(e,t,n);case 4:return Fs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=As(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(mi(ts,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0===(s=zr(l,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!vi.current){t=ta(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&s)){1===l.tag&&((c=fs(n,null)).tag=2,ps(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),as(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,ls(t,n),r=r(i=us(i,s.unstable_observedBits)),t.effectTag|=1,Fo(e,t,r,n),t.child;case 14:return s=es(i=t.type,t.pendingProps),Vo(e,t,i,s=es(i.type,s),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,Si(t)):e=!1,ls(t,n),Ts(t,r,i),Ss(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(o(156,t.tag))};var jl=null,Vl=null;function Ul(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ql(e,t,n,r){return new Ul(e,t,n,r)}function Bl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zl(e,t){var n=e.alternate;return null===n?((n=ql(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kl(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Bl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Hl(n.children,i,s,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=ql(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=s,e;case ue:return(e=ql(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=s,e;case ce:return(e=ql(19,n,t,i)).elementType=ce,e.expirationTime=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case se:a=10;break e;case oe:a=9;break e;case le:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=ql(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=s,t}function Hl(e,t,n,r){return(e=ql(7,e,r,t)).expirationTime=n,e}function Wl(e,t,n){return(e=ql(6,e,null,t)).expirationTime=n,e}function Gl(e,t,n){return(t=ql(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Xl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function $l(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Jl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zl(e,t,n,r){var i=t.current,s=ul(),a=vs.suspense;s=cl(s,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=xi(n,u,l);break e}}n=l}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ps(i,t),hl(i,s),s}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function ru(e,t,n){var r=new Ql(e,t,n=null!=n&&!0===n.hydrate),i=ql(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,hs(i),e[Pn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);kt.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=eu(o);a.call(e)}}Zl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var l=i;i=function(){var e=eu(o);l.call(e)}}vl((function(){Zl(t,o,e,i)}))}return eu(o)}function ou(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ru.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Pn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(ul(),150,100);hl(e,t),nu(e,t)}},yt=function(e){13===e.tag&&(hl(e,3),nu(e,3))},vt=function(e){if(13===e.tag){var t=ul();hl(e,t=cl(t,e,null)),nu(e,t)}},C=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(o(90));_e(r),Se(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&De(e,!!n.multiple,t,!1)}},R=yl,L=function(e,t,n,r,i){var s=Va;Va|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(Va=s)===Da&&$i()}},M=function(){(Va&(1|Na|Pa))===Da&&(function(){if(null!==sl){var e=sl;sl=null,e.forEach((function(e,t){Jl(t,e),pl(t)})),$i()}}(),Pl())},F=function(e,t){var n=Va;Va|=2;try{return e(t)}finally{(Va=n)===Da&&$i()}};var au={Events:[Rn,Ln,Mn,I,T,zn,function(e){st(e,Bn)},P,O,Jt,lt,Pl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);jl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Vl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:On,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=ou,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Va&(Na|Pa))!==Da)throw Error(o(187));var n=Va;Va|=1;try{return Qi(99,e.bind(null,t))}finally{Va=n,$i()}},t.hydrate=function(e,t,n){if(!iu(t))throw Error(o(200));return su(null,e,t,!0,n)},t.render=function(e,t,n){if(!iu(t))throw Error(o(200));return su(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(o(40));return!!e._reactRootContainer&&(vl((function(){su(null,null,e,!1,(function(){e._reactRootContainer=null,e[Pn]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return ou(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return su(e,t,n,!1,r)},t.version="16.14.0"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.jsx=u,t.jsxs=u},202:(e,t,n)=>{"use strict";var r=n(123),i="function"===typeof Symbol&&Symbol.for,s=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var T=E.prototype=new _;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var x={current:null},S=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:s,type:e,key:o,ref:a,props:i,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var D=/\/+/g,A=[];function N(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case s:case o:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+L(i=e[l],l);a+=O(i,u,n,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)a+=O(i=i.value,u=t+L(i,l++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function R(e,t,n){return null==e?0:O(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?j(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+n)),r.push(e))}function j(e,t,n,r,i){var s="";null!=n&&(s=(""+n).replace(D,"$&/")+"/"),R(e,F,t=N(t,s,r,i)),P(t)}var V={current:null};function U(){var e=V.current;if(null===e)throw Error(y(321));return e}var q={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return j(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,M,t=N(null,null,t,n)),P(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return j(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(y(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=u,t.PureComponent=E,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)S.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:s,type:e.type,key:o,ref:a,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";var n,r,i,s,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,l=null,u=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(u,0),n}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},s=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var y=!1,v=null,w=-1,b=5,_=0;s=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();_=e+b;try{v(!0,e)?T.postMessage(null):(y=!1,v=null)}catch(n){throw T.postMessage(null),n}}else y=!1},n=function(e){v=e,y||(y=!0,T.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],D=[],A=1,N=null,P=3,O=!1,R=!1,L=!1;function M(e){for(var t=S(D);null!==t;){if(null===t.callback)I(D);else{if(!(t.startTime<=e))break;I(D),t.sortIndex=t.expirationTime,x(C,t)}t=S(D)}}function F(e){if(L=!1,M(e),!R)if(null!==S(C))R=!0,n(j);else{var t=S(D);null!==t&&r(F,t.startTime-e)}}function j(e,n){R=!1,L&&(L=!1,i()),O=!0;var o=P;try{for(M(n),N=S(C);null!==N&&(!(N.expirationTime>n)||e&&!s());){var a=N.callback;if(null!==a){N.callback=null,P=N.priorityLevel;var l=a(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?N.callback=l:N===S(C)&&I(C),M(n)}else I(C);N=S(C)}if(null!==N)var u=!0;else{var c=S(D);null!==c&&r(F,c.startTime-n),u=!1}return u}finally{N=null,P=o,O=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||O||(R=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();if("object"===typeof o&&null!==o){var l=o.delay;l="number"===typeof l&&0<l?a+l:a,o="number"===typeof o.timeout?o.timeout:V(e)}else o=V(e),l=a;return e={id:A++,callback:s,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>a?(e.sortIndex=l,x(D,e),null===S(C)&&e===S(D)&&(L?i():L=!0,r(F,l-a))):(e.sortIndex=o,x(C,e),R||O||(R=!0,n(j))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=S(C);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{comName:()=>ke,eventCodes:()=>Ce,productID:()=>Ie,vendorID:()=>Se});var t={};n.r(t),n.d(t,{FirebaseError:()=>Be,SDK_VERSION:()=>Bt,_DEFAULT_ENTRY_NAME:()=>At,_addComponent:()=>Rt,_addOrOverwriteComponent:()=>Lt,_apps:()=>Pt,_clearComponents:()=>Vt,_components:()=>Ot,_getProvider:()=>Ft,_registerComponent:()=>Mt,_removeServiceInstance:()=>jt,deleteApp:()=>Wt,getApp:()=>Kt,getApps:()=>Ht,initializeApp:()=>zt,onLog:()=>Qt,registerVersion:()=>Gt,setLogLevel:()=>Yt});var r=n(43),i=n(950);function s(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l=a((function(e){let{include:t,exclude:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e=>{const r=t=>"string"===typeof t?e===t:t.test(e);return t?t.some(r):!n||!n.some(r)};for(const[i,s]of(e=>{const t=new Set;do{for(const n of Reflect.ownKeys(e))t.add([e,n])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t})(e.constructor.prototype)){if("constructor"===s||!r(s))continue;const t=Reflect.getOwnPropertyDescriptor(i,s);t&&"function"===typeof t.value&&(e[s]=e[s].bind(e))}return e}));class u extends Error{constructor(){super("".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The global `jsPsych` variable is no longer available in jsPsych v7."," Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.")),this.name="MigrationError"}}function c(e){return[...new Set(e)]}function h(e){if(!e)return e;let t;if(Array.isArray(e)){t=[];for(const n of e)t.push(h(n));return t}if("object"===typeof e&&null!==e){t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=h(e[n]));return t}return e}window.jsPsych={get init(){throw new u("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new u},get randomization(){throw new u},get turk(){throw new u},get pluginAPI(){throw new u},get ALL_KEYS(){throw new u('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new u('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};var d,f=Object.freeze({__proto__:null,deepCopy:h,deepMerge:function e(t,n){let r={};for(const i in t)t.hasOwnProperty(i)&&("object"===typeof t[i]&&n.hasOwnProperty(i)?r[i]=e(t[i],n[i]):r[i]=t[i]);for(const i in n)n.hasOwnProperty(i)&&(r.hasOwnProperty(i)&&"object"===typeof n[i]?r[i]=e(r[i],n[i]):r[i]=n[i]);return r},unique:c});class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){return this.sum()/this.count()}median(){if(0===this.values.length)return;const e=this.values.slice(0).sort((function(e,t){return e-t})),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const n of this.values)t+=Math.pow(n-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)"undefined"===typeof e[t]?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const n of this.values)e(n)&&t.push(n);return new p(t)}}class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new m([this.trials[this.trials.length-1]])}first(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new m:(e>this.trials.length&&(e=this.trials.length),new m(this.trials.slice(0,e)))}last(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new m:(e>this.trials.length&&(e=this.trials.length),new m(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new m(h(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return 0!=this.trials.length&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;t=Array.isArray(e)?h(e):h([e]);const n=[];for(const r of this.trials){let e=!1;for(const n of t){let t=!0;for(const e of Object.keys(n))"undefined"!==typeof r[e]&&r[e]===n[e]||(t=!1);if(t){e=!0;break}}e&&n.push(r)}return new m(n)}filterCustom(e){return new m(this.trials.filter(e))}filterColumns(e){return new m(this.trials.map((t=>Object.fromEntries(e.filter((e=>e in t)).map((e=>[e,t[e]]))))))}select(e){const t=[];for(const n of this.trials)"undefined"!==typeof n[e]&&t.push(n[e]);return new p(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=h(this.trials);for(const n of t)for(const t of e)delete n[t];return new m(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const n of Object.keys(t))e.includes(n)||e.push(n);return e}csv(){return function(e){const t="object"!=typeof e?JSON.parse(e):e;let n="",r="";const i=[];for(const s of t)for(const e in s){let t=e+"";t='"'+t.replace(/"/g,'""')+'",',i.includes(e)||(i.push(e),n+=t)}n=n.slice(0,-1),r+=n+"\r\n";for(const s of t){n="";for(const e of i){let t="undefined"===typeof s[e]?"":s[e];"object"==typeof t&&(t=JSON.stringify(t)),n+='"'+(t+"").replace(/"/g,'""')+'",'}n=n.slice(0,-1),r+=n+"\r\n"}return r}(this.trials)}json(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?JSON.stringify(this.trials,null,"\t"):JSON.stringify(this.trials)}localSave(e,t){let n;if("json"===(e=e.toLowerCase()))n=this.json();else{if("csv"!==e)throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');n=this.csv()}!function(e,t){const n=new Blob([e],{type:"text/plain"});let r="";r="undefined"!==typeof window.webkitURL?window.webkitURL.createObjectURL(n):window.URL.createObjectURL(n);const i=document.createElement("a");i.id="jspsych-download-as-text-link",i.style.display="none",i.download=t,i.href=r,i.click()}(n,t)}}class g{constructor(e){this.jsPsych=e,this.dataProperties={},this.reset()}reset(){this.allData=new m,this.interactionData=new m}get(){return this.allData}getInteractionData(){return this.interactionData}write(e){const t=this.jsPsych.getProgress(),n=this.jsPsych.getCurrentTrial(),r={trial_type:n.type.info.name,trial_index:t.current_trial_global,time_elapsed:this.jsPsych.getTotalTime(),internal_node_id:this.jsPsych.getCurrentTimelineNodeID()};this.allData.push(Object.assign(Object.assign(Object.assign(Object.assign({},e),n.data),r),this.dataProperties))}addProperties(e){this.allData.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.allData.addToLast(e)}getDataByTimelineNode(e){return this.allData.filterCustom((t=>t.internal_node_id.slice(0,e.length)===e))}getLastTrialData(){return this.allData.top()}getLastTimelineData(){const e=this.getLastTrialData().select("internal_node_id").values[0];if("undefined"===typeof e)return new m;{const t=e.substr(0,e.lastIndexOf("-"));return this.getDataByTimelineNode(t)}}displayData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";e=e.toLowerCase(),"json"!=e&&"csv"!=e&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json");const t="json"===e?this.allData.json(!0):this.allData.csv();this.jsPsych.getDisplayElement().innerHTML='<pre id="jspsych-data-display"></pre>',document.getElementById("jspsych-data-display").textContent=t}urlVariables(){return"undefined"==typeof this.query_string&&(this.query_string=function(){const e=window.location.search.substr(1).split("&"),t={};for(let n=0;n<e.length;++n){const r=e[n].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}createInteractionListeners(){window.addEventListener("blur",(()=>{const e={event:"blur",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)})),window.addEventListener("focus",(()=>{const e={event:"focus",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)}));const e=()=>{const e={event:document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)};document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e)}_customInsert(e){this.allData=new m(e)}_fullreset(){this.reset(),this.dataProperties={}}}class y{constructor(){this.hardwareConnected=!1,document.addEventListener("jspsych-activate",(e=>{this.hardwareConnected=!0}))}hardware(e){const t=new CustomEvent("jspsych",{detail:e});document.dispatchEvent(t)}}class v{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=n,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,l(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of Array.from(this.listeners))t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,n){return!(!t&&this.heldKeys.has(n))&&("ALL_KEYS"===e||"NO_KEYS"!==e&&e.includes(n))}getKeyboardResponse(e){let{callback_function:t,valid_responses:n="ALL_KEYS",rt_method:r="performance",persist:i,audio_context:s,audio_context_start_time:o,allow_held_key:a=!1,minimum_valid_rt:l=this.minimumValidRt}=e;"performance"!==r&&"audio"!==r&&(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),r="performance");const u="performance"===r?performance.now():1e3*o;this.registerRootListeners(),this.areResponsesCaseSensitive||"string"===typeof n||(n=n.map((e=>e.toLowerCase())));const c=e=>{const o=Math.round(("performance"==r?performance.now():1e3*s.currentTime)-u);if(o<l)return;const h=this.toLowerCaseIfInsensitive(e.key);this.isResponseValid(n,a,h)&&(e.preventDefault(),i||this.cancelKeyboardResponse(c),t({key:h,rt:o}))};return this.listeners.add(c),c}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(!("string"!==typeof e&&null!==e||"string"!==typeof t&&null!==t))return"string"===typeof e&&"string"===typeof t?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():null===e&&null===t;console.error("Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.")}}!function(e){e[e.BOOL=0]="BOOL",e[e.STRING=1]="STRING",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.FUNCTION=4]="FUNCTION",e[e.KEY=5]="KEY",e[e.KEYS=6]="KEYS",e[e.SELECT=7]="SELECT",e[e.HTML_STRING=8]="HTML_STRING",e[e.IMAGE=9]="IMAGE",e[e.AUDIO=10]="AUDIO",e[e.VIDEO=11]="VIDEO",e[e.OBJECT=12]="OBJECT",e[e.COMPLEX=13]="COMPLEX",e[e.TIMELINE=14]="TIMELINE"}(d||(d={}));const w={data:{type:d.OBJECT,pretty_name:"Data",default:{}},on_start:{type:d.FUNCTION,pretty_name:"On start",default:function(){}},on_finish:{type:d.FUNCTION,pretty_name:"On finish",default:function(){}},on_load:{type:d.FUNCTION,pretty_name:"On load",default:function(){}},post_trial_gap:{type:d.INT,pretty_name:"Post trial gap",default:null},css_classes:{type:d.STRING,pretty_name:"Custom CSS classes",default:null},simulation_options:{type:d.COMPLEX,default:null}},b=[d.AUDIO,d.IMAGE,d.VIDEO];class E{constructor(e,t){this.useWebaudio=e,this.webaudioContext=t,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}initAudio(){this.context=this.useWebaudio?this.webaudioContext:null}audioContext(){return null!==this.context&&"running"!==this.context.state&&this.context.resume(),this.context}getAudioBuffer(e){return new Promise(((t,n)=>{"undefined"==typeof this.audio_buffers[e]||"tmp"==this.audio_buffers[e]?this.preloadAudio([e],(()=>{t(this.audio_buffers[e])}),(()=>{}),(e=>{n(e.error)})):t(this.audio_buffers[e])}))}preloadAudio(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=c(e.flat());let s=0;if(0==e.length)return void n();const o=function(o){const a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=()=>{t.context.decodeAudioData(a.response,(i=>{t.audio_buffers[o]=i,s++,r(o),s==e.length&&n()}),(e=>{i({source:o,error:e})}))},a.onerror=e=>{let t=e;404==a.status&&(t="404"),i({source:o,error:t})},a.onloadend=e=>{404==a.status&&i({source:o,error:"404"})},a.send(),t.preload_requests.push(a)},a=function(o){const a=new Audio,l=()=>{t.audio_buffers[o]=a,s++,r(o),s==e.length&&n(),a.removeEventListener("canplaythrough",l)};a.addEventListener("canplaythrough",l),a.addEventListener("error",(function e(t){i({source:a.src,error:t}),a.removeEventListener("error",e)})),a.addEventListener("abort",(function e(t){i({source:a.src,error:t}),a.removeEventListener("abort",e)})),a.src=o,t.preload_requests.push(a)};for(const l of e)"undefined"!==typeof this.audio_buffers[l]?(s++,r(l),s==e.length&&n()):(this.audio_buffers[l]="tmp",null!==this.audioContext()?o(l):a(l))}preloadImages(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=c(e.flat());var i=0;if(0!==e.length)for(let s=0;s<e.length;s++){const o=new Image,a=e[s];o.onload=()=>{i++,n(a),i===e.length&&t()},o.onerror=e=>{r({source:a,error:e})},o.src=a,this.img_cache[a]=o,this.preload_requests.push(o)}else t()}preloadVideo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=c(e.flat());let i=0;if(0!==e.length)for(const s of e){const o=this.video_buffers,a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType="blob",a.onload=()=>{if(200===a.status||0===a.status){const r=a.response;o[s]=URL.createObjectURL(r),i++,n(s),i===e.length&&t()}},a.onerror=e=>{let t=e;404==a.status&&(t="404"),r({source:s,error:t})},a.onloadend=e=>{404==a.status&&r({source:s,error:"404"})},a.send(),this.preload_requests.push(a)}else t()}getAutoPreloadList(e){const t=Object.fromEntries(b.map((e=>[e,new Set]))),n=(e,r)=>{var i,s,o,a;if("undefined"!==typeof e.timeline)for(const t of e.timeline)n(t,null!==(i=e.type)&&void 0!==i?i:r);else if(null===(o=null!==(s=e.type)&&void 0!==s?s:r)||void 0===o?void 0:o.info){const{name:n,parameters:i}=(null!==(a=e.type)&&void 0!==a?a:r).info;this.preloadMap.has(n)||this.preloadMap.set(n,Object.fromEntries(Object.entries(i).filter((e=>{let[t,{type:n,preload:r}]=e;return b.includes(n)&&(null===r||void 0===r||r)})).map((e=>{let[t,{type:n}]=e;return[t,n]}))));for(const[r,s]of Object.entries(this.preloadMap.get(n))){const n=e[r],i=t[s];if("string"===typeof n)i.add(n);else if(Array.isArray(n))for(const e of n.flat())"string"===typeof e&&i.add(e)}}};return n({timeline:e}),{images:[...t[d.IMAGE]],audio:[...t[d.AUDIO]],video:[...t[d.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const n=new MediaRecorder(e,t);this.camera_recorder=n}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class T{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?this.setJsPsychTimeout((()=>{this.keyDown(e),this.keyUp(e)}),t):(this.keyDown(e),this.keyUp(e))}clickTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?this.setJsPsychTimeout((()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}),t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n>0?this.setJsPsychTimeout((()=>{e.value=t}),n):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let n;if("NO_KEYS"==e)n=null;else if("ALL_KEYS"==e)n=t[Math.floor(Math.random()*t.length)];else{const t=e.flat();n=t[Math.floor(Math.random()*t.length)]}return n}mergeSimulationData(e,t){return Object.assign(Object.assign({},e),null===t||void 0===t?void 0:t.data)}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&"NO_KEYS"==e.choices&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const n=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<n&&(t.rt=null,t.response=null)}}}class x{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const n=window.setTimeout(e,t);return this.timeout_handlers.push(n),n}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}var S={exports:{}};(function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.alea=s})(0,S,!1);var I=S.exports,k=a(I),C={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xor128=s}(0,e,!1)}(C);var D=C.exports,A={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xorwow=s}(0,e,!1)}(A);var N=A.exports,P={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&(s.x&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xorshift7=s}(0,e,!1)}(P);var O=P.exports,R={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,o,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,i=0==(n=a[127&s]^=r+o)?i+1:0);for(i>=128&&(a[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;e.w=o,e.X=a,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&(s.X&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xor4096=s}(0,e,!1)}(R);var L=R.exports,M={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.tychei=s}(0,e,!1)}(M);var F=M.exports,j={exports:{}};!function(e){!function(t,n,r){var i,s=256,o="random",a=r.pow(s,6),l=r.pow(2,52),u=2*l,c=s-1;function h(e,c,h){var y=[],v=m(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,g(n)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(s):(e=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(e)),g(e)}catch(a){var r=t.navigator,o=r&&r.plugins;return[+new Date,t,o,t.screen,g(n)]}}():e,3),y),w=new d(y),b=function(){for(var e=w.g(6),t=a,n=0;e<l;)e=(e+n)*s,t*=s,n=w.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|w.g(4)},b.quick=function(){return w.g(4)/4294967296},b.double=b,m(g(w.S),n),(c.pass||h||function(e,t,n,i){return i&&(i.S&&f(i,w),e.state=function(){return f(w,{})}),n?(r[o]=e,t):e})(b,v,"global"in c?c.global:this==r,c.state)}function d(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<s;)a[i]=i++;for(i=0;i<s;i++)a[i]=a[o=c&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=c&i+1],n=n*s+a[c&(a[i]=a[o=c&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(s)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(p(e[n],t-1))}catch(s){}return r.length?r:"string"==i?e:e+"\0"}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(r.random(),n),e.exports){e.exports=h;try{i=require("crypto")}catch(y){}}else r["seed"+o]=h}("undefined"!==typeof self?self:o,[],Math)}(j);var V=I,U=D,q=N,B=O,z=L,K=F,H=j.exports;H.alea=V,H.xor128=U,H.xorwow=q,H.xorshift7=B,H.xor4096=z,H.tychei=K;var W=H,G=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function Q(e){var t;const n=null!==(t=e)&&void 0!==t&&t.seed?new W(e.seed):null;function r(){return e&&e.maxLength>1?function(){var t,n=!1;for(;!n;)(t=i()).length<=e.maxLength&&(n=!0);return t}():i()}function i(){return G[s(G.length)]}function s(e){const t=n?n():Math.random();return Math.floor(t*e)}if("undefined"===typeof e)return r();"number"===typeof e&&(e={exactly:e}),e.exactly&&(e.min=e.exactly,e.max=e.exactly),"number"!==typeof e.wordsPerString&&(e.wordsPerString=1),"function"!==typeof e.formatter&&(e.formatter=e=>e),"string"!==typeof e.separator&&(e.separator=" ");for(var o=e.min+s(e.max+1-e.min),a=[],l="",u=0,c=0;c<o*e.wordsPerString;c++)u===e.wordsPerString-1?l+=e.formatter(r(),u):l+=e.formatter(r(),u)+e.separator,u++,(c+1)%e.wordsPerString===0&&(a.push(l),l="",u=0);return"string"===typeof e.join&&(a=a.join(e.join)),a}var Y=Q;Q.wordList=G;var X=a(Y);function $(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Array.isArray(e),i=Array.isArray(t);if(r)if(i){if(e.length!=t.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),t.length<e.length){let n=[];for(let r=0;r<e.length;r++)n.push(t);t=n}else t=t.slice(0,e.length)}else{let n=[];for(let r=0;r<e.length;r++)n.push(t);t=n}else i?(t=[t[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(e=[e],t=[t]);let s=[];for(let a=0;a<e.length;a++)for(let n=0;n<t[a];n++)null==e[a]||"object"!=typeof e[a]?s.push(e[a]):s.push(Object.assign({},e[a]));let o=J(s);return n&&(o=function(e){const t={};for(const n of e)for(const e of Object.keys(n))"undefined"===typeof t[e]&&(t[e]=[]),t[e].push(n[e]);return t}(o)),o}function J(e){Array.isArray(e)||console.error("Argument to shuffle() must be an array.");const t=e.slice(0);let n,r,i=t.length;for(;i;)r=Math.floor(Math.random()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}function Z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.length;if(1==n)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),J(e[0]);let r=[];for(let a=0;a<n;a++)r.push(a);t&&(r=J(r));const i=[];let s=null;for(let a=0;a<n;a++)s=null===s?e[a].length:Math.min(s,e[a].length),i.push(J(e[a]));const o=[];for(let a=0;a<s;a++)for(let e=0;e<r.length;e++)o.push(i[r[e]][a]);return o}function ee(e,t){return Array.isArray(e)||console.error("First argument to sampleWithoutReplacement() must be an array"),t>e.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),J(e).slice(0,t)}function te(e,t,n){Array.isArray(e)||console.error("First argument to sampleWithReplacement() must be an array");const r=[];if("undefined"!==typeof n){n.length!==e.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");let t=0;for(const e of n)t+=e;for(const e of n)r.push(e/t)}else for(let o=0;o<e.length;o++)r.push(1/e.length);const i=[r[0]];for(let o=1;o<r.length;o++)i.push(r[o]+i[o-1]);const s=[];for(let o=0;o<t;o++){const t=Math.random();let n=0;for(;t>i[n];)n++;s.push(e[n])}return s}function ne(e,t){return function(){var e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t+e}function re(e){return-Math.log(Math.random())/e}var ie=Object.freeze({__proto__:null,factorial:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[{}];for(const[i,s]of Object.entries(e)){const e=[];for(const t of s)for(const n of r)e.push(Object.assign(Object.assign({},n),{[i]:t}));r=e}return $(r,t,n)},randomID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="";const n="0123456789abcdefghjklmnopqrstuvwxyz";for(let r=0;r<e;r++)t+=n[Math.floor(35*Math.random())];return t},randomInt:function(e,t){if(t<e)throw new Error("Upper boundary must be less than or equal to lower boundary");return e+Math.floor(Math.random()*(t-e+1))},randomWords:function(e){return X(e)},repeat:$,sampleBernoulli:function(e){return Math.random()<=e?1:0},sampleExGaussian:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=ne(e,t)+re(n);if(r)for(;i<=0;)i=ne(e,t)+re(n);return i},sampleExponential:re,sampleNormal:ne,sampleWithReplacement:te,sampleWithoutReplacement:ee,setSeed:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random().toString();return Math.random=k(e),e},shuffle:J,shuffleAlternateGroups:Z,shuffleNoRepeats:function(e,t){Array.isArray(e)||console.error("First argument to shuffleNoRepeats() must be an array."),"undefined"!==typeof t&&"function"!==typeof t&&console.error("Second argument to shuffleNoRepeats() must be a function."),"undefined"==typeof t&&(t=function(e,t){return e===t});const n=J(e);for(let r=0;r<n.length-1;r++)if(t(n[r],n[r+1])){let e=Math.floor(Math.random()*(n.length-2))+1;for(;t(n[r+1],n[e])||t(n[r+1],n[e+1])||t(n[r+1],n[e-1])||t(n[r],n[e]);)e=Math.floor(Math.random()*(n.length-2))+1;const i=n[e];n[e]=n[r+1],n[r+1]=i}return n}});function se(){const e={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},t=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":n[1]},n=t(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map((function(r){e[r]=unescape(t(n,r))})),e.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==e.assignmentId,e.outsideTurk=!e.previewMode&&""===e.hitId&&""==e.assignmentId&&""==e.workerId,e}var oe=Object.freeze({__proto__:null,submitToTurk:function(e){const t=se(),n=t.assignmentId,r=t.turkSubmitTo;if(!n||!r)return;const i=document.createElement("form");i.method="POST",i.action=r+"/mturk/externalSubmit?assignmentId="+n;for(const s in e)if(e.hasOwnProperty(s)){const t=document.createElement("input");t.type="hidden",t.name=s,t.id=s,t.value=e[s],i.appendChild(t)}document.body.appendChild(i),i.submit()},turkInfo:se});class ae{constructor(e,t,n,r){if(this.jsPsych=e,this.progress={current_location:-1,current_variable_set:0,current_repetition:0,current_iteration:0,done:!1},this.parent_node=n,this.relative_id="undefined"===typeof n?0:r,"undefined"!==typeof t.timeline){this.timeline_parameters={timeline:[],loop_function:t.loop_function,conditional_function:t.conditional_function,sample:t.sample,randomize_order:"undefined"!=typeof t.randomize_order&&t.randomize_order,repetitions:"undefined"==typeof t.repetitions?1:t.repetitions,timeline_variables:"undefined"==typeof t.timeline_variables?[{}]:t.timeline_variables,on_timeline_finish:t.on_timeline_finish,on_timeline_start:t.on_timeline_start},this.setTimelineVariablesOrder();var i=Object.assign({},t);delete i.timeline,delete i.conditional_function,delete i.loop_function,delete i.randomize_order,delete i.repetitions,delete i.timeline_variables,delete i.sample,delete i.on_timeline_start,delete i.on_timeline_finish,this.node_trial_data=i;for(var s=0;s<t.timeline.length;s++){var o=Object.assign({},i,t.timeline[s]);if("object"==typeof i.data&&"object"==typeof t.timeline[s].data){var a=Object.assign({},i.data,t.timeline[s].data);o.data=a}this.timeline_parameters.timeline.push(new ae(this.jsPsych,o,this,s))}}else"undefined"===typeof t.type&&console.error('Trial level node is missing the "type" parameter. The parameters for the node are: '+JSON.stringify(t)),this.trial_parameters=Object.assign({},t)}trial(){return"undefined"==typeof this.timeline_parameters?h(this.trial_parameters):this.progress.current_location>=this.timeline_parameters.timeline.length?null:this.timeline_parameters.timeline[this.progress.current_location].trial()}markCurrentTrialComplete(){"undefined"===typeof this.timeline_parameters?this.progress.done=!0:this.timeline_parameters.timeline[this.progress.current_location].markCurrentTrialComplete()}nextRepetiton(){this.setTimelineVariablesOrder(),this.progress.current_location=-1,this.progress.current_variable_set=0,this.progress.current_repetition++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}setTimelineVariablesOrder(){const e=this.timeline_parameters;if("undefined"!==typeof e&&"undefined"!==typeof e.timeline_variables){for(var t=[],n=0;n<e.timeline_variables.length;n++)t.push(n);"undefined"!==typeof e.sample&&("custom"==e.sample.type?t=e.sample.fn(t):"with-replacement"==e.sample.type?t=te(t,e.sample.size,e.sample.weights):"without-replacement"==e.sample.type?t=ee(t,e.sample.size):"fixed-repetitions"==e.sample.type?t=$(t,e.sample.size,!1):"alternate-groups"==e.sample.type?t=Z(e.sample.groups,e.sample.randomize_group_order):console.error('Invalid type in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"')),e.randomize_order&&(t=J(t)),this.progress.order=t}}nextSet(){this.progress.current_location=-1,this.progress.current_variable_set++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}advance(){const e=this.progress,t=this.timeline_parameters,n=this.jsPsych.internal;if(e.done)return!0;if(-1==e.current_location){if("undefined"!==typeof t){if("undefined"!==typeof t.conditional_function&&0==e.current_repetition&&0==e.current_variable_set){n.call_immediate=!0;var r=t.conditional_function();if(n.call_immediate=!1,0==r)return e.done=!0,!0}"undefined"!==typeof t.on_timeline_start&&0==e.current_variable_set&&t.on_timeline_start()}return e.current_location=0,this.advance()}if("undefined"!==typeof t){for(var i=!1;e.current_location<t.timeline.length&&0==i;){if(!t.timeline[e.current_location].advance())return i=!0,!1;e.current_location++}return e.current_variable_set<e.order.length-1?(this.nextSet(),this.advance()):e.current_repetition<t.repetitions-1?(this.nextRepetiton(),"undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),this.advance()):("undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),"undefined"!==typeof t.loop_function?(n.call_immediate=!0,t.loop_function(this.generatedData())?(this.reset(),n.call_immediate=!1,this.parent_node.advance()):(e.done=!0,n.call_immediate=!1,!0)):(e.done=!0,!0))}}isComplete(){return this.progress.done}getTimelineVariableValue(e){if("undefined"!=typeof this.timeline_parameters)return this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]][e]}findTimelineVariable(e){var t=this.getTimelineVariableValue(e);return"undefined"==typeof t?"undefined"!==typeof this.parent_node?this.parent_node.findTimelineVariable(e):void 0:t}timelineVariable(e){if("undefined"==typeof this.timeline_parameters){const t=this.findTimelineVariable(e);return"undefined"===typeof t&&console.warn("Timeline variable "+e+" not found."),t}{var t=Math.max(0,this.progress.current_location);t==this.timeline_parameters.timeline.length&&(t-=1);const n=this.timeline_parameters.timeline[t].timelineVariable(e);return"undefined"===typeof n&&console.warn("Timeline variable "+e+" not found."),n}}allTimelineVariables(){for(var e=this.allTimelineVariablesNames(),t={},n=0;n<e.length;n++)t[e[n]]=this.timelineVariable(e[n]);return t}allTimelineVariablesNames(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("undefined"!==typeof this.timeline_parameters){e=e.concat(Object.keys(this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]]));var t=Math.max(0,this.progress.current_location);return t==this.timeline_parameters.timeline.length&&(t-=1),this.timeline_parameters.timeline[t].allTimelineVariablesNames(e)}if("undefined"==typeof this.timeline_parameters)return e}length(){var e=0;if("undefined"===typeof this.timeline_parameters)return 1;for(var t=0;t<this.timeline_parameters.timeline.length;t++)e+=this.timeline_parameters.timeline[t].length();return e}percentComplete(){for(var e=this.length(),t=0,n=0;n<this.timeline_parameters.timeline.length;n++)this.timeline_parameters.timeline[n].isComplete()&&(t+=this.timeline_parameters.timeline[n].length());return t/e*100}reset(){if(this.progress.current_location=-1,this.progress.current_repetition=0,this.progress.current_variable_set=0,this.progress.current_iteration++,this.progress.done=!1,this.setTimelineVariablesOrder(),"undefined"!=typeof this.timeline_parameters)for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}end(){this.progress.done=!0}endActiveNode(){"undefined"==typeof this.timeline_parameters?(this.end(),this.parent_node.end()):this.timeline_parameters.timeline[this.progress.current_location].endActiveNode()}ID(){var e="";return"undefined"==typeof this.parent_node?"0."+this.progress.current_iteration:(e+=this.parent_node.ID()+"-",e+=this.relative_id+"."+this.progress.current_iteration)}activeID(){return"undefined"==typeof this.timeline_parameters?this.ID():this.timeline_parameters.timeline[this.progress.current_location].activeID()}generatedData(){return this.jsPsych.data.getDataByTimelineNode(this.ID())}trialsOfType(e){if("undefined"==typeof this.timeline_parameters)return this.trial_parameters.type==e?this.trial_parameters:[];for(var t=[],n=0;n<this.timeline_parameters.timeline.length;n++){var r=this.timeline_parameters.timeline[n].trialsOfType(e);t=t.concat(r)}return t}insert(e){"undefined"===typeof this.timeline_parameters?console.error("Cannot add new trials to a trial-level node."):this.timeline_parameters.timeline.push(new ae(this.jsPsych,Object.assign(Object.assign({},this.node_trial_data),e),this,this.timeline_parameters.timeline.length))}}function le(e){return new Promise((t=>setTimeout(t,e)))}class ue{version(){return"7.3.4"}constructor(e){this.extensions={},this.turk=oe,this.randomization=ie,this.utils=f,this.opts={},this.global_trial_index=0,this.current_trial={},this.current_trial_finished=!1,this.paused=!1,this.waiting=!1,this.file_protocol=!1,this.simulation_mode=null,this.webaudio_context=null,this.internal={call_immediate:!1},this.progress_bar_amount=0,e=Object.assign({display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,exclusions:{},show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[]},e),this.opts=e,l(this),this.webaudio_context="undefined"!==typeof window&&"undefined"!==typeof window.AudioContext?new AudioContext:null,"file:"!=window.location.protocol||!1!==e.override_safe_mode&&"undefined"!==typeof e.override_safe_mode||(e.use_webaudio=!1,this.file_protocol=!0,console.warn("jsPsych detected that it is running via the file:// protocol and not on a web server. To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. For more information, see: https://www.jspsych.org/overview/running-experiments")),this.data=new g(this),this.pluginAPI=function(e){const t=e.getInitSettings(),n=l(new v(e.getDisplayContainerElement,t.case_sensitive_responses,t.minimum_valid_rt)),r=l(new x),i=l(new E(t.use_webaudio,e.webaudio_context)),s=l(new y),o=l(new T(e.getDisplayContainerElement,r.setTimeout));return Object.assign({},n,r,i,s,o)}(this);for(const t of e.extensions)this.extensions[t.type.info.name]=new t.type(this);this.pluginAPI.initAudio()}run(e){return s(this,void 0,void 0,(function*(){"undefined"===typeof e&&console.error("No timeline declared in jsPsych.run. Cannot start experiment."),0===e.length&&console.error("No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment."),this.timelineDescription=e,this.timeline=new ae(this,{timeline:e}),yield this.prepareDom(),yield this.checkExclusions(this.opts.exclusions),yield this.loadExtensions(this.opts.extensions),document.documentElement.setAttribute("jspsych","present"),this.startExperiment(),yield this.finished}))}simulate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-only",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(this,void 0,void 0,(function*(){this.simulation_mode=t,this.simulation_options=n,yield this.run(e)}))}getProgress(){return{total_trials:"undefined"===typeof this.timeline?void 0:this.timeline.length(),current_trial_global:this.global_trial_index,percent_complete:"undefined"===typeof this.timeline?0:this.timeline.percentComplete()}}getStartTime(){return this.exp_start_time}getTotalTime(){return"undefined"===typeof this.exp_start_time?0:(new Date).getTime()-this.exp_start_time.getTime()}getDisplayElement(){return this.DOM_target}getDisplayContainerElement(){return this.DOM_container}finishTrial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(this.current_trial_finished)return;this.current_trial_finished=!0,"undefined"!==typeof this.current_trial.css_classes&&Array.isArray(this.current_trial.css_classes)&&this.DOM_target.classList.remove(...this.current_trial.css_classes),this.data.write(e);const n=this.data.getLastTrialData().values()[0],r=this.current_trial;if("object"===typeof r.save_trial_parameters)for(const o of Object.keys(r.save_trial_parameters)){const e=r.save_trial_parameters[o];!0===e&&("undefined"===typeof r[o]?console.warn('Invalid parameter specified in save_trial_parameters. Trial has no property called "'.concat(o,'".')):"function"===typeof r[o]?n[o]=r[o].toString():n[o]=r[o]),!1===e&&"internal_node_id"!==o&&"trial_index"!==o&&delete n[o]}const i=(null!==(t=r.extensions)&&void 0!==t?t:[]).map((e=>this.extensions[e.type.info.name].on_finish(e.params))),s=()=>{this.internal.call_immediate=!0,"function"===typeof r.on_finish&&r.on_finish(n),this.opts.on_trial_finish(n),this.opts.on_data_update(n),this.internal.call_immediate=!1,"data-only"===this.simulation_mode?this.nextTrial():null===typeof r.post_trial_gap||"undefined"===typeof r.post_trial_gap?this.opts.default_iti>0?setTimeout(this.nextTrial,this.opts.default_iti):this.nextTrial():r.post_trial_gap>0?setTimeout(this.nextTrial,r.post_trial_gap):this.nextTrial()};if(i.some((e=>"function"===typeof e.then)))Promise.all(i.map((e=>Promise.resolve(e).then((e=>{Object.assign(n,e)}))))).then(s);else{for(const e of i)Object.assign(n,e);s()}}endExperiment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.timeline.end_message=e,this.timeline.end(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}endCurrentTimeline(){this.timeline.endActiveNode()}getCurrentTrial(){return this.current_trial}getInitSettings(){return this.opts}getCurrentTimelineNodeID(){return this.timeline.activeID()}timelineVariable(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.internal.call_immediate||!0===t?this.timeline.timelineVariable(e):{timelineVariablePlaceholder:!0,timelineVariableFunction:()=>this.timeline.timelineVariable(e)}}getAllTimelineVariables(){return this.timeline.allTimelineVariables()}addNodeToEndOfTimeline(e,t){this.timeline.insert(e)}pauseExperiment(){this.paused=!0}resumeExperiment(){this.paused=!1,this.waiting&&(this.waiting=!1,this.nextTrial())}loadFail(e){e=e||"<p>The experiment failed to load.</p>",this.DOM_target.innerHTML=e}getSafeModeStatus(){return this.file_protocol}getTimeline(){return this.timelineDescription}prepareDom(){return s(this,void 0,void 0,(function*(){"complete"!==document.readyState&&(yield new Promise((e=>{window.addEventListener("load",e)})));const e=this.opts;if("undefined"===typeof e.display_element){null===document.querySelector("body")&&document.documentElement.appendChild(document.createElement("body")),document.querySelector("html").style.height="100%",document.querySelector("body").style.margin="0px",document.querySelector("body").style.height="100%",document.querySelector("body").style.width="100%",e.display_element=document.querySelector("body")}else{const t=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);null===t?console.error("The display_element specified in initJsPsych() does not exist in the DOM."):e.display_element=t}e.display_element.innerHTML='<div class="jspsych-content-wrapper"><div id="jspsych-content"></div></div>',this.DOM_container=e.display_element,this.DOM_target=document.querySelector("#jspsych-content"),null!==e.experiment_width&&(this.DOM_target.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,-1===e.display_element.className.indexOf("jspsych-display-element")&&(e.display_element.className+=" jspsych-display-element"),this.DOM_target.className+="jspsych-content",this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close)}))}loadExtensions(e){return s(this,void 0,void 0,(function*(){try{yield Promise.all(e.map((e=>this.extensions[e.type.info.name].initialize(e.params||{}))))}catch(t){throw console.error(t),new Error(t)}}))}startExperiment(){this.finished=new Promise((e=>{this.resolveFinishedPromise=e})),!0===this.opts.show_progress_bar&&this.drawProgressBar(this.opts.message_progress_bar),this.exp_start_time=new Date,this.timeline.advance(),this.doTrial(this.timeline.trial())}finishExperiment(){const e=this.opts.on_finish(this.data.get()),t=()=>{"undefined"!==typeof this.timeline.end_message&&(this.DOM_target.innerHTML=this.timeline.end_message),this.resolveFinishedPromise()};e?Promise.resolve(e).then(t):t()}nextTrial(){if(this.paused)return void(this.waiting=!0);this.global_trial_index++,this.timeline.markCurrentTrialComplete();const e=this.timeline.advance();!0===this.opts.show_progress_bar&&!0===this.opts.auto_update_progress_bar&&this.updateProgressBar(),e?this.finishExperiment():this.doTrial(this.timeline.trial())}doTrial(e){if(this.current_trial=e,this.current_trial_finished=!1,this.evaluateTimelineVariables(e),"string"===typeof e.type)throw new u("A string was provided as the trial's `type` parameter. Since jsPsych v7, the `type` parameter needs to be a plugin object.");if(e.type=Object.assign(Object.assign({},l(new e.type(this))),{info:e.type.info}),this.evaluateFunctionParameters(e),this.setDefaultValues(e),this.internal.call_immediate=!0,this.opts.on_trial_start(e),"function"===typeof e.on_start&&e.on_start(e),Array.isArray(e.extensions))for(const s of e.extensions)this.extensions[s.type.info.name].on_start(s.params);this.DOM_container.focus(),this.DOM_target.scrollTop=0,"undefined"!==typeof e.css_classes&&(Array.isArray(e.css_classes)||"string"!==typeof e.css_classes||(e.css_classes=[e.css_classes]),Array.isArray(e.css_classes)&&this.DOM_target.classList.add(...e.css_classes));const t=()=>{if("function"===typeof e.on_load&&e.on_load(),Array.isArray(e.extensions))for(const t of e.extensions)this.extensions[t.type.info.name].on_load(t.params)};let n,r,i;this.simulation_mode||(n=e.type.trial(this.DOM_target,e,t)),this.simulation_mode&&(e.type.simulate?(e.simulation_options||(r=this.simulation_options.default),e.simulation_options&&("string"==typeof e.simulation_options?this.simulation_options[e.simulation_options]?r=this.simulation_options[e.simulation_options]:this.simulation_options.default?(console.log('No matching simulation options found for "'.concat(e.simulation_options,'". Using "default" options.')),r=this.simulation_options.default):(console.log('No matching simulation options found for "'.concat(e.simulation_options,'" and no "default" options provided. Using the default values provided by the plugin.')),r={}):r=e.simulation_options),i=this.utils.deepMerge(this.simulation_options.default,r),i=this.utils.deepCopy(i),i=this.replaceFunctionsWithValues(i,null),n=!1===(null===i||void 0===i?void 0:i.simulate)?e.type.trial(this.DOM_target,e,t):e.type.simulate(e,(null===i||void 0===i?void 0:i.mode)||this.simulation_mode,i,t)):n=e.type.trial(this.DOM_target,e,t));n&&"function"==typeof n.then||this.simulation_mode&&(!this.simulation_mode||!1!==(null===i||void 0===i?void 0:i.simulate))||t(),this.internal.call_immediate=!1}evaluateTimelineVariables(e){for(const t of Object.keys(e))"object"===typeof e[t]&&null!==e[t]&&"undefined"!==typeof e[t].timelineVariablePlaceholder&&(e[t]=e[t].timelineVariableFunction()),"object"===typeof e[t]&&null!==e[t]&&"timeline"!==t&&"timeline_variables"!==t&&this.evaluateTimelineVariables(e[t])}evaluateFunctionParameters(e){this.internal.call_immediate=!0;for(const t of Object.keys(e))"type"!==t&&("undefined"!==typeof w[t]&&w[t].type!==d.FUNCTION&&(e[t]=this.replaceFunctionsWithValues(e[t],null)),"undefined"!==typeof e.type.info.parameters[t]&&e.type.info.parameters[t].type!==d.FUNCTION&&(e[t]=this.replaceFunctionsWithValues(e[t],e.type.info.parameters[t])));this.internal.call_immediate=!1}replaceFunctionsWithValues(e,t){if(null===e)return e;if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=this.replaceFunctionsWithValues(e[n],t);else if("object"===typeof e)if(null!==t&&t.nested)for(const n of Object.keys(e))"object"===typeof t.nested[n]&&t.nested[n].type!==d.FUNCTION&&(e[n]=this.replaceFunctionsWithValues(e[n],t.nested[n]));else for(const n of Object.keys(e))"type"!==n&&"timeline"!==n&&"timeline_variables"!==n&&(e[n]=this.replaceFunctionsWithValues(e[n],null));else if("function"===typeof e)return e();return e}setDefaultValues(e){for(const t in e.type.info.parameters)e.type.info.parameters[t].type===d.COMPLEX?("undefined"===typeof e[t]&&e.type.info.parameters[t].default&&(e[t]=e.type.info.parameters[t].default),!0===e.type.info.parameters[t].array&&Array.isArray(e[t])&&e[t].forEach((function(n,r){for(const i in e.type.info.parameters[t].nested)"undefined"!==typeof e[t][r][i]&&null!==e[t][r][i]||("undefined"===typeof e.type.info.parameters[t].nested[i].default?console.error("You must specify a value for the ".concat(i," parameter (nested in the ").concat(t," parameter) in the ").concat(e.type.info.name," plugin.")):e[t][r][i]=e.type.info.parameters[t].nested[i].default)}))):"undefined"!==typeof e[t]&&null!==e[t]||("undefined"===typeof e.type.info.parameters[t].default?console.error("You must specify a value for the ".concat(t," parameter in the ").concat(e.type.info.name," plugin.")):e[t]=e.type.info.parameters[t].default)}checkExclusions(e){return s(this,void 0,void 0,(function*(){if((e.min_width||e.min_height||e.audio)&&console.warn("The exclusions option in `initJsPsych()` is deprecated and will be removed in a future version. We recommend using the browser-check plugin instead. See https://www.jspsych.org/latest/plugins/browser-check/."),e.min_width||e.min_height){const t=e.min_width||0,n=e.min_height||0;if(window.innerWidth<t||window.innerHeight<n){for(this.getDisplayElement().innerHTML="<p>Your browser window is too small to complete this experiment. Please maximize the size of your browser window. If your browser window is already maximized, you will not be able to complete this experiment.</p><p>The minimum width is "+t+"px. Your current width is "+window.innerWidth+"px.</p><p>The minimum height is "+n+"px. Your current height is "+window.innerHeight+"px.</p>";window.innerWidth<t||window.innerHeight<n;)yield le(100);this.getDisplayElement().innerHTML=""}}if("undefined"!==typeof e.audio&&e.audio&&!window.hasOwnProperty("AudioContext")&&!window.hasOwnProperty("webkitAudioContext"))throw this.getDisplayElement().innerHTML="<p>Your browser does not support the WebAudio API, which means that you will not be able to complete the experiment.</p><p>Browsers that support the WebAudio API include Chrome, Firefox, Safari, and Edge.</p>",new Error}))}drawProgressBar(e){document.querySelector(".jspsych-display-element").insertAdjacentHTML("afterbegin",'<div id="jspsych-progressbar-container"><span>'+e+'</span><div id="jspsych-progressbar-outer"><div id="jspsych-progressbar-inner"></div></div></div>')}updateProgressBar(){this.setProgressBar(this.getProgress().percent_complete/100)}setProgressBar(e){e=Math.max(Math.min(1,e),0),document.querySelector("#jspsych-progressbar-inner").style.width=100*e+"%",this.progress_bar_amount=e}getProgressBarCompleted(){return this.progress_bar_amount}}function ce(e){const t=new ue(e);return Object.defineProperties(t,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map((e=>{let[t,n]=e;return[t,{get(){throw new u(n)}}]})))),t}"undefined"!==typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);const he=JSON.parse('{"UU":"honeycomb","rE":"3.3.0"}');function de(e){return new URLSearchParams(window.location.search).get(e)}function fe(){return de("PROLIFIC_PID")}const pe=JSON.parse('{"name":"Honeycomb Task","prompts":{"continue":{"prompt":"Press any key to continue.","button":"Continue"},"settingUp":"Setting up..."},"trials":{"welcome":"Welcome to the experiment. Press any key to begin.","honeycomb":{"instructions":{"read":"Please read the following instructions carefully.","circle":"In this experiment, a circle will appear in the center of the screen.","example":{"start":"If the circle is ","middle":", press the letter ","end":" on the keyboard as fast as you can."},"next":"Click next to begin."},"debrief":{"accuracy":{"start":"You responded correctly on ","end":"% of the trials."},"reactionTime":{"start":"Your average response time was ","end":"ms."},"complete":"Press any key to complete the experiment. Thank you!"}},"adjustVolume":"Set tablet volume to 50/100.","camera":{"start":"Make sure the camera is pointing to you and your face is within the camera area.","end":"The camera recording has ended"},"eventMarker":{"connected":"Event marker connected.","not_connected":"No event marker connected."},"holdUpMarker":"Make sure the photodiode is covering the spot and any external recordings have begun before continuing.","survey":{"demographics":{"title":"Demographics","age":{"prompt":"How old are you?"},"ethnicity":{"prompt":"What is your ethnicity?","options":["Hispanic or Latino","Not Hispanic or Latino"]},"race":{"prompt":"What is your race?","options":["Asian","African-American","Caucasian","Native American/Alaskan","Native Hawaiian or Pacific Islander","Other"]},"english":{"prompt":"Are you fluent in English?","options":["Yes","No"]},"gender":{"prompt":"What is your gender?","options":["Female","Male","Other","Prefer to not say"]},"diagnoses":{"prompt":"Please check ALL of the options you have been diagnosed with","options":["Parkinson\'s Disease","Schizophrenia","Obsessive Compulsive Disorder","Depression"]}},"ius":{"title":"Survey","prompt":"This questionnaire is designed to measure intolerance of uncertainty. Please answer the following questions as honestly as you can. There are no right or wrong answers, and there are no trick questions.","statements":[{"name":"upset","prompt":"Unforeseen events upset me greatly."},{"name":"frustration","prompt":"It frustrates me not having all the information I need."},{"name":"full_life","prompt":"Uncertainty keeps me from living a full life."},{"name":"surprise_avoid","prompt":"One should always look ahead so as to avoid surprises."},{"name":"unforeseen_spoil","prompt":"A small unforeseen event can spoil everything, even with the best of planning."},{"name":"uncertainty_paralysis","prompt":"When it\'s time to act, uncertainty paralyzes me."},{"name":"uncertainty_malfunction","prompt":"When I am uncertain I can\'t function very well."},{"name":"future","prompt":"I always want to know what the future has in store of me."},{"name":"surprise_intolerance","prompt":"I can\'t stand being taken by surprise"},{"name":"doubt_paralysis","prompt":"The smallest doubt can stop me from acting."},{"name":"organize","prompt":"I should be able to organize everything in advance."},{"name":"escape","prompt":"I must get away from all uncertain situations."}],"options":["Not at all characteristic of me","A little characteristic of me","Somewhat characteristic of me","Very characteristic of me","Entirely characteristic of me","Prefer not to answer"]},"debriefing":{"confirm_completion":"Confirm Completion"}},"conclusion":"The experiment has concluded. Thank you for participating."}}'),me=JSON.parse('{"fixation":{"default_duration":1000,"randomize_duration":true,"durations":[250,500,750,1000,1250,1500,1750,2000]},"honeycomb":{"randomize_order":true,"repetitions":5,"timeline_variables":[{"stimulus":"assets/images/blue.png","correct_response":"f"},{"stimulus":"assets/images/orange.png","correct_response":"j"}]}}'),ge=(he.UU,he.rE),ye=pe,ve=me,we=ce().turk.turkInfo(),be=!we.outsideTurk,_e="".concat(we.workerId,":").concat(we.assignmentId),Ee=void 0!==window.electronAPI,Te=fe()&&!be||!1,xe={USE_PHOTODIODE:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_PHOTODIODE&&Ee,USE_EEG:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_EEG&&Ee,USE_ELECTRON:Ee,USE_MTURK:be,USE_VOLUME:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VOLUME,USE_CAMERA:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VIDEO&&Ee,USE_PROLIFIC:Te,USE_FIREBASE:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE},Se="16c0",Ie={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.EVENT_MARKER_PRODUCT_ID||"",ke={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.EVENT_MARKER_COM_NAME||"COM3",Ce={fixation:1,honeycomb:2,open_task:18,test_connect:32},De=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ne;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(e){return function(e){const t=De(e);return Ae.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Oe=function(e){try{return Ae.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Re(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Re(e[n],t[n]));return e}const Le=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Me=()=>{try{return Le()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Oe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Fe=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return!function(){var e;const t=null===(e=Me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Be extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ze.prototype.create)}}class ze{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ke,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Be(n,s,t)}}const Ke=/\{\$([^}]+)}/g;function He(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ge(n)&&Ge(s)){if(!We(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ge(e){return null!==e&&"object"===typeof e}function Qe(e,t){const n=new Ye(e,t);return n.subscribe.bind(n)}class Ye{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xe),void 0===r.error&&(r.error=Xe),void 0===r.complete&&(r.complete=Xe);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xe(){}function $e(e){return e&&e._delegate?e._delegate:e}class Je{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ze="[DEFAULT]";class et{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new je;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ze})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ze?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.component?this.component.multipleInstances?e:Ze:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new et(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const nt=[];var rt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(rt||(rt={}));const it={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},st=rt.INFO,ot={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},at=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ot[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class lt{constructor(e){this.name=e,this._logLevel=st,this._logHandler=at,this._userLogHandler=null,nt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?it[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const ut=(e,t)=>t.some((t=>e instanceof t));let ct,ht;const dt=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap;let yt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ft.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function vt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ht||(ht=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_t(this),n),bt(dt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bt(e.apply(_t(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(_t(this),t,...r);return pt.set(s,t.sort?t.sort():[t]),bt(s)}}function wt(e){return"function"===typeof e?vt(e):(e instanceof IDBTransaction&&function(e){if(ft.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ft.set(e,t)}(e),ut(e,ct||(ct=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,yt):e)}function bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(bt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&dt.set(t,e)})).catch((()=>{})),gt.set(t,e),t}(e);if(mt.has(e))return mt.get(e);const t=wt(e);return t!==e&&(mt.set(e,t),gt.set(t,e)),t}const _t=e=>gt.get(e);const Et=["get","getKey","getAll","getAllKeys","count"],Tt=["put","add","delete","clear"],xt=new Map;function St(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(xt.get(t))return xt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Tt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Et.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return xt.set(t,s),s}yt=(e=>({...e,get:(t,n,r)=>St(t,n)||e.get(t,n,r),has:(t,n)=>!!St(t,n)||e.has(t,n)}))(yt);class It{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const kt="@firebase/app",Ct="0.9.28",Dt=new lt("@firebase/app"),At="[DEFAULT]",Nt={[kt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pt=new Map,Ot=new Map;function Rt(e,t){try{e.container.addComponent(t)}catch(n){Dt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Lt(e,t){e.container.addOrOverwriteComponent(t)}function Mt(e){const t=e.name;if(Ot.has(t))return Dt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ot.set(t,e);for(const n of Pt.values())Rt(n,e);return!0}function Ft(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:At;Ft(e,t).clearInstance(n)}function Vt(){Ot.clear()}const Ut=new ze("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Je("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ut.create("app-deleted",{appName:this._name})}}const Bt="10.8.1";function zt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:At,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ut.create("bad-app-name",{appName:String(i)});if(n||(n=Fe()),!n)throw Ut.create("no-options");const s=Pt.get(i);if(s){if(We(n,s.options)&&We(r,s.config))return s;throw Ut.create("duplicate-app",{appName:i})}const o=new tt(i);for(const l of Ot.values())o.addComponent(l);const a=new qt(n,r,o);return Pt.set(i,a),a}function Kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;const t=Pt.get(e);if(!t&&e===At&&Fe())return zt();if(!t)throw Ut.create("no-app",{appName:e});return t}function Ht(){return Array.from(Pt.values())}async function Wt(e){const t=e.name;Pt.has(t)&&(Pt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Gt(e,t,n){var r;let i=null!==(r=Nt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Dt.warn(e.join(" "))}Mt(new Je("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Qt(e,t){if(null!==e&&"function"!==typeof e)throw Ut.create("invalid-log-argument");!function(e,t){for(const n of nt){let r=null;t&&t.level&&(r=it[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:rt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Yt(e){var t;t=e,nt.forEach((e=>{e.setLogLevel(t)}))}const Xt="firebase-heartbeat-database",$t=1,Jt="firebase-heartbeat-store";let Zt=null;function en(){return Zt||(Zt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=bt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(bt(o.result),e.oldVersion,e.newVersion,bt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Xt,$t,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Jt)}catch(n){console.warn(n)}}}).catch((e=>{throw Ut.create("idb-open",{originalErrorMessage:e.message})}))),Zt}async function tn(e,t){try{const n=(await en()).transaction(Jt,"readwrite"),r=n.objectStore(Jt);await r.put(t,nn(e)),await n.done}catch(n){if(n instanceof Be)Dt.warn(n.message);else{const e=Ut.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Dt.warn(e.message)}}}function nn(e){return"".concat(e.name,"!").concat(e.options.appId)}class rn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new on(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=sn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),an(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),an(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Pe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function sn(){return(new Date).toISOString().substring(0,10)}class on{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!qe()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await en()).transaction(Jt),n=await t.objectStore(Jt).get(nn(e));return await t.done,n}catch(t){if(t instanceof Be)Dt.warn(t.message);else{const e=Ut.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Dt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return tn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return tn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function an(e){return Pe(JSON.stringify({version:2,heartbeats:e})).length}var ln;ln="",Mt(new Je("platform-logger",(e=>new It(e)),"PRIVATE")),Mt(new Je("heartbeat",(e=>new rn(e)),"PRIVATE")),Gt(kt,Ct,ln),Gt(kt,Ct,"esm2017"),Gt("fire-js","");class un{constructor(e,t){this._delegate=e,this.firebase=t,Rt(e,new Je("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Wt(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Rt(this._delegate,e)}_addOrOverwriteComponent(e){Lt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const cn=new ze("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const hn=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=zt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(He(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:Gt,setLogLevel:Yt,onLog:Qt,apps:null,SDK_VERSION:Bt,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(Mt(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw cn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&Re(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!He(n,e=e||At))throw cn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(un);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Re(n,e)},createSubscribe:Qe,ErrorFactory:ze,deepExtend:Re}),n}(),dn=new lt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){dn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&dn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const fn=hn;!function(e){Gt("@firebase/app-compat","0.2.28",e)}();fn.registerVersion("firebase","10.8.1","app-compat");var pn,mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},gn={},yn=yn||{},vn=mn||self;function wn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function bn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _n="closure_uid_"+(1e9*Math.random()>>>0),En=0;function Tn(e,t,n){return e.call.apply(e.bind,arguments)}function xn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Sn(e,t,n){return(Sn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tn:xn).apply(null,arguments)}function In(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function kn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Cn(){this.s=this.s,this.o=this.o}Cn.prototype.s=!1,Cn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,_n)&&e[_n]||(e[_n]=++En))},Cn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function An(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(wn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Pn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Pn.prototype.h=function(){this.defaultPrevented=!0};var On=function(){if(!vn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};vn.addEventListener("test",e,t),vn.removeEventListener("test",e,t)}catch(n){}return e}();function Rn(e){return/^[\s\xa0]*$/.test(e)}function Ln(){var e=vn.navigator;return e&&(e=e.userAgent)?e:""}function Mn(e){return-1!=Ln().indexOf(e)}function Fn(e){return Fn[" "](e),e}Fn[" "]=function(){};var jn,Vn,Un=Mn("Opera"),qn=Mn("Trident")||Mn("MSIE"),Bn=Mn("Edge"),zn=Bn||qn,Kn=Mn("Gecko")&&!(-1!=Ln().toLowerCase().indexOf("webkit")&&!Mn("Edge"))&&!(Mn("Trident")||Mn("MSIE"))&&!Mn("Edge"),Hn=-1!=Ln().toLowerCase().indexOf("webkit")&&!Mn("Edge");function Wn(){var e=vn.document;return e?e.documentMode:void 0}e:{var Gn="",Qn=function(){var e=Ln();return Kn?/rv:([^\);]+)(\)|;)/.exec(e):Bn?/Edge\/([\d\.]+)/.exec(e):qn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Hn?/WebKit\/(\S+)/.exec(e):Un?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Qn&&(Gn=Qn?Qn[1]:""),qn){var Yn=Wn();if(null!=Yn&&Yn>parseFloat(Gn)){jn=String(Yn);break e}}jn=Gn}if(vn.document&&qn){var Xn=Wn();Vn=Xn||(parseInt(jn,10)||void 0)}else Vn=void 0;var $n=Vn;function Jn(e,t){if(Pn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Kn){e:{try{Fn(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Zn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Jn.$.h.call(this)}}kn(Jn,Pn);var Zn={2:"touch",3:"pen",4:"mouse"};Jn.prototype.h=function(){Jn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var er="closure_listenable_"+(1e6*Math.random()|0),tr=0;function nr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++tr,this.fa=this.ia=!1}function rr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ir(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function sr(e){const t={};for(const n in e)t[n]=e[n];return t}const or="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ar(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<or.length;t++)n=or[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function lr(e){this.src=e,this.g={},this.h=0}function ur(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Dn(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(rr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function cr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}lr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=cr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new nr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var hr="closure_lm_"+(1e6*Math.random()|0),dr={};function fr(e,t,n,r,i){if(r&&r.once)return mr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)fr(e,t[s],n,r,i);return null}return n=Er(n),e&&e[er]?e.O(t,n,bn(r)?!!r.capture:!!r,i):pr(e,t,n,!1,r,i)}function pr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=bn(i)?!!i.capture:!!i,a=br(e);if(a||(e[hr]=a=new lr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=wr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)On||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(vr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function mr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)mr(e,t[s],n,r,i);return null}return n=Er(n),e&&e[er]?e.P(t,n,bn(r)?!!r.capture:!!r,i):pr(e,t,n,!0,r,i)}function gr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)gr(e,t[s],n,r,i);else r=bn(r)?!!r.capture:!!r,n=Er(n),e&&e[er]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=cr(s=e.g[t],n,r,i))&&(rr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=br(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cr(t,n,r,i)),(n=-1<e?t[e]:null)&&yr(n))}function yr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[er])ur(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(vr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=br(t))?(ur(n,e),0==n.h&&(n.src=null,t[hr]=null)):rr(e)}}}function vr(e){return e in dr?dr[e]:dr[e]="on"+e}function wr(e,t){if(e.fa)e=!0;else{t=new Jn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&yr(e),e=n.call(r,t)}return e}function br(e){return(e=e[hr])instanceof lr?e:null}var _r="__closure_events_fn_"+(1e9*Math.random()>>>0);function Er(e){return"function"===typeof e?e:(e[_r]||(e[_r]=function(t){return e.handleEvent(t)}),e[_r])}function Tr(){Cn.call(this),this.i=new lr(this),this.S=this,this.J=null}function xr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Pn(t,e);else if(t instanceof Pn)t.target=t.target||e;else{var i=t;ar(t=new Pn(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Sr(o,r,!0,t)&&i}if(i=Sr(o=t.g=e,r,!0,t)&&i,i=Sr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Sr(o=t.g=n[s],r,!1,t)&&i}function Sr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ur(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}kn(Tr,Cn),Tr.prototype[er]=!0,Tr.prototype.removeEventListener=function(e,t,n,r){gr(this,e,t,n,r)},Tr.prototype.N=function(){if(Tr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rr(n[r]);delete t.g[e],t.h--}}this.J=null},Tr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Tr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ir=vn.JSON.stringify;function kr(){var e=Rr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Cr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Dr),(e=>e.reset()));class Dr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ar(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Nr(e){vn.setTimeout((()=>{throw e}),0)}let Pr,Or=!1,Rr=new class{constructor(){this.h=this.g=null}add(e,t){const n=Cr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Lr=()=>{const e=vn.Promise.resolve(void 0);Pr=()=>{e.then(Mr)}};var Mr=()=>{for(var e;e=kr();){try{e.h.call(e.g)}catch(n){Nr(n)}var t=Cr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Or=!1};function Fr(e,t){Tr.call(this),this.h=e||1,this.g=t||vn,this.j=Sn(this.qb,this),this.l=Date.now()}function jr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Vr(e,t,n){if("function"===typeof e)n&&(e=Sn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Sn(e.handleEvent,e)}return 2147483647<Number(t)?-1:vn.setTimeout(e,t||0)}function Ur(e){e.g=Vr((()=>{e.g=null,e.i&&(e.i=!1,Ur(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}kn(Fr,Tr),(pn=Fr.prototype).ga=!1,pn.T=null,pn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xr(this,"tick"),this.ga&&(jr(this),this.start()))}},pn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pn.N=function(){Fr.$.N.call(this),jr(this),delete this.g};class qr extends Cn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(vn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(e){Cn.call(this),this.h=e,this.g={}}kn(Br,Cn);var zr=[];function Kr(e,t,n,r){Array.isArray(n)||(n&&(zr[0]=n.toString()),n=zr);for(var i=0;i<n.length;i++){var s=fr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Hr(e){ir(e.g,(function(e,t){this.g.hasOwnProperty(t)&&yr(e)}),e),e.g={}}function Wr(){this.g=!0}function Gr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ir(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Br.prototype.N=function(){Br.$.N.call(this),Hr(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wr.prototype.Ea=function(){this.g=!1},Wr.prototype.info=function(){};var Qr={},Yr=null;function Xr(){return Yr=Yr||new Tr}function $r(e){Pn.call(this,Qr.Ta,e)}function Jr(e){const t=Xr();xr(t,new $r(t))}function Zr(e,t){Pn.call(this,Qr.STAT_EVENT,e),this.stat=t}function ei(e){const t=Xr();xr(t,new Zr(t,e))}function ti(e,t){Pn.call(this,Qr.Ua,e),this.size=t}function ni(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return vn.setTimeout((function(){e()}),t)}Qr.Ta="serverreachability",kn($r,Pn),Qr.STAT_EVENT="statevent",kn(Zr,Pn),Qr.Ua="timingevent",kn(ti,Pn);var ri={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ii={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function si(){}function oi(e){return e.h||(e.h=e.i())}function ai(){}si.prototype.h=null;var li,ui={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ci(){Pn.call(this,"d")}function hi(){Pn.call(this,"c")}function di(){}function fi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Br(this),this.P=mi,e=zn?125:void 0,this.V=new Fr(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}kn(ci,Pn),kn(hi,Pn),kn(di,si),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},li=new di;var mi=45e3,gi={},yi={};function vi(e,t,n){e.L=1,e.A=Fi(Pi(t)),e.u=n,e.S=!0,wi(e,null)}function wi(e,t){e.G=Date.now(),Ti(e),e.B=Pi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Xi(n.i,"t",r),e.o=0,n=e.l.J,e.h=new pi,e.g=$s(e.l,n?t:null,!e.u),0<e.O&&(e.M=new qr(Sn(e.Pa,e,e.g),e.O)),Kr(e.U,e.g,"readystatechange",e.nb),t=e.I?sr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Jr(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function bi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function _i(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Ei(e,n),r==yi){4==t&&(e.s=4,ei(14),i=!1),Gr(e.j,e.m,null,"[Incomplete Response]");break}if(r==gi){e.s=4,ei(15),Gr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Gr(e.j,e.m,r,null),Ci(e,r)}bi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,ei(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zs(t),t.M=!0,ei(11))):(Gr(e.j,e.m,n,"[Invalid Chunked Response]"),ki(e),Ii(e))}function Ei(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?yi:(n=Number(t.substring(n,r)),isNaN(n)?gi:(r+=1)+n>t.length?yi:(t=t.slice(r,r+n),e.o=r+n,t))}function Ti(e){e.Y=Date.now()+e.P,xi(e,e.P)}function xi(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ni(Sn(e.lb,e),t)}function Si(e){e.C&&(vn.clearTimeout(e.C),e.C=null)}function Ii(e){0==e.l.H||e.J||Ws(e.l,e)}function ki(e){Si(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,jr(e.V),Hr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ci(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||rs(n.i,e)))if(!e.K&&rs(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Hs(n),Ls(n)}Bs(n),ei(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ni(Sn(n.ib,n),6e3));if(1>=ns(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Qs(n,11)}else if((e.K||n.g==e)&&Hs(n),!Rn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(is(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Mi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Xs(r,r.J?r.pa:null,r.Y),o.K){ss(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Si(a),Ti(a)),r.g=o}else qs(r);0<n.j.length&&Fs(n)}else"stop"!=u[0]&&"close"!=u[0]||Qs(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Qs(n,7):Rs(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Jr()}catch(u){}}function Di(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(wn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(wn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(wn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(pn=fi.prototype).setTimeout=function(e){this.P=e},pn.nb=function(e){e=e.target;const t=this.M;t&&3==Cs(e)?t.l():this.Pa(e)},pn.Pa=function(e){try{if(e==this.g)e:{const c=Cs(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||zn||this.g&&(this.h.h||this.g.ja()||Ds(this.g)))){this.J||4!=c||7==t||Jr(),Si(this);var n=this.g.da();this.ca=n;t:if(bi(this)){var r=Ds(this.g);e="";var i=r.length,s=4==Cs(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ki(this),Ii(this);var o="";break t}this.h.i=new vn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rn(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,ei(12),ki(this),Ii(this);break e}Gr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ci(this,n)}this.S?(_i(this,c,o),zn&&this.i&&3==c&&(Kr(this.U,this.V,"tick",this.mb),this.V.start())):(Gr(this.j,this.m,o,null),Ci(this,o)),4==c&&ki(this),this.i&&!this.J&&(4==c?Ws(this.l,this):(this.i=!1,Ti(this)))}else(function(e){const t={};e=(e.g&&2<=Cs(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Rn(e[r]))continue;var n=Ar(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ei(12)):(this.s=0,ei(13)),ki(this),Ii(this)}}}catch(c){}},pn.mb=function(){if(this.g){var e=Cs(this.g),t=this.g.ja();this.o<t.length&&(Si(this),_i(this,e,t),this.i&&4!=e&&Ti(this))}},pn.cancel=function(){this.J=!0,ki(this)},pn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Jr(),ei(17)),ki(this),this.s=2,Ii(this)):xi(this,this.Y-e)};var Ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ni(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ni){this.h=e.h,Oi(this,e.j),this.s=e.s,this.g=e.g,Ri(this,e.m),this.l=e.l;var t=e.i,n=new Wi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Li(this,n),this.o=e.o}else e&&(t=String(e).match(Ai))?(this.h=!1,Oi(this,t[1]||"",!0),this.s=ji(t[2]||""),this.g=ji(t[3]||"",!0),Ri(this,t[4]),this.l=ji(t[5]||"",!0),Li(this,t[6]||"",!0),this.o=ji(t[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}function Pi(e){return new Ni(e)}function Oi(e,t,n){e.j=n?ji(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ri(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Li(e,t,n){t instanceof Wi?(e.i=t,function(e,t){t&&!e.j&&(Gi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Qi(this,t),Xi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Vi(t,Ki)),e.i=new Wi(t,e.h))}function Mi(e,t,n){e.i.set(t,n)}function Fi(e){return Mi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ji(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ui),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ui(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ni.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Vi(t,qi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Vi(t,qi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vi(n,"/"==n.charAt(0)?zi:Bi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Vi(n,Hi)),e.join("")};var qi=/[#\/\?@]/g,Bi=/[#\?:]/g,zi=/[#\?]/g,Ki=/[#\?@]/g,Hi=/#/g;function Wi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Qi(e,t){Gi(e),t=$i(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yi(e,t){return Gi(e),t=$i(e,t),e.g.has(t)}function Xi(e,t,n){Qi(e,t),0<n.length&&(e.i=null,e.g.set($i(e,t),An(n)),e.h+=n.length)}function $i(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(pn=Wi.prototype).add=function(e,t){Gi(this),this.i=null,e=$i(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},pn.forEach=function(e,t){Gi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},pn.ta=function(){Gi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},pn.Z=function(e){Gi(this);let t=[];if("string"===typeof e)Yi(this,e)&&(t=t.concat(this.g.get($i(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},pn.set=function(e,t){return Gi(this),this.i=null,Yi(this,e=$i(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},pn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},pn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ji=class{constructor(e,t){this.g=e,this.map=t}};function Zi(e){this.l=e||es,vn.PerformanceNavigationTiming?e=0<(e=vn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(vn.g&&vn.g.Ka&&vn.g.Ka()&&vn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var es=10;function ts(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ns(e){return e.h?1:e.g?e.g.size:0}function rs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function is(e,t){e.g?e.g.add(t):e.h=t}function ss(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function os(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return An(e.i)}Zi.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var as,ls=class{stringify(e){return vn.JSON.stringify(e,void 0)}parse(e){return vn.JSON.parse(e,void 0)}};function us(){this.g=new ls}function cs(e,t,n){const r=n||"";try{Di(e,(function(e,n){let i=e;bn(e)&&(i=Ir(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function hs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function ds(e){this.l=e.ec||null,this.j=e.ob||!1}function fs(e,t){Tr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kn(ds,si),ds.prototype.g=function(){return new fs(this.l,this.j)},ds.prototype.i=(as={},function(){return as}),kn(fs,Tr);var ps=0;function ms(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function gs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ys(e)}function ys(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(pn=fs.prototype).open=function(e,t){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ys(this)},pn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||vn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},pn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gs(this)),this.readyState=ps},pn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof vn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ms(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},pn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gs(this):ys(this),3==this.readyState&&ms(this)}},pn.Za=function(e){this.g&&(this.response=this.responseText=e,gs(this))},pn.Ya=function(e){this.g&&(this.response=e,gs(this))},pn.ka=function(){this.g&&gs(this)},pn.setRequestHeader=function(e,t){this.v.append(e,t)},pn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},pn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vs=vn.JSON.parse;function ws(e){Tr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bs,this.L=this.M=!1}kn(ws,Tr);var bs="",_s=/^https?$/i,Es=["POST","PUT"];function Ts(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xs(e),Is(e)}function xs(e){e.F||(e.F=!0,xr(e,"complete"),xr(e,"error"))}function Ss(e){if(e.h&&"undefined"!=typeof yn&&(!e.C[1]||4!=Cs(e)||2!=e.da()))if(e.v&&4==Cs(e))Vr(e.La,0,e);else if(xr(e,"readystatechange"),4==Cs(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Ai)[1]||null;!i&&vn.self&&vn.self.location&&(i=vn.self.location.protocol.slice(0,-1)),r=!_s.test(i?i.toLowerCase():"")}n=r}if(n)xr(e,"complete"),xr(e,"success");else{e.m=6;try{var s=2<Cs(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",xs(e)}}finally{Is(e)}}}function Is(e,t){if(e.g){ks(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||xr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ks(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(vn.clearTimeout(e.A),e.A=null)}function Cs(e){return e.g?e.g.readyState:0}function Ds(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case bs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Fo){return null}}function As(e){let t="";return ir(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ns(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=As(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Mi(e,t,n))}function Ps(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Os(e){this.Ga=0,this.j=[],this.l=new Wr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ps("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ps("baseRetryDelayMs",5e3,e),this.hb=Ps("retryDelaySeedMs",1e4,e),this.eb=Ps("forwardChannelMaxRetries",2,e),this.xa=Ps("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Zi(e&&e.concurrentRequestLimit),this.Ja=new us,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Rs(e){if(Ms(e),3==e.H){var t=e.W++,n=Pi(e.I);if(Mi(n,"SID",e.K),Mi(n,"RID",t),Mi(n,"TYPE","terminate"),Vs(e,n),(t=new fi(e,e.l,t)).L=2,t.A=Fi(Pi(n)),n=!1,vn.navigator&&vn.navigator.sendBeacon)try{n=vn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&vn.Image&&((new Image).src=t.A,n=!0),n||(t.g=$s(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ti(t)}Ys(e)}function Ls(e){e.g&&(zs(e),e.g.cancel(),e.g=null)}function Ms(e){Ls(e),e.u&&(vn.clearTimeout(e.u),e.u=null),Hs(e),e.i.cancel(),e.m&&("number"===typeof e.m&&vn.clearTimeout(e.m),e.m=null)}function Fs(e){if(!ts(e.i)&&!e.m){e.m=!0;var t=e.Na;Pr||Lr(),Or||(Pr(),Or=!0),Rr.add(t,e),e.C=0}}function js(e,t){var n;n=t?t.m:e.W++;const r=Pi(e.I);Mi(r,"SID",e.K),Mi(r,"RID",n),Mi(r,"AID",e.V),Vs(e,r),e.o&&e.s&&Ns(r,e.o,e.s),n=new fi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Us(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),is(e.i,n),vi(n,r,t)}function Vs(e,t){e.na&&ir(e.na,(function(e,n){Mi(t,n,e)})),e.h&&Di({},(function(e,n){Mi(t,n,e)}))}function Us(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Sn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{cs(a,e,"req"+n+"_")}catch(el){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function qs(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Pr||Lr(),Or||(Pr(),Or=!0),Rr.add(t,e),e.A=0}}function Bs(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ni(Sn(e.Ma,e),Gs(e,e.A)),e.A++,!0)}function zs(e){null!=e.B&&(vn.clearTimeout(e.B),e.B=null)}function Ks(e){e.g=new fi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Pi(e.wa);Mi(t,"RID","rpc"),Mi(t,"SID",e.K),Mi(t,"AID",e.V),Mi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Mi(t,"TO",e.qa),Mi(t,"TYPE","xmlhttp"),Vs(e,t),e.o&&e.s&&Ns(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Fi(Pi(t)),n.u=null,n.S=!0,wi(n,e)}function Hs(e){null!=e.v&&(vn.clearTimeout(e.v),e.v=null)}function Ws(e,t){var n=null;if(e.g==t){Hs(e),zs(e),e.g=null;var r=2}else{if(!rs(e.i,t))return;n=t.F,ss(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;xr(r=Xr(),new ti(r,n)),Fs(e)}else qs(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ns(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ni(Sn(e.Na,e,t),Gs(e,e.C)),e.C++,!0))}(e,t)||2==r&&Bs(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qs(e,5);break;case 4:Qs(e,10);break;case 3:Qs(e,6);break;default:Qs(e,2)}}function Gs(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Qs(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Sn(e.pb,e);n||(n=new Ni("//www.google.com/images/cleardot.gif"),vn.location&&"http"==vn.location.protocol||Oi(n,"https"),Fi(n)),function(e,t){const n=new Wr;if(vn.Image){const r=new Image;r.onload=In(hs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=In(hs,n,r,"TestLoadImage: error",!1,t),r.onabort=In(hs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=In(hs,n,r,"TestLoadImage: timeout",!1,t),vn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ei(2);e.H=0,e.h&&e.h.za(t),Ys(e),Ms(e)}function Ys(e){if(e.H=0,e.ma=[],e.h){const t=os(e.i);0==t.length&&0==e.j.length||(Nn(e.ma,t),Nn(e.ma,e.j),e.i.i.length=0,An(e.j),e.j.length=0),e.h.ya()}}function Xs(e,t,n){var r=n instanceof Ni?Pi(n):new Ni(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ri(r,r.m);else{var i=vn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ni(null);r&&Oi(s,r),t&&(s.g=t),i&&Ri(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Mi(r,n,t),Mi(r,"VER",e.ra),Vs(e,r),r}function $s(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ws(new ds({ob:n})):new ws(e.va)).Oa(e.J),t}function Js(){}function Zs(){if(qn&&!(10<=Number($n)))throw Error("Environmental error: no available transport.")}function eo(e,t){Tr.call(this),this.g=new Os(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Rn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Rn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ro(this)}function to(e){ci.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function no(){hi.call(this),this.status=1}function ro(e){this.g=e}function io(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function so(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function oo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(pn=ws.prototype).Oa=function(e){this.M=e},pn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():li.g(),this.C=this.u?oi(this.u):oi(li),this.g.onreadystatechange=Sn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Ts(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=vn.FormData&&e instanceof vn.FormData,!(0<=Dn(Es,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ks(this),0<this.B&&((this.L=function(e){return qn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sn(this.ua,this)):this.A=Vr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ts(this,s)}},pn.ua=function(){"undefined"!=typeof yn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xr(this,"timeout"),this.abort(8))},pn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xr(this,"complete"),xr(this,"abort"),Is(this))},pn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Is(this,!0)),ws.$.N.call(this)},pn.La=function(){this.s||(this.G||this.v||this.l?Ss(this):this.kb())},pn.kb=function(){Ss(this)},pn.isActive=function(){return!!this.g},pn.da=function(){try{return 2<Cs(this)?this.g.status:-1}catch(as){return-1}},pn.ja=function(){try{return this.g?this.g.responseText:""}catch(as){return""}},pn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vs(t)}},pn.Ia=function(){return this.m},pn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(pn=Os.prototype).ra=8,pn.H=1,pn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new fi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=sr(s),ar(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Us(this,i,t),Mi(n=Pi(this.I),"RID",e),Mi(n,"CVER",22),this.F&&Mi(n,"X-HTTP-Session-Id",this.F),Vs(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(As(s)))+"&"+t:this.o&&Ns(n,this.o,s)),is(this.i,i),this.bb&&Mi(n,"TYPE","init"),this.P?(Mi(n,"$req",t),Mi(n,"SID","null"),i.aa=!0,vi(i,n,null)):vi(i,n,t),this.H=2}}else 3==this.H&&(e?js(this,e):0==this.j.length||ts(this.i)||js(this))},pn.Ma=function(){if(this.u=null,Ks(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ni(Sn(this.jb,this),e)}},pn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ei(10),Ls(this),Ks(this))},pn.ib=function(){null!=this.v&&(this.v=null,Ls(this),Bs(this),ei(19))},pn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ei(2)):(this.l.info("Failed to ping google.com"),ei(1))},pn.isActive=function(){return!!this.h&&this.h.isActive(this)},(pn=Js.prototype).Ba=function(){},pn.Aa=function(){},pn.za=function(){},pn.ya=function(){},pn.isActive=function(){return!0},pn.Va=function(){},Zs.prototype.g=function(e,t){return new eo(e,t)},kn(eo,Tr),eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ei(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Xs(e,null,e.Y),Fs(e)},eo.prototype.close=function(){Rs(this.g)},eo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ir(e),e=n);t.j.push(new Ji(t.fb++,e)),3==t.H&&Fs(t)},eo.prototype.N=function(){this.g.h=null,delete this.j,Rs(this.g),delete this.g,eo.$.N.call(this)},kn(to,ci),kn(no,hi),kn(ro,Js),ro.prototype.Ba=function(){xr(this.g,"a")},ro.prototype.Aa=function(e){xr(this.g,new to(e))},ro.prototype.za=function(e){xr(this.g,new no)},ro.prototype.ya=function(){xr(this.g,"b")},kn(io,(function(){this.blockSize=-1})),io.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},io.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)so(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){so(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){so(this,r),i=0;break}}this.h=i,this.i+=t},io.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ao={};function lo(e){return-128<=e&&128>e?function(e,t){var n=ao;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new oo([0|e],0>e?-1:0)})):new oo([0|e],0>e?-1:0)}function uo(e){if(isNaN(e)||!isFinite(e))return ho;if(0>e)return yo(uo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=co;return new oo(t,0)}var co=4294967296,ho=lo(0),fo=lo(1),po=lo(16777216);function mo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function go(e){return-1==e.h}function yo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new oo(n,~e.h).add(fo)}function vo(e,t){return e.add(yo(t))}function wo(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function bo(e,t){this.g=e,this.h=t}function _o(e,t){if(mo(t))throw Error("division by zero");if(mo(e))return new bo(ho,ho);if(go(e))return t=_o(yo(e),t),new bo(yo(t.g),yo(t.h));if(go(t))return t=_o(e,yo(t)),new bo(yo(t.g),t.h);if(30<e.g.length){if(go(e)||go(t))throw Error("slowDivide_ only works with positive integers.");for(var n=fo,r=t;0>=r.X(e);)n=Eo(n),r=Eo(r);var i=To(n,1),s=To(r,1);for(r=To(r,2),n=To(n,2);!mo(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=To(r,1),n=To(n,1)}return t=vo(e,i.R(t)),new bo(i,t)}for(i=ho;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=uo(n)).R(t);go(o)||0<o.X(e);)o=(s=uo(n-=r)).R(t);mo(s)&&(s=fo),i=i.add(s),e=vo(e,o)}return new bo(i,e)}function Eo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new oo(n,e.h)}function To(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new oo(i,e.h)}(pn=oo.prototype).ea=function(){if(go(this))return-yo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:co+r)*t,t*=co}return e},pn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(mo(this))return"0";if(go(this))return"-"+yo(this).toString(e);for(var t=uo(Math.pow(e,6)),n=this,r="";;){var i=_o(n,t).g,s=((0<(n=vo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(mo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},pn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},pn.X=function(e){return go(e=vo(this,e))?-1:mo(e)?0:1},pn.abs=function(){return go(this)?yo(this):this},pn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new oo(n,-2147483648&n[n.length-1]?-1:0)},pn.R=function(e){if(mo(this)||mo(e))return ho;if(go(this))return go(e)?yo(this).R(yo(e)):yo(yo(this).R(e));if(go(e))return yo(this.R(yo(e)));if(0>this.X(po)&&0>e.X(po))return uo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,wo(n,2*r+2*i),n[2*r+2*i+1]+=s*l,wo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,wo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,wo(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new oo(n,0)},pn.gb=function(e){return _o(this,e).h},pn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new oo(n,this.h&e.h)},pn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new oo(n,this.h|e.h)},pn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new oo(n,this.h^e.h)},Zs.prototype.createWebChannel=Zs.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,ii.COMPLETE="complete",ai.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",Tr.prototype.listen=Tr.prototype.O,ws.prototype.listenOnce=ws.prototype.P,ws.prototype.getLastError=ws.prototype.Sa,ws.prototype.getLastErrorCode=ws.prototype.Ia,ws.prototype.getStatus=ws.prototype.da,ws.prototype.getResponseJson=ws.prototype.Wa,ws.prototype.getResponseText=ws.prototype.ja,ws.prototype.send=ws.prototype.ha,ws.prototype.setWithCredentials=ws.prototype.Oa,io.prototype.digest=io.prototype.l,io.prototype.reset=io.prototype.reset,io.prototype.update=io.prototype.j,oo.prototype.add=oo.prototype.add,oo.prototype.multiply=oo.prototype.R,oo.prototype.modulo=oo.prototype.gb,oo.prototype.compare=oo.prototype.X,oo.prototype.toNumber=oo.prototype.ea,oo.prototype.toString=oo.prototype.toString,oo.prototype.getBits=oo.prototype.D,oo.fromNumber=uo,oo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return yo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=uo(Math.pow(n,8)),i=ho,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=uo(Math.pow(n,o)),i=i.R(o).add(uo(a))):i=(i=i.R(r)).add(uo(a))}return i};var xo=gn.createWebChannelTransport=function(){return new Zs},So=gn.getStatEventTarget=function(){return Xr()},Io=gn.ErrorCode=ri,ko=gn.EventType=ii,Co=gn.Event=Qr,Do=gn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ao=(gn.FetchXmlHttpFactory=ds,gn.WebChannel=ai),No=gn.XhrIo=ws,Po=gn.Md5=io,Oo=gn.Integer=oo;const Ro="@firebase/firestore";class Lo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lo.UNAUTHENTICATED=new Lo(null),Lo.GOOGLE_CREDENTIALS=new Lo("google-credentials-uid"),Lo.FIRST_PARTY=new Lo("first-party-uid"),Lo.MOCK_USER=new Lo("mock-user");let Mo="10.8.1";const Fo=new lt("@firebase/firestore");function jo(){return Fo.logLevel}function Vo(e){if(Fo.logLevel<=rt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Bo);Fo.debug("Firestore (".concat(Mo,"): ").concat(e),...i)}}function Uo(e){if(Fo.logLevel<=rt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Bo);Fo.error("Firestore (".concat(Mo,"): ").concat(e),...i)}}function qo(e){if(Fo.logLevel<=rt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Bo);Fo.warn("Firestore (".concat(Mo,"): ").concat(e),...i)}}function Bo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function zo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Mo,") INTERNAL ASSERTION FAILED: ")+e;throw Uo(t),new Error(t)}function Ko(e,t){e||zo()}function Ho(e,t){return e}const Wo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Go extends Be{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Qo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Yo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Xo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Lo.UNAUTHENTICATED)))}shutdown(){}}class $o{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Jo{constructor(e){this.t=e,this.currentUser=Lo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Qo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qo,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Vo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Vo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Vo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ko("string"==typeof t.accessToken),new Yo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ko(null===e||"string"==typeof e),new Lo(e)}}class Zo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Lo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ea{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Zo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Lo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ta{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class na{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Vo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Vo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Vo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Vo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ko("string"==typeof e.token),this.R=e.token,new ta(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ra(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ia{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ra(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function sa(e,t){return e<t?-1:e>t?1:0}function oa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function aa(e){return e+"\0"}class la{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Go(Wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Go(Wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Go(Wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Go(Wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return la.fromMillis(Date.now())}static fromDate(e){return la.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new la(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sa(this.nanoseconds,e.nanoseconds):sa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ua{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ua(e)}static min(){return new ua(new la(0,0))}static max(){return new ua(new la(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ca{constructor(e,t,n){void 0===t?t=0:t>e.length&&zo(),void 0===n?n=e.length-t:n>e.length-t&&zo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ca.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ca?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ha extends ca{construct(e,t,n){return new ha(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Go(Wo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ha(e)}static emptyPath(){return new ha([])}}const da=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fa extends ca{construct(e,t,n){return new fa(e,t,n)}static isValidIdentifier(e){return da.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Go(Wo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Go(Wo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Go(Wo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Go(Wo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fa(t)}static emptyPath(){return new fa([])}}class pa{constructor(e){this.path=e}static fromPath(e){return new pa(ha.fromString(e))}static fromName(e){return new pa(ha.fromString(e).popFirst(5))}static empty(){return new pa(ha.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ha.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ha.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pa(new ha(e.slice()))}}class ma{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ga(e){return e.fields.find((e=>2===e.kind))}function ya(e){return e.fields.filter((e=>2!==e.kind))}ma.UNKNOWN_ID=-1;class va{constructor(e,t){this.fieldPath=e,this.kind=t}}class wa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wa(0,Ea.min())}}function ba(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ua.fromTimestamp(1e9===r?new la(n+1,0):new la(n,r));return new Ea(i,pa.empty(),t)}function _a(e){return new Ea(e.readTime,e.key,-1)}class Ea{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ea(ua.min(),pa.empty(),-1)}static max(){return new Ea(ua.max(),pa.empty(),-1)}}function Ta(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pa.comparator(e.documentKey,t.documentKey),0!==n?n:sa(e.largestBatchId,t.largestBatchId))}const xa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ia(e){if(e.code!==Wo.FAILED_PRECONDITION||e.message!==xa)throw e;Vo("LocalStore","Unexpectedly lost primary lease")}class ka{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ka(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ka?t:ka.resolve(t)}catch(e){return ka.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ka.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ka.reject(t)}static resolve(e){return new ka(((t,n)=>{t(e)}))}static reject(e){return new ka(((t,n)=>{n(e)}))}static waitFor(e){return new ka(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ka.resolve(!1);for(const n of e)t=t.next((e=>e?ka.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ka(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ka(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ca{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Na(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ma(t.target.error);this.V.reject(new Na(e,n))}}static open(e,t,n,r){try{return new Ca(t,e.transaction(r,n))}catch(e){throw new Na(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Vo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Oa(t)}}class Da{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Da.S(Ve())&&Uo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Vo("SimpleDb","Removing database:",e),Ra(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qe())return!1;if(Da.C())return!0;const e=Ve(),t=Da.S(e),n=0<t&&t<10,r=Da.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Vo("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Na(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Go(Wo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Go(Wo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Na(e,r))},r.onupgradeneeded=e=>{Vo("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Vo("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Ca.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),ka.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Vo("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Aa{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ra(this.k.delete())}}class Na extends Go{constructor(e,t){super(Wo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Pa(e){return"IndexedDbTransactionError"===e.name}class Oa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Vo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ra(n)}add(e){return Vo("SimpleDb","ADD",this.store.name,e,e),Ra(this.store.add(e))}get(e){return Ra(this.store.get(e)).next((t=>(void 0===t&&(t=null),Vo("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Vo("SimpleDb","DELETE",this.store.name,e),Ra(this.store.delete(e))}count(){return Vo("SimpleDb","COUNT",this.store.name),Ra(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new ka(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ka(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Vo("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new ka(((n,r)=>{t.onerror=e=>{const t=Ma(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new ka(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Aa(i),o=t(i.primaryKey,i.value,s);if(o instanceof ka){const e=o.catch((e=>(s.done(),ka.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>ka.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ra(e){return new ka(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ma(e.target.error);n(t)}}))}let La=!1;function Ma(e){const t=Da.S(Ve());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Go("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return La||(La=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Fa{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Vo("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Vo("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Pa(e)?Vo("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Ia(e)}await this.ee(6e4)}))}}class ja{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return ka.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Vo("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Vo("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=_a(t);Ta(r,n)>0&&(n=r)})),new Ea(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Va{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ua(e){return null==e}function qa(e){return 0===e&&1/e==-1/0}function Ba(e){return"number"==typeof e&&Number.isInteger(e)&&!qa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function za(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ha(t)),t=Ka(e.get(n),t);return Ha(t)}function Ka(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ha(e){return e+"\x01\x01"}function Wa(e){const t=e.length;if(Ko(t>=2),2===t)return Ko("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ha.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&zo(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:zo()}s=t+2}return new ha(r)}Va._e=-1;const Ga=["userId","batchId"];function Qa(e,t){return[e,za(t)]}function Ya(e,t,n){return[e,za(t),n]}const Xa={},$a=["prefixPath","collectionGroup","readTime","documentId"],Ja=["prefixPath","collectionGroup","documentId"],Za=["collectionGroup","readTime","prefixPath","documentId"],el=["canonicalId","targetId"],tl=["targetId","path"],nl=["path","targetId"],rl=["collectionId","parent"],il=["indexId","uid"],sl=["uid","sequenceNumber"],ol=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],al=["indexId","uid","orderedDocumentKey"],ll=["userId","collectionPath","documentId"],ul=["userId","collectionPath","largestBatchId"],cl=["userId","collectionGroup","largestBatchId"],hl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dl=[...hl,"documentOverlays"],fl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pl=fl,ml=[...pl,"indexConfiguration","indexState","indexEntries"];class gl extends Sa{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function yl(e,t){const n=Ho(e);return Da.M(n.ae,t)}function vl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class _l{constructor(e,t){this.comparator=e,this.root=t||Tl.EMPTY}insert(e,t){return new _l(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tl.BLACK,null,null))}remove(e){return new _l(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new El(this.root,e,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new El(this.root,e,this.comparator,!0)}}class El{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Tl.RED,this.left=null!=r?r:Tl.EMPTY,this.right=null!=i?i:Tl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Tl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Tl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zo();if(this.right.isRed())throw zo();const e=this.left.check();if(e!==this.right.check())throw zo();return e+(this.isRed()?0:1)}}Tl.EMPTY=null,Tl.RED=!0,Tl.BLACK=!1,Tl.EMPTY=new class{constructor(){this.size=0}get key(){throw zo()}get value(){throw zo()}get color(){throw zo()}get left(){throw zo()}get right(){throw zo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Tl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xl{constructor(e){this.comparator=e,this.data=new _l(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sl(this.data.getIterator())}getIteratorFrom(e){return new Sl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xl(this.comparator);return t.data=e,t}}class Sl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Il(e){return e.hasNext()?e.getNext():void 0}class kl{constructor(e){this.fields=e,e.sort(fa.comparator)}static empty(){return new kl([])}unionWith(e){let t=new xl(fa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Cl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Cl("Invalid base64 string: "+e):e}}(e);return new Dl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Dl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dl.EMPTY_BYTE_STRING=new Dl("");const Al=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nl(e){if(Ko(!!e),"string"==typeof e){let t=0;const n=Al.exec(e);if(Ko(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pl(e.seconds),nanos:Pl(e.nanos)}}function Pl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ol(e){return"string"==typeof e?Dl.fromBase64String(e):Dl.fromUint8Array(e)}function Rl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ll(e){const t=e.mapValue.fields.__previous_value__;return Rl(t)?Ll(t):t}function Ml(e){const t=Nl(e.mapValue.fields.__local_write_time__.timestampValue);return new la(t.seconds,t.nanos)}class Fl{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class jl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}const Vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ul={nullValue:"NULL_VALUE"};function ql(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Rl(e)?4:tu(e)?9007199254740991:10:zo()}function Bl(e,t){if(e===t)return!0;const n=ql(e);if(n!==ql(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ml(e).isEqual(Ml(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nl(e.timestampValue),r=Nl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ol(e.bytesValue).isEqual(Ol(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pl(e.geoPointValue.latitude)===Pl(t.geoPointValue.latitude)&&Pl(e.geoPointValue.longitude)===Pl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pl(e.integerValue)===Pl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pl(e.doubleValue),r=Pl(t.doubleValue);return n===r?qa(n)===qa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return oa(e.arrayValue.values||[],t.arrayValue.values||[],Bl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vl(n)!==vl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Bl(n[i],r[i])))return!1;return!0}(e,t);default:return zo()}}function zl(e,t){return void 0!==(e.values||[]).find((e=>Bl(e,t)))}function Kl(e,t){if(e===t)return 0;const n=ql(e),r=ql(t);if(n!==r)return sa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pl(e.integerValue||e.doubleValue),r=Pl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hl(e.timestampValue,t.timestampValue);case 4:return Hl(Ml(e),Ml(t));case 5:return sa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ol(e),r=Ol(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=sa(n[i],r[i]);if(0!==e)return e}return sa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=sa(Pl(e.latitude),Pl(t.latitude));return 0!==n?n:sa(Pl(e.longitude),Pl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Kl(n[i],r[i]);if(e)return e}return sa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vl.mapValue&&t===Vl.mapValue)return 0;if(e===Vl.mapValue)return 1;if(t===Vl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=sa(r[o],s[o]);if(0!==e)return e;const t=Kl(n[r[o]],i[s[o]]);if(0!==t)return t}return sa(r.length,s.length)}(e.mapValue,t.mapValue);default:throw zo()}}function Hl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return sa(e,t);const n=Nl(e),r=Nl(t),i=sa(n.seconds,r.seconds);return 0!==i?i:sa(n.nanos,r.nanos)}function Wl(e){return Gl(e)}function Gl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ol(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Gl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Gl(e.fields[i]));return n+"}"}(e.mapValue):zo()}function Ql(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yl(e){return!!e&&"integerValue"in e}function Xl(e){return!!e&&"arrayValue"in e}function $l(e){return!!e&&"nullValue"in e}function Jl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zl(e){return!!e&&"mapValue"in e}function eu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=eu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=eu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function nu(e){return"nullValue"in e?Ul:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ql(jl.empty(),pa.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zo()}function ru(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ql(jl.empty(),pa.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vl:zo()}function iu(e,t){const n=Kl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function su(e,t){const n=Kl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ou{constructor(e){this.value=e}static empty(){return new ou({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=fa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=eu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ou(eu(this.value))}}function au(e){const t=[];return wl(e.fields,((e,n)=>{const r=new fa([e]);if(Zl(n)){const e=au(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new kl(t)}class lu{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new lu(e,0,ua.min(),ua.min(),ua.min(),ou.empty(),0)}static newFoundDocument(e,t,n,r){return new lu(e,1,t,ua.min(),n,r,0)}static newNoDocument(e,t){return new lu(e,2,t,ua.min(),ua.min(),ou.empty(),0)}static newUnknownDocument(e,t){return new lu(e,3,t,ua.min(),ua.min(),ou.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ua.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ou.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ou.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ua.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof lu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}function cu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?pa.comparator(pa.fromName(o.referenceValue),n.key):Kl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function hu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bl(e.position[n],t.position[n]))return!1;return!0}class du{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function fu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pu{}class mu extends pu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Su(e,t,n):"array-contains"===t?new Du(e,n):"in"===t?new Au(e,n):"not-in"===t?new Nu(e,n):"array-contains-any"===t?new Pu(e,n):new mu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Iu(e,n):new ku(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kl(t,this.value)):null!==t&&ql(this.value)===ql(t)&&this.matchesComparison(Kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gu extends pu{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new gu(e,t)}matches(e){return yu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function yu(e){return"and"===e.op}function vu(e){return"or"===e.op}function wu(e){return bu(e)&&yu(e)}function bu(e){for(const t of e.filters)if(t instanceof gu)return!1;return!0}function _u(e){if(e instanceof mu)return e.field.canonicalString()+e.op.toString()+Wl(e.value);if(wu(e))return e.filters.map((e=>_u(e))).join(",");{const t=e.filters.map((e=>_u(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Eu(e,t){return e instanceof mu?function(e,t){return t instanceof mu&&e.op===t.op&&e.field.isEqual(t.field)&&Bl(e.value,t.value)}(e,t):e instanceof gu?function(e,t){return t instanceof gu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Eu(n,t.filters[r])),!0)}(e,t):void zo()}function Tu(e,t){const n=e.filters.concat(t);return gu.create(n,e.op)}function xu(e){return e instanceof mu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Wl(e.value))}(e):e instanceof gu?function(e){return e.op.toString()+" {"+e.getFilters().map(xu).join(" ,")+"}"}(e):"Filter"}class Su extends mu{constructor(e,t,n){super(e,t,n),this.key=pa.fromName(n.referenceValue)}matches(e){const t=pa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Iu extends mu{constructor(e,t){super(e,"in",t),this.keys=Cu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ku extends mu{constructor(e,t){super(e,"not-in",t),this.keys=Cu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Cu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>pa.fromName(e.referenceValue)))}class Du extends mu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xl(t)&&zl(t.arrayValue,this.value)}}class Au extends mu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zl(this.value.arrayValue,t)}}class Nu extends mu{constructor(e,t){super(e,"not-in",t)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zl(this.value.arrayValue,t)}}class Pu extends mu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>zl(this.value.arrayValue,e)))}}class Ou{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Ru(e){return new Ou(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Lu(e){const t=Ho(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>_u(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ua(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Wl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Wl(e))).join(",")),t.ce=e}return t.ce}function Mu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Eu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hu(e.startAt,t.startAt)&&hu(e.endAt,t.endAt)}function Fu(e){return pa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ju(e,t){return e.filters.filter((e=>e instanceof mu&&e.field.isEqual(t)))}function Vu(e,t,n){let r=Ul,i=!0;for(const s of ju(e,t)){let e=Ul,t=!0;switch(s.op){case"<":case"<=":e=nu(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ul}iu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];iu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Uu(e,t,n){let r=Vl,i=!0;for(const s of ju(e,t)){let e=Vl,t=!0;switch(s.op){case">=":case">":e=ru(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Vl}su({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];su({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class qu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Bu(e,t,n,r,i,s,o,a){return new qu(e,t,n,r,i,s,o,a)}function zu(e){return new qu(e)}function Ku(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Hu(e){return null!==e.collectionGroup}function Wu(e){const t=Ho(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new xl(fa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new du(r,n))})),e.has(fa.keyField().canonicalString())||t.le.push(new du(fa.keyField(),n))}return t.le}function Gu(e){const t=Ho(e);return t.he||(t.he=Qu(t,Wu(e))),t.he}function Qu(e,t){if("F"===e.limitType)return Ru(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new du(e.field,t)}));const n=e.endAt?new uu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new uu(e.startAt.position,e.startAt.inclusive):null;return Ru(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Yu(e,t){const n=e.filters.concat([t]);return new qu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xu(e,t,n){return new qu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $u(e,t){return Mu(Gu(e),Gu(t))&&e.limitType===t.limitType}function Ju(e){return"".concat(Lu(Gu(e)),"|lt:").concat(e.limitType)}function Zu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>xu(e))).join(", "),"]")),Ua(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Wl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Wl(e))).join(",")),"Target(".concat(t,")")}(Gu(e)),"; limitType=").concat(e.limitType,")")}function ec(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wu(e),t))&&!(e.endAt&&!function(e,t,n){const r=cu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wu(e),t))}(e,t)}function tc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nc(e){return(t,n)=>{let r=!1;for(const i of Wu(e)){const e=rc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function rc(e,t,n){const r=e.field.isKeyField()?pa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Kl(r,i):zo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zo()}}class ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return bl(this.inner)}size(){return this.innerSize}}const sc=new _l(pa.comparator);function oc(){return sc}const ac=new _l(pa.comparator);function lc(){let e=ac;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function uc(e){let t=ac;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function cc(){return dc()}function hc(){return dc()}function dc(){return new ic((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fc=new _l(pa.comparator),pc=new xl(pa.comparator);function mc(){let e=pc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const gc=new xl(sa);function yc(){return gc}function vc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(t)?"-0":t}}function wc(e){return{integerValue:""+e}}function bc(e,t){return Ba(t)?wc(t):vc(e,t)}class _c{constructor(){this._=void 0}}function Ec(e,t,n){return e instanceof Sc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Rl(t)&&(t=Ll(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ic?kc(e,t):e instanceof Cc?Dc(e,t):function(e,t){const n=xc(e,t),r=Nc(n)+Nc(e.Ie);return Yl(n)&&Yl(e.Ie)?wc(r):vc(e.serializer,r)}(e,t)}function Tc(e,t,n){return e instanceof Ic?kc(e,t):e instanceof Cc?Dc(e,t):n}function xc(e,t){return e instanceof Ac?function(e){return Yl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Sc extends _c{}class Ic extends _c{constructor(e){super(),this.elements=e}}function kc(e,t){const n=Pc(t);for(const r of e.elements)n.some((e=>Bl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Cc extends _c{constructor(e){super(),this.elements=e}}function Dc(e,t){let n=Pc(t);for(const r of e.elements)n=n.filter((e=>!Bl(e,r)));return{arrayValue:{values:n}}}class Ac extends _c{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Nc(e){return Pl(e.integerValue||e.doubleValue)}function Pc(e){return Xl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Oc{constructor(e,t){this.field=e,this.transform=t}}class Rc{constructor(e,t){this.version=e,this.transformResults=t}}class Lc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lc}static exists(e){return new Lc(void 0,e)}static updateTime(e){return new Lc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Fc{}function jc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Qc(e.key,Lc.none()):new zc(e.key,e.data,Lc.none());{const n=e.data,r=ou.empty();let i=new xl(fa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Kc(e.key,r,new kl(i.toArray()),Lc.none())}}function Vc(e,t,n){e instanceof zc?function(e,t,n){const r=e.value.clone(),i=Wc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kc?function(e,t,n){if(!Mc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Uc(e,t,n,r){return e instanceof zc?function(e,t,n,r){if(!Mc(e.precondition,t))return n;const i=e.value.clone(),s=Gc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kc?function(e,t,n,r){if(!Mc(e.precondition,t))return n;const i=Gc(e.fieldTransforms,r,t),s=t.data;return s.setAll(Hc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Mc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=xc(r.transform,e||null);null!=i&&(null===n&&(n=ou.empty()),n.set(r.field,i))}return n||null}function Bc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&oa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ic&&t instanceof Ic||e instanceof Cc&&t instanceof Cc?oa(e.elements,t.elements,Bl):e instanceof Ac&&t instanceof Ac?Bl(e.Ie,t.Ie):e instanceof Sc&&t instanceof Sc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zc extends Fc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kc extends Fc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Wc(e,t,n){const r=new Map;Ko(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Tc(o,a,n[i]))}return r}function Gc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ec(e,s,t))}return r}class Qc extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yc extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Vc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Uc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Uc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hc();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=jc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ua.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mc())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,((e,t)=>Bc(e,t)))&&oa(this.baseMutations,e.baseMutations,((e,t)=>Bc(e,t)))}}class $c{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ko(e.mutations.length===n.length);let r=fc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new $c(e,t,n,r)}}class Jc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Zc{constructor(e,t){this.count=e,this.unchangedNames=t}}var eh,th;function nh(e){switch(e){default:return zo();case Wo.CANCELLED:case Wo.UNKNOWN:case Wo.DEADLINE_EXCEEDED:case Wo.RESOURCE_EXHAUSTED:case Wo.INTERNAL:case Wo.UNAVAILABLE:case Wo.UNAUTHENTICATED:return!1;case Wo.INVALID_ARGUMENT:case Wo.NOT_FOUND:case Wo.ALREADY_EXISTS:case Wo.PERMISSION_DENIED:case Wo.FAILED_PRECONDITION:case Wo.ABORTED:case Wo.OUT_OF_RANGE:case Wo.UNIMPLEMENTED:case Wo.DATA_LOSS:return!0}}function rh(e){if(void 0===e)return Uo("GRPC error has no .code"),Wo.UNKNOWN;switch(e){case eh.OK:return Wo.OK;case eh.CANCELLED:return Wo.CANCELLED;case eh.UNKNOWN:return Wo.UNKNOWN;case eh.DEADLINE_EXCEEDED:return Wo.DEADLINE_EXCEEDED;case eh.RESOURCE_EXHAUSTED:return Wo.RESOURCE_EXHAUSTED;case eh.INTERNAL:return Wo.INTERNAL;case eh.UNAVAILABLE:return Wo.UNAVAILABLE;case eh.UNAUTHENTICATED:return Wo.UNAUTHENTICATED;case eh.INVALID_ARGUMENT:return Wo.INVALID_ARGUMENT;case eh.NOT_FOUND:return Wo.NOT_FOUND;case eh.ALREADY_EXISTS:return Wo.ALREADY_EXISTS;case eh.PERMISSION_DENIED:return Wo.PERMISSION_DENIED;case eh.FAILED_PRECONDITION:return Wo.FAILED_PRECONDITION;case eh.ABORTED:return Wo.ABORTED;case eh.OUT_OF_RANGE:return Wo.OUT_OF_RANGE;case eh.UNIMPLEMENTED:return Wo.UNIMPLEMENTED;case eh.DATA_LOSS:return Wo.DATA_LOSS;default:return zo()}}(th=eh||(eh={}))[th.OK=0]="OK",th[th.CANCELLED=1]="CANCELLED",th[th.UNKNOWN=2]="UNKNOWN",th[th.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",th[th.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",th[th.NOT_FOUND=5]="NOT_FOUND",th[th.ALREADY_EXISTS=6]="ALREADY_EXISTS",th[th.PERMISSION_DENIED=7]="PERMISSION_DENIED",th[th.UNAUTHENTICATED=16]="UNAUTHENTICATED",th[th.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",th[th.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",th[th.ABORTED=10]="ABORTED",th[th.OUT_OF_RANGE=11]="OUT_OF_RANGE",th[th.UNIMPLEMENTED=12]="UNIMPLEMENTED",th[th.INTERNAL=13]="INTERNAL",th[th.UNAVAILABLE=14]="UNAVAILABLE",th[th.DATA_LOSS=15]="DATA_LOSS";let ih=null;function sh(){return new TextEncoder}const oh=new Oo([4294967295,4294967295],0);function ah(e){const t=sh().encode(e),n=new Po;return n.update(t),new Uint8Array(n.digest())}function lh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Oo([n,r],0),new Oo([i,s],0)]}class uh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ch("Invalid padding: ".concat(t));if(n<0)throw new ch("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ch("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ch("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Oo.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Oo.fromNumber(n)));return 1===r.compare(oh)&&(r=new Oo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ah(e),[n,r]=lh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new uh(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ah(e),[n,r]=lh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hh(ua.min(),r,new _l(sa),oc(),mc())}}class dh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new dh(n,t,mc(),mc(),mc())}}class fh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ph{constructor(e,t){this.targetId=e,this.fe=t}}class mh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class gh{constructor(){this.ge=0,this.pe=wh(),this.ye=Dl.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=mc(),t=mc(),n=mc();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zo()}})),new dh(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=wh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ko(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yh{constructor(e){this.Le=e,this.ke=new Map,this.qe=oc(),this.Qe=vh(),this.Ke=new _l(sa)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:zo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Fu(i))if(0===n){const e=new pa(i.path);this.We(t,e,lu.newNoDocument(e,ua.min()))}else Ko(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==ih||ih.tt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ol(n).toUint8Array()}catch(e){if(e instanceof Cl)return qo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new uh(s,r,i)}catch(e){return qo(e instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Fu(i.target)){const t=new pa(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,lu.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=mc();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new hh(e,t,this.Ke,this.qe,n);return this.qe=oc(),this.Qe=vh(),this.Ke=new _l(sa),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new gh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new xl(sa),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Vo("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new gh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function vh(){return new _l(pa.comparator)}function wh(){return new _l(pa.comparator)}const bh={asc:"ASCENDING",desc:"DESCENDING"},_h={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eh={and:"AND",or:"OR"};class Th{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xh(e,t){return e.useProto3Json||Ua(t)?t:{value:t}}function Sh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ih(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kh(e,t){return Sh(e,t.toTimestamp())}function Ch(e){return Ko(!!e),ua.fromTimestamp(function(e){const t=Nl(e);return new la(t.seconds,t.nanos)}(e))}function Dh(e,t){return Ah(e,t).canonicalString()}function Ah(e,t){const n=function(e){return new ha(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Nh(e){const t=ha.fromString(e);return Ko(Zh(t)),t}function Ph(e,t){return Dh(e.databaseId,t.path)}function Oh(e,t){const n=Nh(t);if(n.get(1)!==e.databaseId.projectId)throw new Go(Wo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Go(Wo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pa(Fh(n))}function Rh(e,t){return Dh(e.databaseId,t)}function Lh(e){const t=Nh(e);return 4===t.length?ha.emptyPath():Fh(t)}function Mh(e){return new ha(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fh(e){return Ko(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function jh(e,t,n){return{name:Ph(e,t),fields:n.value.mapValue.fields}}function Vh(e,t,n){const r=Oh(e,t.name),i=Ch(t.updateTime),s=t.createTime?Ch(t.createTime):ua.min(),o=new ou({mapValue:{fields:t.fields}}),a=lu.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Uh(e,t){let n;if(t instanceof zc)n={update:jh(e,t.key,t.value)};else if(t instanceof Qc)n={delete:Ph(e,t.key)};else if(t instanceof Kc)n={update:jh(e,t.key,t.data),updateMask:Jh(t.fieldMask)};else{if(!(t instanceof Yc))return zo();n={verify:Ph(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Sc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ic)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Cc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ac)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw zo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zo()}(e,t.precondition)),n}function qh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Lc.updateTime(Ch(e.updateTime)):void 0!==e.exists?Lc.exists(e.exists):Lc.none()}(t.currentDocument):Lc.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ko("REQUEST_TIME"===t.setToServerValue),n=new Sc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ic(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Cc(e)}else"increment"in t?n=new Ac(e,t.increment):zo();const r=fa.fromServerFormat(t.fieldPath);return new Oc(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Oh(e,t.update.name),s=new ou({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new kl(t.map((e=>fa.fromServerFormat(e))))}(t.updateMask);return new Kc(i,s,e,n,r)}return new zc(i,s,n,r)}if(t.delete){const r=Oh(e,t.delete);return new Qc(r,n)}if(t.verify){const r=Oh(e,t.verify);return new Yc(r,n)}return zo()}function Bh(e,t){return{documents:[Rh(e,t.path)]}}function zh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rh(e,i);const s=function(e){if(0!==e.length)return $h(gu.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Yh(e.field),direction:Wh(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Kh(e){let t=Lh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ko(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Hh(e);return t instanceof gu&&wu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new du(Xh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ua(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new uu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new uu(n,t)}(n.endAt)),Bu(t,i,o,s,a,"F",l,u)}function Hh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xh(e.unaryFilter.field);return mu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Xh(e.unaryFilter.field);return mu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xh(e.unaryFilter.field);return mu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Xh(e.unaryFilter.field);return mu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zo()}}(e):void 0!==e.fieldFilter?function(e){return mu.create(Xh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return gu.create(e.compositeFilter.filters.map((e=>Hh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zo()}}(e.compositeFilter.op))}(e):zo()}function Wh(e){return bh[e]}function Gh(e){return _h[e]}function Qh(e){return Eh[e]}function Yh(e){return{fieldPath:e.canonicalString()}}function Xh(e){return fa.fromServerFormat(e.fieldPath)}function $h(e){return e instanceof mu?function(e){if("=="===e.op){if(Jl(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NAN"}};if($l(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jl(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NOT_NAN"}};if($l(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(e.field),op:Gh(e.op),value:e.value}}}(e):e instanceof gu?function(e){const t=e.getFilters().map((e=>$h(e)));return 1===t.length?t[0]:{compositeFilter:{op:Qh(e.op),filters:t}}}(e):zo()}function Jh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Zh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ed{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ua.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Dl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ed(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class td{constructor(e){this.ct=e}}function nd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ph(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sh(e,t.version.toTimestamp()),createTime:Sh(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:id(t.version)};else{if(!t.isUnknownDocument())return zo();r.unknownDocument={path:n.path.toArray(),version:id(t.version)}}return r}function rd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function id(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sd(e){const t=new la(e.seconds,e.nanoseconds);return ua.fromTimestamp(t)}function od(e,t){const n=(t.baseMutations||[]).map((t=>qh(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>qh(e.ct,t))),i=la.fromMillis(t.localWriteTimeMs);return new Xc(t.batchId,i,n,r)}function ad(e){const t=sd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?sd(e.lastLimboFreeSnapshotVersion):ua.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ko(1===e.documents.length),Gu(zu(Lh(e.documents[0])))}(e.query):function(e){return Gu(Kh(e))}(e.query),new ed(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Dl.fromBase64String(e.resumeToken))}function ld(e,t){const n=id(t.snapshotVersion),r=id(t.lastLimboFreeSnapshotVersion);let i;i=Fu(t.target)?Bh(e.ct,t.target):zh(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Lu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ud(e){const t=Kh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xu(t,t.limit,"L"):t}function cd(e,t){return new Jc(t.largestBatchId,qh(e.ct,t.overlayMutation))}function hd(e,t){const n=t.path.lastSegment();return[e,za(t.path.popLast()),n]}function dd(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:id(r.readTime),documentKey:za(r.documentKey.path),largestBatchId:r.largestBatchId}}class fd{getBundleMetadata(e,t){return pd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:sd(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return pd(e).put(function(e){return{bundleId:e.id,createTime:id(Ch(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return md(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:ud(e.bundledQuery),readTime:sd(e.readTime)}}(e)}))}saveNamedQuery(e,t){return md(e).put(function(e){return{name:e.name,readTime:id(Ch(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function pd(e){return yl(e,"bundles")}function md(e){return yl(e,"namedQueries")}class gd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new gd(e,n)}getOverlay(e,t){return yd(e).get(hd(this.userId,t)).next((e=>e?cd(this.serializer,e):null))}getOverlays(e,t){const n=cc();return ka.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Jc(t,i);r.push(this.ht(e,s))})),ka.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(za(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(yd(e).H("collectionPathOverlayIndex",r))})),ka.waitFor(i)}getOverlaysForCollection(e,t,n){const r=cc(),i=za(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return yd(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=cd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=cc();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yd(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=cd(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return yd(e).put(function(e,t,n){const[r,i,s]=hd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Uh(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function yd(e){return yl(e,"documentOverlays")}class vd{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Pl(e.integerValue));else if("doubleValue"in e){const n=Pl(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),qa(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ol(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?tu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):zo()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),pa.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function wd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function bd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=wd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}vd.bt=new vd;class _d{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=bd(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=bd(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ed{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Td{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class xd{constructor(){this.Gt=new _d,this.zt=new Ed(this.Gt),this.jt=new Td(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Sd{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Sd(this.indexId,this.documentKey,this.arrayValue,n)}}function Id(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=kd(e.arrayValue,t.arrayValue),0!==n?n:(n=kd(e.directionalValue,t.directionalValue),0!==n?n:pa.comparator(e.documentKey,t.documentKey)))}function kd(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Cd{constructor(e){this.Yt=new xl(((e,t)=>fa.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Ko(e.collectionGroup===this.collectionId),this.en)return!1;const t=ga(e);if(void 0!==t&&!this.nn(t))return!1;const n=ya(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new xl(fa.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new va(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new va(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new va(n.field,"asc"===n.dir?0:1)));return new ma(ma.UNKNOWN_ID,this.collectionId,t,wa.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Dd(e){var t,n;if(Ko(e instanceof mu||e instanceof gu),e instanceof mu){if(e instanceof Au){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>mu.create(e.field,"==",t))))||[];return gu.create(r,"or")}return e}const r=e.filters.map((e=>Dd(e)));return gu.create(r,e.op)}function Ad(e){if(0===e.getFilters().length)return[];const t=Rd(Dd(e));return Ko(Od(t)),Nd(t)||Pd(t)?[t]:t.getFilters()}function Nd(e){return e instanceof mu}function Pd(e){return e instanceof gu&&wu(e)}function Od(e){return Nd(e)||Pd(e)||function(e){if(e instanceof gu&&vu(e)){for(const t of e.getFilters())if(!Nd(t)&&!Pd(t))return!1;return!0}return!1}(e)}function Rd(e){if(Ko(e instanceof mu||e instanceof gu),e instanceof mu)return e;if(1===e.filters.length)return Rd(e.filters[0]);const t=e.filters.map((e=>Rd(e)));let n=gu.create(t,e.op);return n=Fd(n),Od(n)?n:(Ko(n instanceof gu),Ko(yu(n)),Ko(n.filters.length>1),n.filters.reduce(((e,t)=>Ld(e,t))))}function Ld(e,t){let n;return Ko(e instanceof mu||e instanceof gu),Ko(t instanceof mu||t instanceof gu),n=e instanceof mu?t instanceof mu?function(e,t){return gu.create([e,t],"and")}(e,t):Md(e,t):t instanceof mu?Md(t,e):function(e,t){if(Ko(e.filters.length>0&&t.filters.length>0),yu(e)&&yu(t))return Tu(e,t.getFilters());const n=vu(e)?e:t,r=vu(e)?t:e,i=n.filters.map((e=>Ld(e,r)));return gu.create(i,"or")}(e,t),Fd(n)}function Md(e,t){if(yu(t))return Tu(t,e.getFilters());{const n=t.filters.map((t=>Ld(e,t)));return gu.create(n,"or")}}function Fd(e){if(Ko(e instanceof mu||e instanceof gu),e instanceof mu)return e;const t=e.getFilters();if(1===t.length)return Fd(t[0]);if(bu(e))return e;const n=t.map((e=>Fd(e))),r=[];return n.forEach((t=>{t instanceof mu?r.push(t):t instanceof gu&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:gu.create(r,e.op)}class jd{constructor(){this._n=new Vd}addToCollectionParentIndex(e,t){return this._n.add(t),ka.resolve()}getCollectionParents(e,t){return ka.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ka.resolve()}deleteFieldIndex(e,t){return ka.resolve()}deleteAllFieldIndexes(e){return ka.resolve()}createTargetIndexes(e,t){return ka.resolve()}getDocumentsMatchingTarget(e,t){return ka.resolve(null)}getIndexType(e,t){return ka.resolve(0)}getFieldIndexes(e,t){return ka.resolve([])}getNextCollectionGroupToUpdate(e){return ka.resolve(null)}getMinOffset(e,t){return ka.resolve(Ea.min())}getMinOffsetFromCollectionGroup(e,t){return ka.resolve(Ea.min())}updateCollectionGroup(e,t,n){return ka.resolve()}updateIndexEntries(e,t){return ka.resolve()}}class Vd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xl(ha.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xl(ha.comparator)).toArray()}}const Ud=new Uint8Array(0);class qd{constructor(e,t){this.databaseId=t,this.an=new Vd,this.un=new ic((e=>Lu(e)),((e,t)=>Mu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:za(r)};return Bd(e).put(i)}return ka.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[aa(t),""],!1,!0);return Bd(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Wa(r.parent))}return n}))}addFieldIndex(e,t){const n=Kd(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Hd(e);return i.next((e=>{n.put(dd(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Kd(e),r=Hd(e),i=zd(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Kd(e),n=zd(e),r=Hd(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return ka.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Cd(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=zd(e);let r=!0;const i=new Map;return ka.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=mc();const r=[];return ka.forEach(i,((i,s)=>{Vo("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Lu(t)));const o=function(e,t){const n=ga(t);if(void 0===n)return null;for(const r of ju(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of ya(t))for(const t of ju(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of ya(t)){const t=0===i.kind?Vu(e,i.fieldPath,e.startAt):Uu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new uu(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of ya(t)){const t=0===i.kind?Uu(e,i.fieldPath,e.endAt):Vu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new uu(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,a),f=this.In(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return ka.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=pa.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return ka.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ad(gu.create(e.filters,"and")).map((t=>Ru(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):Ud,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],s),f=o.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new Sd(e,pa.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Sd(e,pa.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Cd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return ka.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new xl(fa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new xd;for(const r of ya(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);vd.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new xd;return vd.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new xd;return vd.bt.Pt(Ql(this.databaseId,t),n.Ht(function(e){const t=ya(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new xd);let i=0;for(const s of ya(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Xl(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);vd.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new xd;n.seed(e.Wt()),vd.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof mu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Kd(e),r=Hd(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return ka.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new wa(t.sequenceNumber,new Ea(sd(t.readTime),new pa(Wa(t.documentKey)),t.largestBatchId)):wa.empty(),r=e.fields.map((e=>{let[t,n]=e;return new va(fa.fromServerFormat(t),n)}));return new ma(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:sa(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Kd(e),i=Hd(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ka.forEach(t,(t=>i.put(dd(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ka.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?ka.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),ka.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?ka.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return zd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return zd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=zd(e);let i=new xl(Id);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Sd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new xl(Id);const r=this.An(t,e);if(null==r)return n;const i=ga(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Xl(s))for(const i of s.arrayValue.values||[])n=n.add(new Sd(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Sd(t.indexId,e.key,Ud,r));return n}wn(e,t,n,r,i){Vo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Il(s),l=Il(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Il(o)):t?(i(a),a=Il(s)):(a=Il(s),l=Il(o))}}(r,i,Id,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),ka.waitFor(s)}gn(e){let t=1;return Hd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Id(e,t))).filter(((e,t,n)=>!t||0!==Id(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Id(s,e),i=Id(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Ud,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Ud,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Id(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Wd)}getMinOffset(e,t){return ka.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||zo())))).next(Wd)}}function Bd(e){return yl(e,"collectionParents")}function zd(e){return yl(e,"indexEntries")}function Kd(e){return yl(e,"indexConfiguration")}function Hd(e){return yl(e,"indexState")}function Wd(e){Ko(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ta(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ea(t.readTime,t.documentKey,n)}const Gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qd(e,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yd(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Ko(1===a)})));const u=[];for(const c of n.mutations){const e=Ya(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return ka.waitFor(s).next((()=>u))}function Xd(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zo();t=e.noDocument}return JSON.stringify(t).length}Qd.DEFAULT_COLLECTION_PERCENTILE=10,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qd.DEFAULT=new Qd(41943040,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qd.DISABLED=new Qd(-1,0,0);class $d{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Ko(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new $d(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zd(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ef(e),s=Zd(e);return s.add({}).next((o=>{Ko("number"==typeof o);const a=new Xc(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Uh(e.ct,t))),i=n.mutations.map((t=>Uh(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new xl(((e,t)=>sa(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ya(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Xa))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),ka.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Zd(e).get(t).next((e=>e?(Ko(e.userId===this.userId),od(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?ka.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Zd(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ko(t.batchId>=n),i=od(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Zd(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zd(e).W("userMutationsIndex",t).next((e=>e.map((e=>od(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Qa(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ef(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,u=Wa(a);if(o===this.userId&&t.path.isEqual(u))return Zd(e).get(l).next((e=>{if(!e)throw zo();Ko(e.userId===this.userId),i.push(od(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xl(sa);const r=[];return t.forEach((t=>{const i=Qa(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ef(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Wa(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),ka.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Qa(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new xl(sa);return ef(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,u=Wa(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Zd(e).get(t).next((e=>{if(null===e)throw zo();Ko(e.userId===this.userId),n.push(od(this.serializer,e))})))})),ka.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Yd(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),ka.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ka.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ef(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Wa(e[1]);r.push(t)}else n.done()})).next((()=>{Ko(0===r.length)}))}))}containsKey(e,t){return Jd(e,this.userId,t)}xn(e){return tf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Jd(e,t,n){const r=Qa(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ef(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Zd(e){return yl(e,"mutations")}function ef(e){return yl(e,"documentMutations")}function tf(e){return yl(e,"mutationQueues")}class nf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new nf(0)}static Bn(){return new nf(-1)}}class rf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new nf(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>ua.fromTimestamp(new la(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>sf(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Ko(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return sf(e).Y(((s,o)=>{const a=ad(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>ka.waitFor(i))).next((()=>r))}forEachTarget(e,t){return sf(e).Y(((e,n)=>{const r=ad(n);t(r)}))}Ln(e){return of(e).get("targetGlobalKey").next((e=>(Ko(null!==e),e)))}kn(e,t){return of(e).put("targetGlobalKey",t)}qn(e,t){return sf(e).put(ld(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Lu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return sf(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=ad(n);Mu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=af(e);return t.forEach((t=>{const s=za(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),ka.waitFor(r)}removeMatchingKeys(e,t,n){const r=af(e);return ka.forEach(t,(t=>{const i=za(t.path);return ka.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=af(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=af(e);let i=mc();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Wa(e[1]),s=new pa(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=za(t.path),r=IDBKeyRange.bound([n],[aa(n)],!1,!0);let i=0;return af(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return sf(e).get(t).next((e=>e?ad(e):null))}}function sf(e){return yl(e,"targets")}function of(e){return yl(e,"targetGlobal")}function af(e){return yl(e,"targetDocuments")}function lf(e,t){let[n,r]=e,[i,s]=t;const o=sa(n,i);return 0===o?sa(r,s):o}class uf{constructor(e){this.Kn=e,this.buffer=new xl(lf),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();lf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Vo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pa(e)?Vo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ia(e)}await this.zn(3e5)}))}}class hf{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ka.resolve(Va._e);const n=new uf(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; disabled"),ka.resolve(Gd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Gd):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Vo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),jo()<=rt.DEBUG&&Vo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),ka.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function df(e,t){return new hf(e,t)}class ff{constructor(e,t){this.db=e,this.garbageCollector=df(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return pf(e,n)}removeReference(e,t,n){return pf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return pf(e,t)}er(e,t){return function(e,t){let n=!1;return tf(e).Z((r=>Jd(e,r,t).next((e=>(e&&(n=!0),ka.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,ua.min()),af(e).delete(function(e){return[0,za(e.path)]}(s)))))}));r.push(t)}})).next((()=>ka.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return pf(e,t)}Xn(e,t){const n=af(e);let r,i=Va._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Va._e&&t(new pa(Wa(r)),i),i=l,r=a):i=Va._e})).next((()=>{i!==Va._e&&t(new pa(Wa(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pf(e,t){return af(e).put(function(e,t){return{targetId:0,path:za(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class mf{constructor(){this.changes=new ic((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ka.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return bf(e).put(n)}removeEntry(e,t,n){return bf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],rd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=lu.newInvalidDocument(t);return bf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_f(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:lu.newInvalidDocument(t)};return bf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_f(t))},((e,r)=>{n={document:this.nr(t,r),size:Xd(r)}})).next((()=>n))}getEntries(e,t){let n=oc();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=oc(),r=new _l(pa.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Xd(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return ka.resolve();let r=new xl(Tf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(_f(r.first()),_f(r.last())),s=r.getIterator();let o=s.getNext();return bf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=pa.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Tf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(_f(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),rd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bf(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=oc();for(const i of e){const e=this.nr(pa.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ec(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=oc();const s=Ef(t,n),o=Ef(t,Ea.max());return bf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(pa.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new vf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return wf(e).get("remoteDocumentGlobalKey").next((e=>(Ko(!!e),e)))}tr(e,t){return wf(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Vh(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=pa.fromSegments(t.noDocument.path),r=sd(t.noDocument.readTime);n=lu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zo();{const e=pa.fromSegments(t.unknownDocument.path),r=sd(t.unknownDocument.version);n=lu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new la(e[0],e[1]);return ua.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ua.min()))return e}return lu.newInvalidDocument(e)}}function yf(e){return new gf(e)}class vf extends mf{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ic((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new xl(((e,t)=>sa(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=nd(this.ar.serializer,s);r=r.add(i.path.popLast());const l=Xd(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=nd(this.ar.serializer,s.convertToNoDocument(ua.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),ka.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function wf(e){return yl(e,"remoteDocumentGlobal")}function bf(e){return yl(e,"remoteDocumentsV14")}function _f(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ef(e,t){const n=t.documentKey.path.toArray();return[e,rd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=sa(n[s],r[s]),i)return i;return i=sa(n.length,r.length),i||(i=sa(n[n.length-2],r[r.length-2]),i||sa(n[n.length-1],r[r.length-1]))}class xf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Uc(n.mutation,e,kl.empty(),la.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,mc()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc();const r=cc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=lc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=cc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,mc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=oc();const s=dc(),o=dc();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Uc(o.mutation,t,o.mutation.getFieldMask(),la.now())):s.set(t.key,kl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new xf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=dc();let r=new _l(((e,t)=>e-t)),i=mc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||kl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||mc()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=hc();l.forEach((e=>{if(!i.has(e)){const r=jc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ka.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return pa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ka.resolve(cc());let o=-1,a=i;return s.next((t=>ka.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ka.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,mc()))).next((e=>({batchId:o,changes:uc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pa(t)).next((e=>{let t=lc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=lc();return this.indexManager.getCollectionParents(e,i).next((o=>ka.forEach(o,(o=>{const a=function(e,t){return new qu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,lu.newInvalidDocument(r)))}));let n=lc();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Uc(s.mutation,r,kl.empty(),la.now()),ec(t,r)&&(n=n.insert(e,r))})),n}))}}class If{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ka.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ch(e.createTime)}}(t)),ka.resolve()}getNamedQuery(e,t){return ka.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:ud(e.bundledQuery),readTime:Ch(e.readTime)}}(t)),ka.resolve()}}class kf{constructor(){this.overlays=new _l(pa.comparator),this.hr=new Map}getOverlay(e,t){return ka.resolve(this.overlays.get(t))}getOverlays(e,t){const n=cc();return ka.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),ka.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),ka.resolve()}getOverlaysForCollection(e,t,n){const r=cc(),i=t.length+1,s=new pa(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ka.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new _l(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=cc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=cc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ka.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Jc(t,n));let i=this.hr.get(t);void 0===i&&(i=mc(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Cf{constructor(){this.Pr=new xl(Df.Ir),this.Tr=new xl(Df.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Df(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Df(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new pa(new ha([])),n=new Df(t,e),r=new Df(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new pa(new ha([])),n=new Df(t,e),r=new Df(t,e+1);let i=mc();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Df(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Df{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return pa.comparator(e.key,t.key)||sa(e.pr,t.pr)}static Er(e,t){return sa(e.pr,t.pr)||pa.comparator(e.key,t.key)}}class Af{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new xl(Df.Ir)}checkEmpty(e){return ka.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Xc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Df(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ka.resolve(s)}lookupMutationBatch(e,t){return ka.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return ka.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ka.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ka.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Df(t,0),r=new Df(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),ka.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xl(sa);return t.forEach((e=>{const t=new Df(e,0),r=new Df(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),ka.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pa.isDocumentKey(i)||(i=i.child(""));const s=new Df(new pa(i),0);let o=new xl(sa);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),ka.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ko(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return ka.forEach(t.mutations,(r=>{const i=new Df(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Df(t,0),r=this.wr.firstAfterOrEqual(n);return ka.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ka.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nf{constructor(e){this.vr=e,this.docs=new _l(pa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ka.resolve(n?n.document.mutableCopy():lu.newInvalidDocument(t))}getEntries(e,t){let n=oc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():lu.newInvalidDocument(e))})),ka.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=oc();const s=t.path,o=new pa(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ta(_a(o),n)<=0||(r.has(o.key)||ec(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ka.resolve(i)}getAllFromCollectionGroup(e,t,n,r){zo()}Fr(e,t){return ka.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Pf(this)}getSize(e){return ka.resolve(this.size)}}class Pf extends mf{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),ka.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Of{constructor(e){this.persistence=e,this.Mr=new ic((e=>Lu(e)),Mu),this.lastRemoteSnapshotVersion=ua.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Cf,this.targetCount=0,this.Br=nf.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),ka.resolve()}getLastRemoteSnapshotVersion(e){return ka.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ka.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),ka.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),ka.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new nf(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ka.resolve()}updateTargetData(e,t){return this.qn(t),ka.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ka.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ka.waitFor(i).next((()=>r))}getTargetCount(e){return ka.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return ka.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),ka.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ka.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ka.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return ka.resolve(n)}containsKey(e,t){return ka.resolve(this.Nr.containsKey(t))}}class Rf{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Va(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Of(this),this.indexManager=new jd,this.remoteDocumentCache=function(e){return new Nf(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new td(t),this.$r=new If(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Af(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Vo("MemoryPersistence","Starting transaction:",e);const r=new Lf(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return ka.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Lf extends Sa{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.zr=new Cf,this.jr=null}static Hr(e){return new Mf(e)}get Jr(){if(this.jr)return this.jr;throw zo()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),ka.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),ka.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ka.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ka.forEach(this.Jr,(n=>{const r=pa.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ua.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return ka.or([()=>ka.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Ff{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Ca("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ga,{unique:!0}),e.createObjectStore("documentMutations")}(e),jf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=ka.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),jf(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ua.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ga,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return ka.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ll});t.createIndex("collectionPathOverlayIndex",ul,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",cl,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:$a});t.createIndex("documentKeyIndex",Ja),t.createIndex("collectionGroupIndex",Za)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:il}).createIndex("sequenceNumberIndex",sl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ol}).createIndex("documentKeyIndex",al,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Xd(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>ka.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>ka.forEach(n,(n=>{Ko(n.userId===t.userId);const r=od(this.serializer,n);return Yd(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new ha(n),o=function(e){return[0,za(e)]}(s);r.push(t.get(o).next((n=>n?ka.resolve():(n=>t.put({targetId:0,path:za(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>ka.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:rl});const n=t.store("collectionParents"),r=new Vd,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:za(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ha(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Wa(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=ad(n),i=ld(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new pa(ha.fromString(e.document.name).popFirst(5)):e.noDocument?pa.fromSegments(e.noDocument.path):e.unknownDocument?pa.fromSegments(e.unknownDocument.path):zo()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>ka.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=yf(this.serializer),i=new Rf(Mf.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:mc();od(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),ka.forEach(n,((e,n)=>{const s=new Lo(n),o=gd.lt(this.serializer,s),a=i.getIndexManager(s),l=$d.lt(s,this.serializer,a,i.referenceDelegate);return new Sf(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new gl(t,Va._e),e).next()}))}))}}function jf(e){e.createObjectStore("targetDocuments",{keyPath:tl}).createIndex("documentTargetsIndex",nl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",el,{unique:!0}),e.createObjectStore("targetGlobal")}const Vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uf{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Uf.D())throw new Go(Wo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ff(this,r),this.Ti=t+"main",this.serializer=new td(a),this.Ei=new Da(this.Ti,this.ui,new Ff(this.serializer)),this.Qr=new rf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yf(this.serializer),this.$r=new fd,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Uo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Go(Wo.FAILED_PRECONDITION,Vf);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Va(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Pa(e))return Vo("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Vo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return qf(e).get("owner").next((e=>ka.resolve(this.Si(e))))}bi(e){return Bf(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=yl(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return ka.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?ka.resolve(!0):qf(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Go(Wo.FAILED_PRECONDITION,Vf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bf(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Vo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new gl(e,Va._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Bf(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return $d.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qd(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Vo("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?ml:14===e?pl:13===e?fl:12===e?dl:11===e?hl:void zo()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new gl(r,this.kr?this.kr.next():Va._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Uo("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Go(Wo.FAILED_PRECONDITION,xa);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return qf(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Go(Wo.FAILED_PRECONDITION,Vf)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qf(e).put("owner",t)}static D(){return Da.D()}yi(e){const t=qf(e);return t.get("owner").next((e=>this.Si(e)?(Vo("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ka.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Uo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Ue()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Vo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Uo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Uo("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function qf(e){return yl(e,"owner")}function Bf(e){return yl(e,"clientMetadata")}function zf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Kf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=mc(),r=mc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Kf(e,t.fromCache,n,r)}}class Hf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Wf{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Ue()?8:Da.v(Ve())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Hf;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(jo()<=rt.DEBUG&&Vo("QueryEngine","SDK will not create cache indexes for query:",Zu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ka.resolve()):(jo()<=rt.DEBUG&&Vo("QueryEngine","Query:",Zu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(jo()<=rt.DEBUG&&Vo("QueryEngine","The SDK decides to create cache indexes for query:",Zu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gu(t))):ka.resolve())}ji(e,t){if(Ku(t))return ka.resolve(null);let n=Gu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Xu(t,null,"F"),n=Gu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=mc(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Xu(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Ku(t)||r.isEqual(ua.min())?ka.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?ka.resolve(null):(jo()<=rt.DEBUG&&Vo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zu(t)),this.es(e,s,t,ba(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new xl(nc(e));return t.forEach(((t,r)=>{ec(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return jo()<=rt.DEBUG&&Vo("QueryEngine","Using full collection scan to execute query:",Zu(t)),this.zi.getDocumentsMatchingQuery(e,t,Ea.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Gf{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new _l(sa),this.rs=new ic((e=>Lu(e)),Mu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Qf(e,t,n,r){return new Gf(e,t,n,r)}async function Yf(e,t){const n=Ho(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=mc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Xf(e){const t=Ho(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function $f(e,t,n){let r=mc(),i=mc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=oc();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ua.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Vo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Jf(e,t){const n=Ho(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Zf(e,t){const n=Ho(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,ka.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new ed(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function ep(e,t,n){const r=Ho(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Pa(e))throw e;Vo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function tp(e,t,n){const r=Ho(e);let i=ua.min(),s=mc();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ho(e),i=r.rs.get(n);return void 0!==i?ka.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Gu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ua.min(),n?s:mc()))).next((e=>(ip(r,tc(t),e),{documents:e,hs:s})))))}function np(e,t){const n=Ho(e),r=Ho(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function rp(e,t){const n=Ho(e),r=n.ss.get(t)||ua.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,ba(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ip(n,t,e),e)))}function ip(e,t,n){let r=e.ss.get(t)||ua.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function sp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc();const r=await Zf(e,Gu(ud(t.bundledQuery))),i=Ho(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ch(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Dl.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function op(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ap(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class up{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Go(r.error.code,r.error.message))),s?new up(e,t,r.state,i):(Uo("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Go(n.error.code,n.error.message))),i?new cp(e,n.state,r):(Uo("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=yc();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ba(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new hp(e,i):(Uo("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class dp{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dp(t.clientId,t.onlineState):(Uo("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class fp{constructor(){this.activeTargetIds=yc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pp{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new _l(sa),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=op(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new fp),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(op(this.persistenceKey,n));if(e){const t=hp.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(lp(this.persistenceKey,e));if(n){const r=cp.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lp(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Vo("SharedClientState","READ",e,t),t}setItem(e,t){Vo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Vo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Vo("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Uo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Va._e;if(null!=e)try{const n=JSON.parse(e);Ko("number"==typeof n),t=n}catch(e){Uo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Va._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new up(this.currentUser,e,t,n),i=ap(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=ap(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=lp(this.persistenceKey,e),i=new cp(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return hp.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return up.Es(new Lo(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return cp.Es(r,t)}xs(e){return dp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Vo("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=yc();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class mp{constructor(){this.no=new fp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new fp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gp{io(e){}shutdown(){}}class yp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Vo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Vo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vp=null;function wp(){return null===vp?vp=268435456+Math.round(2147483648*Math.random()):vp++,"0x"+vp.toString(16)}const bp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _p{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ep="WebChannelConnection";class Tp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=wp(),o=this.bo(e,t.toUriEncodedString());Vo("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Vo("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw qo("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=bp[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=wp();return new Promise(((s,o)=>{const a=new No;a.setWithCredentials(!0),a.listenOnce(ko.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Io.NO_ERROR:const t=a.getResponseJson();Vo(Ep,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Io.TIMEOUT:Vo(Ep,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Go(Wo.DEADLINE_EXCEEDED,"Request time out"));break;case Io.HTTP_ERROR:const n=a.getStatus();if(Vo(Ep,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wo).indexOf(t)>=0?t:Wo.UNKNOWN}(t.status);o(new Go(e,t.message))}else o(new Go(Wo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Go(Wo.UNAVAILABLE,"Connection failed."));break;default:zo()}}finally{Vo(Ep,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Vo(Ep,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=wp(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xo(),o=So(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Vo(Ep,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new _p({lo:t=>{d?Vo(Ep,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Vo(Ep,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Ao.EventType.OPEN,(()=>{d||Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,Ao.EventType.CLOSE,(()=>{d||(d=!0,Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,Ao.EventType.ERROR,(t=>{d||(d=!0,qo(Ep,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Go(Wo.UNAVAILABLE,"The operation could not be completed")))})),p(c,Ao.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ko(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=eh[e];if(void 0!==t)return rh(t)}(t),i=o.message;void 0===n&&(n=Wo.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Go(n,i)),c.close()}else Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Co.STAT_EVENT,(t=>{t.stat===Do.PROXY?Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Do.NOPROXY&&Vo(Ep,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function xp(){return"undefined"!=typeof window?window:null}function Sp(){return"undefined"!=typeof document?document:null}function Ip(e){return new Th(e,!0)}class kp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Vo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Cp{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new kp(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Wo.RESOURCE_EXHAUSTED?(Uo(t.toString()),Uo("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Wo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Go(Wo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Vo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Vo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dp extends Cp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ko(void 0===t||"string"==typeof t),Dl.fromBase64String(t||"")):(Ko(void 0===t||t instanceof Uint8Array),Dl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Wo.UNKNOWN:rh(e.code);return new Go(t,e.message||"")}(o);n=new mh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oh(e,r.document.name),s=Ch(r.document.updateTime),o=r.document.createTime?Ch(r.document.createTime):ua.min(),a=new ou({mapValue:{fields:r.document.fields}}),l=lu.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new fh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Oh(e,r.document),s=r.readTime?Ch(r.readTime):ua.min(),o=lu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Oh(e,r.document),s=r.removedTargetIds||[];n=new fh([],s,i,null)}else{if(!("filter"in t))return zo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Zc(r,i),o=e.targetId;n=new ph(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ua.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ua.min():t.readTime?Ch(t.readTime):ua.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Fu(r)?{documents:Bh(e,r)}:{query:zh(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ih(e,t.resumeToken);const r=xh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ua.min())>0){n.readTime=Sh(e,t.snapshotVersion.toTimestamp());const r=xh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Mh(this.serializer),t.removeTarget=e,this.t_(t)}}class Ap extends Cp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ko(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ko(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ch(e.updateTime):Ch(t);return n.isEqual(ua.min())&&(n=Ch(t)),new Rc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ch(e.commitTime);return this.listener.T_(n,t)}return Ko(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Mh(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Uh(this.serializer,e)))};this.t_(t)}}class Np extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Go(Wo.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Ah(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Go(Wo.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Ah(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Go(Wo.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Pp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Uo(t),this.g_=!1):Vo("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Op{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Bp(this)&&(Vo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ho(e);t.v_.add(4),await Lp(t),t.x_.set("Unknown"),t.v_.delete(4),await Rp(t)}(this))}))})),this.x_=new Pp(n,r)}}async function Rp(e){if(Bp(e))for(const t of e.F_)await t(!0)}async function Lp(e){for(const t of e.F_)await t(!1)}function Mp(e,t){const n=Ho(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),qp(n)?Up(n):om(n).Jo()&&jp(n,t))}function Fp(e,t){const n=Ho(e),r=om(n);n.C_.delete(t),r.Jo()&&Vp(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Bp(n)&&n.x_.set("Unknown"))}function jp(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ua.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}om(e).c_(t)}function Vp(e,t){e.O_.Oe(t),om(e).l_(t)}function Up(e){e.O_=new yh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),om(e).start(),e.x_.p_()}function qp(e){return Bp(e)&&!om(e).Ho()&&e.C_.size>0}function Bp(e){return 0===Ho(e).v_.size}function zp(e){e.O_=void 0}async function Kp(e){e.C_.forEach(((t,n)=>{jp(e,t)}))}async function Hp(e,t){zp(e),qp(e)?(e.x_.S_(t),Up(e)):e.x_.set("Unknown")}async function Wp(e,t,n){if(e.x_.set("Online"),t instanceof mh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Vo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Gp(e,n)}else if(t instanceof fh?e.O_.$e(t):t instanceof ph?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ua.min()))try{const t=await Xf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Dl.EMPTY_BYTE_STRING,r.snapshotVersion)),Vp(e,t);const i=new ed(r.target,t,n,r.sequenceNumber);jp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Vo("RemoteStore","Failed to raise snapshot:",t),await Gp(e,t)}}async function Gp(e,t,n){if(!Pa(t))throw t;e.v_.add(1),await Lp(e),e.x_.set("Offline"),n||(n=()=>Xf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Vo("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Rp(e)}))}function Qp(e,t){return t().catch((n=>Gp(e,n,t)))}async function Yp(e){const t=Ho(e),n=am(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Xp(t);)try{const e=await Jf(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,$p(t,e)}catch(e){await Gp(t,e)}Jp(t)&&Zp(t)}function Xp(e){return Bp(e)&&e.D_.length<10}function $p(e,t){e.D_.push(t);const n=am(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Jp(e){return Bp(e)&&!am(e).Ho()&&e.D_.length>0}function Zp(e){am(e).start()}async function em(e){am(e).d_()}async function tm(e){const t=am(e);for(const n of e.D_)t.I_(n.mutations)}async function nm(e,t,n){const r=e.D_.shift(),i=$c.from(r,t,n);await Qp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Yp(e)}async function rm(e,t){t&&am(e).P_&&await async function(e,t){if(function(e){return nh(e)&&e!==Wo.ABORTED}(t.code)){const n=e.D_.shift();am(e).Zo(),await Qp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Yp(e)}}(e,t),Jp(e)&&Zp(e)}async function im(e,t){const n=Ho(e);n.asyncQueue.verifyOperationInProgress(),Vo("RemoteStore","RemoteStore received new credentials");const r=Bp(n);n.v_.add(3),await Lp(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Rp(n)}async function sm(e,t){const n=Ho(e);t?(n.v_.delete(2),await Rp(n)):t||(n.v_.add(2),await Lp(n),n.x_.set("Unknown"))}function om(e){return e.N_||(e.N_=function(e,t,n){const r=Ho(e);return r.R_(),new Dp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Kp.bind(null,e),To:Hp.bind(null,e),u_:Wp.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),qp(e)?Up(e):e.x_.set("Unknown")):(await e.N_.stop(),zp(e))}))),e.N_}function am(e){return e.B_||(e.B_=function(e,t,n){const r=Ho(e);return r.R_(),new Ap(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:em.bind(null,e),To:rm.bind(null,e),E_:tm.bind(null,e),T_:nm.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Yp(e)):(await e.B_.stop(),e.D_.length>0&&(Vo("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class lm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new lm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Go(Wo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function um(e,t){if(Uo("AsyncQueue","".concat(t,": ").concat(e)),Pa(e))return new Go(Wo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class cm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||pa.comparator(t.key,n.key):(e,t)=>pa.comparator(e.key,t.key),this.keyedMap=lc(),this.sortedSet=new _l(this.comparator)}static emptySet(e){return new cm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new cm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hm{constructor(){this.L_=new _l(pa.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):zo():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class dm{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new dm(e,t,cm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class fm{constructor(){this.q_=void 0,this.Q_=[]}}class pm{constructor(){this.queries=new ic((e=>Ju(e)),$u),this.onlineState="Unknown",this.K_=new Set}}async function mm(e,t){const n=Ho(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new fm),i)try{s.q_=await n.onListen(r)}catch(e){const n=um(e,"Initialization of query '".concat(Zu(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&wm(n)}async function gm(e,t){const n=Ho(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function ym(e,t){const n=Ho(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&wm(n)}function vm(e,t,n){const r=Ho(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function wm(e){e.K_.forEach((e=>{e.next()}))}class bm{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new dm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class _m{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class Em{constructor(e){this.serializer=e}Ps(e){return Oh(this.serializer,e)}Is(e){return e.metadata.exists?Vh(this.serializer,e.document,!1):lu.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ch(e)}}class Tm{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xm(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=ha.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new Em(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||mc()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ho(e);let s=mc(),o=oc();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(s=s.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Zf(i,function(e){return Gu(zu(ha.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>$f(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new Em(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await sp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function xm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Sm{constructor(e){this.key=e}}class Im{constructor(e){this.key=e}}class km{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=mc(),this.mutatedKeys=mc(),this.ua=nc(e),this.ca=new cm(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new hm,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=ec(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zo()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new dm(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new hm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=mc(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Im(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Sm(n))})),t}Ra(e){this.oa=e.hs,this.aa=mc();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return dm.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Cm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dm{constructor(e){this.key=e,this.ma=!1}}class Am{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new ic((e=>Ju(e)),$u),this.pa=new Map,this.ya=new Set,this.wa=new _l(pa.comparator),this.Sa=new Map,this.ba=new Cf,this.Da={},this.Ca=new Map,this.va=nf.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Nm(e,t){const n=rg(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Zf(n.localStore,Gu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Pm(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Mp(n.remoteStore,e)}return i}async function Pm(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await tp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return zm(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await tp(e.localStore,t,!0),o=new km(t,s.hs),a=o.ha(s.documents),l=dh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);zm(e,n,u.da);const c=new Cm(t,n,o);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function Om(e,t){const n=Ho(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!$u(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ep(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Fp(n.remoteStore,r.targetId),qm(n,r.targetId)})).catch(Ia)):(qm(n,r.targetId),await ep(n.localStore,r.targetId,!0))}async function Rm(e,t){const n=Ho(e);try{const e=await function(e,t){const n=Ho(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Dl.EMPTY_BYTE_STRING,ua.min()).withLastLimboFreeSnapshotVersion(ua.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=oc(),l=mc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push($f(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(ua.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ka.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Ko(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Ko(r.ma):e.removedDocuments.size>0&&(Ko(r.ma),r.ma=!1))})),await Wm(n,e,t)}catch(e){await Ia(e)}}function Lm(e,t,n){const r=Ho(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ho(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&wm(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Mm(e,t,n){const r=Ho(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new _l(pa.comparator);e=e.insert(s,lu.newNoDocument(s,ua.min()));const n=mc().add(s),i=new hh(ua.min(),new Map,new _l(sa),e,n);await Rm(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Hm(r)}else await ep(r.localStore,t,!1).then((()=>qm(r,t,n))).catch(Ia)}async function Fm(e,t){const n=Ho(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ho(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ka.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ko(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=mc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Um(n,r,null),Vm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wm(n,e)}catch(e){await Ia(e)}}async function jm(e,t,n){const r=Ho(e);try{const e=await function(e,t){const n=Ho(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ko(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Um(r,t,n),Vm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wm(r,e)}catch(n){await Ia(n)}}function Vm(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Um(e,t,n){const r=Ho(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function qm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Bm(e,t)}))}function Bm(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Fp(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Hm(e))}function zm(e,t,n){for(const r of n)r instanceof Sm?(e.ba.addReference(r.key,t),Km(e,r)):r instanceof Im?(Vo("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Bm(e,r.key)):zo()}function Km(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Vo("SyncEngine","New document in limbo: "+n),e.ya.add(r),Hm(e))}function Hm(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new pa(ha.fromString(t)),r=e.va.next();e.Sa.set(r,new Dm(n)),e.wa=e.wa.insert(n,r),Mp(e.remoteStore,new ed(Gu(zu(n.path)),r,"TargetPurposeLimboResolution",Va._e))}}async function Wm(e,t,n){const r=Ho(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Kf.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Ho(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ka.forEach(t,(t=>ka.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ka.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Pa(e))throw e;Vo("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Gm(e,t){const n=Ho(e);if(!n.currentUser.isEqual(t)){Vo("SyncEngine","User change. New user:",t.toKey());const e=await Yf(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Go(Wo.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wm(n,e.us)}}function Qm(e,t){const n=Ho(e),r=n.Sa.get(t);if(r&&r.ma)return mc().add(r.key);{let e=mc();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function Ym(e,t){const n=Ho(e),r=await tp(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&zm(n,t.targetId,i.da),i}async function Xm(e,t){const n=Ho(e);return rp(n.localStore,t).then((e=>Wm(n,e)))}async function $m(e,t,n,r){const i=Ho(e),s=await function(e,t){const n=Ho(e),r=Ho(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):ka.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Yp(i.remoteStore):"acknowledged"===n||"rejected"===n?(Um(i,t,r||null),Vm(i,t),function(e,t){Ho(Ho(e).mutationQueue).Mn(t)}(i.localStore,t)):zo(),await Wm(i,s)):Vo("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Jm(e,t,n){const r=Ho(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Zf(r.localStore,Gu(t[0]));for(const e of t){const t=r.ga.get(e),n=await Ym(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await np(r.localStore,o);e=await Zf(r.localStore,t),await Pm(r,Zm(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Zm(e){return Bu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function eg(e){return function(e){return Ho(Ho(e).persistence).Li()}(Ho(e).localStore)}async function tg(e,t,n,r){const i=Ho(e);if(i.Fa)return void Vo("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await rp(i.localStore,tc(s[0])),r=hh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Dl.EMPTY_BYTE_STRING);await Wm(i,e,r);break}case"rejected":await ep(i.localStore,t,!0),qm(i,t,r);break;default:zo()}}async function ng(e,t,n){const r=rg(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Vo("SyncEngine","Adding an already active target "+e);continue}const t=await np(r.localStore,e),n=await Zf(r.localStore,t);await Pm(r,Zm(t),n.targetId,!1,n.resumeToken),Mp(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await ep(r.localStore,e,!1).then((()=>{Fp(r.remoteStore,e),qm(r,e)})).catch(Ia)}}function rg(e){const t=Ho(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Mm.bind(null,t),t.fa.u_=ym.bind(null,t.eventManager),t.fa.xa=vm.bind(null,t.eventManager),t}function ig(e){const t=Ho(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jm.bind(null,t),t}class sg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ip(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Qf(this.persistence,new Wf,e.initialUser,this.serializer)}createPersistence(e){return new Rf(Mf.Hr,this.serializer)}createSharedClientState(e){return new mp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class og extends sg{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await ig(this.Na.syncEngine),await Yp(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Qf(this.persistence,new Wf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new cf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ja(t,this.persistence);return new Fa(e.asyncQueue,n)}createPersistence(e){const t=zf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qd.withCacheSize(this.cacheSizeBytes):Qd.DEFAULT;return new Uf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xp(),Sp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new mp}}class ag extends og{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof pp&&(this.sharedClientState.syncEngine={Zs:$m.bind(null,t),Xs:tg.bind(null,t),eo:ng.bind(null,t),Li:eg.bind(null,t),Ys:Xm.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Ho(e);if(rg(n),ig(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Jm(n,e.toArray());n.Fa=!0,await sm(n.remoteStore,!0);for(const r of t)Mp(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(qm(n,i),ep(n.localStore,i,!0)))),Fp(n.remoteStore,i)})),await t,await Jm(n,e),function(e){const t=Ho(e);t.Sa.forEach(((e,n)=>{Fp(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new _l(pa.comparator)}(n),n.Fa=!1,await sm(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=xp();if(!pp.D(t))throw new Go(Wo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=zf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Lm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gm.bind(null,this.syncEngine),await sm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pm}createDatastore(e){const t=Ip(e.databaseInfo.databaseId),n=function(e){return new Tp(e)}(e.databaseInfo);return function(e,t,n,r){return new Np(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Op(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Lm(this.syncEngine,e,0)),yp.D()?new yp:new gp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Am(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ho(e);Vo("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Lp(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function ug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Uo("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class hg{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Qo,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new _m(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class dg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Go(Wo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ho(e),r={documents:t.map((e=>Ph(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,ha.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ko(!!t.found),t.found.name,t.found.updateTime;const n=Oh(e,t.found.name),r=Ch(t.found.updateTime),i=t.found.createTime?Ch(t.found.createTime):ua.min(),s=new ou({mapValue:{fields:t.found.fields}});return lu.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ko(!!t.missing),Ko(!!t.readTime);const n=Oh(e,t.missing),r=Ch(t.readTime);return lu.newNoDocument(n,r)}(e,t):zo()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Ko(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=pa.fromPath(t);this.mutations.push(new Yc(n,this.precondition(n)))})),await async function(e,t){const n=Ho(e),r={writes:t.map((e=>Uh(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ha.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zo();t=ua.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Go(Wo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ua.min())?Lc.exists(!1):Lc.updateTime(t):Lc.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ua.min()))throw new Go(Wo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lc.updateTime(t)}return Lc.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new kp(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new dg(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Ua(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!nh(t)}return!1}}class pg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Lo.UNAUTHENTICATED,this.clientId=ia.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Vo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Vo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Go(Wo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=um(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function mg(e,t){e.asyncQueue.verifyOperationInProgress(),Vo("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Yf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function gg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vg(e);Vo("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>im(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>im(t.remoteStore,n))),e._onlineComponents=t}function yg(e){return"FirebaseError"===e.name?e.code===Wo.FAILED_PRECONDITION||e.code===Wo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function vg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Vo("FirestoreClient","Using user provided OfflineComponentProvider");try{await mg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!yg(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await mg(e,new sg)}}else Vo("FirestoreClient","Using default OfflineComponentProvider"),await mg(e,new sg);return e._offlineComponents}async function wg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Vo("FirestoreClient","Using user provided OnlineComponentProvider"),await gg(e,e._uninitializedComponentsProvider._online)):(Vo("FirestoreClient","Using default OnlineComponentProvider"),await gg(e,new lg))),e._onlineComponents}function bg(e){return vg(e).then((e=>e.persistence))}function _g(e){return vg(e).then((e=>e.localStore))}function Eg(e){return wg(e).then((e=>e.remoteStore))}function Tg(e){return wg(e).then((e=>e.syncEngine))}function xg(e){return wg(e).then((e=>e.datastore))}async function Sg(e){const t=await wg(e),n=t.eventManager;return n.onListen=Nm.bind(null,t.syncEngine),n.onUnlisten=Om.bind(null,t.syncEngine),n}function Ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new cg({next:s=>{t.enqueueAndForget((()=>gm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Go(Wo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Go(Wo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new bm(zu(n.path),s,{includeMetadataChanges:!0,Z_:!0});return mm(e,o)}(await Sg(e),e.asyncQueue,t,n,r))),r.promise}function kg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new cg({next:n=>{t.enqueueAndForget((()=>gm(e,o))),n.fromCache&&"server"===r.source?i.reject(new Go(Wo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new bm(n,s,{includeMetadataChanges:!0,Z_:!0});return mm(e,o)}(await Sg(e),e.asyncQueue,t,n,r))),r.promise}function Cg(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?sh().encode(e):e,function(e,t){return new hg(e,t)}(function(e,t){if(e instanceof Uint8Array)return ug(e,t);if(e instanceof ArrayBuffer)return ug(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ip(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ho(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ho(e),r=Ch(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(xm(r));const i=new Tm(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await Wm(e,o.sa,void 0),await function(e,t){const n=Ho(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return qo("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Tg(e),i,r)}))}function Dg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ag=new Map;function Ng(e,t,n){if(!n)throw new Go(Wo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Pg(e,t,n,r){if(!0===t&&!0===r)throw new Go(Wo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Og(e){if(!pa.isDocumentKey(e))throw new Go(Wo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rg(e){if(pa.isDocumentKey(e))throw new Go(Wo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":zo()}function Mg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Go(Wo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lg(e);throw new Go(Wo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Fg(e,t){if(t<=0)throw new Go(Wo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class jg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Go(Wo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Go(Wo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Go(Wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Go(Wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Go(Wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Go(Wo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Go(Wo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xo;switch(e.type){case"firstParty":return new ea(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Go(Wo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ag.get(e);t&&(Vo("ComponentProvider","Removing Datastore"),Ag.delete(e),t.terminate())}(this),Promise.resolve()}}function Ug(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Mg(e,Vg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Lo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Go(Wo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Lo(s)}e._authCredentials=new $o(new Yo(t,n))}}class qg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qg(this.firestore,e,this._query)}}class Bg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bg(this.firestore,e,this._key)}}class zg extends qg{constructor(e,t,n){super(e,t,zu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bg(this.firestore,null,new pa(e))}withConverter(e){return new zg(this.firestore,e,this._path)}}function Kg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),Ng("collection","path",t),e instanceof Vg){const n=ha.fromString(t,...r);return Rg(n),new zg(e,null,n)}{if(!(e instanceof Bg||e instanceof zg))throw new Go(Wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ha.fromString(t,...r));return Rg(n),new zg(e.firestore,null,n)}}function Hg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),1===arguments.length&&(t=ia.newId()),Ng("doc","path",t),e instanceof Vg){const n=ha.fromString(t,...r);return Og(n),new Bg(e,null,new pa(n))}{if(!(e instanceof Bg||e instanceof zg))throw new Go(Wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ha.fromString(t,...r));return Og(n),new Bg(e.firestore,e instanceof zg?e.converter:null,new pa(n))}}function Wg(e,t){return e=$e(e),t=$e(t),(e instanceof Bg||e instanceof zg)&&(t instanceof Bg||t instanceof zg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gg(e,t){return e=$e(e),t=$e(t),e instanceof qg&&t instanceof qg&&e.firestore===t.firestore&&$u(e._query,t._query)&&e.converter===t.converter}class Qg{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new kp(this,"async_queue_retry"),this._u=()=>{const e=Sp();e&&Vo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Sp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Sp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Qo;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Pa(e))throw e;Vo("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Uo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=lm.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&zo()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Yg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Xg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $g extends Vg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Qg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zg(this),this._firestoreClient.terminate()}}function Jg(e){return e._firestoreClient||Zg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Fl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Dg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new pg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ey(e,t,n){const r=new Qo;return e.asyncQueue.enqueue((async()=>{try{await mg(e,n),await gg(e,t),r.resolve()}catch(e){const n=e;if(!yg(n))throw n;qo("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function ty(e){return function(e){const t=new Qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ho(e);Bp(n.remoteStore)||Vo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ho(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=um(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Tg(e),t))),t.promise}(Jg(e=Mg(e,$g)))}function ny(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bg(e),n=await Eg(e);return t.setNetworkEnabled(!0),function(e){const t=Ho(e);return t.v_.delete(0),Rp(t)}(n)}))}(Jg(e=Mg(e,$g)))}function ry(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bg(e),n=await Eg(e);return t.setNetworkEnabled(!1),async function(e){const t=Ho(e);t.v_.add(0),await Lp(t),t.x_.set("Offline")}(n)}))}(Jg(e=Mg(e,$g)))}function iy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ho(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await _g(e),t)))}(Jg(e=Mg(e,$g)),t).then((t=>t?new qg(e,null,t.query):null))}function sy(e){if(e._initialized||e._terminated)throw new Go(Wo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oy(Dl.fromBase64String(e))}catch(e){throw new Go(Wo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new oy(Dl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ay{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Go(Wo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ly{constructor(e){this._methodName=e}}class uy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Go(Wo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Go(Wo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sa(this._lat,e._lat)||sa(this._long,e._long)}}const cy=/^__.*__$/;class hy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Kc(e,this.data,this.fieldMask,t,this.fieldTransforms):new zc(e,this.data,t,this.fieldTransforms)}}class dy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Kc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zo()}}class py{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new py(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ry(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(fy(this.du)&&cy.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class my{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ip(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new py({du:e,methodName:t,wu:n,path:fa.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gy(e){const t=e._freezeSettings(),n=Ip(e._databaseId);return new my(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yy(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Ay("Data must be an object, but it was:",o,r);const a=Cy(r,o);let l,u;if(s.merge)l=new kl(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ny(t,r,n);if(!o.contains(i))throw new Go(Wo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ly(e,i)||e.push(i)}l=new kl(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new hy(new ou(a),l,u)}class vy extends ly{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vy}}function wy(e,t,n){return new py({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class by extends ly{_toFieldTransform(e){return new Oc(e.path,new Sc)}isEqual(e){return e instanceof by}}class _y extends ly{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=wy(this,e,!0),n=this.bu.map((e=>ky(e,t))),r=new Ic(n);return new Oc(e.path,r)}isEqual(e){return e instanceof _y&&We(this.bu,e.bu)}}class Ey extends ly{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=wy(this,e,!0),n=this.bu.map((e=>ky(e,t))),r=new Cc(n);return new Oc(e.path,r)}isEqual(e){return e instanceof Ey&&We(this.bu,e.bu)}}class Ty extends ly{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Ac(e.serializer,bc(e.serializer,this.Du));return new Oc(e.path,t)}isEqual(e){return e instanceof Ty&&this.Du===e.Du}}function xy(e,t,n,r){const i=e.Su(1,t,n);Ay("Data must be an object, but it was:",i,r);const s=[],o=ou.empty();wl(r,((e,r)=>{const a=Oy(t,e,n);r=$e(r);const l=i.fu(a);if(r instanceof vy)s.push(a);else{const e=ky(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new kl(s);return new dy(o,a,i.fieldTransforms)}function Sy(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[Ny(t,r,n)],l=[i];if(s.length%2!=0)throw new Go(Wo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Ny(t,s[d])),l.push(s[d+1]);const u=[],c=ou.empty();for(let d=a.length-1;d>=0;--d)if(!Ly(u,a[d])){const e=a[d];let t=l[d];t=$e(t);const n=o.fu(e);if(t instanceof vy)u.push(e);else{const r=ky(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new kl(u);return new dy(c,h,o.fieldTransforms)}function Iy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ky(n,e.Su(r?4:3,t))}function ky(e,t){if(Dy(e=$e(e)))return Ay("Unsupported field value:",t,e),Cy(e,t);if(e instanceof ly)return function(e,t){if(!fy(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ky(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=la.fromDate(e);return{timestampValue:Sh(t.serializer,n)}}if(e instanceof la){const n=new la(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sh(t.serializer,n)}}if(e instanceof uy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof oy)return{bytesValue:Ih(t.serializer,e._byteString)};if(e instanceof Bg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Dh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Lg(e)))}(e,t)}function Cy(e,t){const n={};return bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wl(e,((e,r)=>{const i=ky(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Dy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof la||e instanceof uy||e instanceof oy||e instanceof Bg||e instanceof ly)}function Ay(e,t,n){if(!Dy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Lg(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Ny(e,t,n){if((t=$e(t))instanceof ay)return t._internalPath;if("string"==typeof t)return Oy(e,t);throw Ry("Field path arguments must be of type string or ",e,!1,void 0,n)}const Py=new RegExp("[~\\*/\\[\\]]");function Oy(e,t,n){if(t.search(Py)>=0)throw Ry("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ay(...t.split("."))._internalPath}catch(kn){throw Ry("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ry(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Go(Wo.INVALID_ARGUMENT,a+e+l)}function Ly(e,t){return e.some((e=>e.isEqual(t)))}class My{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fy extends My{data(){return super.data()}}function jy(e,t){return"string"==typeof t?Oy(e,t):t instanceof ay?t._internalPath:t._delegate._internalPath}function Vy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Go(Wo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uy{}class qy extends Uy{}function By(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Uy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ky)).length,n=e.filter((e=>e instanceof zy)).length;if(t>1||t>0&&n>0)throw new Go(Wo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class zy extends qy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zy(e,t,n)}_apply(e){const t=this._parse(e);return Jy(e._query,t),new qg(e.firestore,e.converter,Yu(e._query,t))}_parse(e){const t=gy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Go(Wo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){$y(o,s);const t=[];for(const n of o)t.push(Xy(r,e,n));a={arrayValue:{values:t}}}else a=Xy(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||$y(o,s),a=Iy(n,t,o,"in"===s||"not-in"===s);return mu.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ky extends Uy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ky(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:gu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Jy(n,i),n=Yu(n,i)}(e._query,t),new qg(e.firestore,e.converter,Yu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Hy extends qy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(t,n)}(e._query,this._field,this._direction);return new qg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new qu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Wy extends qy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Wy(e,t,n)}_apply(e){return new qg(e.firestore,e.converter,Xu(e._query,this._limit,this._limitType))}}class Gy extends qy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Gy(e,t,n)}_apply(e){const t=Yy(e,this.type,this._docOrFields,this._inclusive);return new qg(e.firestore,e.converter,function(e,t){return new qu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Qy extends qy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Qy(e,t,n)}_apply(e){const t=Yy(e,this.type,this._docOrFields,this._inclusive);return new qg(e.firestore,e.converter,function(e,t){return new qu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Yy(e,t,n,r){if(n[0]=$e(n[0]),n[0]instanceof My)return function(e,t,n,r,i){if(!r)throw new Go(Wo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Wu(e))if(o.field.isKeyField())s.push(Ql(t,r.key));else{const e=r.data.field(o.field);if(Rl(e))throw new Go(Wo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new uu(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=gy(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Go(Wo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Hu(e)&&-1!==s.indexOf("/"))throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ha.fromString(s));if(!pa.isDocumentKey(n))throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new pa(n);a.push(Ql(t,i))}else{const e=Iy(n,r,s);a.push(e)}}return new uu(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Xy(e,t,n){if("string"==typeof(n=$e(n))){if(""===n)throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hu(t)&&-1!==n.indexOf("/"))throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ha.fromString(n));if(!pa.isDocumentKey(r))throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ql(e,new pa(r))}if(n instanceof Bg)return Ql(e,n._key);throw new Go(Wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Lg(n),"."))}function $y(e,t){if(!Array.isArray(e)||0===e.length)throw new Go(Wo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Jy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Go(Wo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Go(Wo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Zy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new uy(Pl(e.latitude),Pl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ll(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const t=Nl(e);return new la(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ha.fromString(e);Ko(Zh(n));const r=new jl(n.get(1),n.get(3)),i=new pa(n.popFirst(5));return r.isEqual(t)||Uo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ev(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class tv extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new oy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bg(this.firestore,null,t)}}class nv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rv extends My{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new iv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class iv extends rv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new iv(this._firestore,this._userDataWriter,n.key,n,new nv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Go(Wo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new iv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new nv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new iv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ov(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ov(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zo()}}function av(e,t){return e instanceof rv&&t instanceof rv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sv&&t instanceof sv&&e._firestore===t._firestore&&Gg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class lv extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new oy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bg(this.firestore,null,t)}}function uv(e){e=Mg(e,Bg);const t=Mg(e.firestore,$g),n=Jg(t),r=new lv(t);return function(e,t){const n=new Qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ho(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Go(Wo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=um(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await _g(e),t,n))),n.promise}(n,e._key).then((n=>new rv(t,r,e._key,n,new nv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function cv(e){e=Mg(e,qg);const t=Mg(e.firestore,$g),n=Jg(t),r=new lv(t);return function(e,t){const n=new Qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await tp(e,t,!0),i=new km(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=um(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await _g(e),t,n))),n.promise}(n,e._query).then((n=>new sv(t,r,e,n)))}function hv(e,t,n){e=Mg(e,Bg);const r=Mg(e.firestore,$g),i=ev(e.converter,t,n);return mv(r,[yy(gy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Lc.none())])}function dv(e,t,n){e=Mg(e,Bg);const r=Mg(e.firestore,$g),i=gy(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=$e(t))||t instanceof ay?Sy(i,"updateDoc",e._key,t,n,a):xy(i,"updateDoc",e._key,t),mv(r,[s.toMutation(e._key,Lc.exists(!0))])}function fv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=$e(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Yg(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(Yg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof Bg)h=Mg(e.firestore,$g),d=zu(e._key.path),c={next:t=>{n[l]&&n[l](gv(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Mg(e,qg);h=Mg(t.firestore,$g),d=t._query;const r=new lv(h);c={next:e=>{n[l]&&n[l](new sv(h,r,t,e))},error:n[l+1],complete:n[l+2]},Vy(e._query)}return function(e,t,n,r){const i=new cg(r),s=new bm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>mm(await Sg(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>gm(await Sg(e),s)))}}(Jg(h),d,u,c)}function pv(e,t){return function(e,t){const n=new cg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ho(e).K_.add(t),t.next()}(await Sg(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ho(e).K_.delete(t)}(await Sg(e),n)))}}(Jg(e=Mg(e,$g)),Yg(t)?t:{next:t})}function mv(e,t){return function(e,t){const n=new Qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ig(e);try{const e=await function(e,t){const n=Ho(e),r=la.now(),i=t.reduce(((e,t)=>e.add(t.key)),mc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=oc(),l=mc();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=qc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Kc(e.key,t,au(t.value.mapValue),Lc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:uc(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new _l(sa)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wm(r,e.changes),await Yp(r.remoteStore)}catch(e){const t=um(e,"Failed to persist write");n.reject(t)}}(await Tg(e),t,n))),n.promise}(Jg(e),t)}function gv(e,t,n){const r=n.docs.get(t._key),i=new lv(e);return new rv(e,i,t._key,r,new nv(n.hasPendingWrites,n.fromCache),t.converter)}const yv={maxAttempts:5};class vv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gy(e)}set(e,t,n){this._verifyNotCommitted();const r=wv(e,this._firestore),i=ev(r.converter,t,n),s=yy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Lc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=wv(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=$e(t))||t instanceof ay?Sy(this._dataReader,"WriteBatch.update",r._key,t,n,o):xy(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Lc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wv(e,this._firestore);return this._mutations=this._mutations.concat(new Qc(t._key,Lc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Go(Wo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wv(e,t){if((e=$e(e)).firestore!==t)throw new Go(Wo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class bv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gy(e)}get(e){const t=wv(e,this._firestore),n=new tv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return zo();const r=e[0];if(r.isFoundDocument())return new My(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new My(this._firestore,n,t._key,null,t.converter);throw zo()}))}set(e,t,n){const r=wv(e,this._firestore),i=ev(r.converter,t,n),s=yy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=wv(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=$e(t))||t instanceof ay?Sy(this._dataReader,"Transaction.update",r._key,t,n,o):xy(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=wv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wv(e,this._firestore),n=new lv(this._firestore);return super.get(e).then((e=>new rv(this._firestore,n,t._key,e._document,new nv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mo=e}(Bt),Mt(new Je("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new $g(new Jo(e.getProvider("auth-internal")),new na(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Go(Wo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Gt(Ro,"4.4.3",e),Gt(Ro,"4.4.3","esm2017")}();function _v(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Go("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ev(){if("undefined"===typeof Uint8Array)throw new Go("unimplemented","Uint8Arrays are not available in this environment.")}function Tv(){if("undefined"==typeof atob)throw new Go("unimplemented","Blobs are unavailable in Firestore in this environment.")}class xv{constructor(e){this._delegate=e}static fromBase64String(e){return Tv(),new xv(oy.fromBase64String(e))}static fromUint8Array(e){return Ev(),new xv(oy.fromUint8Array(e))}toBase64(){return Tv(),this._delegate.toBase64()}toUint8Array(){return Ev(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Iv{enableIndexedDbPersistence(e,t){return function(e,t){sy(e=Mg(e,$g));const n=Jg(e);if(n._uninitializedComponentsProvider)throw new Go(Wo.FAILED_PRECONDITION,"SDK cache is already specified.");qo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new lg;return ey(n,i,new og(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){sy(e=Mg(e,$g));const t=Jg(e);if(t._uninitializedComponentsProvider)throw new Go(Wo.FAILED_PRECONDITION,"SDK cache is already specified.");qo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new lg;return ey(t,r,new ag(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Go(Wo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qo;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Da.D())return Promise.resolve();const t=e+"main";await Da.delete(t)}(zf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class kv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof jl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||qo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ug(this._delegate,e,t,n)}enableNetwork(){return ny(this._delegate)}disableNetwork(){return ry(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Pg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ty(this._delegate)}onSnapshotsInSync(e){return pv(this._delegate,e)}get app(){if(!this._appCompat)throw new Go("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qv(this,Kg(this._delegate,e))}catch(t){throw Ov(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pv(this,Hg(this._delegate,e))}catch(t){throw Ov(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jv(this,function(e,t){if(e=Mg(e,Vg),Ng("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Go(Wo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new qg(e,null,function(e){return new qu(ha.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Ov(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Mg(e,$g);const r=Object.assign(Object.assign({},yv),n);return function(e){if(e.maxAttempts<1)throw new Go(Wo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Qo;return e.asyncQueue.enqueueAndForget((async()=>{const i=await xg(e);new fg(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Jg(e),(n=>t(new bv(e,n))),r)}(this._delegate,(t=>e(new Dv(this,t))))}batch(){return Jg(this._delegate),new Av(new vv(this._delegate,(e=>mv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Jg(e=Mg(e,$g)),r=new Xg;return Cg(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return iy(this._delegate,e).then((e=>e?new jv(this,e):null))}}class Cv extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new xv(new oy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pv.forKey(t,this.firestore,null)}}class Dv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cv(e)}get(e){const t=Bv(e);return this._delegate.get(t).then((e=>new Mv(this._firestore,new rv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Bv(e);return n?(_v("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Bv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Bv(e);return this._delegate.delete(t),this}}class Av{constructor(e){this._delegate=e}set(e,t,n){const r=Bv(e);return n?(_v("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Bv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Bv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new iv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Nv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Nv(e,new Cv(e),t),r.set(t,i)),i}}Nv.INSTANCES=new WeakMap;class Pv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Go("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Pv(t,new Bg(t._delegate,n,new pa(e)))}static forKey(e,t,n){return new Pv(t,new Bg(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new qv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qv(this.firestore,Kg(this._delegate,e))}catch(t){throw Ov(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=$e(e))instanceof Bg&&Wg(this._delegate,e)}set(e,t){t=_v("DocumentReference.set",t);try{return t?hv(this._delegate,e,t):hv(this._delegate,e)}catch(n){throw Ov(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?dv(this._delegate,e):dv(this._delegate,e,t,...r)}catch(s){throw Ov(s,"updateDoc()","DocumentReference.update()")}}delete(){return mv(Mg((e=this._delegate).firestore,$g),[new Qc(e._key,Lc.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rv(t),i=Lv(t,(e=>new Mv(this.firestore,new rv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return fv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?uv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mg(e,Bg);const t=Mg(e.firestore,$g);return Ig(Jg(t),e._key,{source:"server"}).then((n=>gv(t,e,n)))}(this._delegate):function(e){e=Mg(e,Bg);const t=Mg(e.firestore,$g);return Ig(Jg(t),e._key).then((n=>gv(t,e,n)))}(this._delegate),t.then((e=>new Mv(this.firestore,new rv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Pv(this.firestore,e?this._delegate.withConverter(Nv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ov(e,t,n){return e.message=e.message.replace(t,n),e}function Rv(e){for(const t of e)if("object"===typeof t&&!Sv(t))return t;return{}}function Lv(e,t){var n,r;let i;return i=Sv(e[0])?e[0]:Sv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return av(this._delegate,e._delegate)}}class Fv extends Mv{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||zo(),t}}class jv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cv(e)}where(e,t,n){try{return new jv(this.firestore,By(this._delegate,function(e,t,n){const r=t,i=jy("where",e);return zy._create(i,r,n)}(e,t,n)))}catch(r){throw Ov(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jv(this.firestore,By(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jy("orderBy",e);return Hy._create(n,t)}(e,t)))}catch(n){throw Ov(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jv(this.firestore,By(this._delegate,(Fg("limit",t=e),Wy._create("limit",t,"F"))))}catch(t){throw Ov(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new jv(this.firestore,By(this._delegate,(Fg("limitToLast",t=e),Wy._create("limitToLast",t,"L"))))}catch(t){throw Ov(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new jv(this.firestore,By(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gy._create("startAt",t,!0)}(...arguments)))}catch(e){throw Ov(e,"startAt()","Query.startAt()")}}startAfter(){try{return new jv(this.firestore,By(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gy._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Ov(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new jv(this.firestore,By(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qy._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Ov(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new jv(this.firestore,By(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qy._create("endAt",t,!0)}(...arguments)))}catch(e){throw Ov(e,"endAt()","Query.endAt()")}}isEqual(e){return Gg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?cv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mg(e,qg);const t=Mg(e.firestore,$g),n=Jg(t),r=new lv(t);return kg(n,e._query,{source:"server"}).then((n=>new sv(t,r,e,n)))}(this._delegate):function(e){e=Mg(e,qg);const t=Mg(e.firestore,$g),n=Jg(t),r=new lv(t);return Vy(e._query),kg(n,e._query).then((n=>new sv(t,r,e,n)))}(this._delegate),t.then((e=>new Uv(this.firestore,new sv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rv(t),i=Lv(t,(e=>new Uv(this.firestore,new sv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return fv(this._delegate,r,i)}withConverter(e){return new jv(this.firestore,e?this._delegate.withConverter(Nv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Vv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Fv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Uv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Fv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Vv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Fv(this._firestore,n))}))}isEqual(e){return av(this._delegate,e._delegate)}}class qv extends jv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pv(this.firestore,e):null}doc(e){try{return new Pv(this.firestore,void 0===e?Hg(this._delegate):Hg(this._delegate,e))}catch(t){throw Ov(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Mg(e.firestore,$g),r=Hg(e),i=ev(e.converter,t);return mv(n,[yy(gy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Lc.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Pv(this.firestore,e)))}isEqual(e){return Wg(this._delegate,e._delegate)}withConverter(e){return new qv(this.firestore,e?this._delegate.withConverter(Nv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bv(e){return Mg(e,Bg)}class zv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new ay(...t)}static documentId(){return new zv(fa.keyField().canonicalString())}isEqual(e){return(e=$e(e))instanceof ay&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new by("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Kv(e)}static delete(){const e=new vy("deleteField");return e._methodName="FieldValue.delete",new Kv(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _y("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Kv(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ey("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Kv(e)}static increment(e){const t=new Ty("increment",e);return t._methodName="FieldValue.increment",new Kv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Hv={Firestore:kv,GeoPoint:uy,Timestamp:la,Blob:xv,Transaction:Dv,WriteBatch:Av,DocumentReference:Pv,DocumentSnapshot:Mv,Query:jv,QueryDocumentSnapshot:Fv,QuerySnapshot:Uv,CollectionReference:qv,FieldPath:zv,FieldValue:Kv,setLogLevel:function(e){var t;t=e,Fo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Wv,Gv;(function(e,t){e.INTERNAL.registerComponent(new Je("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Hv)))})(Wv=fn,((e,t)=>new kv(e,t,new Iv))),Wv.registerVersion("@firebase/firestore-compat","0.3.26"),fn.initializeApp({apiKey:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_apiKey,authDomain:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_authDomain,databaseURL:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_databaseURL,projectId:null!==(Gv={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_projectId)&&void 0!==Gv?Gv:"no-firebase",storageBucket:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_storageBucket,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_messagingSenderId,appId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_appId});const Qv=fn.firestore();function Yv(e,t){return Qv.doc("participant_responses/".concat(e,"/participants/").concat(t))}function Xv(e,t,n){return Qv.doc("".concat(Yv(e,t).path,"/data/").concat(n))}"localhost"===window.location.hostname&&Qv.useEmulator("localhost",8080);var $v=n(579);function Jv(){return(0,$v.jsx)("div",{className:"centered-h-v",children:(0,$v.jsx)("div",{className:"width-50 alert alert-danger",children:"Please ask your task provider to enable firebase."})})}const Zv={name:"html-keyboard-response",parameters:{stimulus:{type:d.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:d.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:d.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0}}};class ew{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var r={rt:null,key:null};const i=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof s&&this.jsPsych.pluginAPI.cancelKeyboardResponse(s);var n={rt:r.rt,stimulus:t.stimulus,response:r.key};e.innerHTML="",this.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var s=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",null==r.key&&(r=n),t.response_ends_trial&&i()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(i,t.trial_duration)}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}}ew.info=Zv;const tw={name:"html-button-response",parameters:{stimulus:{type:d.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:d.STRING,pretty_name:"Choices",default:void 0,array:!0},button_html:{type:d.HTML_STRING,pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:d.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},margin_vertical:{type:d.STRING,pretty_name:"Margin vertical",default:"0px"},margin_horizontal:{type:d.STRING,pretty_name:"Margin horizontal",default:"8px"},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0}}};class nw{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-button-response-stimulus">'+t.stimulus+"</div>",r=[];if(Array.isArray(t.button_html))t.button_html.length==t.choices.length?r=t.button_html:console.error("Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var i=0;i<t.choices.length;i++)r.push(t.button_html);n+='<div id="jspsych-html-button-response-btngroup">';for(i=0;i<t.choices.length;i++){var s=r[i].replace(/%choice%/g,t.choices[i]);n+='<div class="jspsych-html-button-response-button" style="display: inline-block; margin:'+t.margin_vertical+" "+t.margin_horizontal+'" id="jspsych-html-button-response-button-'+i+'" data-choice="'+i+'">'+s+"</div>"}n+="</div>",null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var o=performance.now();for(i=0;i<t.choices.length;i++)e.querySelector("#jspsych-html-button-response-button-"+i).addEventListener("click",(e=>{u(e.currentTarget.getAttribute("data-choice"))}));var a={rt:null,button:null};const l=()=>{this.jsPsych.pluginAPI.clearAllTimeouts();var n={rt:a.rt,stimulus:t.stimulus,response:a.button};e.innerHTML="",this.jsPsych.finishTrial(n)};function u(n){var r=performance.now(),i=Math.round(r-o);a.button=parseInt(n),a.rt=i,e.querySelector("#jspsych-html-button-response-stimulus").className+=" responded";for(var s=document.querySelectorAll(".jspsych-html-button-response-button button"),u=0;u<s.length;u++)s[u].setAttribute("disabled","disabled");t.response_ends_trial&&l()}null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-button-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(l,t.trial_duration)}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.clickTarget(i.querySelector('div[data-choice="'.concat(r.response,'"] button')),r.rt)}}function rw(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}nw.info=tw,"function"===typeof SuppressedError&&SuppressedError;const iw={name:"initialize-camera",parameters:{device_select_message:{type:d.HTML_STRING,default:"<p>Please select the camera you would like to use.</p>"},button_label:{type:d.STRING,default:"Use this camera"},include_audio:{type:d.BOOL,default:!1},width:{type:d.INT,default:null},height:{type:d.INT,default:null},mime_type:{type:d.STRING,default:null}}};class sw{constructor(e){this.jsPsych=e}trial(e,t){this.run_trial(e,t).then((t=>{e.innerHTML="",this.jsPsych.finishTrial({device_id:t})}))}run_trial(e,t){return rw(this,void 0,void 0,(function*(){yield this.askForPermission(t),this.showCameraSelection(e,t),this.updateDeviceList(e),navigator.mediaDevices.ondevicechange=t=>{this.updateDeviceList(e)};const n=yield this.waitForSelection(e),r={video:{deviceId:n}};t.width&&(r.video.width=t.width),t.height&&(r.video.height=t.height),t.include_audio&&(r.audio=!0);const i=yield navigator.mediaDevices.getUserMedia(r),s={};return t.mime_type&&(s.mimeType=t.mime_type),this.jsPsych.pluginAPI.initializeCameraRecorder(i,s),n}))}askForPermission(e){return rw(this,void 0,void 0,(function*(){return yield navigator.mediaDevices.getUserMedia({audio:e.include_audio,video:!0})}))}showCameraSelection(e,t){let n="\n      ".concat(t.device_select_message,'\n      <select name="camera" id="which-camera" style="font-size:14px; font-family: \'Open Sans\', \'Arial\', sans-serif; padding: 4px;">\n      </select>\n      <p><button class="jspsych-btn" id="btn-select-camera">').concat(t.button_label,"</button></p>");e.innerHTML=n}waitForSelection(e){return new Promise((t=>{e.querySelector("#btn-select-camera").addEventListener("click",(()=>{const n=e.querySelector("#which-camera").value;t(n)}))}))}updateDeviceList(e){navigator.mediaDevices.enumerateDevices().then((t=>{const n=t.filter((e=>"videoinput"===e.kind&&"default"!==e.deviceId&&"communications"!==e.deviceId)).filter(((e,t,n)=>n.findIndex((t=>t.groupId==e.groupId))==t));e.querySelector("#which-camera").innerHTML="",n.forEach((t=>{let n=document.createElement("option");n.value=t.deviceId,n.innerHTML=t.label,e.querySelector("#which-camera").appendChild(n)}))}))}}function ow(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=0===Object.keys(r).length?"":" "+Object.entries(r).map((e=>{let[t,n]=e;return"".concat(t,'="').concat(n,'"')})).join(" "),"<".concat(e).concat(n,">").concat(t,"</").concat(e,">")}function aw(e){return ow("b",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function lw(e){return ow("div",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function uw(e){return ow("h1",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function cw(e){return ow("p",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}sw.info=iw;const hw={type:ew,stimulus:uw(ye.trials.conclusion),choices:"NO_KEYS",trial_duration:5e3},dw={name:"fullscreen",parameters:{fullscreen_mode:{type:d.BOOL,pretty_name:"Fullscreen mode",default:!0,array:!1},message:{type:d.HTML_STRING,pretty_name:"Message",default:"<p>The experiment will switch to full screen mode when you press the button below</p>",array:!1},button_label:{type:d.STRING,pretty_name:"Button label",default:"Continue",array:!1},delay_after:{type:d.INT,pretty_name:"Delay after",default:1e3,array:!1}}};class fw{constructor(e){this.jsPsych=e,this.rt=null,this.start_time=0}trial(e,t){"undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element?this.endTrial(e,!1,t):t.fullscreen_mode?this.showDisplay(e,t):(this.exitFullScreen(),this.endTrial(e,!0,t))}showDisplay(e,t){e.innerHTML="\n      ".concat(t.message,'\n      <button id="jspsych-fullscreen-btn" class="jspsych-btn">').concat(t.button_label,"</button>\n    "),e.querySelector("#jspsych-fullscreen-btn").addEventListener("click",(()=>{this.rt=Math.round(performance.now()-this.start_time),this.enterFullScreen(),this.endTrial(e,!0,t)})),this.start_time=performance.now()}endTrial(e,t,n){e.innerHTML="",this.jsPsych.pluginAPI.setTimeout((()=>{var e={success:t,rt:this.rt};this.jsPsych.finishTrial(e)}),n.delay_after)}enterFullScreen(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}exitFullScreen(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={success:!0,rt:this.jsPsych.randomization.sampleExGaussian(1e3,100,.005,!0)};return this.jsPsych.pluginAPI.mergeSimulationData(n,t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();!1===r.success?this.endTrial(i,!1,e):(this.trial(i,e),n(),this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-fullscreen-btn"),r.rt))}}fw.info=dw;const pw={type:fw,fullscreen_mode:!0},mw={type:fw,fullscreen_mode:!1};function gw(e){const t=[];return xe.USE_CAMERA&&t.push(function(e){const t=uw(ye.trials.camera.end);return{type:ew,stimulus:lw(t,{class:"bottom-prompt"}),trial_duration:5e3,on_start:function(){if(!xe.USE_ELECTRON)throw new Error("video recording is only available when running inside Electron");const t=e.pluginAPI.getCameraRecorder();t?t.stop():console.error("Camera is not initialized, no data will be recorded.")}}}(e)),t.push(mw,hw),{timeline:t}}const yw={name:"image-keyboard-response",parameters:{stimulus:{type:d.IMAGE,pretty_name:"Stimulus",default:void 0},stimulus_height:{type:d.INT,pretty_name:"Image height",default:null},stimulus_width:{type:d.INT,pretty_name:"Image width",default:null},maintain_aspect_ratio:{type:d.BOOL,pretty_name:"Maintain aspect ratio",default:!0},choices:{type:d.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:d.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0},render_on_canvas:{type:d.BOOL,pretty_name:"Render on canvas",default:!0}}};class vw{constructor(e){this.jsPsych=e}trial(e,t){var n,r;if(t.render_on_canvas){var i=!1;if(e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild);var s=document.createElement("canvas");s.id="jspsych-image-keyboard-response-stimulus",s.style.margin="0",s.style.padding="0";var o=s.getContext("2d");(l=new Image).onload=()=>{i||(a(),o.drawImage(l,0,0,r,n))},l.src=t.stimulus;const a=()=>{null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=l.naturalWidth*(t.stimulus_height/l.naturalHeight))):n=l.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=l.naturalHeight*(t.stimulus_width/l.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=l.naturalWidth),s.height=n,s.width=r};a(),e.insertBefore(s,null),l.complete&&Number.isFinite(r)&&Number.isFinite(n)&&(o.drawImage(l,0,0,r,n),i=!0),null!==t.prompt&&e.insertAdjacentHTML("beforeend",t.prompt)}else{var a='<img src="'+t.stimulus+'" id="jspsych-image-keyboard-response-stimulus">';null!==t.prompt&&(a+=t.prompt),e.innerHTML=a;var l=e.querySelector("#jspsych-image-keyboard-response-stimulus");null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=l.naturalWidth*(t.stimulus_height/l.naturalHeight))):n=l.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=l.naturalHeight*(t.stimulus_width/l.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=l.naturalWidth),l.style.height=n.toString()+"px",l.style.width=r.toString()+"px"}var u={rt:null,key:null};const c=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof h&&this.jsPsych.pluginAPI.cancelKeyboardResponse(h);var n={rt:u.rt,stimulus:t.stimulus,response:u.key};e.innerHTML="",this.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var h=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-image-keyboard-response-stimulus").className+=" responded",null==u.key&&(u=n),t.response_ends_trial&&c()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-image-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration?this.jsPsych.pluginAPI.setTimeout((()=>{c()}),t.trial_duration):!1===t.response_ends_trial&&console.warn("The experiment may be deadlocked. Try setting a trial duration or set response_ends_trial to true.")}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}}vw.info=yw;var ww=n(613),bw=n.n(ww);const _w=lw(function(e){return ow("span",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}("",{id:"photodiode-spot"}),{id:"photodiode-box"});function Ew(e){if(!xe.USE_ELECTRON)throw new Error("photodiodeSpot trial is only available when running inside Electron");if(xe.USE_PHOTODIODE){!function e(t,n){n>0&&function(e,t){bw()("#photodiode-spot").css({"background-color":"black"}),setTimeout((()=>{bw()("#photodiode-spot").css({"background-color":"white"}),t()}),e)}(t,(()=>{setTimeout((()=>{e(t,n-1)}),t)}))}(40,e),window.electronAPI.photodiodeTrigger(e)}}function Tw(e){const t=ve.honeycomb,n=function(e){const t=ve.fixation,n=Ce.fixation;return{type:ew,choices:"NO_KEYS",stimulus:lw("",{id:"fixation-dot"}),prompt:function(){return xe.USE_PHOTODIODE?_w:null},trial_duration:function(){return t.randomize_duration?e.randomization.sampleWithoutReplacement(t.durations,1)[0]:t.default_duration},data:{code:n},on_load:function(){xe.USE_PHOTODIODE&&Ew(n)}}}(e),r={type:vw,stimulus:e.timelineVariable("stimulus"),prompt:function(){return xe.USE_PHOTODIODE?_w:null},choices:t.timeline_variables.map((e=>e.correct_response)),data:{code:Ce.honeycomb,correct_response:e.timelineVariable("correct_response")},on_load:function(){xe.USE_PHOTODIODE&&Ew(Ce.honeycomb)},on_finish:function(t){t.correct=e.pluginAPI.compareKeys(t.response,t.correct_response)}};return{randomize_order:t.randomize_order,repetitions:t.repetitions,timeline_variables:t.timeline_variables,timeline:[n,r]}}const xw={type:nw,stimulus:function(){return lw(uw(ye.trials.eventMarker.connected,{style:"color: green;"}))},prompt:function(){let e=cw(ye.trials.holdUpMarker);return xe.USE_PHOTODIODE&&(e+=_w),e},choices:[ye.prompts.continue.button],on_load:function(){xe.USE_PHOTODIODE&&Ew(Ce.test_connect)}},Sw={type:ew,stimulus:uw(ye.name),choices:"NO_KEYS",trial_duration:1e3},Iw={name:"audio-keyboard-response",parameters:{stimulus:{type:d.AUDIO,pretty_name:"Stimulus",default:void 0},choices:{type:d.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0},trial_ends_after_audio:{type:d.BOOL,pretty_name:"Trial ends after audio",default:!1},response_allowed_while_playing:{type:d.BOOL,pretty_name:"Response allowed while playing",default:!0}}};class kw{constructor(e){this.jsPsych=e}trial(e,t,n){let r;var i,s=this.jsPsych.pluginAPI.audioContext(),o={rt:null,key:null};this.jsPsych.pluginAPI.getAudioBuffer(t.stimulus).then((e=>{null!==s?(this.audio=s.createBufferSource(),this.audio.buffer=e,this.audio.connect(s.destination)):(this.audio=e,this.audio.currentTime=0),a()})).catch((e=>{console.error('Failed to load audio file "'.concat(t.stimulus,'". Try checking the file path. We recommend using the preload plugin to load audio files.')),console.error(e)}));const a=()=>{t.trial_ends_after_audio&&this.audio.addEventListener("ended",l),null!==t.prompt&&(e.innerHTML=t.prompt),null!==s?(i=s.currentTime,this.audio.start(i)):this.audio.play(),t.response_allowed_while_playing?c():t.trial_ends_after_audio||this.audio.addEventListener("ended",c),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{l()}),t.trial_duration),n()},l=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),null!==s?this.audio.stop():this.audio.pause(),this.audio.removeEventListener("ended",l),this.audio.removeEventListener("ended",c),this.jsPsych.pluginAPI.cancelAllKeyboardResponses();var n={rt:o.rt,stimulus:t.stimulus,response:o.key};e.innerHTML="",this.jsPsych.finishTrial(n),r()};function u(e){null==o.key&&(o=e),t.response_ends_trial&&l()}const c=()=>{null!==s?this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:u,valid_responses:t.choices,rt_method:"audio",persist:!1,allow_held_key:!1,audio_context:s,audio_context_start_time:i}):this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:u,valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1})};return new Promise((e=>{r=e}))}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement(),s=()=>{null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)};this.trial(i,e,(()=>{n(),e.response_allowed_while_playing?s():this.audio.addEventListener("ended",s)}))}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}}kw.info=Iw;const Cw={type:kw,stimulus:"assets/audio/beep.mp3",choices:"NO_KEYS",trial_ends_after_audio:!0,prompt:function(){let e=uw(ye.prompts.settingUp);return xe.USE_PHOTODIODE&&(e+=_w),e},on_load:function(){xe.USE_PHOTODIODE&&Ew(Ce.open_task)}},Dw={type:ew,response_ends_trial:!0,stimulus:function(){return lw(uw(ye.trials.welcome))},prompt:ye.prompts.continue.prompt};function Aw(e){const t=[Sw,pw,Dw];return xe.USE_PHOTODIODE&&(t.push(xw),t.push(Cw)),xe.USE_CAMERA&&t.push(function(e){return{timeline:[{type:sw,include_audio:!0,mime_type:"video/webm"},{type:nw,stimulus:function(){const e=ow("video","",{id:"webcam",width:640,height:480,autoplay:!0}),t=lw(cw(ye.trials.camera.start)+e,{class:"d-flex flex-column align-items-center"});return lw(t)},choices:[ye.prompts.continue.button],response_ends_trial:!0,on_start:function(){if(!xe.USE_ELECTRON)throw new Error("video recording is only available when running inside Electron");const t=e.pluginAPI.getCameraRecorder();if(!t)return void console.error("Camera is not initialized, no data will be recorded.");const n=[];t.addEventListener("dataavailable",(e=>{e.data.size>0&&n.push(e.data)})),t.addEventListener("stop",(()=>{const e=new Blob(n,{type:t.mimeType}),r=new FileReader;r.readAsDataURL(e),r.onloadend=()=>{window.electronAPI.saveVideo(r.result)}}))},on_load:function(){document.getElementById("webcam").srcObject=e.pluginAPI.getCameraRecorder().stream},on_finish:function(){e.pluginAPI.getCameraRecorder().start()}}]}}(e)),{timeline:t}}const Nw={name:"instructions",parameters:{pages:{type:d.HTML_STRING,pretty_name:"Pages",default:void 0,array:!0},key_forward:{type:d.KEY,pretty_name:"Key forward",default:"ArrowRight"},key_backward:{type:d.KEY,pretty_name:"Key backward",default:"ArrowLeft"},allow_backward:{type:d.BOOL,pretty_name:"Allow backward",default:!0},allow_keys:{type:d.BOOL,pretty_name:"Allow keys",default:!0},show_clickable_nav:{type:d.BOOL,pretty_name:"Show clickable nav",default:!1},show_page_number:{type:d.BOOL,pretty_name:"Show page number",default:!1},page_label:{type:d.STRING,pretty_name:"Page label",default:"Page"},button_label_previous:{type:d.STRING,pretty_name:"Button label previous",default:"Previous"},button_label_next:{type:d.STRING,pretty_name:"Button label next",default:"Next"}}};class Pw{constructor(e){this.jsPsych=e}trial(e,t){var n=0,r=[],i=performance.now(),s=i;function o(e){e.target.removeEventListener("click",o),"jspsych-instructions-back"===this.id?u():"jspsych-instructions-next"===this.id&&l()}function a(){var r=t.pages[n],i="";if(t.show_page_number&&(i="<span style='margin: 0 1em;' class='jspsych-instructions-pagenum'>"+t.page_label+" "+(n+1)+"/"+t.pages.length+"</span>"),t.show_clickable_nav){var s="<div class='jspsych-instructions-nav' style='padding: 10px 0px;'>";if(t.allow_backward)s+="<button id='jspsych-instructions-back' class='jspsych-btn' style='margin-right: 5px;' "+(n>0?"":"disabled='disabled'")+">&lt; "+t.button_label_previous+"</button>";t.pages.length>1&&t.show_page_number&&(s+=i),r+=s+="<button id='jspsych-instructions-next' class='jspsych-btn'style='margin-left: 5px;'>"+t.button_label_next+" &gt;</button></div>",e.innerHTML=r,0!=n&&t.allow_backward&&e.querySelector("#jspsych-instructions-back").addEventListener("click",o),e.querySelector("#jspsych-instructions-next").addEventListener("click",o)}else t.show_page_number&&t.pages.length>1&&(r+="<div class='jspsych-instructions-pagenum'>"+i+"</div>"),e.innerHTML=r}function l(){c(),++n>=t.pages.length?h():a()}function u(){c(),n--,a()}function c(){var e=performance.now(),t=Math.round(e-s);r.push({page_index:n,viewing_time:t}),s=e}const h=()=>{t.allow_keys&&this.jsPsych.pluginAPI.cancelKeyboardResponse(f),e.innerHTML="";var n={view_history:r,rt:Math.round(performance.now()-i)};this.jsPsych.finishTrial(n)},d=e=>{f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:d,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1,allow_held_key:!1}),this.jsPsych.pluginAPI.compareKeys(e.key,t.key_backward)&&0!==n&&t.allow_backward&&u(),this.jsPsych.pluginAPI.compareKeys(e.key,t.key_forward)&&l()};if(a(),t.allow_keys)var f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:d,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1})}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){var n,r,i,s,o,a;let l=0,u=0,c=[];if(!(null===(n=t.data)||void 0===n?void 0:n.view_history)&&!(null===(r=t.data)||void 0===r?void 0:r.rt))for(;l!==e.pages.length;){const t=Math.round(this.jsPsych.randomization.sampleExGaussian(3e3,300,1/300));c.push({page_index:l,viewing_time:t}),u+=t,0!=l&&e.allow_backward?1==this.jsPsych.randomization.sampleBernoulli(.9)?l++:l--:l++}if(!(null===(i=t.data)||void 0===i?void 0:i.view_history)&&(null===(s=t.data)||void 0===s?void 0:s.rt)){for(u=t.data.rt;l!==e.pages.length;)c.push({page_index:l,viewing_time:null}),0!=l&&e.allow_backward?1==this.jsPsych.randomization.sampleBernoulli(.9)?l++:l--:l++;const n=t.data.rt/c.length;let r=0;for(const e of c){const t=Math.round(this.jsPsych.randomization.sampleExGaussian(n,n/10,1/(n/10)));e.viewing_time=t,r+=t}const i=t.data.rt-r,s=Math.round(i/c.length);for(const e of c)e.viewing_time+=s}if((null===(o=t.data)||void 0===o?void 0:o.view_history)&&!(null===(a=t.data)||void 0===a?void 0:a.rt)){c=t.data.view_history,u=0;for(const e of t.data.view_history)u+=e.viewing_time}const h={view_history:c,rt:u},d=this.jsPsych.pluginAPI.mergeSimulationData(h,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,d),d}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n();const s=t=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_forward,t):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-instructions-next"),t)},o=t=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_backward,t):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-instructions-back"),t)};let a=0,l=0;for(let u=0;u<r.view_history.length;u++)u==r.view_history.length-1?s(l+r.view_history[u].viewing_time):(r.view_history[u+1].page_index>a&&s(l+r.view_history[u].viewing_time),r.view_history[u+1].page_index<a&&o(l+r.view_history[u].viewing_time),l+=r.view_history[u].viewing_time,a=r.view_history[u+1].page_index)}}Pw.info=Nw;const Ow={name:"preload",parameters:{auto_preload:{type:d.BOOL,pretty_name:"Auto-preload",default:!1},trials:{type:d.TIMELINE,pretty_name:"Trials",default:[]},images:{type:d.STRING,pretty_name:"Images",default:[],array:!0},audio:{type:d.STRING,pretty_name:"Audio",default:[],array:!0},video:{type:d.STRING,pretty_name:"Video",default:[],array:!0},message:{type:d.HTML_STRING,pretty_name:"Message",default:null},show_progress_bar:{type:d.BOOL,pretty_name:"Show progress bar",default:!0},continue_after_error:{type:d.BOOL,pretty_name:"Continue after error",default:!1},error_message:{type:d.HTML_STRING,pretty_name:"Error message",default:"The experiment failed to load."},show_detailed_errors:{type:d.BOOL,pretty_name:"Show detailed errors",default:!1},max_load_time:{type:d.INT,pretty_name:"Max load time",default:null},on_error:{type:d.FUNCTION,pretty_name:"On error",default:null},on_success:{type:d.FUNCTION,pretty_name:"On success",default:null}}};class Rw{constructor(e){this.jsPsych=e}trial(e,t){var n=null,r=!1,i=[],s=[],o=[],a=[],l=this.jsPsych.getSafeModeStatus(),u=[],c=[],h=[];if(t.auto_preload){var d=this.jsPsych.getTimeline(),f=this.jsPsych.pluginAPI.getAutoPreloadList(d);u=u.concat(f.images),c=c.concat(f.audio),h=h.concat(f.video)}if(t.trials.length>0){var p=this.jsPsych.pluginAPI.getAutoPreloadList(t.trials);u=u.concat(p.images),c=c.concat(p.audio),h=h.concat(p.video)}u=u.concat(t.images),c=c.concat(t.audio),h=h.concat(t.video),u=this.jsPsych.utils.unique(u.flat()),c=this.jsPsych.utils.unique(c.flat()),h=this.jsPsych.utils.unique(h.flat()),l&&(h=[]);var m="";null!==t.message&&(m+=t.message),t.show_progress_bar&&(m+="\n            <div id='jspsych-loading-progress-bar-container' style='height: 10px; width: 300px; background-color: #ddd; margin: auto;'>\n              <div id='jspsych-loading-progress-bar' style='height: 10px; width: 0%; background-color: #777;'></div>\n            </div>"),e.innerHTML=m;const g=()=>{if(E++,t.show_progress_bar){var n=E/_*100,r=e.querySelector("#jspsych-loading-progress-bar");null!==r&&(r.style.width=n+"%")}},y=()=>{"undefined"!==typeof r&&!1===r&&(this.jsPsych.pluginAPI.clearAllTimeouts(),this.jsPsych.pluginAPI.cancelPreloads(),n=!0,b())},v=()=>{this.jsPsych.pluginAPI.cancelPreloads(),"undefined"===typeof n||!1!==n&&null!==n||(r=!0,T<_&&(n=!1),I("timeout"),a.push("<p><strong>Loading timed out.</strong><br>Consider compressing your stimuli files, loading your files in smaller batches,<br>and/or increasing the <i>max_load_time</i> parameter.</p>"),t.continue_after_error?b():w())},w=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),this.jsPsych.pluginAPI.cancelPreloads(),e.innerHTML=t.error_message,t.show_detailed_errors&&(e.innerHTML+="<p><strong>Error details:</strong></p>",a.forEach((t=>{e.innerHTML+=t})))},b=()=>{this.jsPsych.pluginAPI.clearAllTimeouts();var t={success:n,timeout:r,failed_images:i,failed_audio:s,failed_video:o};e.innerHTML="",this.jsPsych.finishTrial(t)};null!==t.max_load_time&&this.jsPsych.pluginAPI.setTimeout(v,t.max_load_time);var _=u.length+c.length+h.length,E=0,T=0;if(0==_)y();else{const e=e=>{this.jsPsych.pluginAPI.preloadVideo(h,e,S,x)},t=e=>{this.jsPsych.pluginAPI.preloadAudio(c,e,S,x)},n=e=>{this.jsPsych.pluginAPI.preloadImages(u,e,S,x)};h.length>0&&e((()=>{})),c.length>0&&t((()=>{})),u.length>0&&n((()=>{}))}function x(e){g(),null==n&&(n=!1);var r="unknown file";e.source&&(r=e.source),e.error&&e.error.path&&e.error.path.length>0&&("img"==e.error.path[0].localName?i.push(r):"audio"==e.error.path[0].localName?s.push(r):"video"==e.error.path[0].localName&&o.push(r));var l="<p><strong>Error loading file: "+r+"</strong><br>";e.error.statusText&&(l+="File request response status: "+e.error.statusText+"<br>"),"404"==e.error&&(l+="404 - file not found.<br>"),"undefined"!==typeof e.error.loaded&&null!==e.error.loaded&&0!==e.error.loaded?l+=e.error.loaded+" bytes transferred.":l+="File did not begin loading. Check that file path is correct and reachable by the browser,<br>and that loading is not blocked by cross-origin resource sharing (CORS) errors.",l+="</p>",a.push(l),I(r),E==_&&(t.continue_after_error?b():w())}function S(e){g(),function(e){null!==t.on_success&&t.on_success(e)}(e),++T==_?y():E==_&&(t.continue_after_error?b():w())}function I(e){null!==t.on_error&&t.on_error(e)}}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){return this.jsPsych.pluginAPI.mergeSimulationData({success:!0,timeout:!1,failed_images:[],failed_audio:[],failed_video:[]},t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.jsPsych.getDisplayElement();this.trial(r,e),n()}}Rw.info=Ow;const Lw=ye.trials.honeycomb,Mw={type:Pw,pages:[cw(Lw.instructions.read),cw(Lw.instructions.circle),...ve.honeycomb.timeline_variables.map((e=>{let{stimulus:t,correct_response:n}=e;const r=t.substring(t.lastIndexOf("/")+1,t.indexOf("."));return lw(cw(Lw.instructions.example.start+aw(r)+Lw.instructions.example.middle+aw(n)+Lw.instructions.example.end)+function(){return ow("img","",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({src:t}))})),cw(Lw.instructions.next)],show_clickable_nav:!0,post_trial_gap:500},Fw={type:Rw,message:cw(ye.prompts.settingUp),images:ve.honeycomb.timeline_variables.map((e=>{let{stimulus:t}=e;return t}))};function jw(e){const t=Aw(e),n=Tw(e),r=function(e){return{type:ew,stimulus:function(){const t=e.data.get().filter({code:Ce.honeycomb}),n=t.filter({correct:!0}),r=Math.round(n.count()/t.count()*100),i=Math.round(n.select("rt").mean()),s=Lw.debrief;return cw(s.accuracy.start+r+s.accuracy.end)+cw(s.reactionTime.start+i+s.reactionTime.end)+cw(s.complete)}}}(e),i=gw(e);return[t,Fw,Mw,n,r,i]}const Vw={...{on_finish:function(e){console.log("The experiment has finished:",e)}},on_trial_finish:function(e){console.log("Trial ".concat(e.internal_node_id," just finished:"),e)}};const Uw="experiment-window";function qw(e){let{studyID:t,participantID:n,dataUpdateFunction:i,dataFinishFunction:s}=e;const o=r.useMemo((()=>{const e=(new Date).toISOString();xe.USE_FIREBASE&&async function(e,t,n){try{const r=Xv(e,t,n);return await r.set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform}),console.log("Initialized experiment:",e,t,n),!0}catch(r){return console.error("Unable to initialize the experiment:\n",r),!1}}(t,n,e);const r=ce({...Vw,display_element:Uw,on_data_update:e=>{Vw.on_data_update&&Vw.on_data_update(e),i(e)},on_finish:e=>{Vw.on_finish&&Vw.on_finish(e),s(e)}});return r.data.addProperties({study_id:t,participant_id:n,start_date:e,task_version:ge}),r}),[t,n]);return r.useEffect((()=>{const e=function(e,t,n){return console.log("Building timeline for participant ".concat(n," on study ").concat(t)),jw(e)}(o,t,n);o.run(e)}),[o]),(0,$v.jsx)("div",{id:Uw})}function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bw.apply(this,arguments)}function zw(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Kw=n(139),Hw=n.n(Kw),Ww=(n(197),n(173)),Gw=n.n(Ww),Qw=["as","className","type","tooltip"],Yw={type:Gw().string,tooltip:Gw().bool,as:Gw().elementType},Xw=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"div":n,s=e.className,o=e.type,a=void 0===o?"valid":o,l=e.tooltip,u=void 0!==l&&l,c=zw(e,Qw);return r.createElement(i,Bw({},c,{ref:t,className:Hw()(s,a+"-"+(u?"tooltip":"feedback"))}))}));Xw.displayName="Feedback",Xw.propTypes=Yw;const $w=Xw;const Jw=r.createContext({controlId:void 0});var Zw=r.createContext({});Zw.Consumer,Zw.Provider;function eb(e,t){var n=(0,r.useContext)(Zw);return e||n[t]||t}var tb=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],nb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.className,a=e.type,l=void 0===a?"checkbox":a,u=e.isValid,c=void 0!==u&&u,h=e.isInvalid,d=void 0!==h&&h,f=e.isStatic,p=e.as,m=void 0===p?"input":p,g=zw(e,tb),y=(0,r.useContext)(Jw),v=y.controlId,w=y.custom?[s,"custom-control-input"]:[i,"form-check-input"];return i=eb(w[0],w[1]),r.createElement(m,Bw({},g,{ref:t,type:l,id:n||v,className:Hw()(o,i,c&&"is-valid",d&&"is-invalid",f&&"position-static")}))}));nb.displayName="FormCheckInput";const rb=nb;var ib=["bsPrefix","bsCustomPrefix","className","htmlFor"],sb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.bsCustomPrefix,s=e.className,o=e.htmlFor,a=zw(e,ib),l=(0,r.useContext)(Jw),u=l.controlId,c=l.custom?[i,"custom-control-label"]:[n,"form-check-label"];return n=eb(c[0],c[1]),r.createElement("label",Bw({},a,{ref:t,htmlFor:o||u,className:Hw()(s,n)}))}));sb.displayName="FormCheckLabel";const ob=sb;var ab=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],lb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.inline,a=void 0!==o&&o,l=e.disabled,u=void 0!==l&&l,c=e.isValid,h=void 0!==c&&c,d=e.isInvalid,f=void 0!==d&&d,p=e.feedbackTooltip,m=void 0!==p&&p,g=e.feedback,y=e.className,v=e.style,w=e.title,b=void 0===w?"":w,_=e.type,E=void 0===_?"checkbox":_,T=e.label,x=e.children,S=e.custom,I=e.as,k=void 0===I?"input":I,C=zw(e,ab),D="switch"===E||S,A=D?[s,"custom-control"]:[i,"form-check"];i=eb(A[0],A[1]);var N=(0,r.useContext)(Jw).controlId,P=(0,r.useMemo)((function(){return{controlId:n||N,custom:D}}),[N,D,n]),O=D||null!=T&&!1!==T&&!x,R=r.createElement(rb,Bw({},C,{type:"switch"===E?"checkbox":E,ref:t,isValid:h,isInvalid:f,isStatic:!O,disabled:u,as:k}));return r.createElement(Jw.Provider,{value:P},r.createElement("div",{style:v,className:Hw()(y,i,D&&"custom-"+E,a&&i+"-inline")},x||r.createElement(r.Fragment,null,R,O&&r.createElement(ob,{title:b},T),(h||f)&&r.createElement($w,{type:h?"valid":"invalid",tooltip:m},g))))}));lb.displayName="FormCheck",lb.Input=rb,lb.Label=ob;const ub=lb;var cb=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],hb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.className,a=e.isValid,l=e.isInvalid,u=e.lang,c=e.as,h=void 0===c?"input":c,d=zw(e,cb),f=(0,r.useContext)(Jw),p=f.controlId,m=f.custom?[s,"custom-file-input"]:[i,"form-control-file"];return i=eb(m[0],m[1]),r.createElement(h,Bw({},d,{ref:t,id:n||p,type:"file",lang:u,className:Hw()(o,i,a&&"is-valid",l&&"is-invalid")}))}));hb.displayName="FormFileInput";const db=hb;var fb=["bsPrefix","bsCustomPrefix","className","htmlFor"],pb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.bsCustomPrefix,s=e.className,o=e.htmlFor,a=zw(e,fb),l=(0,r.useContext)(Jw),u=l.controlId,c=l.custom?[i,"custom-file-label"]:[n,"form-file-label"];return n=eb(c[0],c[1]),r.createElement("label",Bw({},a,{ref:t,htmlFor:o||u,className:Hw()(s,n),"data-browse":a["data-browse"]}))}));pb.displayName="FormFileLabel";const mb=pb;var gb=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],yb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.disabled,a=void 0!==o&&o,l=e.isValid,u=void 0!==l&&l,c=e.isInvalid,h=void 0!==c&&c,d=e.feedbackTooltip,f=void 0!==d&&d,p=e.feedback,m=e.className,g=e.style,y=e.label,v=e.children,w=e.custom,b=e.lang,_=e["data-browse"],E=e.as,T=void 0===E?"div":E,x=e.inputAs,S=void 0===x?"input":x,I=zw(e,gb),k=w?[s,"custom"]:[i,"form-file"];i=eb(k[0],k[1]);var C=(0,r.useContext)(Jw).controlId,D=(0,r.useMemo)((function(){return{controlId:n||C,custom:w}}),[C,w,n]),A=null!=y&&!1!==y&&!v,N=r.createElement(db,Bw({},I,{ref:t,isValid:u,isInvalid:h,disabled:a,as:S,lang:b}));return r.createElement(Jw.Provider,{value:D},r.createElement(T,{style:g,className:Hw()(m,i,w&&"custom-file")},v||r.createElement(r.Fragment,null,w?r.createElement(r.Fragment,null,N,A&&r.createElement(mb,{"data-browse":_},y)):r.createElement(r.Fragment,null,A&&r.createElement(mb,null,y),N),(u||h)&&r.createElement($w,{type:u?"valid":"invalid",tooltip:f},p))))}));yb.displayName="FormFile",yb.Input=db,yb.Label=mb;const vb=yb;n(440);var wb=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],bb=r.forwardRef((function(e,t){var n,i,s=e.bsPrefix,o=e.bsCustomPrefix,a=e.type,l=e.size,u=e.htmlSize,c=e.id,h=e.className,d=e.isValid,f=void 0!==d&&d,p=e.isInvalid,m=void 0!==p&&p,g=e.plaintext,y=e.readOnly,v=e.custom,w=e.as,b=void 0===w?"input":w,_=zw(e,wb),E=(0,r.useContext)(Jw).controlId,T=v?[o,"custom"]:[s,"form-control"];if(s=eb(T[0],T[1]),g)(i={})[s+"-plaintext"]=!0,n=i;else if("file"===a){var x;(x={})[s+"-file"]=!0,n=x}else if("range"===a){var S;(S={})[s+"-range"]=!0,n=S}else if("select"===b&&v){var I;(I={})[s+"-select"]=!0,I[s+"-select-"+l]=l,n=I}else{var k;(k={})[s]=!0,k[s+"-"+l]=l,n=k}return r.createElement(b,Bw({},_,{type:a,size:u,ref:t,readOnly:y,id:c||E,className:Hw()(h,n,f&&"is-valid",m&&"is-invalid")}))}));bb.displayName="FormControl";const _b=Object.assign(bb,{Feedback:$w});var Eb=["bsPrefix","className","children","controlId","as"],Tb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,s=e.children,o=e.controlId,a=e.as,l=void 0===a?"div":a,u=zw(e,Eb);n=eb(n,"form-group");var c=(0,r.useMemo)((function(){return{controlId:o}}),[o]);return r.createElement(Jw.Provider,{value:c},r.createElement(l,Bw({},u,{ref:t,className:Hw()(i,n)}),s))}));Tb.displayName="FormGroup";const xb=Tb;var Sb=["bsPrefix","className","as"],Ib=["xl","lg","md","sm","xs"],kb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,s=e.as,o=void 0===s?"div":s,a=zw(e,Sb),l=eb(n,"col"),u=[],c=[];return Ib.forEach((function(e){var t,n,r,i=a[e];if(delete a[e],"object"===typeof i&&null!=i){var s=i.span;t=void 0===s||s,n=i.offset,r=i.order}else t=i;var o="xs"!==e?"-"+e:"";t&&u.push(!0===t?""+l+o:""+l+o+"-"+t),null!=r&&c.push("order"+o+"-"+r),null!=n&&c.push("offset"+o+"-"+n)})),u.length||u.push(l),r.createElement(o,Bw({},a,{ref:t,className:Hw().apply(void 0,[i].concat(u,c))}))}));kb.displayName="Col";const Cb=kb;var Db=["as","bsPrefix","column","srOnly","className","htmlFor"],Ab=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"label":n,s=e.bsPrefix,o=e.column,a=e.srOnly,l=e.className,u=e.htmlFor,c=zw(e,Db),h=(0,r.useContext)(Jw).controlId;s=eb(s,"form-label");var d="col-form-label";"string"===typeof o&&(d=d+" "+d+"-"+o);var f=Hw()(l,s,a&&"sr-only",o&&d);return u=u||h,o?r.createElement(Cb,Bw({ref:t,as:"label",className:f,htmlFor:u},c)):r.createElement(i,Bw({ref:t,className:f,htmlFor:u},c))}));Ab.displayName="FormLabel",Ab.defaultProps={column:!1,srOnly:!1};const Nb=Ab;var Pb=["bsPrefix","className","as","muted"],Ob=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,s=e.as,o=void 0===s?"small":s,a=e.muted,l=zw(e,Pb);return n=eb(n,"form-text"),r.createElement(o,Bw({},l,{ref:t,className:Hw()(i,n,a&&"text-muted")}))}));Ob.displayName="FormText";const Rb=Ob;var Lb=r.forwardRef((function(e,t){return r.createElement(ub,Bw({},e,{ref:t,type:"switch"}))}));Lb.displayName="Switch",Lb.Input=ub.Input,Lb.Label=ub.Label;const Mb=Lb;var Fb=/-(.)/g;var jb=["className","bsPrefix","as"],Vb=function(e){return e[0].toUpperCase()+(t=e,t.replace(Fb,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var Ub=["bsPrefix","inline","className","validated","as"],qb=function(e,t){var n=void 0===t?{}:t,i=n.displayName,s=void 0===i?Vb(e):i,o=n.Component,a=n.defaultProps,l=r.forwardRef((function(t,n){var i=t.className,s=t.bsPrefix,a=t.as,l=void 0===a?o||"div":a,u=zw(t,jb),c=eb(s,e);return r.createElement(l,Bw({ref:n,className:Hw()(i,c)},u))}));return l.defaultProps=a,l.displayName=s,l}("form-row"),Bb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.inline,s=e.className,o=e.validated,a=e.as,l=void 0===a?"form":a,u=zw(e,Ub);return n=eb(n,"form"),r.createElement(l,Bw({},u,{ref:t,className:Hw()(s,o&&"was-validated",i&&n+"-inline")}))}));Bb.displayName="Form",Bb.defaultProps={inline:!1},Bb.Row=qb,Bb.Group=xb,Bb.Control=_b,Bb.Check=ub,Bb.File=vb,Bb.Switch=Mb,Bb.Label=Nb,Bb.Text=Rb;const zb=Bb;const Kb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};var Hb=["as","disabled","onKeyDown"];function Wb(e){return!e||"#"===e.trim()}var Gb=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"a":n,s=e.disabled,o=e.onKeyDown,a=zw(e,Hb),l=function(e){var t=a.href,n=a.onClick;(s||Wb(t))&&e.preventDefault(),s?e.stopPropagation():n&&n(e)};return Wb(a.href)&&(a.role=a.role||"button",a.href=a.href||"#"),s&&(a.tabIndex=-1,a["aria-disabled"]=!0),r.createElement(i,Bw({ref:t},a,{onClick:l,onKeyDown:Kb((function(e){" "===e.key&&(e.preventDefault(),l(e))}),o)}))}));Gb.displayName="SafeAnchor";const Qb=Gb;var Yb=["bsPrefix","variant","size","active","className","block","type","as"],Xb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.variant,s=e.size,o=e.active,a=e.className,l=e.block,u=e.type,c=e.as,h=zw(e,Yb),d=eb(n,"btn"),f=Hw()(a,d,o&&"active",i&&d+"-"+i,l&&d+"-block",s&&d+"-"+s);if(h.href)return r.createElement(Qb,Bw({},h,{as:c,ref:t,className:Hw()(f,h.disabled&&"disabled")}));t&&(h.ref=t),u?h.type=u:c||(h.type="button");var p=c||"button";return r.createElement(p,Bw({},h,{className:f}))}));Xb.displayName="Button",Xb.defaultProps={variant:"primary",active:!1,disabled:!1};const $b=Xb;function Jb(e){let{handleLogin:t,initialParticipantID:n,initialStudyID:i,validationFunction:s}=e;const[o,a]=r.useState(n),[l,u]=r.useState(i),[c,h]=r.useState(!1);return(0,r.useEffect)((()=>{a(n)}),[n]),(0,r.useEffect)((()=>{u(i)}),[i]),(0,$v.jsx)("div",{className:"centered-h-v",children:(0,$v.jsxs)("div",{className:"width-50",children:[(0,$v.jsxs)(zb,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),s(l,o).then((e=>{h(!e),e&&t(l,o)}))},children:[(0,$v.jsxs)(zb.Group,{className:"width-100",size:"lg",controlId:"participantID",children:[(0,$v.jsx)(zb.Label,{children:"Participant ID"}),(0,$v.jsx)(zb.Control,{autoFocus:!0,type:"participantID",value:o,onChange:e=>a(e.target.value)})]}),(0,$v.jsxs)(zb.Group,{className:"width-100",size:"lg",controlId:"studyID",children:[(0,$v.jsx)(zb.Label,{children:"Study ID"}),(0,$v.jsx)(zb.Control,{type:"studyID",value:l,onChange:e=>u(e.target.value)})]}),(0,$v.jsx)($b,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:0===l.length||0===o.length,children:"Log In"})]}),c?(0,$v.jsx)("div",{className:"alert alert-danger",role:"alert",children:"No matching experiment found for this participant and study"}):null]})})}function Zb(){const[t,n]=r.useState(!1),[i,s]=r.useState(!1),[o,a]=r.useState(!1),[l,u]=r.useState(""),[c,h]=r.useState(""),[d,f]=r.useState("default");r.useEffect((()=>{!async function(){if(console.log({"Honeycomb Configuration":xe,"Task Settings":ve}),xe.USE_ELECTRON){await window.electronAPI.setConfig(xe),await window.electronAPI.setTrigger(e);const t=await window.electronAPI.getCredentials();t.participantID&&u(t.participantID),t.studyID&&h(t.studyID),f("desktop")}else if(xe.USE_MTURK)window.lodash=_.noConflict(),a(new PsiTurk(_e,"/complete")),f("mturk"),x("mturk",_e);else if(xe.USE_PROLIFIC){const e=fe();xe.USE_FIREBASE&&e?(f("firebase"),x("prolific",e)):s(!0)}else if(xe.USE_FIREBASE){const e=de("studyID"),t=de("participantID");null!==e&&h(e),null!==t&&u(t),f("firebase")}else f("default")}()}),[]);const p=async()=>!0,m=(e,t)=>async function(e,t){try{return await Yv(e,t).get(),!0}catch(n){return console.error("Unable to validate the experiment:\n",n),!1}}(e,t),g=()=>{},y=e=>{!async function(e){const t=e.study_id,n=e.participant_id,r=e.start_date;try{const i=Xv(t,n,r);await i.collection("trials").add(e)}catch(i){console.error("Unable to add trial:\n",i)}}(e)},v=async e=>{await window.electronAPI.on_data_update(e)},w=e=>{o.recordTrialData(e)},b=e=>{e.localSave("csv","neuro-task.csv")},E=async()=>{await window.electronAPI.on_finish()},T=()=>{(async()=>{o.saveData({success:()=>o.completeHIT(),error:()=>s(!0)})})()},x=r.useCallback(((e,t)=>{h(e),u(t),n(!0)}),[]);return i?(0,$v.jsx)(Jv,{}):t?(0,$v.jsx)(qw,{studyID:c,participantID:l,dataUpdateFunction:{desktop:v,firebase:y,mturk:w,default:g}[d],dataFinishFunction:{desktop:E,mturk:T,firebase:g,default:b}[d]}):(0,$v.jsx)(Jb,{validationFunction:{desktop:p,default:p,firebase:m}[d],initialStudyID:c,initialParticipantID:l,handleLogin:x})}i.render((0,$v.jsx)(Zb,{}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.f4a151eb.js.map