/*! For license information please see main.1bcc1652.js.LICENSE.txt */
(()=>{var e={123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))n.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var c=0;c<o.length;c++)r.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(534),s=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,s,o){var a=i||"<<anonymous>>",l=o||r;if(null==n[r])return t?new Error("Required "+s+" `"+l+"` was not specified in `"+a+"`."):null;for(var u=arguments.length,c=Array(u>6?u-6:0),h=6;h<u;h++)c[h-6]=arguments[h];return e.apply(void 0,[n,r,a,s,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(123),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function a(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var l=!1,u=null,c=!1,h=null,d={onError:function(e){l=!0,u=e}};function f(e,t,n,r,i,s,o,c,h){l=!1,u=null,a.apply(d,arguments)}var p=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,s,a,d,p){if(f.apply(this,arguments),l){if(!l)throw Error(o(198));var m=u;l=!1,u=null,c||(c=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,w={};function b(){if(v)for(var e in w){var t=w[e],n=v.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!E[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in E[n]=t,n=t.eventTypes){var i=void 0,s=n[r],a=t,l=r;if(T.hasOwnProperty(l))throw Error(o(99,l));T[l]=s;var u=s.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&_(u[i],a,l);i=!0}else s.registrationName?(_(s.registrationName,a,l),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function _(e,t,n){if(S[e])throw Error(o(100,e));S[e]=t,I[e]=t.eventTypes[n].dependencies}var E=[],T={},S={},I={};function x(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(o(102,t));w[t]=r,n=!0}}n&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,D=null,P=null;function A(e){if(e=m(e)){if("function"!==typeof C)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function N(e){D?P?P.push(e):P=[e]:D=e}function O(){if(D){var e=D,t=P;if(P=D=null,A(e),t)for(e=0;e<t.length;e++)A(t[e])}}function R(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=R,j=!1,V=!1;function U(){null===D&&null===P||(M(),O())}function z(e,t,n){if(V)return e(t,n);V=!0;try{return F(e,t,n)}finally{V=!1,U()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,K={},G={};function H(e,t,n,r,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);W[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);W[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);W[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=W.hasOwnProperty(t)?W[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(G,e)||!q.call(K,e)&&(B.test(e)?G[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var $=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,se=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case se:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,s=ge(e.type);n=null,r&&(n=ge(r.type)),r=s,s="",i?s=" (at "+i.fileName.replace($,"")+":"+i.lineNumber+")":n&&(s=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+s}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ee(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Se(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Ie(e,t){Se(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function xe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function De(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Ne(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var je,Ve,Ue=(Ve=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((je=je||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=je.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},Ke={},Ge={};function He(e){if(Ke[e])return Ke[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ke[e]=n[t];return e}k&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var We=He("animationend"),Qe=He("animationiteration"),Ye=He("animationstart"),Xe=He("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$e=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=$e.get(e);return void 0===t&&(t=new Map,$e.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nt(i),e;if(s===r)return nt(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function st(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(st(e,at),ot)throw Error(o(95));if(c)throw e=h,c=!1,h=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!k)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=On(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var s=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var a=null,l=0;l<E.length;l++){var u=E[l];u&&(u=u.extractEvents(r,t,s,i,o))&&(a=it(a,u))}lt(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,yt,vt,wt=!1,bt=[],_t=null,Et=null,Tt=null,St=new Map,It=new Map,xt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Dt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Pt(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function At(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=Dt(t,n,r,i,s),null!==t&&(null!==(t=Rn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Nt(e){var t=On(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void s.unstable_runWithPriority(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Rn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){Ot(e)&&n.delete(t)}function Lt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Rn(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Ot(_t)&&(_t=null),null!==Et&&Ot(Et)&&(Et=null),null!==Tt&&Ot(Tt)&&(Tt=null),St.forEach(Rt),It.forEach(Rt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Mt(_t,e),null!==Et&&Mt(Et,e),null!==Tt&&Mt(Tt,e),St.forEach(t),It.forEach(t),n=0;n<xt.length;n++)(r=xt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)Nt(n),null===n.blockedOn&&xt.shift()}var jt={},Vt=new Map,Ut=new Map,zt=["abort","abort",We,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],s="on"+(i[0].toUpperCase()+i.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[r],eventPriority:t},Ut.set(r,t),Vt.set(r,s),jt[i]=s}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(zt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<qt.length;Kt++)Ut.set(qt[Kt],0);var Gt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Wt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Ut.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=Jt.bind(null,t,1,e);break;default:r=$t.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){j||M();var i=$t,s=j;j=!0;try{L(i,e,t,n,r)}finally{(j=s)||U()}}function Jt(e,t,n,r){Ht(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){if(Wt)if(0<bt.length&&-1<kt.indexOf(e))e=Dt(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Pt(e,r);else if(-1<kt.indexOf(e))e=Dt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=At(_t,e,t,n,r,i),!0;case"dragenter":return Et=At(Et,e,t,n,r,i),!0;case"mouseover":return Tt=At(Tt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return St.set(s,At(St.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,It.set(s,At(It.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Pt(e,r),e=ft(e,r,null,t);try{z(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=On(n=ut(r)))){var i=et(n);if(null===i)n=null;else{var s=i.tag;if(13===s){if(null!==(n=tt(i)))return n;n=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{z(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var sn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(sn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Re;function un(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=I[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function cn(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$",vn="/$",wn="$?",bn="$!",_n=null,En=null;function Tn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Sn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var In="function"===typeof setTimeout?setTimeout:void 0,xn="function"===typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn||n===bn||n===wn){if(0===t)return e;t--}else n===vn&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),Pn="__reactInternalInstance$"+Dn,An="__reactEventHandlers$"+Dn,Nn="__reactContainere$"+Dn;function On(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[Pn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[Pn])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function Rn(e){return!(e=e[Pn]||e[Nn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Mn(e){return e[An]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Vn(e,t,n){(t=jn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)Vn(n[t],"captured",e);for(t=0;t<n.length;t++)Vn(n[t],"bubbled",e)}}function zn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=jn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){e&&e.dispatchConfig.registrationName&&zn(e._targetInst,null,e)}function qn(e){st(e,Un)}var Kn=null,Gn=null,Hn=null;function Wn(){if(Hn)return Hn;var e,t,n=Gn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Hn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function Xn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function Jn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function $n(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Jn,e.release=$n}i(Xn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),Xn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Xn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var s=new t;return i(s,n.prototype),n.prototype=s,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Xn);var er=Xn.extend({data:null}),tr=Xn.extend({data:null}),nr=[9,13,27,32],rr=k&&"CompositionEvent"in window,ir=null;k&&"documentMode"in document&&(ir=document.documentMode);var sr=k&&"TextEvent"in window&&!ir,or=k&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function cr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:lr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var s=lr.compositionStart;break e;case"compositionend":s=lr.compositionEnd;break e;case"compositionupdate":s=lr.compositionUpdate;break e}s=void 0}else dr?cr(e,n)&&(s=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(s=lr.compositionStart);return s?(or&&"ko"!==n.locale&&(dr||s!==lr.compositionStart?s===lr.compositionEnd&&dr&&(i=Wn()):(Gn="value"in(Kn=r)?Kn.value:Kn.textContent,dr=!0)),s=er.getPooled(s,t,n,r),i?s.data=i:null!==(i=hr(n))&&(s.data=i),qn(s),i=s):i=null,(e=sr?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&cr(e,t)?(e=Wn(),Hn=Gn=Kn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return or&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yr(e,t,n){return(e=Xn.getPooled(gr.change,e,t,n)).type="change",N(n),qn(e),e}var vr=null,wr=null;function br(e){lt(e)}function _r(e){if(_e(Ln(e)))return e}function Er(e,t){if("change"===e)return t}var Tr=!1;function Sr(){vr&&(vr.detachEvent("onpropertychange",Ir),wr=vr=null)}function Ir(e){if("value"===e.propertyName&&_r(wr))if(e=yr(wr,e,ut(e)),j)lt(e);else{j=!0;try{R(br,e)}finally{j=!1,U()}}}function xr(e,t,n){"focus"===e?(Sr(),wr=n,(vr=t).attachEvent("onpropertychange",Ir)):"blur"===e&&Sr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(wr)}function Cr(e,t){if("click"===e)return _r(t)}function Dr(e,t){if("input"===e||"change"===e)return _r(t)}k&&(Tr=ct("input")&&(!document.documentMode||9<document.documentMode));var Pr={eventTypes:gr,_isInputEventSupported:Tr,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type)var o=Er;else if(mr(i))if(Tr)o=Dr;else{o=kr;var a=xr}else(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Cr);if(o&&(o=o(e,t)))return yr(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Ar=Xn.extend({view:null,detail:null}),Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function Rr(){return Or}var Lr=0,Mr=0,Fr=!1,jr=!1,Vr=Ar.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,jr?"mousemove"===e.type?e.screenY-t:0:(jr=!0,0)}}),Ur=Vr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Br={eventTypes:zr,extractEvents:function(e,t,n,r,i){var s="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(s&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!s)return null;(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?On(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var a=Vr,l=zr.mouseLeave,u=zr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Ur,l=zr.pointerLeave,u=zr.pointerEnter,c="pointer");if(e=null==o?s:Ln(o),s=null==t?s:Ln(t),(l=a.getPooled(l,o,n,r)).type=c+"leave",l.target=e,l.relatedTarget=s,(n=a.getPooled(u,t,n,r)).type=c+"enter",n.target=s,n.relatedTarget=e,c=t,(r=o)&&c)e:{for(u=c,o=0,e=a=r;e;e=Fn(e))o++;for(e=0,t=u;t;t=Fn(t))e++;for(;0<o-e;)a=Fn(a),o--;for(;0<e-o;)u=Fn(u),e--;for(;o--;){if(a===u||a===u.alternate)break e;a=Fn(a),u=Fn(u)}a=null}else a=null;for(u=a,a=[];r&&r!==u&&(null===(o=r.alternate)||o!==u);)a.push(r),r=Fn(r);for(r=[];c&&c!==u&&(null===(o=c.alternate)||o!==u);)r.push(c),c=Fn(c);for(c=0;c<a.length;c++)zn(a[c],"bubbled",l);for(c=r.length;0<c--;)zn(r[c],"captured",n);return 0===(64&i)?[l]:[l,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Kr=Object.prototype.hasOwnProperty;function Gr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Kr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Hr=k&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,Xr=null,Jr=!1;function $r(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Jr||null==Qr||Qr!==hn(n)?null:("selectionStart"in(n=Qr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Xr&&Gr(Xr,n)?null:(Xr=n,(e=Xn.getPooled(Wr.select,Yr,e,t)).type="select",e.target=Qr,qn(e),e))}var Zr={eventTypes:Wr,extractEvents:function(e,t,n,r,i,s){if(!(s=!(i=s||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),s=I.onSelect;for(var o=0;o<s.length;o++)if(!i.has(s[o])){i=!1;break e}i=!0}s=!i}if(s)return null;switch(i=t?Ln(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,Xr=null);break;case"blur":Xr=Yr=Qr=null;break;case"mousedown":Jr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jr=!1,$r(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return $r(n,r)}return null}},ei=Xn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Xn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Ar.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi=Ar.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?si[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Vr.extend({dataTransfer:null}),li=Ar.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rr}),ui=Xn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=Vr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:jt,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=oi;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=li;break;case We:case Qe:case Ye:e=ei;break;case Xe:e=ui;break;case"scroll":e=Ar;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ur;break;default:e=Xn}return qn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(o(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,m=Rn,g=Ln,x({SimpleEventPlugin:hi,EnterLeaveEventPlugin:Br,ChangeEventPlugin:Pr,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},yi={current:gi},vi={current:!1},wi=gi;function bi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ei(){pi(vi),pi(yi)}function Ti(e,t,n){if(yi.current!==gi)throw Error(o(168));mi(yi,t),mi(vi,n)}function Si(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,ge(t)||"Unknown",s));return i({},n,{},r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,wi=yi.current,mi(yi,e),mi(vi,vi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Si(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,pi(vi),pi(yi),mi(yi,e)):pi(vi),mi(vi,n)}var ki=s.unstable_runWithPriority,Ci=s.unstable_scheduleCallback,Di=s.unstable_cancelCallback,Pi=s.unstable_requestPaint,Ai=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Oi=s.unstable_ImmediatePriority,Ri=s.unstable_UserBlockingPriority,Li=s.unstable_NormalPriority,Mi=s.unstable_LowPriority,Fi=s.unstable_IdlePriority,ji={},Vi=s.unstable_shouldYield,Ui=void 0!==Pi?Pi:function(){},zi=null,Bi=null,qi=!1,Ki=Ai(),Gi=1e4>Ki?Ai:function(){return Ai()-Ki};function Hi(){switch(Ni()){case Oi:return 99;case Ri:return 98;case Li:return 97;case Mi:return 96;case Fi:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Oi;case 98:return Ri;case 97:return Li;case 96:return Mi;case 95:return Fi;default:throw Error(o(332))}}function Qi(e,t){return e=Wi(e),ki(e,t)}function Yi(e,t,n){return e=Wi(e),Ci(e,t,n)}function Xi(e){return null===zi?(zi=[e],Bi=Ci(Oi,$i)):zi.push(e),ji}function Ji(){if(null!==Bi){var e=Bi;Bi=null,Di(e)}$i()}function $i(){if(!qi&&null!==zi){qi=!0;var e=0;try{var t=zi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zi=null}catch(n){throw null!==zi&&(zi=zi.slice(e+1)),Ci(Oi,Ji),n}finally{qi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function es(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ts={current:null},ns=null,rs=null,is=null;function ss(){is=rs=ns=null}function os(e){var t=ts.current;pi(ts),e.type._context._currentValue=t}function as(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ls(e,t){ns=e,is=rs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Mo=!0),e.firstContext=null)}function us(e,t){if(is!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(is=e,t=1073741823),t={context:e,observedBits:t,next:null},null===rs){if(null===ns)throw Error(o(308));rs=t,ns.dependencies={expirationTime:0,firstContext:t,responders:null}}else rs=rs.next=t;return e._currentValue}var cs=!1;function hs(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fs(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ps(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ms(e,t){var n=e.alternate;null!==n&&ds(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function gs(e,t,n,r){var s=e.updateQueue;cs=!1;var o=s.baseQueue,a=s.shared.pending;if(null!==a){if(null!==o){var l=o.next;o.next=a.next,a.next=l}o=a,s.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==o){l=o.next;var u=s.baseState,c=0,h=null,d=null,f=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=u):f=f.next=m,a>c&&(c=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),El(a,p.suspenseConfig);e:{var g=e,y=p;switch(a=t,m=n,y.tag){case 1:if("function"===typeof(g=y.payload)){u=g.call(m,u,a);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=y.payload)?g.call(m,u,a):g)||void 0===a)break e;u=i({},u,a);break e;case 2:cs=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=s.effects)?s.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=s.shared.pending))break;p=o.next=a.next,a.next=l,s.baseQueue=o=a,s.shared.pending=null}}null===f?h=u:f.next=d,s.baseState=h,s.baseQueue=f,Tl(c),e.expirationTime=c,e.memoizedState=u}}function ys(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var vs=X.ReactCurrentBatchConfig,ws=(new r.Component).refs;function bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var _s={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=vs.suspense;(i=fs(r=cl(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),ps(e,i),hl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=vs.suspense;(i=fs(r=cl(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ps(e,i),hl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ul(),r=vs.suspense;(r=fs(n=cl(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),ps(e,r),hl(e,n)}};function Es(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Gr(n,r)||!Gr(i,s))}function Ts(e,t,n){var r=!1,i=gi,s=t.contextType;return"object"===typeof s&&null!==s?s=us(s):(i=_i(t)?wi:yi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):gi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_s,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_s.enqueueReplaceState(t,t.state,null)}function Is(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ws,hs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=us(s):(s=_i(t)?wi:yi.current,i.context=bi(e,s)),gs(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_s.enqueueReplaceState(i,i.state,null),gs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var xs=Array.isArray;function ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ws&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Cs(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ds(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ks(e,t,n),r.return=e,r):((r=Kl(n.type,n.key,n.props,null,e.mode,r)).ref=ks(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Gl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Kl(t.type,t.key,t.props,null,e.mode,n)).ref=ks(e,null,t),n.return=e,n;case te:return(t=Wl(t,e.mode,n)).return=e,t}if(xs(t)||me(t))return(t=Gl(t,e.mode,n,null)).return=e,t;Cs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(xs(n)||me(n))return null!==i?null:h(e,t,n,r,null);Cs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xs(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Cs(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=me(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,s,l){var u="object"===typeof s&&null!==s&&s.type===ne&&null===s.key;u&&(s=s.props.children);var c="object"===typeof s&&null!==s;if(c)switch(s.$$typeof){case ee:e:{for(c=s.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(s.type===ne){n(e,u.sibling),(r=i(u,s.props.children)).return=e,e=r;break e}}else if(u.elementType===s.type){n(e,u.sibling),(r=i(u,s.props)).ref=ks(e,u,s),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===ne?((r=Gl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=Kl(s.type,s.key,s.props,null,e.mode,l)).ref=ks(e,r,s),l.return=e,e=l)}return a(e);case te:e:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Wl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Hl(s,e.mode,l)).return=e,e=r),a(e);if(xs(s))return m(e,r,s,l);if(me(s))return g(e,r,s,l);if(c&&Cs(e,s),"undefined"===typeof s&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ps=Ds(!0),As=Ds(!1),Ns={},Os={current:Ns},Rs={current:Ns},Ls={current:Ns};function Ms(e){if(e===Ns)throw Error(o(174));return e}function Fs(e,t){switch(mi(Ls,t),mi(Rs,e),mi(Os,Ns),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Os),mi(Os,t)}function js(){pi(Os),pi(Rs),pi(Ls)}function Vs(e){Ms(Ls.current);var t=Ms(Os.current),n=Fe(t,e.type);t!==n&&(mi(Rs,e),mi(Os,n))}function Us(e){Rs.current===e&&(pi(Os),pi(Rs))}var zs={current:0};function Bs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===wn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qs(e,t){return{responder:e,props:t}}var Ks=X.ReactCurrentDispatcher,Gs=X.ReactCurrentBatchConfig,Hs=0,Ws=null,Qs=null,Ys=null,Xs=!1;function Js(){throw Error(o(321))}function $s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function Zs(e,t,n,r,i,s){if(Hs=s,Ws=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ks.current=null===e||null===e.memoizedState?To:So,e=n(r,i),t.expirationTime===Hs){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(o(301));s+=1,Ys=Qs=null,t.updateQueue=null,Ks.current=Io,e=n(r,i)}while(t.expirationTime===Hs)}if(Ks.current=Eo,t=null!==Qs&&null!==Qs.next,Hs=0,Ys=Qs=Ws=null,Xs=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ys?Ws.memoizedState=Ys=e:Ys=Ys.next=e,Ys}function to(){if(null===Qs){var e=Ws.alternate;e=null!==e?e.memoizedState:null}else e=Qs.next;var t=null===Ys?Ws.memoizedState:Ys.next;if(null!==t)Ys=t,Qs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qs=e).memoizedState,baseState:Qs.baseState,baseQueue:Qs.baseQueue,queue:Qs.queue,next:null},null===Ys?Ws.memoizedState=Ys=e:Ys=Ys.next=e}return Ys}function no(e,t){return"function"===typeof t?t(e):t}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,u=i;do{var c=u.expirationTime;if(c<Hs){var h={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,c>Ws.expirationTime&&(Ws.expirationTime=c,Tl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),El(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?s=r:l.next=a,qr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);qr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function so(e){var t=eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=_o.bind(null,Ws,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ws.updateQueue)?(t={lastEffect:null},Ws.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return to().memoizedState}function lo(e,t,n,r){var i=eo();Ws.effectTag|=e,i.memoizedState=oo(1|t,n,void 0,void 0===r?null:r)}function uo(e,t,n,r){var i=to();r=void 0===r?null:r;var s=void 0;if(null!==Qs){var o=Qs.memoizedState;if(s=o.destroy,null!==r&&$s(r,o.deps))return void oo(t,n,s,r)}Ws.effectTag|=e,i.memoizedState=oo(1|t,n,s,r)}function co(e,t){return lo(516,4,e,t)}function ho(e,t){return uo(516,4,e,t)}function fo(e,t){return uo(4,2,e,t)}function po(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function mo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,uo(4,2,po.bind(null,t,e),n)}function go(){}function yo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function vo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$s(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bo(e,t,n){var r=Hi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Gs.suspense;Gs.suspense=void 0===t?null:t;try{e(!1),n()}finally{Gs.suspense=r}}))}function _o(e,t,n){var r=ul(),i=vs.suspense;i={expirationTime:r=cl(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Ws||null!==s&&s===Ws)Xs=!0,i.expirationTime=Hs,Ws.expirationTime=Hs;else{if(0===e.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.eagerReducer=s,i.eagerState=a,qr(a,o))return}catch(l){}hl(e,r)}}var Eo={readContext:us,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useResponder:Js,useDeferredValue:Js,useTransition:Js},To={readContext:us,useCallback:yo,useContext:us,useEffect:co,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,lo(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lo(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_o.bind(null,Ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:so,useDebugValue:go,useResponder:qs,useDeferredValue:function(e,t){var n=so(e),r=n[0],i=n[1];return co((function(){var n=Gs.suspense;Gs.suspense=void 0===t?null:t;try{i(e)}finally{Gs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=so(!1),n=t[0];return t=t[1],[yo(bo.bind(null,t,e),[t,e]),n]}},So={readContext:us,useCallback:vo,useContext:us,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:fo,useMemo:wo,useReducer:ro,useRef:ao,useState:function(){return ro(no)},useDebugValue:go,useResponder:qs,useDeferredValue:function(e,t){var n=ro(no),r=n[0],i=n[1];return ho((function(){var n=Gs.suspense;Gs.suspense=void 0===t?null:t;try{i(e)}finally{Gs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[vo(bo.bind(null,t,e),[t,e]),n]}},Io={readContext:us,useCallback:vo,useContext:us,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:fo,useMemo:wo,useReducer:io,useRef:ao,useState:function(){return io(no)},useDebugValue:go,useResponder:qs,useDeferredValue:function(e,t){var n=io(no),r=n[0],i=n[1];return ho((function(){var n=Gs.suspense;Gs.suspense=void 0===t?null:t;try{i(e)}finally{Gs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[vo(bo.bind(null,t,e),[t,e]),n]}},xo=null,ko=null,Co=!1;function Do(e,t){var n=zl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Po(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ao(e){if(Co){var t=ko;if(t){var n=t;if(!Po(e,t)){if(!(t=kn(n.nextSibling))||!Po(e,t))return e.effectTag=-1025&e.effectTag|2,Co=!1,void(xo=e);Do(xo,n)}xo=e,ko=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Co=!1,xo=e}}function No(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xo=e}function Oo(e){if(e!==xo)return!1;if(!Co)return No(e),Co=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Sn(t,e.memoizedProps))for(t=ko;t;)Do(e,t),t=kn(t.nextSibling);if(No(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn){if(0===t){ko=kn(e.nextSibling);break e}t--}else n!==yn&&n!==bn&&n!==wn||t++}e=e.nextSibling}ko=null}}else ko=xo?kn(e.stateNode.nextSibling):null;return!0}function Ro(){ko=xo=null,Co=!1}var Lo=X.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?As(t,null,n,r):Ps(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return ls(t,i),r=Zs(e,t,n,r,s,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Bl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kl(n.type,null,r,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,s))}return o=e.child,i<s&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Gr)(i,r)&&e.ref===t.ref)?ta(e,t,s):(t.effectTag|=1,(e=ql(o,r)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,r,i,s){return null!==e&&Gr(e.memoizedProps,r)&&e.ref===t.ref&&(Mo=!1,i<s)?(t.expirationTime=e.expirationTime,ta(e,t,s)):Bo(e,t,n,r,s)}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Bo(e,t,n,r,i){var s=_i(n)?wi:yi.current;return s=bi(t,s),ls(t,i),n=Zs(e,t,n,r,s,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function qo(e,t,n,r,i){if(_i(n)){var s=!0;Ii(t)}else s=!1;if(ls(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ts(t,n,r),Is(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=us(u):u=bi(t,u=_i(n)?wi:yi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Ss(t,o,r,u),cs=!1;var d=t.memoizedState;o.state=d,gs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||vi.current||cs?("function"===typeof c&&(bs(t,n,c,r),l=t.memoizedState),(a=cs||Es(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ds(e,t),a=t.memoizedProps,o.props=t.type===t.elementType?a:es(t.type,a),l=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=us(u):u=bi(t,u=_i(n)?wi:yi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Ss(t,o,r,u),cs=!1,l=t.memoizedState,o.state=l,gs(t,r,o,i),d=t.memoizedState,a!==r||l!==d||vi.current||cs?("function"===typeof c&&(bs(t,n,c,r),d=t.memoizedState),(c=cs||Es(t,n,a,r,l,d,u))?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ko(e,t,n,r,s,i)}function Ko(e,t,n,r,i,s){zo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&xi(t,n,!1),ta(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ps(t,e.child,null,s),t.child=Ps(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Fs(e,t.containerInfo)}var Ho,Wo,Qo,Yo,Xo={dehydrated:null,retryTime:0};function Jo(e,t,n){var r,i=t.mode,s=t.pendingProps,o=zs.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(o|=1),mi(zs,1&o),null===e){if(void 0!==s.fallback&&Ao(t),a){if(a=s.fallback,(s=Gl(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Gl(a,i,n,null)).return=t,s.sibling=n,t.memoizedState=Xo,t.child=s,n}return i=s.children,t.memoizedState=null,t.child=As(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(s=s.fallback,(n=ql(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=ql(i,s)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Xo,t.child=n,i}return n=Ps(t,e.child,s.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=s.fallback,(s=Gl(null,i,0,null)).return=t,s.child=e,null!==e&&(e.return=s),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Gl(a,i,n,null)).return=t,s.sibling=n,n.effectTag|=2,s.childExpirationTime=0,t.memoizedState=Xo,t.child=s,n}return t.memoizedState=null,t.child=Ps(t,e,s.children,n)}function $o(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),as(e.return,t)}function Zo(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=s)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=zs.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n);else if(19===e.tag)$o(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(zs,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Bs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zo(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zo(t,!0,n,null,s,t.lastEffect);break;case"together":Zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Tl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&Ei(),null;case 3:return js(),pi(vi),pi(yi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Oo(t)||(t.effectTag|=4),Wo(t),null;case 5:Us(t),n=Ms(Ls.current);var s=t.type;if(null!==e&&null!=t.stateNode)Qo(e,t,s,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ms(Os.current),Oo(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[Pn]=t,r[An]=a,s){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Je.length;e++)Qt(Je[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Te(r,a),Qt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),un(n,"onChange");break;case"textarea":Ae(r,a),Qt("invalid",r),un(n,"onChange")}for(var l in on(s,a),e=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):S.hasOwnProperty(l)&&null!=u&&un(n,l)}switch(s){case"input":be(r),xe(r,a,!0);break;case"textarea":be(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Me(s)),e===ln?"script"===s?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(s,{is:r.is}):(e=l.createElement(s),"select"===s&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,s),e[Pn]=t,e[An]=r,Ho(e,t,!1,!1),t.stateNode=e,l=an(s,r),s){case"iframe":case"object":case"embed":Qt("load",e),u=r;break;case"video":case"audio":for(u=0;u<Je.length;u++)Qt(Je[u],e);u=r;break;case"source":Qt("error",e),u=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),u=r;break;case"form":Qt("reset",e),Qt("submit",e),u=r;break;case"details":Qt("toggle",e),u=r;break;case"input":Te(e,r),u=Ee(e,r),Qt("invalid",e),un(n,"onChange");break;case"option":u=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Qt("invalid",e),un(n,"onChange");break;case"textarea":Ae(e,r),u=Pe(e,r),Qt("invalid",e),un(n,"onChange");break;default:u=r}on(s,u);var c=u;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Ue(e,h):"children"===a?"string"===typeof h?("textarea"!==s||""!==h)&&ze(e,h):"number"===typeof h&&ze(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&J(e,a,h,l))}switch(s){case"input":be(e),xe(e,r,!1);break;case"textarea":be(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?De(e,!!r.multiple,n,!1):null!=r.defaultValue&&De(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=cn)}Tn(s,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ms(Ls.current),Ms(Os.current),Oo(t)?(n=t.stateNode,r=t.memoizedProps,n[Pn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Pn]=t,t.stateNode=n)}return null;case 13:return pi(zs),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Oo(t):(r=null!==(s=e.memoizedState),n||null===s||null!==(s=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=s,s.nextEffect=a):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zs.current)?qa===Oa&&(qa=Ma):(qa!==Oa&&qa!==Ma||(qa=Fa),0!==Qa&&null!==Ua&&(Xl(Ua,Ba),Jl(Ua,Qa)))),(n||r)&&(t.effectTag|=4),null);case 4:return js(),Wo(t),null;case 10:return os(t),null;case 19:if(pi(zs),null===(r=t.memoizedState))return null;if(s=0!==(64&t.effectTag),null===(a=r.rendering)){if(s)na(r,!1);else if(qa!==Oa||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Bs(a))){for(t.effectTag|=64,na(r,!1),null!==(s=e.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(s=r).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(e=s.alternate)?(s.childExpirationTime=0,s.expirationTime=a,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=e.childExpirationTime,s.expirationTime=e.expirationTime,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi(zs,1&zs.current|2),t.child}a=a.sibling}}else{if(!s)if(null!==(e=Bs(a))){if(t.effectTag|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,s=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Gi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,t=zs.current,mi(zs,s?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function ia(e){switch(e.tag){case 1:_i(e.type)&&Ei();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(js(),pi(vi),pi(yi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Us(e),null;case 13:return pi(zs),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(zs),null;case 4:return js(),null;case 10:return os(e),null;default:return null}}function sa(e,t){return{value:e,source:t,stack:ye(t)}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wo=function(){},Qo=function(e,t,n,r,s){var o=e.memoizedProps;if(o!==r){var a,l,u=t.stateNode;switch(Ms(Os.current),e=null,n){case"input":o=Ee(u,o),r=Ee(u,r),e=[];break;case"option":o=Ce(u,o),r=Ce(u,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Pe(u,o),r=Pe(u,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(u.onclick=cn)}for(a in on(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(l in u=o[a])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,c)):"children"===a?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(S.hasOwnProperty(a)?(null!=c&&un(s,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),s=e,(t.updateQueue=s)&&(t.effectTag|=4)}},Yo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var oa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function la(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ll(e,n)}else t.current=null}function ua(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:es(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:es(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ys(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ys(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Tn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function fa(e,t,n){switch("function"===typeof Vl&&Vl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(s){Ll(i,s)}}e=e.next}while(e!==r)}))}break;case 1:la(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ll(e,n)}}(t,n);break;case 5:la(t);break;case 4:wa(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?ya(e,n,t):va(e,n,t)}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function wa(e,t,n){for(var r,i,s=t,a=!1;;){if(!a){a=s.return;e:for(;;){if(null===a)throw Error(o(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===s.tag||6===s.tag){e:for(var l=e,u=s,c=n,h=u;;)if(fa(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,u=s.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(fa(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(a=!1)}s.sibling.return=s.return,s=s.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ca(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[An]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Se(n,r),an(e,i),t=an(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?rn(n,l):"dangerouslySetInnerHTML"===a?Ue(n,l):"children"===a?ze(n,l):J(n,a,l,t)}switch(e){case"input":Ie(n,r);break;case"textarea":Ne(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?De(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?De(n,!!r.multiple,r.defaultValue,!0):De(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Xa=Gi()),null!==n)e:for(e=n;;){if(5===e.tag)s=e.stateNode,r?"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,s.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(s=e.child.sibling).return=e,e=s;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _a(t);case 19:return void _a(t)}throw Error(o(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new oa),t.forEach((function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ea="function"===typeof WeakMap?WeakMap:Map;function Ta(e,t,n){(n=fs(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,el=r),aa(e,t)},n}function Sa(e,t,n){(n=fs(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tl?tl=new Set([this]):tl.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ia,xa=Math.ceil,ka=X.ReactCurrentDispatcher,Ca=X.ReactCurrentOwner,Da=0,Pa=8,Aa=16,Na=32,Oa=0,Ra=1,La=2,Ma=3,Fa=4,ja=5,Va=Da,Ua=null,za=null,Ba=0,qa=Oa,Ka=null,Ga=1073741823,Ha=1073741823,Wa=null,Qa=0,Ya=!1,Xa=0,Ja=500,$a=null,Za=!1,el=null,tl=null,nl=!1,rl=null,il=90,sl=null,ol=0,al=null,ll=0;function ul(){return(Va&(Aa|Na))!==Da?1073741821-(Gi()/10|0):0!==ll?ll:ll=1073741821-(Gi()/10|0)}function cl(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Va&Aa)!==Da)return Ba;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Ua&&e===Ba&&--e,e}function hl(e,t){if(50<ol)throw ol=0,al=null,Error(o(185));if(null!==(e=dl(e,t))){var n=Hi();1073741823===t?(Va&Pa)!==Da&&(Va&(Aa|Na))===Da?gl(e):(pl(e),Va===Da&&Ji()):pl(e),(4&Va)===Da||98!==n&&99!==n||(null===sl?sl=new Map([[e,t]]):(void 0===(n=sl.get(e))||n>t)&&sl.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ua===i&&(Tl(t),qa===Fa&&Xl(i,Ba)),Jl(i,t)),i}function fl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(gl.bind(null,e));else{var t=fl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ul();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==ji&&Di(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(gl.bind(null,e)):Yi(r,ml.bind(null,e),{timeout:10*(1073741821-t)-Gi()}),e.callbackNode=t}}}function ml(e,t){if(ll=0,t)return $l(e,t=ul()),pl(e),null;var n=fl(e);if(0!==n){if(t=e.callbackNode,(Va&(Aa|Na))!==Da)throw Error(o(327));if(Nl(),e===Ua&&n===Ba||wl(e,n),null!==za){var r=Va;Va|=Aa;for(var i=_l();;)try{Il();break}catch(l){bl(e,l)}if(ss(),Va=r,ka.current=i,qa===Ra)throw t=Ka,wl(e,n),Xl(e,n),pl(e),t;if(null===za)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qa,Ua=null,r){case Oa:case Ra:throw Error(o(345));case La:$l(e,2<n?2:n);break;case Ma:if(Xl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),1073741823===Ga&&10<(i=Xa+Ja-Gi())){if(Ya){var s=e.lastPingedTime;if(0===s||s>=n){e.lastPingedTime=n,wl(e,n);break}}if(0!==(s=fl(e))&&s!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=In(Dl.bind(null,e),i);break}Dl(e);break;case Fa:if(Xl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),Ya&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,wl(e,n);break}if(0!==(i=fl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ha?r=10*(1073741821-Ha)-Gi():1073741823===Ga?r=0:(r=10*(1073741821-Ga)-5e3,0>(r=(i=Gi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xa(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=In(Dl.bind(null,e),r);break}Dl(e);break;case ja:if(1073741823!==Ga&&null!==Wa){s=Ga;var a=Wa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(s=Gi()-(10*(1073741821-s)-(0|a.timeoutMs||5e3)))<=i?0:i+r-s),10<r){Xl(e,n),e.timeoutHandle=In(Dl.bind(null,e),r);break}}Dl(e);break;default:throw Error(o(329))}if(pl(e),e.callbackNode===t)return ml.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Va&(Aa|Na))!==Da)throw Error(o(327));if(Nl(),e===Ua&&t===Ba||wl(e,t),null!==za){var n=Va;Va|=Aa;for(var r=_l();;)try{Sl();break}catch(i){bl(e,i)}if(ss(),Va=n,ka.current=r,qa===Ra)throw n=Ka,wl(e,t),Xl(e,t),pl(e),n;if(null!==za)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ua=null,Dl(e),pl(e)}return null}function yl(e,t){var n=Va;Va|=1;try{return e(t)}finally{(Va=n)===Da&&Ji()}}function vl(e,t){var n=Va;Va&=-2,Va|=Pa;try{return e(t)}finally{(Va=n)===Da&&Ji()}}function wl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,xn(n)),null!==za)for(n=za.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ei();break;case 3:js(),pi(vi),pi(yi);break;case 5:Us(r);break;case 4:js();break;case 13:case 19:pi(zs);break;case 10:os(r)}n=n.return}Ua=e,za=ql(e.current,null),Ba=t,qa=Oa,Ka=null,Ha=Ga=1073741823,Wa=null,Qa=0,Ya=!1}function bl(e,t){for(;;){try{if(ss(),Ks.current=Eo,Xs)for(var n=Ws.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Hs=0,Ys=Qs=Ws=null,Xs=!1,null===za||null===za.return)return qa=Ra,Ka=t,za=null;e:{var i=e,s=za.return,o=za,a=t;if(t=Ba,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&o.mode)){var u=o.alternate;u?(o.updateQueue=u.updateQueue,o.memoizedState=u.memoizedState,o.expirationTime=u.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var c=0!==(1&zs.current),h=s;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=fs(1073741823,null);y.tag=2,ps(o,y)}o.expirationTime=1073741823;break e}a=void 0,o=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new Ea,a=new Set,v.set(l,a)):void 0===(a=v.get(l))&&(a=new Set,v.set(l,a)),!a.has(o)){a.add(o);var w=Ml.bind(null,i,l,o);l.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(o))}qa!==ja&&(qa=La),a=sa(a,o),h=s;do{switch(h.tag){case 3:l=a,h.effectTag|=4096,h.expirationTime=t,ms(h,Ta(h,l,t));break e;case 1:l=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===tl||!tl.has(_)))){h.effectTag|=4096,h.expirationTime=t,ms(h,Sa(h,l,t));break e}}h=h.return}while(null!==h)}za=kl(za)}catch(E){t=E;continue}break}}function _l(){var e=ka.current;return ka.current=Eo,null===e?Eo:e}function El(e,t){e<Ga&&2<e&&(Ga=e),null!==t&&e<Ha&&2<e&&(Ha=e,Wa=t)}function Tl(e){e>Qa&&(Qa=e)}function Sl(){for(;null!==za;)za=xl(za)}function Il(){for(;null!==za&&!Vi();)za=xl(za)}function xl(e){var t=Ia(e.alternate,e,Ba);return e.memoizedProps=e.pendingProps,null===t&&(t=kl(e)),Ca.current=null,t}function kl(e){za=e;do{var t=za.alternate;if(e=za.return,0===(2048&za.effectTag)){if(t=ra(t,za,Ba),1===Ba||1!==za.childExpirationTime){for(var n=0,r=za.child;null!==r;){var i=r.expirationTime,s=r.childExpirationTime;i>n&&(n=i),s>n&&(n=s),r=r.sibling}za.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=za.firstEffect),null!==za.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=za.firstEffect),e.lastEffect=za.lastEffect),1<za.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=za:e.firstEffect=za,e.lastEffect=za))}else{if(null!==(t=ia(za)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=za.sibling))return t;za=e}while(null!==za);return qa===Oa&&(qa=ja),null}function Cl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Dl(e){var t=Hi();return Qi(99,Pl.bind(null,e,t)),null}function Pl(e,t){do{Nl()}while(null!==rl);if((Va&(Aa|Na))!==Da)throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Cl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ua&&(za=Ua=null,Ba=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var s=Va;Va|=Na,Ca.current=null,_n=Wt;var a=mn();if(gn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(x){l=null;break e}var d=0,f=-1,p=-1,m=0,g=0,y=a,v=null;t:for(;;){for(var w;y!==l||0!==c&&3!==y.nodeType||(f=d+c),y!==h||0!==u&&3!==y.nodeType||(p=d+u),3===y.nodeType&&(d+=y.nodeValue.length),null!==(w=y.firstChild);)v=y,y=w;for(;;){if(y===a)break t;if(v===l&&++m===c&&(f=d),v===h&&++g===u&&(p=d),null!==(w=y.nextSibling))break;v=(y=v).parentNode}y=w}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;En={activeElementDetached:null,focusedElem:a,selectionRange:l},Wt=!1,$a=i;do{try{Al()}catch(x){if(null===$a)throw Error(o(330));Ll($a,x),$a=$a.nextEffect}}while(null!==$a);$a=i;do{try{for(a=e,l=t;null!==$a;){var b=$a.effectTag;if(16&b&&ze($a.stateNode,""),128&b){var _=$a.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&b){case 2:ga($a),$a.effectTag&=-3;break;case 6:ga($a),$a.effectTag&=-3,ba($a.alternate,$a);break;case 1024:$a.effectTag&=-1025;break;case 1028:$a.effectTag&=-1025,ba($a.alternate,$a);break;case 4:ba($a.alternate,$a);break;case 8:wa(a,c=$a,l),pa(c)}$a=$a.nextEffect}}catch(x){if(null===$a)throw Error(o(330));Ll($a,x),$a=$a.nextEffect}}while(null!==$a);if(E=En,_=mn(),b=E.focusedElem,l=E.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==l&&gn(b)&&(_=l.start,void 0===(E=l.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),c=b.textContent.length,a=Math.min(l.start,c),l=void 0===l.end?a:Math.min(l.end,c),!E.extend&&a>l&&(c=l,l=a,a=c),c=fn(b,a),h=fn(b,l),c&&h&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),a>l?(E.addRange(_),E.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Wt=!!_n,En=_n=null,e.current=n,$a=i;do{try{for(b=e;null!==$a;){var T=$a.effectTag;if(36&T&&da(b,$a.alternate,$a),128&T){_=void 0;var S=$a.ref;if(null!==S){var I=$a.stateNode;$a.tag,_=I,"function"===typeof S?S(_):S.current=_}}$a=$a.nextEffect}}catch(x){if(null===$a)throw Error(o(330));Ll($a,x),$a=$a.nextEffect}}while(null!==$a);$a=null,Ui(),Va=s}else e.current=n;if(nl)nl=!1,rl=e,il=t;else for($a=i;null!==$a;)t=$a.nextEffect,$a.nextEffect=null,$a=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===al?ol++:(ol=0,al=e):ol=0,"function"===typeof jl&&jl(n.stateNode,r),pl(e),Za)throw Za=!1,e=el,el=null,e;return(Va&Pa)!==Da||Ji(),null}function Al(){for(;null!==$a;){var e=$a.effectTag;0!==(256&e)&&ua($a.alternate,$a),0===(512&e)||nl||(nl=!0,Yi(97,(function(){return Nl(),null}))),$a=$a.nextEffect}}function Nl(){if(90!==il){var e=97<il?97:il;return il=90,Qi(e,Ol)}}function Ol(){if(null===rl)return!1;var e=rl;if(rl=null,(Va&(Aa|Na))!==Da)throw Error(o(331));var t=Va;for(Va|=Na,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ca(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(o(330));Ll(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Va=t,Ji(),!0}function Rl(e,t,n){ps(e,t=Ta(e,t=sa(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Ll(e,t){if(3===e.tag)Rl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tl||!tl.has(r))){ps(n,e=Sa(n,e=sa(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ua===e&&Ba===n?qa===Fa||qa===Ma&&1073741823===Ga&&Gi()-Xa<Ja?wl(e,Ba):Ya=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function Fl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cl(t=ul(),e,null)),null!==(e=dl(e,t))&&pl(e)}Ia=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||vi.current)Mo=!0;else{if(r<n){switch(Mo=!1,t.tag){case 3:Go(t),Ro();break;case 5:if(Vs(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&Ii(t);break;case 4:Fs(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(ts,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Jo(e,t,n):(mi(zs,1&zs.current),null!==(t=ta(e,t,n))?t.sibling:null);mi(zs,1&zs.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(zs,zs.current),!r)return null}return ta(e,t,n)}Mo=!1}}else Mo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),ls(t,n),i=Zs(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var s=!0;Ii(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hs(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&bs(t,r,a,e),i.updater=_s,t.stateNode=i,i._reactInternalFiber=t,Is(t,r,e,n),t=Ko(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,s=t.tag=function(e){if("function"===typeof e)return Bl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=es(i,e),s){case 0:t=Bo(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,es(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ds(e,t),gs(t,r,null,n),(r=t.memoizedState.element)===i)Ro(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(ko=kn(t.stateNode.containerInfo.firstChild),xo=t,i=Co=!0),i)for(n=As(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fo(e,t,r,n),Ro();t=t.child}return t;case 5:return Vs(t),null===e&&Ao(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,Sn(r,i)?a=null:null!==s&&Sn(r,s)&&(t.effectTag|=16),zo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fo(e,t,a,n),t=t.child),t;case 6:return null===e&&Ao(t),null;case 13:return Jo(e,t,n);case 4:return Fs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ps(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(mi(ts,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0===(s=qr(l,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!vi.current){t=ta(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&s)){1===l.tag&&((c=fs(n,null)).tag=2,ps(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),as(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,ls(t,n),r=r(i=us(i,s.unstable_observedBits)),t.effectTag|=1,Fo(e,t,r,n),t.child;case 14:return s=es(i=t.type,t.pendingProps),Vo(e,t,i,s=es(i.type,s),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,Ii(t)):e=!1,ls(t,n),Ts(t,r,i),Is(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(o(156,t.tag))};var jl=null,Vl=null;function Ul(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zl(e,t,n,r){return new Ul(e,t,n,r)}function Bl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kl(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Bl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Gl(n.children,i,s,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=zl(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=s,e;case ue:return(e=zl(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=s,e;case ce:return(e=zl(19,n,t,i)).elementType=ce,e.expirationTime=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case se:a=10;break e;case oe:a=9;break e;case le:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=zl(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=s,t}function Gl(e,t,n,r){return(e=zl(7,e,r,t)).expirationTime=n,e}function Hl(e,t,n){return(e=zl(6,e,null,t)).expirationTime=n,e}function Wl(e,t,n){return(t=zl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Xl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Jl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function $l(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zl(e,t,n,r){var i=t.current,s=ul(),a=vs.suspense;s=cl(s,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=Si(n,u,l);break e}}n=l}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ps(i,t),hl(i,s),s}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function ru(e,t,n){var r=new Ql(e,t,n=null!=n&&!0===n.hydrate),i=zl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,hs(i),e[Nn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);kt.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=eu(o);a.call(e)}}Zl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var l=i;i=function(){var e=eu(o);l.call(e)}}vl((function(){Zl(t,o,e,i)}))}return eu(o)}function ou(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ru.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Nn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(ul(),150,100);hl(e,t),nu(e,t)}},yt=function(e){13===e.tag&&(hl(e,3),nu(e,3))},vt=function(e){if(13===e.tag){var t=ul();hl(e,t=cl(t,e,null)),nu(e,t)}},C=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(o(90));_e(r),Ie(r,i)}}}break;case"textarea":Ne(e,n);break;case"select":null!=(t=n.value)&&De(e,!!n.multiple,t,!1)}},R=yl,L=function(e,t,n,r,i){var s=Va;Va|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(Va=s)===Da&&Ji()}},M=function(){(Va&(1|Aa|Na))===Da&&(function(){if(null!==sl){var e=sl;sl=null,e.forEach((function(e,t){$l(t,e),pl(t)})),Ji()}}(),Nl())},F=function(e,t){var n=Va;Va|=2;try{return e(t)}finally{(Va=n)===Da&&Ji()}};var au={Events:[Rn,Ln,Mn,x,T,qn,function(e){st(e,Bn)},N,O,$t,lt,Nl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);jl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Vl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:On,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=ou,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Va&(Aa|Na))!==Da)throw Error(o(187));var n=Va;Va|=1;try{return Qi(99,e.bind(null,t))}finally{Va=n,Ji()}},t.hydrate=function(e,t,n){if(!iu(t))throw Error(o(200));return su(null,e,t,!0,n)},t.render=function(e,t,n){if(!iu(t))throw Error(o(200));return su(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(o(40));return!!e._reactRootContainer&&(vl((function(){su(null,null,e,!1,(function(){e._reactRootContainer=null,e[Nn]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return ou(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return su(e,t,n,!1,r)},t.version="16.14.0"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.jsx=u,t.jsxs=u},202:(e,t,n)=>{"use strict";var r=n(123),i="function"===typeof Symbol&&Symbol.for,s=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var T=E.prototype=new _;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var S={current:null},I=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,r)&&!x.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:s,type:e,key:o,ref:a,props:i,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var D=/\/+/g,P=[];function A(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case s:case o:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+L(i=e[l],l);a+=O(i,u,n,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)a+=O(i=i.value,u=t+L(i,l++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function R(e,t,n){return null==e?0:O(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?j(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+n)),r.push(e))}function j(e,t,n,r,i){var s="";null!=n&&(s=(""+n).replace(D,"$&/")+"/"),R(e,F,t=A(t,s,r,i)),N(t)}var V={current:null};function U(){var e=V.current;if(null===e)throw Error(y(321));return e}var z={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return j(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,M,t=A(null,null,t,n)),N(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return j(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(y(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=u,t.PureComponent=E,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)I.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:s,type:e.type,key:o,ref:a,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";var n,r,i,s,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,l=null,u=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(u,0),n}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},s=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var y=!1,v=null,w=-1,b=5,_=0;s=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();_=e+b;try{v(!0,e)?T.postMessage(null):(y=!1,v=null)}catch(n){throw T.postMessage(null),n}}else y=!1},n=function(e){v=e,y||(y=!0,T.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],D=[],P=1,A=null,N=3,O=!1,R=!1,L=!1;function M(e){for(var t=I(D);null!==t;){if(null===t.callback)x(D);else{if(!(t.startTime<=e))break;x(D),t.sortIndex=t.expirationTime,S(C,t)}t=I(D)}}function F(e){if(L=!1,M(e),!R)if(null!==I(C))R=!0,n(j);else{var t=I(D);null!==t&&r(F,t.startTime-e)}}function j(e,n){R=!1,L&&(L=!1,i()),O=!0;var o=N;try{for(M(n),A=I(C);null!==A&&(!(A.expirationTime>n)||e&&!s());){var a=A.callback;if(null!==a){A.callback=null,N=A.priorityLevel;var l=a(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?A.callback=l:A===I(C)&&x(C),M(n)}else x(C);A=I(C)}if(null!==A)var u=!0;else{var c=I(D);null!==c&&r(F,c.startTime-n),u=!1}return u}finally{A=null,N=o,O=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||O||(R=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return I(C)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();if("object"===typeof o&&null!==o){var l=o.delay;l="number"===typeof l&&0<l?a+l:a,o="number"===typeof o.timeout?o.timeout:V(e)}else o=V(e),l=a;return e={id:P++,callback:s,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>a?(e.sortIndex=l,S(D,e),null===I(C)&&e===I(D)&&(L?i():L=!0,r(F,l-a))):(e.sortIndex=o,S(C,e),R||O||(R=!0,n(j))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=I(C);return n!==A&&null!==A&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<A.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{comName:()=>ke,eventCodes:()=>Ce,productID:()=>xe,vendorID:()=>Ie});var t={};n.r(t),n.d(t,{FirebaseError:()=>qe,SDK_VERSION:()=>vn,_DEFAULT_ENTRY_NAME:()=>tn,_addComponent:()=>an,_addOrOverwriteComponent:()=>ln,_apps:()=>rn,_clearComponents:()=>pn,_components:()=>on,_getProvider:()=>cn,_isFirebaseApp:()=>dn,_isFirebaseServerApp:()=>fn,_registerComponent:()=>un,_removeServiceInstance:()=>hn,_serverApps:()=>sn,deleteApp:()=>Tn,getApp:()=>_n,getApps:()=>En,initializeApp:()=>wn,initializeServerApp:()=>bn,onLog:()=>In,registerVersion:()=>Sn,setLogLevel:()=>xn});var r=n(43),i=n(950);function s(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l=a((function(e){let{include:t,exclude:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e=>{const r=t=>"string"===typeof t?e===t:t.test(e);return t?t.some(r):!n||!n.some(r)};for(const[i,s]of(e=>{const t=new Set;do{for(const n of Reflect.ownKeys(e))t.add([e,n])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t})(e.constructor.prototype)){if("constructor"===s||!r(s))continue;const t=Reflect.getOwnPropertyDescriptor(i,s);t&&"function"===typeof t.value&&(e[s]=e[s].bind(e))}return e}));class u extends Error{constructor(){super("".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The global `jsPsych` variable is no longer available in jsPsych v7."," Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.")),this.name="MigrationError"}}function c(e){return[...new Set(e)]}function h(e){if(!e)return e;let t;if(Array.isArray(e)){t=[];for(const n of e)t.push(h(n));return t}if("object"===typeof e&&null!==e){t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=h(e[n]));return t}return e}window.jsPsych={get init(){throw new u("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new u},get randomization(){throw new u},get turk(){throw new u},get pluginAPI(){throw new u},get ALL_KEYS(){throw new u('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new u('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};var d,f=Object.freeze({__proto__:null,deepCopy:h,deepMerge:function e(t,n){let r={};for(const i in t)t.hasOwnProperty(i)&&("object"===typeof t[i]&&n.hasOwnProperty(i)?r[i]=e(t[i],n[i]):r[i]=t[i]);for(const i in n)n.hasOwnProperty(i)&&(r.hasOwnProperty(i)&&"object"===typeof n[i]?r[i]=e(r[i],n[i]):r[i]=n[i]);return r},unique:c});class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){return this.sum()/this.count()}median(){if(0===this.values.length)return;const e=this.values.slice(0).sort((function(e,t){return e-t})),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const n of this.values)t+=Math.pow(n-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)"undefined"===typeof e[t]?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const n of this.values)e(n)&&t.push(n);return new p(t)}}class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new m([this.trials[this.trials.length-1]])}first(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new m:(e>this.trials.length&&(e=this.trials.length),new m(this.trials.slice(0,e)))}last(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new m:(e>this.trials.length&&(e=this.trials.length),new m(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new m(h(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return 0!=this.trials.length&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;t=Array.isArray(e)?h(e):h([e]);const n=[];for(const r of this.trials){let e=!1;for(const n of t){let t=!0;for(const e of Object.keys(n))"undefined"!==typeof r[e]&&r[e]===n[e]||(t=!1);if(t){e=!0;break}}e&&n.push(r)}return new m(n)}filterCustom(e){return new m(this.trials.filter(e))}filterColumns(e){return new m(this.trials.map((t=>Object.fromEntries(e.filter((e=>e in t)).map((e=>[e,t[e]]))))))}select(e){const t=[];for(const n of this.trials)"undefined"!==typeof n[e]&&t.push(n[e]);return new p(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=h(this.trials);for(const n of t)for(const t of e)delete n[t];return new m(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const n of Object.keys(t))e.includes(n)||e.push(n);return e}csv(){return function(e){const t="object"!=typeof e?JSON.parse(e):e;let n="",r="";const i=[];for(const s of t)for(const e in s){let t=e+"";t='"'+t.replace(/"/g,'""')+'",',i.includes(e)||(i.push(e),n+=t)}n=n.slice(0,-1),r+=n+"\r\n";for(const s of t){n="";for(const e of i){let t="undefined"===typeof s[e]?"":s[e];"object"==typeof t&&(t=JSON.stringify(t)),n+='"'+(t+"").replace(/"/g,'""')+'",'}n=n.slice(0,-1),r+=n+"\r\n"}return r}(this.trials)}json(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?JSON.stringify(this.trials,null,"\t"):JSON.stringify(this.trials)}localSave(e,t){let n;if("json"===(e=e.toLowerCase()))n=this.json();else{if("csv"!==e)throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');n=this.csv()}!function(e,t){const n=new Blob([e],{type:"text/plain"});let r="";r="undefined"!==typeof window.webkitURL?window.webkitURL.createObjectURL(n):window.URL.createObjectURL(n);const i=document.createElement("a");i.id="jspsych-download-as-text-link",i.style.display="none",i.download=t,i.href=r,i.click()}(n,t)}}class g{constructor(e){this.jsPsych=e,this.dataProperties={},this.reset()}reset(){this.allData=new m,this.interactionData=new m}get(){return this.allData}getInteractionData(){return this.interactionData}write(e){const t=this.jsPsych.getProgress(),n=this.jsPsych.getCurrentTrial(),r={trial_type:n.type.info.name,trial_index:t.current_trial_global,time_elapsed:this.jsPsych.getTotalTime(),internal_node_id:this.jsPsych.getCurrentTimelineNodeID()};this.allData.push(Object.assign(Object.assign(Object.assign(Object.assign({},e),n.data),r),this.dataProperties))}addProperties(e){this.allData.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.allData.addToLast(e)}getDataByTimelineNode(e){return this.allData.filterCustom((t=>t.internal_node_id.slice(0,e.length)===e))}getLastTrialData(){return this.allData.top()}getLastTimelineData(){const e=this.getLastTrialData().select("internal_node_id").values[0];if("undefined"===typeof e)return new m;{const t=e.substr(0,e.lastIndexOf("-"));return this.getDataByTimelineNode(t)}}displayData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";e=e.toLowerCase(),"json"!=e&&"csv"!=e&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json");const t="json"===e?this.allData.json(!0):this.allData.csv();this.jsPsych.getDisplayElement().innerHTML='<pre id="jspsych-data-display"></pre>',document.getElementById("jspsych-data-display").textContent=t}urlVariables(){return"undefined"==typeof this.query_string&&(this.query_string=function(){const e=window.location.search.substr(1).split("&"),t={};for(let n=0;n<e.length;++n){const r=e[n].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}createInteractionListeners(){window.addEventListener("blur",(()=>{const e={event:"blur",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)})),window.addEventListener("focus",(()=>{const e={event:"focus",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)}));const e=()=>{const e={event:document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit",trial:this.jsPsych.getProgress().current_trial_global,time:this.jsPsych.getTotalTime()};this.interactionData.push(e),this.jsPsych.getInitSettings().on_interaction_data_update(e)};document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e)}_customInsert(e){this.allData=new m(e)}_fullreset(){this.reset(),this.dataProperties={}}}class y{constructor(){this.hardwareConnected=!1,document.addEventListener("jspsych-activate",(e=>{this.hardwareConnected=!0}))}hardware(e){const t=new CustomEvent("jspsych",{detail:e});document.dispatchEvent(t)}}class v{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=n,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,l(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of Array.from(this.listeners))t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,n){return!(!t&&this.heldKeys.has(n))&&("ALL_KEYS"===e||"NO_KEYS"!==e&&e.includes(n))}getKeyboardResponse(e){let{callback_function:t,valid_responses:n="ALL_KEYS",rt_method:r="performance",persist:i,audio_context:s,audio_context_start_time:o,allow_held_key:a=!1,minimum_valid_rt:l=this.minimumValidRt}=e;"performance"!==r&&"audio"!==r&&(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),r="performance");const u="performance"===r?performance.now():1e3*o;this.registerRootListeners(),this.areResponsesCaseSensitive||"string"===typeof n||(n=n.map((e=>e.toLowerCase())));const c=e=>{const o=Math.round(("performance"==r?performance.now():1e3*s.currentTime)-u);if(o<l)return;const h=this.toLowerCaseIfInsensitive(e.key);this.isResponseValid(n,a,h)&&(e.preventDefault(),i||this.cancelKeyboardResponse(c),t({key:h,rt:o}))};return this.listeners.add(c),c}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(!("string"!==typeof e&&null!==e||"string"!==typeof t&&null!==t))return"string"===typeof e&&"string"===typeof t?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():null===e&&null===t;console.error("Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.")}}!function(e){e[e.BOOL=0]="BOOL",e[e.STRING=1]="STRING",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.FUNCTION=4]="FUNCTION",e[e.KEY=5]="KEY",e[e.KEYS=6]="KEYS",e[e.SELECT=7]="SELECT",e[e.HTML_STRING=8]="HTML_STRING",e[e.IMAGE=9]="IMAGE",e[e.AUDIO=10]="AUDIO",e[e.VIDEO=11]="VIDEO",e[e.OBJECT=12]="OBJECT",e[e.COMPLEX=13]="COMPLEX",e[e.TIMELINE=14]="TIMELINE"}(d||(d={}));const w={data:{type:d.OBJECT,pretty_name:"Data",default:{}},on_start:{type:d.FUNCTION,pretty_name:"On start",default:function(){}},on_finish:{type:d.FUNCTION,pretty_name:"On finish",default:function(){}},on_load:{type:d.FUNCTION,pretty_name:"On load",default:function(){}},post_trial_gap:{type:d.INT,pretty_name:"Post trial gap",default:null},css_classes:{type:d.STRING,pretty_name:"Custom CSS classes",default:null},simulation_options:{type:d.COMPLEX,default:null}},b=[d.AUDIO,d.IMAGE,d.VIDEO];class E{constructor(e,t){this.useWebaudio=e,this.webaudioContext=t,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}initAudio(){this.context=this.useWebaudio?this.webaudioContext:null}audioContext(){return null!==this.context&&"running"!==this.context.state&&this.context.resume(),this.context}getAudioBuffer(e){return new Promise(((t,n)=>{"undefined"==typeof this.audio_buffers[e]||"tmp"==this.audio_buffers[e]?this.preloadAudio([e],(()=>{t(this.audio_buffers[e])}),(()=>{}),(e=>{n(e.error)})):t(this.audio_buffers[e])}))}preloadAudio(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=c(e.flat());let s=0;if(0==e.length)return void n();const o=function(o){const a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=()=>{t.context.decodeAudioData(a.response,(i=>{t.audio_buffers[o]=i,s++,r(o),s==e.length&&n()}),(e=>{i({source:o,error:e})}))},a.onerror=e=>{let t=e;404==a.status&&(t="404"),i({source:o,error:t})},a.onloadend=e=>{404==a.status&&i({source:o,error:"404"})},a.send(),t.preload_requests.push(a)},a=function(o){const a=new Audio,l=()=>{t.audio_buffers[o]=a,s++,r(o),s==e.length&&n(),a.removeEventListener("canplaythrough",l)};a.addEventListener("canplaythrough",l),a.addEventListener("error",(function e(t){i({source:a.src,error:t}),a.removeEventListener("error",e)})),a.addEventListener("abort",(function e(t){i({source:a.src,error:t}),a.removeEventListener("abort",e)})),a.src=o,t.preload_requests.push(a)};for(const l of e)"undefined"!==typeof this.audio_buffers[l]?(s++,r(l),s==e.length&&n()):(this.audio_buffers[l]="tmp",null!==this.audioContext()?o(l):a(l))}preloadImages(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=c(e.flat());var i=0;if(0!==e.length)for(let s=0;s<e.length;s++){const o=new Image,a=e[s];o.onload=()=>{i++,n(a),i===e.length&&t()},o.onerror=e=>{r({source:a,error:e})},o.src=a,this.img_cache[a]=o,this.preload_requests.push(o)}else t()}preloadVideo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};e=c(e.flat());let i=0;if(0!==e.length)for(const s of e){const o=this.video_buffers,a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType="blob",a.onload=()=>{if(200===a.status||0===a.status){const r=a.response;o[s]=URL.createObjectURL(r),i++,n(s),i===e.length&&t()}},a.onerror=e=>{let t=e;404==a.status&&(t="404"),r({source:s,error:t})},a.onloadend=e=>{404==a.status&&r({source:s,error:"404"})},a.send(),this.preload_requests.push(a)}else t()}getAutoPreloadList(e){const t=Object.fromEntries(b.map((e=>[e,new Set]))),n=(e,r)=>{var i,s,o,a;if("undefined"!==typeof e.timeline)for(const t of e.timeline)n(t,null!==(i=e.type)&&void 0!==i?i:r);else if(null===(o=null!==(s=e.type)&&void 0!==s?s:r)||void 0===o?void 0:o.info){const{name:n,parameters:i}=(null!==(a=e.type)&&void 0!==a?a:r).info;this.preloadMap.has(n)||this.preloadMap.set(n,Object.fromEntries(Object.entries(i).filter((e=>{let[t,{type:n,preload:r}]=e;return b.includes(n)&&(null===r||void 0===r||r)})).map((e=>{let[t,{type:n}]=e;return[t,n]}))));for(const[r,s]of Object.entries(this.preloadMap.get(n))){const n=e[r],i=t[s];if("string"===typeof n)i.add(n);else if(Array.isArray(n))for(const e of n.flat())"string"===typeof e&&i.add(e)}}};return n({timeline:e}),{images:[...t[d.IMAGE]],audio:[...t[d.AUDIO]],video:[...t[d.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const n=new MediaRecorder(e,t);this.camera_recorder=n}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class T{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?this.setJsPsychTimeout((()=>{this.keyDown(e),this.keyUp(e)}),t):(this.keyDown(e),this.keyUp(e))}clickTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?this.setJsPsychTimeout((()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}),t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n>0?this.setJsPsychTimeout((()=>{e.value=t}),n):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let n;if("NO_KEYS"==e)n=null;else if("ALL_KEYS"==e)n=t[Math.floor(Math.random()*t.length)];else{const t=e.flat();n=t[Math.floor(Math.random()*t.length)]}return n}mergeSimulationData(e,t){return Object.assign(Object.assign({},e),null===t||void 0===t?void 0:t.data)}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&"NO_KEYS"==e.choices&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const n=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<n&&(t.rt=null,t.response=null)}}}class S{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const n=window.setTimeout(e,t);return this.timeout_handlers.push(n),n}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}var I={exports:{}};(function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.alea=s})(0,I,!1);var x=I.exports,k=a(x),C={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xor128=s}(0,e,!1)}(C);var D=C.exports,P={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xorwow=s}(0,e,!1)}(P);var A=P.exports,N={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&(s.x&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xorshift7=s}(0,e,!1)}(N);var O=N.exports,R={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,o,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,i=0==(n=a[127&s]^=r+o)?i+1:0);for(i>=128&&(a[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;e.w=o,e.X=a,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&(s.X&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.xor4096=s}(0,e,!1)}(R);var L=R.exports,M={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,s&&("object"==typeof s&&i(s,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=s:n&&n.amd?n((function(){return s})):this.tychei=s}(0,e,!1)}(M);var F=M.exports,j={exports:{}};!function(e){!function(t,n,r){var i,s=256,o="random",a=r.pow(s,6),l=r.pow(2,52),u=2*l,c=s-1;function h(e,c,h){var y=[],v=m(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,g(n)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(s):(e=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(e)),g(e)}catch(a){var r=t.navigator,o=r&&r.plugins;return[+new Date,t,o,t.screen,g(n)]}}():e,3),y),w=new d(y),b=function(){for(var e=w.g(6),t=a,n=0;e<l;)e=(e+n)*s,t*=s,n=w.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|w.g(4)},b.quick=function(){return w.g(4)/4294967296},b.double=b,m(g(w.S),n),(c.pass||h||function(e,t,n,i){return i&&(i.S&&f(i,w),e.state=function(){return f(w,{})}),n?(r[o]=e,t):e})(b,v,"global"in c?c.global:this==r,c.state)}function d(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<s;)a[i]=i++;for(i=0;i<s;i++)a[i]=a[o=c&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=c&i+1],n=n*s+a[c&(a[i]=a[o=c&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(s)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(p(e[n],t-1))}catch(s){}return r.length?r:"string"==i?e:e+"\0"}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(r.random(),n),e.exports){e.exports=h;try{i=require("crypto")}catch(y){}}else r["seed"+o]=h}("undefined"!==typeof self?self:o,[],Math)}(j);var V=x,U=D,z=A,B=O,q=L,K=F,G=j.exports;G.alea=V,G.xor128=U,G.xorwow=z,G.xorshift7=B,G.xor4096=q,G.tychei=K;var H=G,W=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function Q(e){var t;const n=null!==(t=e)&&void 0!==t&&t.seed?new H(e.seed):null;function r(){return e&&e.maxLength>1?function(){var t,n=!1;for(;!n;)(t=i()).length<=e.maxLength&&(n=!0);return t}():i()}function i(){return W[s(W.length)]}function s(e){const t=n?n():Math.random();return Math.floor(t*e)}if("undefined"===typeof e)return r();"number"===typeof e&&(e={exactly:e}),e.exactly&&(e.min=e.exactly,e.max=e.exactly),"number"!==typeof e.wordsPerString&&(e.wordsPerString=1),"function"!==typeof e.formatter&&(e.formatter=e=>e),"string"!==typeof e.separator&&(e.separator=" ");for(var o=e.min+s(e.max+1-e.min),a=[],l="",u=0,c=0;c<o*e.wordsPerString;c++)u===e.wordsPerString-1?l+=e.formatter(r(),u):l+=e.formatter(r(),u)+e.separator,u++,(c+1)%e.wordsPerString===0&&(a.push(l),l="",u=0);return"string"===typeof e.join&&(a=a.join(e.join)),a}var Y=Q;Q.wordList=W;var X=a(Y);function J(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Array.isArray(e),i=Array.isArray(t);if(r)if(i){if(e.length!=t.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),t.length<e.length){let n=[];for(let r=0;r<e.length;r++)n.push(t);t=n}else t=t.slice(0,e.length)}else{let n=[];for(let r=0;r<e.length;r++)n.push(t);t=n}else i?(t=[t[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(e=[e],t=[t]);let s=[];for(let a=0;a<e.length;a++)for(let n=0;n<t[a];n++)null==e[a]||"object"!=typeof e[a]?s.push(e[a]):s.push(Object.assign({},e[a]));let o=$(s);return n&&(o=function(e){const t={};for(const n of e)for(const e of Object.keys(n))"undefined"===typeof t[e]&&(t[e]=[]),t[e].push(n[e]);return t}(o)),o}function $(e){Array.isArray(e)||console.error("Argument to shuffle() must be an array.");const t=e.slice(0);let n,r,i=t.length;for(;i;)r=Math.floor(Math.random()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}function Z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.length;if(1==n)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),$(e[0]);let r=[];for(let a=0;a<n;a++)r.push(a);t&&(r=$(r));const i=[];let s=null;for(let a=0;a<n;a++)s=null===s?e[a].length:Math.min(s,e[a].length),i.push($(e[a]));const o=[];for(let a=0;a<s;a++)for(let e=0;e<r.length;e++)o.push(i[r[e]][a]);return o}function ee(e,t){return Array.isArray(e)||console.error("First argument to sampleWithoutReplacement() must be an array"),t>e.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),$(e).slice(0,t)}function te(e,t,n){Array.isArray(e)||console.error("First argument to sampleWithReplacement() must be an array");const r=[];if("undefined"!==typeof n){n.length!==e.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");let t=0;for(const e of n)t+=e;for(const e of n)r.push(e/t)}else for(let o=0;o<e.length;o++)r.push(1/e.length);const i=[r[0]];for(let o=1;o<r.length;o++)i.push(r[o]+i[o-1]);const s=[];for(let o=0;o<t;o++){const t=Math.random();let n=0;for(;t>i[n];)n++;s.push(e[n])}return s}function ne(e,t){return function(){var e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t+e}function re(e){return-Math.log(Math.random())/e}var ie=Object.freeze({__proto__:null,factorial:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[{}];for(const[i,s]of Object.entries(e)){const e=[];for(const t of s)for(const n of r)e.push(Object.assign(Object.assign({},n),{[i]:t}));r=e}return J(r,t,n)},randomID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="";const n="0123456789abcdefghjklmnopqrstuvwxyz";for(let r=0;r<e;r++)t+=n[Math.floor(35*Math.random())];return t},randomInt:function(e,t){if(t<e)throw new Error("Upper boundary must be less than or equal to lower boundary");return e+Math.floor(Math.random()*(t-e+1))},randomWords:function(e){return X(e)},repeat:J,sampleBernoulli:function(e){return Math.random()<=e?1:0},sampleExGaussian:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=ne(e,t)+re(n);if(r)for(;i<=0;)i=ne(e,t)+re(n);return i},sampleExponential:re,sampleNormal:ne,sampleWithReplacement:te,sampleWithoutReplacement:ee,setSeed:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random().toString();return Math.random=k(e),e},shuffle:$,shuffleAlternateGroups:Z,shuffleNoRepeats:function(e,t){Array.isArray(e)||console.error("First argument to shuffleNoRepeats() must be an array."),"undefined"!==typeof t&&"function"!==typeof t&&console.error("Second argument to shuffleNoRepeats() must be a function."),"undefined"==typeof t&&(t=function(e,t){return e===t});const n=$(e);for(let r=0;r<n.length-1;r++)if(t(n[r],n[r+1])){let e=Math.floor(Math.random()*(n.length-2))+1;for(;t(n[r+1],n[e])||t(n[r+1],n[e+1])||t(n[r+1],n[e-1])||t(n[r],n[e]);)e=Math.floor(Math.random()*(n.length-2))+1;const i=n[e];n[e]=n[r+1],n[r+1]=i}return n}});function se(){const e={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},t=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":n[1]},n=t(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map((function(r){e[r]=unescape(t(n,r))})),e.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==e.assignmentId,e.outsideTurk=!e.previewMode&&""===e.hitId&&""==e.assignmentId&&""==e.workerId,e}var oe=Object.freeze({__proto__:null,submitToTurk:function(e){const t=se(),n=t.assignmentId,r=t.turkSubmitTo;if(!n||!r)return;const i=document.createElement("form");i.method="POST",i.action=r+"/mturk/externalSubmit?assignmentId="+n;for(const s in e)if(e.hasOwnProperty(s)){const t=document.createElement("input");t.type="hidden",t.name=s,t.id=s,t.value=e[s],i.appendChild(t)}document.body.appendChild(i),i.submit()},turkInfo:se});class ae{constructor(e,t,n,r){if(this.jsPsych=e,this.progress={current_location:-1,current_variable_set:0,current_repetition:0,current_iteration:0,done:!1},this.parent_node=n,this.relative_id="undefined"===typeof n?0:r,"undefined"!==typeof t.timeline){this.timeline_parameters={timeline:[],loop_function:t.loop_function,conditional_function:t.conditional_function,sample:t.sample,randomize_order:"undefined"!=typeof t.randomize_order&&t.randomize_order,repetitions:"undefined"==typeof t.repetitions?1:t.repetitions,timeline_variables:"undefined"==typeof t.timeline_variables?[{}]:t.timeline_variables,on_timeline_finish:t.on_timeline_finish,on_timeline_start:t.on_timeline_start},this.setTimelineVariablesOrder();var i=Object.assign({},t);delete i.timeline,delete i.conditional_function,delete i.loop_function,delete i.randomize_order,delete i.repetitions,delete i.timeline_variables,delete i.sample,delete i.on_timeline_start,delete i.on_timeline_finish,this.node_trial_data=i;for(var s=0;s<t.timeline.length;s++){var o=Object.assign({},i,t.timeline[s]);if("object"==typeof i.data&&"object"==typeof t.timeline[s].data){var a=Object.assign({},i.data,t.timeline[s].data);o.data=a}this.timeline_parameters.timeline.push(new ae(this.jsPsych,o,this,s))}}else"undefined"===typeof t.type&&console.error('Trial level node is missing the "type" parameter. The parameters for the node are: '+JSON.stringify(t)),this.trial_parameters=Object.assign({},t)}trial(){return"undefined"==typeof this.timeline_parameters?h(this.trial_parameters):this.progress.current_location>=this.timeline_parameters.timeline.length?null:this.timeline_parameters.timeline[this.progress.current_location].trial()}markCurrentTrialComplete(){"undefined"===typeof this.timeline_parameters?this.progress.done=!0:this.timeline_parameters.timeline[this.progress.current_location].markCurrentTrialComplete()}nextRepetiton(){this.setTimelineVariablesOrder(),this.progress.current_location=-1,this.progress.current_variable_set=0,this.progress.current_repetition++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}setTimelineVariablesOrder(){const e=this.timeline_parameters;if("undefined"!==typeof e&&"undefined"!==typeof e.timeline_variables){for(var t=[],n=0;n<e.timeline_variables.length;n++)t.push(n);"undefined"!==typeof e.sample&&("custom"==e.sample.type?t=e.sample.fn(t):"with-replacement"==e.sample.type?t=te(t,e.sample.size,e.sample.weights):"without-replacement"==e.sample.type?t=ee(t,e.sample.size):"fixed-repetitions"==e.sample.type?t=J(t,e.sample.size,!1):"alternate-groups"==e.sample.type?t=Z(e.sample.groups,e.sample.randomize_group_order):console.error('Invalid type in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"')),e.randomize_order&&(t=$(t)),this.progress.order=t}}nextSet(){this.progress.current_location=-1,this.progress.current_variable_set++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}advance(){const e=this.progress,t=this.timeline_parameters,n=this.jsPsych.internal;if(e.done)return!0;if(-1==e.current_location){if("undefined"!==typeof t){if("undefined"!==typeof t.conditional_function&&0==e.current_repetition&&0==e.current_variable_set){n.call_immediate=!0;var r=t.conditional_function();if(n.call_immediate=!1,0==r)return e.done=!0,!0}"undefined"!==typeof t.on_timeline_start&&0==e.current_variable_set&&t.on_timeline_start()}return e.current_location=0,this.advance()}if("undefined"!==typeof t){for(var i=!1;e.current_location<t.timeline.length&&0==i;){if(!t.timeline[e.current_location].advance())return i=!0,!1;e.current_location++}return e.current_variable_set<e.order.length-1?(this.nextSet(),this.advance()):e.current_repetition<t.repetitions-1?(this.nextRepetiton(),"undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),this.advance()):("undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),"undefined"!==typeof t.loop_function?(n.call_immediate=!0,t.loop_function(this.generatedData())?(this.reset(),n.call_immediate=!1,this.parent_node.advance()):(e.done=!0,n.call_immediate=!1,!0)):(e.done=!0,!0))}}isComplete(){return this.progress.done}getTimelineVariableValue(e){if("undefined"!=typeof this.timeline_parameters)return this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]][e]}findTimelineVariable(e){var t=this.getTimelineVariableValue(e);return"undefined"==typeof t?"undefined"!==typeof this.parent_node?this.parent_node.findTimelineVariable(e):void 0:t}timelineVariable(e){if("undefined"==typeof this.timeline_parameters){const t=this.findTimelineVariable(e);return"undefined"===typeof t&&console.warn("Timeline variable "+e+" not found."),t}{var t=Math.max(0,this.progress.current_location);t==this.timeline_parameters.timeline.length&&(t-=1);const n=this.timeline_parameters.timeline[t].timelineVariable(e);return"undefined"===typeof n&&console.warn("Timeline variable "+e+" not found."),n}}allTimelineVariables(){for(var e=this.allTimelineVariablesNames(),t={},n=0;n<e.length;n++)t[e[n]]=this.timelineVariable(e[n]);return t}allTimelineVariablesNames(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("undefined"!==typeof this.timeline_parameters){e=e.concat(Object.keys(this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]]));var t=Math.max(0,this.progress.current_location);return t==this.timeline_parameters.timeline.length&&(t-=1),this.timeline_parameters.timeline[t].allTimelineVariablesNames(e)}if("undefined"==typeof this.timeline_parameters)return e}length(){var e=0;if("undefined"===typeof this.timeline_parameters)return 1;for(var t=0;t<this.timeline_parameters.timeline.length;t++)e+=this.timeline_parameters.timeline[t].length();return e}percentComplete(){for(var e=this.length(),t=0,n=0;n<this.timeline_parameters.timeline.length;n++)this.timeline_parameters.timeline[n].isComplete()&&(t+=this.timeline_parameters.timeline[n].length());return t/e*100}reset(){if(this.progress.current_location=-1,this.progress.current_repetition=0,this.progress.current_variable_set=0,this.progress.current_iteration++,this.progress.done=!1,this.setTimelineVariablesOrder(),"undefined"!=typeof this.timeline_parameters)for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}end(){this.progress.done=!0}endActiveNode(){"undefined"==typeof this.timeline_parameters?(this.end(),this.parent_node.end()):this.timeline_parameters.timeline[this.progress.current_location].endActiveNode()}ID(){var e="";return"undefined"==typeof this.parent_node?"0."+this.progress.current_iteration:(e+=this.parent_node.ID()+"-",e+=this.relative_id+"."+this.progress.current_iteration)}activeID(){return"undefined"==typeof this.timeline_parameters?this.ID():this.timeline_parameters.timeline[this.progress.current_location].activeID()}generatedData(){return this.jsPsych.data.getDataByTimelineNode(this.ID())}trialsOfType(e){if("undefined"==typeof this.timeline_parameters)return this.trial_parameters.type==e?this.trial_parameters:[];for(var t=[],n=0;n<this.timeline_parameters.timeline.length;n++){var r=this.timeline_parameters.timeline[n].trialsOfType(e);t=t.concat(r)}return t}insert(e){"undefined"===typeof this.timeline_parameters?console.error("Cannot add new trials to a trial-level node."):this.timeline_parameters.timeline.push(new ae(this.jsPsych,Object.assign(Object.assign({},this.node_trial_data),e),this,this.timeline_parameters.timeline.length))}}function le(e){return new Promise((t=>setTimeout(t,e)))}class ue{version(){return"7.3.4"}constructor(e){this.extensions={},this.turk=oe,this.randomization=ie,this.utils=f,this.opts={},this.global_trial_index=0,this.current_trial={},this.current_trial_finished=!1,this.paused=!1,this.waiting=!1,this.file_protocol=!1,this.simulation_mode=null,this.webaudio_context=null,this.internal={call_immediate:!1},this.progress_bar_amount=0,e=Object.assign({display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,exclusions:{},show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[]},e),this.opts=e,l(this),this.webaudio_context="undefined"!==typeof window&&"undefined"!==typeof window.AudioContext?new AudioContext:null,"file:"!=window.location.protocol||!1!==e.override_safe_mode&&"undefined"!==typeof e.override_safe_mode||(e.use_webaudio=!1,this.file_protocol=!0,console.warn("jsPsych detected that it is running via the file:// protocol and not on a web server. To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. For more information, see: https://www.jspsych.org/overview/running-experiments")),this.data=new g(this),this.pluginAPI=function(e){const t=e.getInitSettings(),n=l(new v(e.getDisplayContainerElement,t.case_sensitive_responses,t.minimum_valid_rt)),r=l(new S),i=l(new E(t.use_webaudio,e.webaudio_context)),s=l(new y),o=l(new T(e.getDisplayContainerElement,r.setTimeout));return Object.assign({},n,r,i,s,o)}(this);for(const t of e.extensions)this.extensions[t.type.info.name]=new t.type(this);this.pluginAPI.initAudio()}run(e){return s(this,void 0,void 0,(function*(){"undefined"===typeof e&&console.error("No timeline declared in jsPsych.run. Cannot start experiment."),0===e.length&&console.error("No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment."),this.timelineDescription=e,this.timeline=new ae(this,{timeline:e}),yield this.prepareDom(),yield this.checkExclusions(this.opts.exclusions),yield this.loadExtensions(this.opts.extensions),document.documentElement.setAttribute("jspsych","present"),this.startExperiment(),yield this.finished}))}simulate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-only",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(this,void 0,void 0,(function*(){this.simulation_mode=t,this.simulation_options=n,yield this.run(e)}))}getProgress(){return{total_trials:"undefined"===typeof this.timeline?void 0:this.timeline.length(),current_trial_global:this.global_trial_index,percent_complete:"undefined"===typeof this.timeline?0:this.timeline.percentComplete()}}getStartTime(){return this.exp_start_time}getTotalTime(){return"undefined"===typeof this.exp_start_time?0:(new Date).getTime()-this.exp_start_time.getTime()}getDisplayElement(){return this.DOM_target}getDisplayContainerElement(){return this.DOM_container}finishTrial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(this.current_trial_finished)return;this.current_trial_finished=!0,"undefined"!==typeof this.current_trial.css_classes&&Array.isArray(this.current_trial.css_classes)&&this.DOM_target.classList.remove(...this.current_trial.css_classes),this.data.write(e);const n=this.data.getLastTrialData().values()[0],r=this.current_trial;if("object"===typeof r.save_trial_parameters)for(const o of Object.keys(r.save_trial_parameters)){const e=r.save_trial_parameters[o];!0===e&&("undefined"===typeof r[o]?console.warn('Invalid parameter specified in save_trial_parameters. Trial has no property called "'.concat(o,'".')):"function"===typeof r[o]?n[o]=r[o].toString():n[o]=r[o]),!1===e&&"internal_node_id"!==o&&"trial_index"!==o&&delete n[o]}const i=(null!==(t=r.extensions)&&void 0!==t?t:[]).map((e=>this.extensions[e.type.info.name].on_finish(e.params))),s=()=>{this.internal.call_immediate=!0,"function"===typeof r.on_finish&&r.on_finish(n),this.opts.on_trial_finish(n),this.opts.on_data_update(n),this.internal.call_immediate=!1,"data-only"===this.simulation_mode?this.nextTrial():null===typeof r.post_trial_gap||"undefined"===typeof r.post_trial_gap?this.opts.default_iti>0?setTimeout(this.nextTrial,this.opts.default_iti):this.nextTrial():r.post_trial_gap>0?setTimeout(this.nextTrial,r.post_trial_gap):this.nextTrial()};if(i.some((e=>"function"===typeof e.then)))Promise.all(i.map((e=>Promise.resolve(e).then((e=>{Object.assign(n,e)}))))).then(s);else{for(const e of i)Object.assign(n,e);s()}}endExperiment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.timeline.end_message=e,this.timeline.end(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}endCurrentTimeline(){this.timeline.endActiveNode()}getCurrentTrial(){return this.current_trial}getInitSettings(){return this.opts}getCurrentTimelineNodeID(){return this.timeline.activeID()}timelineVariable(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.internal.call_immediate||!0===t?this.timeline.timelineVariable(e):{timelineVariablePlaceholder:!0,timelineVariableFunction:()=>this.timeline.timelineVariable(e)}}getAllTimelineVariables(){return this.timeline.allTimelineVariables()}addNodeToEndOfTimeline(e,t){this.timeline.insert(e)}pauseExperiment(){this.paused=!0}resumeExperiment(){this.paused=!1,this.waiting&&(this.waiting=!1,this.nextTrial())}loadFail(e){e=e||"<p>The experiment failed to load.</p>",this.DOM_target.innerHTML=e}getSafeModeStatus(){return this.file_protocol}getTimeline(){return this.timelineDescription}prepareDom(){return s(this,void 0,void 0,(function*(){"complete"!==document.readyState&&(yield new Promise((e=>{window.addEventListener("load",e)})));const e=this.opts;if("undefined"===typeof e.display_element){null===document.querySelector("body")&&document.documentElement.appendChild(document.createElement("body")),document.querySelector("html").style.height="100%",document.querySelector("body").style.margin="0px",document.querySelector("body").style.height="100%",document.querySelector("body").style.width="100%",e.display_element=document.querySelector("body")}else{const t=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);null===t?console.error("The display_element specified in initJsPsych() does not exist in the DOM."):e.display_element=t}e.display_element.innerHTML='<div class="jspsych-content-wrapper"><div id="jspsych-content"></div></div>',this.DOM_container=e.display_element,this.DOM_target=document.querySelector("#jspsych-content"),null!==e.experiment_width&&(this.DOM_target.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,-1===e.display_element.className.indexOf("jspsych-display-element")&&(e.display_element.className+=" jspsych-display-element"),this.DOM_target.className+="jspsych-content",this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close)}))}loadExtensions(e){return s(this,void 0,void 0,(function*(){try{yield Promise.all(e.map((e=>this.extensions[e.type.info.name].initialize(e.params||{}))))}catch(t){throw console.error(t),new Error(t)}}))}startExperiment(){this.finished=new Promise((e=>{this.resolveFinishedPromise=e})),!0===this.opts.show_progress_bar&&this.drawProgressBar(this.opts.message_progress_bar),this.exp_start_time=new Date,this.timeline.advance(),this.doTrial(this.timeline.trial())}finishExperiment(){const e=this.opts.on_finish(this.data.get()),t=()=>{"undefined"!==typeof this.timeline.end_message&&(this.DOM_target.innerHTML=this.timeline.end_message),this.resolveFinishedPromise()};e?Promise.resolve(e).then(t):t()}nextTrial(){if(this.paused)return void(this.waiting=!0);this.global_trial_index++,this.timeline.markCurrentTrialComplete();const e=this.timeline.advance();!0===this.opts.show_progress_bar&&!0===this.opts.auto_update_progress_bar&&this.updateProgressBar(),e?this.finishExperiment():this.doTrial(this.timeline.trial())}doTrial(e){if(this.current_trial=e,this.current_trial_finished=!1,this.evaluateTimelineVariables(e),"string"===typeof e.type)throw new u("A string was provided as the trial's `type` parameter. Since jsPsych v7, the `type` parameter needs to be a plugin object.");if(e.type=Object.assign(Object.assign({},l(new e.type(this))),{info:e.type.info}),this.evaluateFunctionParameters(e),this.setDefaultValues(e),this.internal.call_immediate=!0,this.opts.on_trial_start(e),"function"===typeof e.on_start&&e.on_start(e),Array.isArray(e.extensions))for(const s of e.extensions)this.extensions[s.type.info.name].on_start(s.params);this.DOM_container.focus(),this.DOM_target.scrollTop=0,"undefined"!==typeof e.css_classes&&(Array.isArray(e.css_classes)||"string"!==typeof e.css_classes||(e.css_classes=[e.css_classes]),Array.isArray(e.css_classes)&&this.DOM_target.classList.add(...e.css_classes));const t=()=>{if("function"===typeof e.on_load&&e.on_load(),Array.isArray(e.extensions))for(const t of e.extensions)this.extensions[t.type.info.name].on_load(t.params)};let n,r,i;this.simulation_mode||(n=e.type.trial(this.DOM_target,e,t)),this.simulation_mode&&(e.type.simulate?(e.simulation_options||(r=this.simulation_options.default),e.simulation_options&&("string"==typeof e.simulation_options?this.simulation_options[e.simulation_options]?r=this.simulation_options[e.simulation_options]:this.simulation_options.default?(console.log('No matching simulation options found for "'.concat(e.simulation_options,'". Using "default" options.')),r=this.simulation_options.default):(console.log('No matching simulation options found for "'.concat(e.simulation_options,'" and no "default" options provided. Using the default values provided by the plugin.')),r={}):r=e.simulation_options),i=this.utils.deepMerge(this.simulation_options.default,r),i=this.utils.deepCopy(i),i=this.replaceFunctionsWithValues(i,null),n=!1===(null===i||void 0===i?void 0:i.simulate)?e.type.trial(this.DOM_target,e,t):e.type.simulate(e,(null===i||void 0===i?void 0:i.mode)||this.simulation_mode,i,t)):n=e.type.trial(this.DOM_target,e,t));n&&"function"==typeof n.then||this.simulation_mode&&(!this.simulation_mode||!1!==(null===i||void 0===i?void 0:i.simulate))||t(),this.internal.call_immediate=!1}evaluateTimelineVariables(e){for(const t of Object.keys(e))"object"===typeof e[t]&&null!==e[t]&&"undefined"!==typeof e[t].timelineVariablePlaceholder&&(e[t]=e[t].timelineVariableFunction()),"object"===typeof e[t]&&null!==e[t]&&"timeline"!==t&&"timeline_variables"!==t&&this.evaluateTimelineVariables(e[t])}evaluateFunctionParameters(e){this.internal.call_immediate=!0;for(const t of Object.keys(e))"type"!==t&&("undefined"!==typeof w[t]&&w[t].type!==d.FUNCTION&&(e[t]=this.replaceFunctionsWithValues(e[t],null)),"undefined"!==typeof e.type.info.parameters[t]&&e.type.info.parameters[t].type!==d.FUNCTION&&(e[t]=this.replaceFunctionsWithValues(e[t],e.type.info.parameters[t])));this.internal.call_immediate=!1}replaceFunctionsWithValues(e,t){if(null===e)return e;if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=this.replaceFunctionsWithValues(e[n],t);else if("object"===typeof e)if(null!==t&&t.nested)for(const n of Object.keys(e))"object"===typeof t.nested[n]&&t.nested[n].type!==d.FUNCTION&&(e[n]=this.replaceFunctionsWithValues(e[n],t.nested[n]));else for(const n of Object.keys(e))"type"!==n&&"timeline"!==n&&"timeline_variables"!==n&&(e[n]=this.replaceFunctionsWithValues(e[n],null));else if("function"===typeof e)return e();return e}setDefaultValues(e){for(const t in e.type.info.parameters)e.type.info.parameters[t].type===d.COMPLEX?("undefined"===typeof e[t]&&e.type.info.parameters[t].default&&(e[t]=e.type.info.parameters[t].default),!0===e.type.info.parameters[t].array&&Array.isArray(e[t])&&e[t].forEach((function(n,r){for(const i in e.type.info.parameters[t].nested)"undefined"!==typeof e[t][r][i]&&null!==e[t][r][i]||("undefined"===typeof e.type.info.parameters[t].nested[i].default?console.error("You must specify a value for the ".concat(i," parameter (nested in the ").concat(t," parameter) in the ").concat(e.type.info.name," plugin.")):e[t][r][i]=e.type.info.parameters[t].nested[i].default)}))):"undefined"!==typeof e[t]&&null!==e[t]||("undefined"===typeof e.type.info.parameters[t].default?console.error("You must specify a value for the ".concat(t," parameter in the ").concat(e.type.info.name," plugin.")):e[t]=e.type.info.parameters[t].default)}checkExclusions(e){return s(this,void 0,void 0,(function*(){if((e.min_width||e.min_height||e.audio)&&console.warn("The exclusions option in `initJsPsych()` is deprecated and will be removed in a future version. We recommend using the browser-check plugin instead. See https://www.jspsych.org/latest/plugins/browser-check/."),e.min_width||e.min_height){const t=e.min_width||0,n=e.min_height||0;if(window.innerWidth<t||window.innerHeight<n){for(this.getDisplayElement().innerHTML="<p>Your browser window is too small to complete this experiment. Please maximize the size of your browser window. If your browser window is already maximized, you will not be able to complete this experiment.</p><p>The minimum width is "+t+"px. Your current width is "+window.innerWidth+"px.</p><p>The minimum height is "+n+"px. Your current height is "+window.innerHeight+"px.</p>";window.innerWidth<t||window.innerHeight<n;)yield le(100);this.getDisplayElement().innerHTML=""}}if("undefined"!==typeof e.audio&&e.audio&&!window.hasOwnProperty("AudioContext")&&!window.hasOwnProperty("webkitAudioContext"))throw this.getDisplayElement().innerHTML="<p>Your browser does not support the WebAudio API, which means that you will not be able to complete the experiment.</p><p>Browsers that support the WebAudio API include Chrome, Firefox, Safari, and Edge.</p>",new Error}))}drawProgressBar(e){document.querySelector(".jspsych-display-element").insertAdjacentHTML("afterbegin",'<div id="jspsych-progressbar-container"><span>'+e+'</span><div id="jspsych-progressbar-outer"><div id="jspsych-progressbar-inner"></div></div></div>')}updateProgressBar(){this.setProgressBar(this.getProgress().percent_complete/100)}setProgressBar(e){e=Math.max(Math.min(1,e),0),document.querySelector("#jspsych-progressbar-inner").style.width=100*e+"%",this.progress_bar_amount=e}getProgressBarCompleted(){return this.progress_bar_amount}}function ce(e){const t=new ue(e);return Object.defineProperties(t,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map((e=>{let[t,n]=e;return[t,{get(){throw new u(n)}}]})))),t}"undefined"!==typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);const he=JSON.parse('{"UU":"honeycomb","rE":"3.3.0"}');function de(e){return new URLSearchParams(window.location.search).get(e)}function fe(){return de("PROLIFIC_PID")}const pe=JSON.parse('{"name":"Honeycomb Task","prompts":{"continue":{"prompt":"Press any key to continue.","button":"Continue"},"settingUp":"Setting up..."},"trials":{"introduction":"Welcome to the experiment. Press any key to begin.","honeycomb":{"instructions":{"read":"Please read the following instructions carefully.","circle":"In this experiment, a circle will appear in the center of the screen.","example":{"start":"If the circle is ","middle":", press the letter ","end":" on the keyboard as fast as you can."},"next":"Click next to begin."},"debrief":{"accuracy":{"start":"You responded correctly on ","end":"% of the trials."},"reactionTime":{"start":"Your average response time was ","end":"ms."},"complete":"Press any key to complete the experiment. Thank you!"}},"adjustVolume":"Set tablet volume to 50/100.","camera":{"start":"Make sure the camera is pointing to you and your face is within the camera area.","end":"The camera recording has ended"},"eventMarker":{"connected":"Event marker connected.","not_connected":"No event marker connected."},"holdUpMarker":"Make sure the photodiode is covering the spot and any external recordings have begun before continuing.","survey":{"demographics":{"title":"Demographics","age":{"prompt":"How old are you?"},"ethnicity":{"prompt":"What is your ethnicity?","options":["Hispanic or Latino","Not Hispanic or Latino"]},"race":{"prompt":"What is your race?","options":["Asian","African-American","Caucasian","Native American/Alaskan","Native Hawaiian or Pacific Islander","Other"]},"english":{"prompt":"Are you fluent in English?","options":["Yes","No"]},"gender":{"prompt":"What is your gender?","options":["Female","Male","Other","Prefer to not say"]},"diagnoses":{"prompt":"Please check ALL of the options you have been diagnosed with","options":["Parkinson\'s Disease","Schizophrenia","Obsessive Compulsive Disorder","Depression"]}},"ius":{"title":"Survey","prompt":"This questionnaire is designed to measure intolerance of uncertainty. Please answer the following questions as honestly as you can. There are no right or wrong answers, and there are no trick questions.","statements":[{"name":"upset","prompt":"Unforeseen events upset me greatly."},{"name":"frustration","prompt":"It frustrates me not having all the information I need."},{"name":"full_life","prompt":"Uncertainty keeps me from living a full life."},{"name":"surprise_avoid","prompt":"One should always look ahead so as to avoid surprises."},{"name":"unforeseen_spoil","prompt":"A small unforeseen event can spoil everything, even with the best of planning."},{"name":"uncertainty_paralysis","prompt":"When it\'s time to act, uncertainty paralyzes me."},{"name":"uncertainty_malfunction","prompt":"When I am uncertain I can\'t function very well."},{"name":"future","prompt":"I always want to know what the future has in store of me."},{"name":"surprise_intolerance","prompt":"I can\'t stand being taken by surprise"},{"name":"doubt_paralysis","prompt":"The smallest doubt can stop me from acting."},{"name":"organize","prompt":"I should be able to organize everything in advance."},{"name":"escape","prompt":"I must get away from all uncertain situations."}],"options":["Not at all characteristic of me","A little characteristic of me","Somewhat characteristic of me","Very characteristic of me","Entirely characteristic of me","Prefer not to answer"]},"debriefing":{"confirm_completion":"Confirm Completion"}},"conclusion":"The experiment has concluded. Thank you for participating."}}'),me=JSON.parse('{"fixation":{"default_duration":1000,"randomize_duration":true,"durations":[250,500,750,1000,1250,1500,1750,2000]},"honeycomb":{"randomize_order":true,"repetitions":5,"timeline_variables":[{"stimulus":"assets/images/blue.png","correct_response":"f"},{"stimulus":"assets/images/orange.png","correct_response":"j"}]}}'),ge=(he.UU,he.rE),ye=pe,ve=me,we=ce().turk.turkInfo(),be=!we.outsideTurk,_e="".concat(we.workerId,":").concat(we.assignmentId),Ee=void 0!==window.electronAPI,Te=fe()&&!be||!1,Se={USE_PHOTODIODE:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_PHOTODIODE&&Ee,USE_EEG:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_EEG&&Ee,USE_ELECTRON:Ee,USE_MTURK:be,USE_VOLUME:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VOLUME,USE_CAMERA:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VIDEO&&Ee,USE_PROLIFIC:Te,USE_FIREBASE:"true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE},Ie="16c0",xe={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.EVENT_MARKER_PRODUCT_ID||"",ke={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.EVENT_MARKER_COM_NAME||"COM3",Ce={fixation:1,honeycomb:2,open_task:18,test_connect:32},De=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ae;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(e){return function(e){const t=De(e);return Pe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Oe=function(e){try{return Pe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Re(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Re(e[n],t[n]));return e}const Le=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Me=()=>{try{return Le()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Oe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Fe=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"object"===typeof self&&self.self===self}function ze(){return!function(){var e;const t=null===(e=Me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){try{return"object"===typeof indexedDB}catch(e){return!1}}class qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ge,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new qe(n,s,t)}}const Ge=/\{\$([^}]+)}/g;function He(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Qe(n)&&Qe(s)){if(!We(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qe(e){return null!==e&&"object"===typeof e}function Ye(e,t){const n=new Xe(e,t);return n.subscribe.bind(n)}class Xe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Je),void 0===r.error&&(r.error=Je),void 0===r.complete&&(r.complete=Je);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Je(){}function $e(e){return e&&e._delegate?e._delegate:e}class Ze{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const et="[DEFAULT]";class tt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new je;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:et})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===et?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return this.component?this.component.multipleInstances?e:et:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class nt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const rt=[];var it;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(it||(it={}));const st={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},ot=it.INFO,at={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},lt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=at[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ut{constructor(e){this.name=e,this._logLevel=ot,this._logHandler=lt,this._userLogHandler=null,rt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?st[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...t),this._logHandler(this,it.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...t),this._logHandler(this,it.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.INFO,...t),this._logHandler(this,it.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.WARN,...t),this._logHandler(this,it.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.ERROR,...t),this._logHandler(this,it.ERROR,...t)}}const ct=(e,t)=>t.some((t=>e instanceof t));let ht,dt;const ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap;let vt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return pt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||mt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _t(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function wt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(dt||(dt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Et(this),n),_t(ft.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _t(e.apply(Et(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Et(this),t,...r);return mt.set(s,t.sort?t.sort():[t]),_t(s)}}function bt(e){return"function"===typeof e?wt(e):(e instanceof IDBTransaction&&function(e){if(pt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));pt.set(e,t)}(e),ct(e,ht||(ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,vt):e)}function _t(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(_t(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ft.set(t,e)})).catch((()=>{})),yt.set(t,e),t}(e);if(gt.has(e))return gt.get(e);const t=bt(e);return t!==e&&(gt.set(e,t),yt.set(t,e)),t}const Et=e=>yt.get(e);const Tt=["get","getKey","getAll","getAllKeys","count"],St=["put","add","delete","clear"],It=new Map;function xt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(It.get(t))return It.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=St.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Tt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return It.set(t,s),s}vt=(e=>({...e,get:(t,n,r)=>xt(t,n)||e.get(t,n,r),has:(t,n)=>!!xt(t,n)||e.has(t,n)}))(vt);class kt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ct="@firebase/app",Dt="0.10.0",Pt=new ut("@firebase/app"),At="@firebase/app-compat",Nt="@firebase/analytics-compat",Ot="@firebase/analytics",Rt="@firebase/app-check-compat",Lt="@firebase/app-check",Mt="@firebase/auth",Ft="@firebase/auth-compat",jt="@firebase/database",Vt="@firebase/database-compat",Ut="@firebase/functions",zt="@firebase/functions-compat",Bt="@firebase/installations",qt="@firebase/installations-compat",Kt="@firebase/messaging",Gt="@firebase/messaging-compat",Ht="@firebase/performance",Wt="@firebase/performance-compat",Qt="@firebase/remote-config",Yt="@firebase/remote-config-compat",Xt="@firebase/storage",Jt="@firebase/storage-compat",$t="@firebase/firestore",Zt="@firebase/firestore-compat",en="firebase",tn="[DEFAULT]",nn={[Ct]:"fire-core",[At]:"fire-core-compat",[Ot]:"fire-analytics",[Nt]:"fire-analytics-compat",[Lt]:"fire-app-check",[Rt]:"fire-app-check-compat",[Mt]:"fire-auth",[Ft]:"fire-auth-compat",[jt]:"fire-rtdb",[Vt]:"fire-rtdb-compat",[Ut]:"fire-fn",[zt]:"fire-fn-compat",[Bt]:"fire-iid",[qt]:"fire-iid-compat",[Kt]:"fire-fcm",[Gt]:"fire-fcm-compat",[Ht]:"fire-perf",[Wt]:"fire-perf-compat",[Qt]:"fire-rc",[Yt]:"fire-rc-compat",[Xt]:"fire-gcs",[Jt]:"fire-gcs-compat",[$t]:"fire-fst",[Zt]:"fire-fst-compat","fire-js":"fire-js",[en]:"fire-js-all"},rn=new Map,sn=new Map,on=new Map;function an(e,t){try{e.container.addComponent(t)}catch(n){Pt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ln(e,t){e.container.addOrOverwriteComponent(t)}function un(e){const t=e.name;if(on.has(t))return Pt.debug("There were multiple attempts to register component ".concat(t,".")),!1;on.set(t,e);for(const n of rn.values())an(n,e);for(const n of sn.values())an(n,e);return!0}function cn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn;cn(e,t).clearInstance(n)}function dn(e){return void 0!==e.options}function fn(e){return void 0!==e.settings}function pn(){on.clear()}const mn=new Ke("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class gn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ze("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}class yn extends gn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Sn(Ct,Dt,"serverapp")}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Tn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw mn.create("server-app-deleted")}}const vn="10.10.0";function wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:tn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw mn.create("bad-app-name",{appName:String(i)});if(n||(n=Fe()),!n)throw mn.create("no-options");const s=rn.get(i);if(s){if(We(n,s.options)&&We(r,s.config))return s;throw mn.create("duplicate-app",{appName:i})}const o=new nt(i);for(const l of on.values())o.addComponent(l);const a=new gn(n,r,o);return rn.set(i,a),a}function bn(e,t){if(Ue())throw mn.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=dn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw mn.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=sn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new nt(i);for(const u of on.values())a.addComponent(u);const l=new yn(n,t,i,a);return sn.set(i,l),l}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;const t=rn.get(e);if(!t&&e===tn&&Fe())return wn();if(!t)throw mn.create("no-app",{appName:e});return t}function En(){return Array.from(rn.values())}async function Tn(e){let t=!1;const n=e.name;if(rn.has(n))t=!0,rn.delete(n);else if(sn.has(n)){e.decRefCount()<=0&&(sn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Sn(e,t,n){var r;let i=null!==(r=nn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Pt.warn(e.join(" "))}un(new Ze("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function In(e,t){if(null!==e&&"function"!==typeof e)throw mn.create("invalid-log-argument");!function(e,t){for(const n of rt){let r=null;t&&t.level&&(r=st[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:it[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function xn(e){var t;t=e,rt.forEach((e=>{e.setLogLevel(t)}))}const kn="firebase-heartbeat-database",Cn=1,Dn="firebase-heartbeat-store";let Pn=null;function An(){return Pn||(Pn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=_t(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(_t(o.result),e.oldVersion,e.newVersion,_t(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(kn,Cn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Dn)}catch(n){console.warn(n)}}}).catch((e=>{throw mn.create("idb-open",{originalErrorMessage:e.message})}))),Pn}async function Nn(e,t){try{const n=(await An()).transaction(Dn,"readwrite"),r=n.objectStore(Dn);await r.put(t,On(e)),await n.done}catch(n){if(n instanceof qe)Pt.warn(n.message);else{const e=mn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Pt.warn(e.message)}}}function On(e){return"".concat(e.name,"!").concat(e.options.appId)}class Rn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Mn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ln();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ln(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Fn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ne(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ln(){return(new Date).toISOString().substring(0,10)}class Mn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Be()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await An()).transaction(Dn),n=await t.objectStore(Dn).get(On(e));return await t.done,n}catch(t){if(t instanceof qe)Pt.warn(t.message);else{const e=mn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Pt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Fn(e){return Ne(JSON.stringify({version:2,heartbeats:e})).length}var jn;jn="",un(new Ze("platform-logger",(e=>new kt(e)),"PRIVATE")),un(new Ze("heartbeat",(e=>new Rn(e)),"PRIVATE")),Sn(Ct,Dt,jn),Sn(Ct,Dt,"esm2017"),Sn("fire-js","");class Vn{constructor(e,t){this._delegate=e,this.firebase=t,an(e,new Ze("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Tn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){an(this._delegate,e)}_addOrOverwriteComponent(e){ln(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Un=new Ke("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const zn=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=wn(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(He(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:Sn,setLogLevel:xn,onLog:In,apps:null,SDK_VERSION:vn,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(un(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Un.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&Re(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!He(n,e=e||tn))throw Un.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(Vn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Re(n,e)},createSubscribe:Ye,ErrorFactory:Ke,deepExtend:Re}),n}(),Bn=new ut("@firebase/app-compat");if(Ue()&&void 0!==self.firebase){Bn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Bn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qn=zn;!function(e){Sn("@firebase/app-compat","0.2.30",e)}();qn.registerVersion("firebase","10.10.0","app-compat");var Kn,Gn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Hn={},Wn=Wn||{},Qn=Gn||self;function Yn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Jn="closure_uid_"+(1e9*Math.random()>>>0),$n=0;function Zn(e,t,n){return e.call.apply(e.bind,arguments)}function er(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function tr(e,t,n){return(tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zn:er).apply(null,arguments)}function nr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ir(){this.s=this.s,this.o=this.o}ir.prototype.s=!1,ir.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Jn)&&e[Jn]||(e[Jn]=++$n))},ir.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function or(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ar(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Yn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function lr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}lr.prototype.h=function(){this.defaultPrevented=!0};var ur=function(){if(!Qn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Qn.addEventListener("test",e,t),Qn.removeEventListener("test",e,t)}catch(n){}return e}();function cr(e){return/^[\s\xa0]*$/.test(e)}function hr(){var e=Qn.navigator;return e&&(e=e.userAgent)?e:""}function dr(e){return-1!=hr().indexOf(e)}function fr(e){return fr[" "](e),e}fr[" "]=function(){};var pr,mr,gr=dr("Opera"),yr=dr("Trident")||dr("MSIE"),vr=dr("Edge"),wr=vr||yr,br=dr("Gecko")&&!(-1!=hr().toLowerCase().indexOf("webkit")&&!dr("Edge"))&&!(dr("Trident")||dr("MSIE"))&&!dr("Edge"),_r=-1!=hr().toLowerCase().indexOf("webkit")&&!dr("Edge");function Er(){var e=Qn.document;return e?e.documentMode:void 0}e:{var Tr="",Sr=function(){var e=hr();return br?/rv:([^\);]+)(\)|;)/.exec(e):vr?/Edge\/([\d\.]+)/.exec(e):yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):_r?/WebKit\/(\S+)/.exec(e):gr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Sr&&(Tr=Sr?Sr[1]:""),yr){var Ir=Er();if(null!=Ir&&Ir>parseFloat(Tr)){pr=String(Ir);break e}}pr=Tr}if(Qn.document&&yr){var xr=Er();mr=xr||(parseInt(pr,10)||void 0)}else mr=void 0;var kr=mr;function Cr(e,t){if(lr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(br){e:{try{fr(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Dr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Cr.$.h.call(this)}}rr(Cr,lr);var Dr={2:"touch",3:"pen",4:"mouse"};Cr.prototype.h=function(){Cr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Pr="closure_listenable_"+(1e6*Math.random()|0),Ar=0;function Nr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ar,this.fa=this.ia=!1}function Or(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Rr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Lr(e){const t={};for(const n in e)t[n]=e[n];return t}const Mr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Mr.length;t++)n=Mr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function jr(e){this.src=e,this.g={},this.h=0}function Vr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=sr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Or(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ur(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}jr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Ur(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Nr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var zr="closure_lm_"+(1e6*Math.random()|0),Br={};function qr(e,t,n,r,i){if(r&&r.once)return Gr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)qr(e,t[s],n,r,i);return null}return n=$r(n),e&&e[Pr]?e.O(t,n,Xn(r)?!!r.capture:!!r,i):Kr(e,t,n,!1,r,i)}function Kr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Xn(i)?!!i.capture:!!i,a=Xr(e);if(a||(e[zr]=a=new jr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Yr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ur||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Gr(e,t[s],n,r,i);return null}return n=$r(n),e&&e[Pr]?e.P(t,n,Xn(r)?!!r.capture:!!r,i):Kr(e,t,n,!0,r,i)}function Hr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Hr(e,t[s],n,r,i);else r=Xn(r)?!!r.capture:!!r,n=$r(n),e&&e[Pr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ur(s=e.g[t],n,r,i))&&(Or(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Xr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ur(t,n,r,i)),(n=-1<e?t[e]:null)&&Wr(n))}function Wr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Pr])Vr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Xr(t))?(Vr(n,e),0==n.h&&(n.src=null,t[zr]=null)):Or(e)}}}function Qr(e){return e in Br?Br[e]:Br[e]="on"+e}function Yr(e,t){if(e.fa)e=!0;else{t=new Cr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Wr(e),e=n.call(r,t)}return e}function Xr(e){return(e=e[zr])instanceof jr?e:null}var Jr="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(e){return"function"===typeof e?e:(e[Jr]||(e[Jr]=function(t){return e.handleEvent(t)}),e[Jr])}function Zr(){ir.call(this),this.i=new jr(this),this.S=this,this.J=null}function ei(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new lr(t,e);else if(t instanceof lr)t.target=t.target||e;else{var i=t;Fr(t=new lr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ti(o,r,!0,t)&&i}if(i=ti(o=t.g=e,r,!0,t)&&i,i=ti(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ti(o=t.g=n[s],r,!1,t)&&i}function ti(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Vr(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}rr(Zr,ir),Zr.prototype[Pr]=!0,Zr.prototype.removeEventListener=function(e,t,n,r){Hr(this,e,t,n,r)},Zr.prototype.N=function(){if(Zr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Or(n[r]);delete t.g[e],t.h--}}this.J=null},Zr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ni=Qn.JSON.stringify;function ri(){var e=ci;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ii=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new si),(e=>e.reset()));class si{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ai(e){Qn.setTimeout((()=>{throw e}),0)}let li,ui=!1,ci=new class{constructor(){this.h=this.g=null}add(e,t){const n=ii.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},hi=()=>{const e=Qn.Promise.resolve(void 0);li=()=>{e.then(di)}};var di=()=>{for(var e;e=ri();){try{e.h.call(e.g)}catch(n){ai(n)}var t=ii;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ui=!1};function fi(e,t){Zr.call(this),this.h=e||1,this.g=t||Qn,this.j=tr(this.qb,this),this.l=Date.now()}function pi(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function mi(e,t,n){if("function"===typeof e)n&&(e=tr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=tr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Qn.setTimeout(e,t||0)}function gi(e){e.g=mi((()=>{e.g=null,e.i&&(e.i=!1,gi(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}rr(fi,Zr),(Kn=fi.prototype).ga=!1,Kn.T=null,Kn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ei(this,"tick"),this.ga&&(pi(this),this.start()))}},Kn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kn.N=function(){fi.$.N.call(this),pi(this),delete this.g};class yi extends ir{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gi(this)}N(){super.N(),this.g&&(Qn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(e){ir.call(this),this.h=e,this.g={}}rr(vi,ir);var wi=[];function bi(e,t,n,r){Array.isArray(n)||(n&&(wi[0]=n.toString()),n=wi);for(var i=0;i<n.length;i++){var s=qr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function _i(e){Rr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Wr(e)}),e),e.g={}}function Ei(){this.g=!0}function Ti(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ni(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}vi.prototype.N=function(){vi.$.N.call(this),_i(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ei.prototype.Ea=function(){this.g=!1},Ei.prototype.info=function(){};var Si={},Ii=null;function xi(){return Ii=Ii||new Zr}function ki(e){lr.call(this,Si.Ta,e)}function Ci(e){const t=xi();ei(t,new ki(t))}function Di(e,t){lr.call(this,Si.STAT_EVENT,e),this.stat=t}function Pi(e){const t=xi();ei(t,new Di(t,e))}function Ai(e,t){lr.call(this,Si.Ua,e),this.size=t}function Ni(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Qn.setTimeout((function(){e()}),t)}Si.Ta="serverreachability",rr(ki,lr),Si.STAT_EVENT="statevent",rr(Di,lr),Si.Ua="timingevent",rr(Ai,lr);var Oi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ri={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Li(){}function Mi(e){return e.h||(e.h=e.i())}function Fi(){}Li.prototype.h=null;var ji,Vi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ui(){lr.call(this,"d")}function zi(){lr.call(this,"c")}function Bi(){}function qi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new vi(this),this.P=Gi,e=wr?125:void 0,this.V=new fi(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ki}function Ki(){this.i=null,this.g="",this.h=!1}rr(Ui,lr),rr(zi,lr),rr(Bi,Li),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},ji=new Bi;var Gi=45e3,Hi={},Wi={};function Qi(e,t,n){e.L=1,e.A=fs(ls(t)),e.u=n,e.S=!0,Yi(e,null)}function Yi(e,t){e.G=Date.now(),Zi(e),e.B=ls(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),xs(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Ki,e.g=Co(e.l,n?t:null,!e.u),0<e.O&&(e.M=new yi(tr(e.Pa,e,e.g),e.O)),bi(e.U,e.g,"readystatechange",e.nb),t=e.I?Lr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ci(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Xi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ji(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=$i(e,n),r==Wi){4==t&&(e.s=4,Pi(14),i=!1),Ti(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hi){e.s=4,Pi(15),Ti(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ti(e.j,e.m,r,null),is(e,r)}Xi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Pi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),bo(t),t.M=!0,Pi(11))):(Ti(e.j,e.m,n,"[Invalid Chunked Response]"),rs(e),ns(e))}function $i(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Wi:(n=Number(t.substring(n,r)),isNaN(n)?Hi:(r+=1)+n>t.length?Wi:(t=t.slice(r,r+n),e.o=r+n,t))}function Zi(e){e.Y=Date.now()+e.P,es(e,e.P)}function es(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ni(tr(e.lb,e),t)}function ts(e){e.C&&(Qn.clearTimeout(e.C),e.C=null)}function ns(e){0==e.l.H||e.J||To(e.l,e)}function rs(e){ts(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,pi(e.V),_i(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function is(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Os(n.i,e)))if(!e.K&&Os(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Eo(n),ho(n)}wo(n),Pi(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ni(tr(n.ib,n),6e3));if(1>=Ns(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Io(n,11)}else if((e.K||n.g==e)&&Eo(n),!cr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Rs(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ds(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=ko(r,r.J?r.pa:null,r.Y),o.K){Ls(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ts(a),Zi(a)),r.g=o}else vo(r);0<n.j.length&&po(n)}else"stop"!=u[0]&&"close"!=u[0]||Io(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Io(n,7):co(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ci()}catch(u){}}function ss(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Yn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Yn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Yn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Kn=qi.prototype).setTimeout=function(e){this.P=e},Kn.nb=function(e){e=e.target;const t=this.M;t&&3==io(e)?t.l():this.Pa(e)},Kn.Pa=function(e){try{if(e==this.g)e:{const c=io(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||wr||this.g&&(this.h.h||this.g.ja()||so(this.g)))){this.J||4!=c||7==t||Ci(),ts(this);var n=this.g.da();this.ca=n;t:if(Xi(this)){var r=so(this.g);e="";var i=r.length,s=4==io(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rs(this),ns(this);var o="";break t}this.h.i=new Qn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cr(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Pi(12),rs(this),ns(this);break e}Ti(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,n)}this.S?(Ji(this,c,o),wr&&this.i&&3==c&&(bi(this.U,this.V,"tick",this.mb),this.V.start())):(Ti(this.j,this.m,o,null),is(this,o)),4==c&&rs(this),this.i&&!this.J&&(4==c?To(this.l,this):(this.i=!1,Zi(this)))}else(function(e){const t={};e=(e.g&&2<=io(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(cr(e[r]))continue;var n=oi(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Pi(12)):(this.s=0,Pi(13)),rs(this),ns(this)}}}catch(c){}},Kn.mb=function(){if(this.g){var e=io(this.g),t=this.g.ja();this.o<t.length&&(ts(this),Ji(this,e,t),this.i&&4!=e&&Zi(this))}},Kn.cancel=function(){this.J=!0,rs(this)},Kn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ci(),Pi(17)),rs(this),this.s=2,ns(this)):es(this,this.Y-e)};var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function as(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof as){this.h=e.h,us(this,e.j),this.s=e.s,this.g=e.g,cs(this,e.m),this.l=e.l;var t=e.i,n=new Es;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),hs(this,n),this.o=e.o}else e&&(t=String(e).match(os))?(this.h=!1,us(this,t[1]||"",!0),this.s=ps(t[2]||""),this.g=ps(t[3]||"",!0),cs(this,t[4]),this.l=ps(t[5]||"",!0),hs(this,t[6]||"",!0),this.o=ps(t[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}function ls(e){return new as(e)}function us(e,t,n){e.j=n?ps(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function cs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function hs(e,t,n){t instanceof Es?(e.i=t,function(e,t){t&&!e.j&&(Ts(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ss(this,t),xs(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ms(t,bs)),e.i=new Es(t,e.h))}function ds(e,t,n){e.i.set(t,n)}function fs(e){return ds(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ps(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ms(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}as.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ms(t,ys,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ms(t,ys,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ms(n,"/"==n.charAt(0)?ws:vs,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ms(n,_s)),e.join("")};var ys=/[#\/\?@]/g,vs=/[#\?:]/g,ws=/[#\?]/g,bs=/[#\?@]/g,_s=/#/g;function Es(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ts(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ss(e,t){Ts(e),t=ks(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Is(e,t){return Ts(e),t=ks(e,t),e.g.has(t)}function xs(e,t,n){Ss(e,t),0<n.length&&(e.i=null,e.g.set(ks(e,t),or(n)),e.h+=n.length)}function ks(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Kn=Es.prototype).add=function(e,t){Ts(this),this.i=null,e=ks(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Kn.forEach=function(e,t){Ts(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Kn.ta=function(){Ts(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Kn.Z=function(e){Ts(this);let t=[];if("string"===typeof e)Is(this,e)&&(t=t.concat(this.g.get(ks(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Kn.set=function(e,t){return Ts(this),this.i=null,Is(this,e=ks(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Kn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Kn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Cs=class{constructor(e,t){this.g=e,this.map=t}};function Ds(e){this.l=e||Ps,Qn.PerformanceNavigationTiming?e=0<(e=Qn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Qn.g&&Qn.g.Ka&&Qn.g.Ka()&&Qn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ps=10;function As(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ns(e){return e.h?1:e.g?e.g.size:0}function Os(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Rs(e,t){e.g?e.g.add(t):e.h=t}function Ls(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ms(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return or(e.i)}Ds.prototype.cancel=function(){if(this.i=Ms(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Fs,js=class{stringify(e){return Qn.JSON.stringify(e,void 0)}parse(e){return Qn.JSON.parse(e,void 0)}};function Vs(){this.g=new js}function Us(e,t,n){const r=n||"";try{ss(e,(function(e,n){let i=e;Xn(e)&&(i=ni(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Bs(e){this.l=e.ec||null,this.j=e.ob||!1}function qs(e,t){Zr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ks,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rr(Bs,Li),Bs.prototype.g=function(){return new qs(this.l,this.j)},Bs.prototype.i=(Fs={},function(){return Fs}),rr(qs,Zr);var Ks=0;function Gs(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Hs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ws(e)}function Ws(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Kn=qs.prototype).open=function(e,t){if(this.readyState!=Ks)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ws(this)},Kn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Qn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Kn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hs(this)),this.readyState=Ks},Kn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Qn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gs(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Kn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hs(this):Ws(this),3==this.readyState&&Gs(this)}},Kn.Za=function(e){this.g&&(this.response=this.responseText=e,Hs(this))},Kn.Ya=function(e){this.g&&(this.response=e,Hs(this))},Kn.ka=function(){this.g&&Hs(this)},Kn.setRequestHeader=function(e,t){this.v.append(e,t)},Kn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Kn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qs=Qn.JSON.parse;function Ys(e){Zr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Xs,this.L=this.M=!1}rr(Ys,Zr);var Xs="",Js=/^https?$/i,$s=["POST","PUT"];function Zs(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,eo(e),no(e)}function eo(e){e.F||(e.F=!0,ei(e,"complete"),ei(e,"error"))}function to(e){if(e.h&&"undefined"!=typeof Wn&&(!e.C[1]||4!=io(e)||2!=e.da()))if(e.v&&4==io(e))mi(e.La,0,e);else if(ei(e,"readystatechange"),4==io(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(os)[1]||null;!i&&Qn.self&&Qn.self.location&&(i=Qn.self.location.protocol.slice(0,-1)),r=!Js.test(i?i.toLowerCase():"")}n=r}if(n)ei(e,"complete"),ei(e,"success");else{e.m=6;try{var s=2<io(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",eo(e)}}finally{no(e)}}}function no(e,t){if(e.g){ro(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ei(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ro(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Qn.clearTimeout(e.A),e.A=null)}function io(e){return e.g?e.g.readyState:0}function so(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Xs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(fa){return null}}function oo(e){let t="";return Rr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ao(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ds(e,t,n))}function lo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function uo(e){this.Ga=0,this.j=[],this.l=new Ei,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=lo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=lo("baseRetryDelayMs",5e3,e),this.hb=lo("retryDelaySeedMs",1e4,e),this.eb=lo("forwardChannelMaxRetries",2,e),this.xa=lo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ds(e&&e.concurrentRequestLimit),this.Ja=new Vs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function co(e){if(fo(e),3==e.H){var t=e.W++,n=ls(e.I);if(ds(n,"SID",e.K),ds(n,"RID",t),ds(n,"TYPE","terminate"),go(e,n),(t=new qi(e,e.l,t)).L=2,t.A=fs(ls(n)),n=!1,Qn.navigator&&Qn.navigator.sendBeacon)try{n=Qn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Qn.Image&&((new Image).src=t.A,n=!0),n||(t.g=Co(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Zi(t)}xo(e)}function ho(e){e.g&&(bo(e),e.g.cancel(),e.g=null)}function fo(e){ho(e),e.u&&(Qn.clearTimeout(e.u),e.u=null),Eo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Qn.clearTimeout(e.m),e.m=null)}function po(e){if(!As(e.i)&&!e.m){e.m=!0;var t=e.Na;li||hi(),ui||(li(),ui=!0),ci.add(t,e),e.C=0}}function mo(e,t){var n;n=t?t.m:e.W++;const r=ls(e.I);ds(r,"SID",e.K),ds(r,"RID",n),ds(r,"AID",e.V),go(e,r),e.o&&e.s&&ao(r,e.o,e.s),n=new qi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=yo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Rs(e.i,n),Qi(n,r,t)}function go(e,t){e.na&&Rr(e.na,(function(e,n){ds(t,n,e)})),e.h&&ss({},(function(e,n){ds(t,n,e)}))}function yo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?tr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Us(a,e,"req"+n+"_")}catch(Dl){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function vo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;li||hi(),ui||(li(),ui=!0),ci.add(t,e),e.A=0}}function wo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ni(tr(e.Ma,e),So(e,e.A)),e.A++,!0)}function bo(e){null!=e.B&&(Qn.clearTimeout(e.B),e.B=null)}function _o(e){e.g=new qi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ls(e.wa);ds(t,"RID","rpc"),ds(t,"SID",e.K),ds(t,"AID",e.V),ds(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ds(t,"TO",e.qa),ds(t,"TYPE","xmlhttp"),go(e,t),e.o&&e.s&&ao(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=fs(ls(t)),n.u=null,n.S=!0,Yi(n,e)}function Eo(e){null!=e.v&&(Qn.clearTimeout(e.v),e.v=null)}function To(e,t){var n=null;if(e.g==t){Eo(e),bo(e),e.g=null;var r=2}else{if(!Os(e.i,t))return;n=t.F,Ls(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ei(r=xi(),new Ai(r,n)),po(e)}else vo(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ns(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ni(tr(e.Na,e,t),So(e,e.C)),e.C++,!0))}(e,t)||2==r&&wo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Io(e,5);break;case 4:Io(e,10);break;case 3:Io(e,6);break;default:Io(e,2)}}function So(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Io(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=tr(e.pb,e);n||(n=new as("//www.google.com/images/cleardot.gif"),Qn.location&&"http"==Qn.location.protocol||us(n,"https"),fs(n)),function(e,t){const n=new Ei;if(Qn.Image){const r=new Image;r.onload=nr(zs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=nr(zs,n,r,"TestLoadImage: error",!1,t),r.onabort=nr(zs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=nr(zs,n,r,"TestLoadImage: timeout",!1,t),Qn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Pi(2);e.H=0,e.h&&e.h.za(t),xo(e),fo(e)}function xo(e){if(e.H=0,e.ma=[],e.h){const t=Ms(e.i);0==t.length&&0==e.j.length||(ar(e.ma,t),ar(e.ma,e.j),e.i.i.length=0,or(e.j),e.j.length=0),e.h.ya()}}function ko(e,t,n){var r=n instanceof as?ls(n):new as(n);if(""!=r.g)t&&(r.g=t+"."+r.g),cs(r,r.m);else{var i=Qn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new as(null);r&&us(s,r),t&&(s.g=t),i&&cs(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ds(r,n,t),ds(r,"VER",e.ra),go(e,r),r}function Co(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Ys(new Bs({ob:n})):new Ys(e.va)).Oa(e.J),t}function Do(){}function Po(){if(yr&&!(10<=Number(kr)))throw Error("Environmental error: no available transport.")}function Ao(e,t){Zr.call(this),this.g=new uo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!cr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!cr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ro(this)}function No(e){Ui.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Oo(){zi.call(this),this.status=1}function Ro(e){this.g=e}function Lo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Mo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Fo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Kn=Ys.prototype).Oa=function(e){this.M=e},Kn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ji.g(),this.C=this.u?Mi(this.u):Mi(ji),this.g.onreadystatechange=tr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Zs(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Qn.FormData&&e instanceof Qn.FormData,!(0<=sr($s,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ro(this),0<this.B&&((this.L=function(e){return yr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tr(this.ua,this)):this.A=mi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Zs(this,s)}},Kn.ua=function(){"undefined"!=typeof Wn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},Kn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ei(this,"complete"),ei(this,"abort"),no(this))},Kn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),no(this,!0)),Ys.$.N.call(this)},Kn.La=function(){this.s||(this.G||this.v||this.l?to(this):this.kb())},Kn.kb=function(){to(this)},Kn.isActive=function(){return!!this.g},Kn.da=function(){try{return 2<io(this)?this.g.status:-1}catch(Fs){return-1}},Kn.ja=function(){try{return this.g?this.g.responseText:""}catch(Fs){return""}},Kn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qs(t)}},Kn.Ia=function(){return this.m},Kn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Kn=uo.prototype).ra=8,Kn.H=1,Kn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new qi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Lr(s),Fr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=yo(this,i,t),ds(n=ls(this.I),"RID",e),ds(n,"CVER",22),this.F&&ds(n,"X-HTTP-Session-Id",this.F),go(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(oo(s)))+"&"+t:this.o&&ao(n,this.o,s)),Rs(this.i,i),this.bb&&ds(n,"TYPE","init"),this.P?(ds(n,"$req",t),ds(n,"SID","null"),i.aa=!0,Qi(i,n,null)):Qi(i,n,t),this.H=2}}else 3==this.H&&(e?mo(this,e):0==this.j.length||As(this.i)||mo(this))},Kn.Ma=function(){if(this.u=null,_o(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ni(tr(this.jb,this),e)}},Kn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Pi(10),ho(this),_o(this))},Kn.ib=function(){null!=this.v&&(this.v=null,ho(this),wo(this),Pi(19))},Kn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Pi(2)):(this.l.info("Failed to ping google.com"),Pi(1))},Kn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Kn=Do.prototype).Ba=function(){},Kn.Aa=function(){},Kn.za=function(){},Kn.ya=function(){},Kn.isActive=function(){return!0},Kn.Va=function(){},Po.prototype.g=function(e,t){return new Ao(e,t)},rr(Ao,Zr),Ao.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Pi(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ko(e,null,e.Y),po(e)},Ao.prototype.close=function(){co(this.g)},Ao.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ni(e),e=n);t.j.push(new Cs(t.fb++,e)),3==t.H&&po(t)},Ao.prototype.N=function(){this.g.h=null,delete this.j,co(this.g),delete this.g,Ao.$.N.call(this)},rr(No,Ui),rr(Oo,zi),rr(Ro,Do),Ro.prototype.Ba=function(){ei(this.g,"a")},Ro.prototype.Aa=function(e){ei(this.g,new No(e))},Ro.prototype.za=function(e){ei(this.g,new Oo)},Ro.prototype.ya=function(){ei(this.g,"b")},rr(Lo,(function(){this.blockSize=-1})),Lo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Mo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Mo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Mo(this,r),i=0;break}}this.h=i,this.i+=t},Lo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var jo={};function Vo(e){return-128<=e&&128>e?function(e,t){var n=jo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Fo([0|e],0>e?-1:0)})):new Fo([0|e],0>e?-1:0)}function Uo(e){if(isNaN(e)||!isFinite(e))return Bo;if(0>e)return Wo(Uo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=zo;return new Fo(t,0)}var zo=4294967296,Bo=Vo(0),qo=Vo(1),Ko=Vo(16777216);function Go(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ho(e){return-1==e.h}function Wo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Fo(n,~e.h).add(qo)}function Qo(e,t){return e.add(Wo(t))}function Yo(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xo(e,t){this.g=e,this.h=t}function Jo(e,t){if(Go(t))throw Error("division by zero");if(Go(e))return new Xo(Bo,Bo);if(Ho(e))return t=Jo(Wo(e),t),new Xo(Wo(t.g),Wo(t.h));if(Ho(t))return t=Jo(e,Wo(t)),new Xo(Wo(t.g),t.h);if(30<e.g.length){if(Ho(e)||Ho(t))throw Error("slowDivide_ only works with positive integers.");for(var n=qo,r=t;0>=r.X(e);)n=$o(n),r=$o(r);var i=Zo(n,1),s=Zo(r,1);for(r=Zo(r,2),n=Zo(n,2);!Go(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Zo(r,1),n=Zo(n,1)}return t=Qo(e,i.R(t)),new Xo(i,t)}for(i=Bo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Uo(n)).R(t);Ho(o)||0<o.X(e);)o=(s=Uo(n-=r)).R(t);Go(s)&&(s=qo),i=i.add(s),e=Qo(e,o)}return new Xo(i,e)}function $o(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Fo(n,e.h)}function Zo(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Fo(i,e.h)}(Kn=Fo.prototype).ea=function(){if(Ho(this))return-Wo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:zo+r)*t,t*=zo}return e},Kn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Go(this))return"0";if(Ho(this))return"-"+Wo(this).toString(e);for(var t=Uo(Math.pow(e,6)),n=this,r="";;){var i=Jo(n,t).g,s=((0<(n=Qo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Go(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Kn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Kn.X=function(e){return Ho(e=Qo(this,e))?-1:Go(e)?0:1},Kn.abs=function(){return Ho(this)?Wo(this):this},Kn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Fo(n,-2147483648&n[n.length-1]?-1:0)},Kn.R=function(e){if(Go(this)||Go(e))return Bo;if(Ho(this))return Ho(e)?Wo(this).R(Wo(e)):Wo(Wo(this).R(e));if(Ho(e))return Wo(this.R(Wo(e)));if(0>this.X(Ko)&&0>e.X(Ko))return Uo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Yo(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Yo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Yo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Yo(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Fo(n,0)},Kn.gb=function(e){return Jo(this,e).h},Kn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Fo(n,this.h&e.h)},Kn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Fo(n,this.h|e.h)},Kn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Fo(n,this.h^e.h)},Po.prototype.createWebChannel=Po.prototype.g,Ao.prototype.send=Ao.prototype.u,Ao.prototype.open=Ao.prototype.m,Ao.prototype.close=Ao.prototype.close,Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,Ri.COMPLETE="complete",Fi.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",Zr.prototype.listen=Zr.prototype.O,Ys.prototype.listenOnce=Ys.prototype.P,Ys.prototype.getLastError=Ys.prototype.Sa,Ys.prototype.getLastErrorCode=Ys.prototype.Ia,Ys.prototype.getStatus=Ys.prototype.da,Ys.prototype.getResponseJson=Ys.prototype.Wa,Ys.prototype.getResponseText=Ys.prototype.ja,Ys.prototype.send=Ys.prototype.ha,Ys.prototype.setWithCredentials=Ys.prototype.Oa,Lo.prototype.digest=Lo.prototype.l,Lo.prototype.reset=Lo.prototype.reset,Lo.prototype.update=Lo.prototype.j,Fo.prototype.add=Fo.prototype.add,Fo.prototype.multiply=Fo.prototype.R,Fo.prototype.modulo=Fo.prototype.gb,Fo.prototype.compare=Fo.prototype.X,Fo.prototype.toNumber=Fo.prototype.ea,Fo.prototype.toString=Fo.prototype.toString,Fo.prototype.getBits=Fo.prototype.D,Fo.fromNumber=Uo,Fo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Wo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Uo(Math.pow(n,8)),i=Bo,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Uo(Math.pow(n,o)),i=i.R(o).add(Uo(a))):i=(i=i.R(r)).add(Uo(a))}return i};var ea=Hn.createWebChannelTransport=function(){return new Po},ta=Hn.getStatEventTarget=function(){return xi()},na=Hn.ErrorCode=Oi,ra=Hn.EventType=Ri,ia=Hn.Event=Si,sa=Hn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oa=(Hn.FetchXmlHttpFactory=Bs,Hn.WebChannel=Fi),aa=Hn.XhrIo=Ys,la=Hn.Md5=Lo,ua=Hn.Integer=Fo;const ca="@firebase/firestore";class ha{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ha.UNAUTHENTICATED=new ha(null),ha.GOOGLE_CREDENTIALS=new ha("google-credentials-uid"),ha.FIRST_PARTY=new ha("first-party-uid"),ha.MOCK_USER=new ha("mock-user");let da="10.10.0";const fa=new ut("@firebase/firestore");function pa(){return fa.logLevel}function ma(e){if(fa.logLevel<=it.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.debug("Firestore (".concat(da,"): ").concat(e),...i)}}function ga(e){if(fa.logLevel<=it.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.error("Firestore (".concat(da,"): ").concat(e),...i)}}function ya(e){if(fa.logLevel<=it.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.warn("Firestore (".concat(da,"): ").concat(e),...i)}}function va(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function wa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(da,") INTERNAL ASSERTION FAILED: ")+e;throw ga(t),new Error(t)}function ba(e,t){e||wa()}function _a(e,t){return e}const Ea={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ta extends qe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Sa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ia{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ha.UNAUTHENTICATED)))}shutdown(){}}class ka{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ca{constructor(e){this.t=e,this.currentUser=ha.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Sa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{ma("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ma("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ma("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ba("string"==typeof t.accessToken),new Ia(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ba(null===e||"string"==typeof e),new ha(e)}}class Da{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ha.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Pa{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Da(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ha.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Aa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Na{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&ma("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ma("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ma("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ma("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ba("string"==typeof e.token),this.R=e.token,new Aa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Oa(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ra{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Oa(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function La(e,t){return e<t?-1:e>t?1:0}function Ma(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Fa(e){return e+"\0"}class ja{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ja.fromMillis(Date.now())}static fromDate(e){return ja.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ja(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?La(this.nanoseconds,e.nanoseconds):La(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Va{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Va(e)}static min(){return new Va(new ja(0,0))}static max(){return new Va(new ja(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ua{constructor(e,t,n){void 0===t?t=0:t>e.length&&wa(),void 0===n?n=e.length-t:n>e.length-t&&wa(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ua.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class za extends Ua{construct(e,t,n){return new za(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new za(e)}static emptyPath(){return new za([])}}const Ba=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qa extends Ua{construct(e,t,n){return new qa(e,t,n)}static isValidIdentifier(e){return Ba.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ta(Ea.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ta(Ea.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ta(Ea.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qa(t)}static emptyPath(){return new qa([])}}class Ka{constructor(e){this.path=e}static fromPath(e){return new Ka(za.fromString(e))}static fromName(e){return new Ka(za.fromString(e).popFirst(5))}static empty(){return new Ka(za.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===za.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return za.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ka(new za(e.slice()))}}class Ga{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ha(e){return e.fields.find((e=>2===e.kind))}function Wa(e){return e.fields.filter((e=>2!==e.kind))}Ga.UNKNOWN_ID=-1;class Qa{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ya{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ya(0,$a.min())}}function Xa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Va.fromTimestamp(1e9===r?new ja(n+1,0):new ja(n,r));return new $a(i,Ka.empty(),t)}function Ja(e){return new $a(e.readTime,e.key,-1)}class $a{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new $a(Va.min(),Ka.empty(),-1)}static max(){return new $a(Va.max(),Ka.empty(),-1)}}function Za(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ka.comparator(e.documentKey,t.documentKey),0!==n?n:La(e.largestBatchId,t.largestBatchId))}const el="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nl(e){if(e.code!==Ea.FAILED_PRECONDITION||e.message!==el)throw e;ma("LocalStore","Unexpectedly lost primary lease")}class rl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof rl?t:rl.resolve(t)}catch(e){return rl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):rl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):rl.reject(t)}static resolve(e){return new rl(((t,n)=>{t(e)}))}static reject(e){return new rl(((t,n)=>{n(e)}))}static waitFor(e){return new rl(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=rl.resolve(!1);for(const n of e)t=t.next((e=>e?rl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new rl(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new rl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class il{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Sa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new al(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=dl(t.target.error);this.V.reject(new al(e,n))}}static open(e,t,n,r){try{return new il(t,e.transaction(r,n))}catch(e){throw new al(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ma("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ul(t)}}class sl{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===sl.S(Ve())&&ga("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ma("SimpleDb","Removing database:",e),cl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Be())return!1;if(sl.C())return!0;const e=Ve(),t=sl.S(e),n=0<t&&t<10,r=sl.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(ma("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new al(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Ta(Ea.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ta(Ea.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new al(e,r))},r.onupgradeneeded=e=>{ma("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{ma("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=il.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),rl.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(ma("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ol{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return cl(this.k.delete())}}class al extends Ta{constructor(e,t){super(Ea.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function ll(e){return"IndexedDbTransactionError"===e.name}class ul{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ma("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ma("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cl(n)}add(e){return ma("SimpleDb","ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next((t=>(void 0===t&&(t=null),ma("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ma("SimpleDb","DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return ma("SimpleDb","COUNT",this.store.name),cl(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new rl(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new rl(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){ma("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new rl(((n,r)=>{t.onerror=e=>{const t=dl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new rl(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ol(i),o=t(i.primaryKey,i.value,s);if(o instanceof rl){const e=o.catch((e=>(s.done(),rl.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>rl.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(e){return new rl(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=dl(e.target.error);n(t)}}))}let hl=!1;function dl(e){const t=sl.S(Ve());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ta("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return hl||(hl=!0,setTimeout((()=>{throw e}),0)),e}}return e}class fl{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){ma("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ma("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){ll(e)?ma("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await nl(e)}await this.ee(6e4)}))}}class pl{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return rl.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return ma("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(ma("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ja(t);Za(r,n)>0&&(n=r)})),new $a(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ml{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function gl(e){return null==e}function yl(e){return 0===e&&1/e==-1/0}function vl(e){return"number"==typeof e&&Number.isInteger(e)&&!yl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function wl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=_l(t)),t=bl(e.get(n),t);return _l(t)}function bl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function _l(e){return e+"\x01\x01"}function El(e){const t=e.length;if(ba(t>=2),2===t)return ba("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),za.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&wa(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:wa()}s=t+2}return new za(r)}ml._e=-1;const Tl=["userId","batchId"];function Sl(e,t){return[e,wl(t)]}function Il(e,t,n){return[e,wl(t),n]}const xl={},kl=["prefixPath","collectionGroup","readTime","documentId"],Cl=["prefixPath","collectionGroup","documentId"],Dl=["collectionGroup","readTime","prefixPath","documentId"],Pl=["canonicalId","targetId"],Al=["targetId","path"],Nl=["path","targetId"],Ol=["collectionId","parent"],Rl=["indexId","uid"],Ll=["uid","sequenceNumber"],Ml=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fl=["indexId","uid","orderedDocumentKey"],jl=["userId","collectionPath","documentId"],Vl=["userId","collectionPath","largestBatchId"],Ul=["userId","collectionGroup","largestBatchId"],zl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bl=[...zl,"documentOverlays"],ql=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kl=ql,Gl=[...Kl,"indexConfiguration","indexState","indexEntries"];class Hl extends tl{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Wl(e,t){const n=_a(e);return sl.M(n.ae,t)}function Ql(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Jl{constructor(e,t){this.comparator=e,this.root=t||Zl.EMPTY}insert(e,t){return new Jl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zl.BLACK,null,null))}remove(e){return new Jl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Zl.RED,this.left=null!=r?r:Zl.EMPTY,this.right=null!=i?i:Zl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Zl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Zl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wa();if(this.right.isRed())throw wa();const e=this.left.check();if(e!==this.right.check())throw wa();return e+(this.isRed()?0:1)}}Zl.EMPTY=null,Zl.RED=!0,Zl.BLACK=!1,Zl.EMPTY=new class{constructor(){this.size=0}get key(){throw wa()}get value(){throw wa()}get color(){throw wa()}get left(){throw wa()}get right(){throw wa()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Zl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class eu{constructor(e){this.comparator=e,this.data=new Jl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tu(this.data.getIterator())}getIteratorFrom(e){return new tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof eu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new eu(this.comparator);return t.data=e,t}}class tu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nu(e){return e.hasNext()?e.getNext():void 0}class ru{constructor(e){this.fields=e,e.sort(qa.comparator)}static empty(){return new ru([])}unionWith(e){let t=new eu(qa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ru(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class iu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class su{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new iu("Invalid base64 string: "+e):e}}(e);return new su(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new su(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return La(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}su.EMPTY_BYTE_STRING=new su("");const ou=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function au(e){if(ba(!!e),"string"==typeof e){let t=0;const n=ou.exec(e);if(ba(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:lu(e.seconds),nanos:lu(e.nanos)}}function lu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uu(e){return"string"==typeof e?su.fromBase64String(e):su.fromUint8Array(e)}function cu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hu(e){const t=e.mapValue.fields.__previous_value__;return cu(t)?hu(t):t}function du(e){const t=au(e.mapValue.fields.__local_write_time__.timestampValue);return new ja(t.seconds,t.nanos)}class fu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class pu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}const mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gu={nullValue:"NULL_VALUE"};function yu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cu(e)?4:Au(e)?9007199254740991:10:wa()}function vu(e,t){if(e===t)return!0;const n=yu(e);if(n!==yu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return du(e).isEqual(du(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=au(e.timestampValue),r=au(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uu(e.bytesValue).isEqual(uu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lu(e.geoPointValue.latitude)===lu(t.geoPointValue.latitude)&&lu(e.geoPointValue.longitude)===lu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lu(e.integerValue)===lu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=lu(e.doubleValue),r=lu(t.doubleValue);return n===r?yl(n)===yl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ma(e.arrayValue.values||[],t.arrayValue.values||[],vu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ql(n)!==Ql(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vu(n[i],r[i])))return!1;return!0}(e,t);default:return wa()}}function wu(e,t){return void 0!==(e.values||[]).find((e=>vu(e,t)))}function bu(e,t){if(e===t)return 0;const n=yu(e),r=yu(t);if(n!==r)return La(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return La(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=lu(e.integerValue||e.doubleValue),r=lu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _u(e.timestampValue,t.timestampValue);case 4:return _u(du(e),du(t));case 5:return La(e.stringValue,t.stringValue);case 6:return function(e,t){const n=uu(e),r=uu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=La(n[i],r[i]);if(0!==e)return e}return La(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=La(lu(e.latitude),lu(t.latitude));return 0!==n?n:La(lu(e.longitude),lu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=bu(n[i],r[i]);if(e)return e}return La(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===mu.mapValue&&t===mu.mapValue)return 0;if(e===mu.mapValue)return 1;if(t===mu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=La(r[o],s[o]);if(0!==e)return e;const t=bu(n[r[o]],i[s[o]]);if(0!==t)return t}return La(r.length,s.length)}(e.mapValue,t.mapValue);default:throw wa()}}function _u(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return La(e,t);const n=au(e),r=au(t),i=La(n.seconds,r.seconds);return 0!==i?i:La(n.nanos,r.nanos)}function Eu(e){return Tu(e)}function Tu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=au(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return uu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ka.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Tu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Tu(e.fields[i]));return n+"}"}(e.mapValue):wa()}function Su(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Iu(e){return!!e&&"integerValue"in e}function xu(e){return!!e&&"arrayValue"in e}function ku(e){return!!e&&"nullValue"in e}function Cu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Du(e){return!!e&&"mapValue"in e}function Pu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Pu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Pu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Au(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nu(e){return"nullValue"in e?gu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Su(pu.empty(),Ka.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:wa()}function Ou(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Su(pu.empty(),Ka.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?mu:wa()}function Ru(e,t){const n=bu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Lu(e,t){const n=bu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Mu{constructor(e){this.value=e}static empty(){return new Mu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Du(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=qa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Pu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Du(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Du(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Yl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Mu(Pu(this.value))}}function Fu(e){const t=[];return Yl(e.fields,((e,n)=>{const r=new qa([e]);if(Du(n)){const e=Fu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ru(t)}class ju{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ju(e,0,Va.min(),Va.min(),Va.min(),Mu.empty(),0)}static newFoundDocument(e,t,n,r){return new ju(e,1,t,Va.min(),n,r,0)}static newNoDocument(e,t){return new ju(e,2,t,Va.min(),Va.min(),Mu.empty(),0)}static newUnknownDocument(e,t){return new ju(e,3,t,Va.min(),Va.min(),Mu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Va.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Va.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ju&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ju(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Vu{constructor(e,t){this.position=e,this.inclusive=t}}function Uu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ka.comparator(Ka.fromName(o.referenceValue),n.key):bu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function zu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vu(e.position[n],t.position[n]))return!1;return!0}class Bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function qu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ku{}class Gu extends Ku{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new tc(e,t,n):"array-contains"===t?new sc(e,n):"in"===t?new oc(e,n):"not-in"===t?new ac(e,n):"array-contains-any"===t?new lc(e,n):new Gu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new nc(e,n):new rc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bu(t,this.value)):null!==t&&yu(this.value)===yu(t)&&this.matchesComparison(bu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hu extends Ku{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Hu(e,t)}matches(e){return Wu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Wu(e){return"and"===e.op}function Qu(e){return"or"===e.op}function Yu(e){return Xu(e)&&Wu(e)}function Xu(e){for(const t of e.filters)if(t instanceof Hu)return!1;return!0}function Ju(e){if(e instanceof Gu)return e.field.canonicalString()+e.op.toString()+Eu(e.value);if(Yu(e))return e.filters.map((e=>Ju(e))).join(",");{const t=e.filters.map((e=>Ju(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function $u(e,t){return e instanceof Gu?function(e,t){return t instanceof Gu&&e.op===t.op&&e.field.isEqual(t.field)&&vu(e.value,t.value)}(e,t):e instanceof Hu?function(e,t){return t instanceof Hu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&$u(n,t.filters[r])),!0)}(e,t):void wa()}function Zu(e,t){const n=e.filters.concat(t);return Hu.create(n,e.op)}function ec(e){return e instanceof Gu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Eu(e.value))}(e):e instanceof Hu?function(e){return e.op.toString()+" {"+e.getFilters().map(ec).join(" ,")+"}"}(e):"Filter"}class tc extends Gu{constructor(e,t,n){super(e,t,n),this.key=Ka.fromName(n.referenceValue)}matches(e){const t=Ka.comparator(e.key,this.key);return this.matchesComparison(t)}}class nc extends Gu{constructor(e,t){super(e,"in",t),this.keys=ic("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rc extends Gu{constructor(e,t){super(e,"not-in",t),this.keys=ic("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ic(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ka.fromName(e.referenceValue)))}class sc extends Gu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xu(t)&&wu(t.arrayValue,this.value)}}class oc extends Gu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wu(this.value.arrayValue,t)}}class ac extends Gu{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wu(this.value.arrayValue,t)}}class lc extends Gu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>wu(this.value.arrayValue,e)))}}class uc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function cc(e){return new uc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hc(e){const t=_a(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ju(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),gl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Eu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Eu(e))).join(",")),t.ce=e}return t.ce}function dc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$u(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zu(e.startAt,t.startAt)&&zu(e.endAt,t.endAt)}function fc(e){return Ka.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function pc(e,t){return e.filters.filter((e=>e instanceof Gu&&e.field.isEqual(t)))}function mc(e,t,n){let r=gu,i=!0;for(const s of pc(e,t)){let e=gu,t=!0;switch(s.op){case"<":case"<=":e=Nu(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=gu}Ru({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ru({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function gc(e,t,n){let r=mu,i=!0;for(const s of pc(e,t)){let e=mu,t=!0;switch(s.op){case">=":case">":e=Ou(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=mu}Lu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Lu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class yc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function vc(e,t,n,r,i,s,o,a){return new yc(e,t,n,r,i,s,o,a)}function wc(e){return new yc(e)}function bc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _c(e){return null!==e.collectionGroup}function Ec(e){const t=_a(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new eu(qa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Bu(r,n))})),e.has(qa.keyField().canonicalString())||t.le.push(new Bu(qa.keyField(),n))}return t.le}function Tc(e){const t=_a(e);return t.he||(t.he=Sc(t,Ec(e))),t.he}function Sc(e,t){if("F"===e.limitType)return cc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Bu(e.field,t)}));const n=e.endAt?new Vu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vu(e.startAt.position,e.startAt.inclusive):null;return cc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ic(e,t){const n=e.filters.concat([t]);return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xc(e,t,n){return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function kc(e,t){return dc(Tc(e),Tc(t))&&e.limitType===t.limitType}function Cc(e){return"".concat(hc(Tc(e)),"|lt:").concat(e.limitType)}function Dc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ec(e))).join(", "),"]")),gl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Eu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Eu(e))).join(",")),"Target(".concat(t,")")}(Tc(e)),"; limitType=").concat(e.limitType,")")}function Pc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ka.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ec(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Uu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ec(e),t))&&!(e.endAt&&!function(e,t,n){const r=Uu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ec(e),t))}(e,t)}function Ac(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Nc(e){return(t,n)=>{let r=!1;for(const i of Ec(e)){const e=Oc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Oc(e,t,n){const r=e.field.isKeyField()?Ka.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bu(r,i):wa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wa()}}class Rc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Xl(this.inner)}size(){return this.innerSize}}const Lc=new Jl(Ka.comparator);function Mc(){return Lc}const Fc=new Jl(Ka.comparator);function jc(){let e=Fc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Vc(e){let t=Fc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Uc(){return Bc()}function zc(){return Bc()}function Bc(){return new Rc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const qc=new Jl(Ka.comparator),Kc=new eu(Ka.comparator);function Gc(){let e=Kc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Hc=new eu(La);function Wc(){return Hc}function Qc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(t)?"-0":t}}function Yc(e){return{integerValue:""+e}}function Xc(e,t){return vl(t)?Yc(t):Qc(e,t)}class Jc{constructor(){this._=void 0}}function $c(e,t,n){return e instanceof th?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&cu(t)&&(t=hu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nh?rh(e,t):e instanceof ih?sh(e,t):function(e,t){const n=eh(e,t),r=ah(n)+ah(e.Ie);return Iu(n)&&Iu(e.Ie)?Yc(r):Qc(e.serializer,r)}(e,t)}function Zc(e,t,n){return e instanceof nh?rh(e,t):e instanceof ih?sh(e,t):n}function eh(e,t){return e instanceof oh?function(e){return Iu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class th extends Jc{}class nh extends Jc{constructor(e){super(),this.elements=e}}function rh(e,t){const n=lh(t);for(const r of e.elements)n.some((e=>vu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ih extends Jc{constructor(e){super(),this.elements=e}}function sh(e,t){let n=lh(t);for(const r of e.elements)n=n.filter((e=>!vu(e,r)));return{arrayValue:{values:n}}}class oh extends Jc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ah(e){return lu(e.integerValue||e.doubleValue)}function lh(e){return xu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class uh{constructor(e,t){this.field=e,this.transform=t}}class ch{constructor(e,t){this.version=e,this.transformResults=t}}class hh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hh}static exists(e){return new hh(void 0,e)}static updateTime(e){return new hh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class fh{}function ph(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sh(e.key,hh.none()):new wh(e.key,e.data,hh.none());{const n=e.data,r=Mu.empty();let i=new eu(qa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new bh(e.key,r,new ru(i.toArray()),hh.none())}}function mh(e,t,n){e instanceof wh?function(e,t,n){const r=e.value.clone(),i=Eh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bh?function(e,t,n){if(!dh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Eh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_h(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gh(e,t,n,r){return e instanceof wh?function(e,t,n,r){if(!dh(e.precondition,t))return n;const i=e.value.clone(),s=Th(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bh?function(e,t,n,r){if(!dh(e.precondition,t))return n;const i=Th(e.fieldTransforms,r,t),s=t.data;return s.setAll(_h(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return dh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function yh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=eh(r.transform,e||null);null!=i&&(null===n&&(n=Mu.empty()),n.set(r.field,i))}return n||null}function vh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ma(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nh&&t instanceof nh||e instanceof ih&&t instanceof ih?Ma(e.elements,t.elements,vu):e instanceof oh&&t instanceof oh?vu(e.Ie,t.Ie):e instanceof th&&t instanceof th}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wh extends fh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bh extends fh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _h(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Eh(e,t,n){const r=new Map;ba(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Zc(o,a,n[i]))}return r}function Th(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,$c(e,s,t))}return r}class Sh extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ih extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&mh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=zc();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ph(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Va.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gc())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,((e,t)=>vh(e,t)))&&Ma(this.baseMutations,e.baseMutations,((e,t)=>vh(e,t)))}}class kh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ba(e.mutations.length===n.length);let r=qc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new kh(e,t,n,r)}}class Ch{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Dh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ph,Ah;function Nh(e){switch(e){default:return wa();case Ea.CANCELLED:case Ea.UNKNOWN:case Ea.DEADLINE_EXCEEDED:case Ea.RESOURCE_EXHAUSTED:case Ea.INTERNAL:case Ea.UNAVAILABLE:case Ea.UNAUTHENTICATED:return!1;case Ea.INVALID_ARGUMENT:case Ea.NOT_FOUND:case Ea.ALREADY_EXISTS:case Ea.PERMISSION_DENIED:case Ea.FAILED_PRECONDITION:case Ea.ABORTED:case Ea.OUT_OF_RANGE:case Ea.UNIMPLEMENTED:case Ea.DATA_LOSS:return!0}}function Oh(e){if(void 0===e)return ga("GRPC error has no .code"),Ea.UNKNOWN;switch(e){case Ph.OK:return Ea.OK;case Ph.CANCELLED:return Ea.CANCELLED;case Ph.UNKNOWN:return Ea.UNKNOWN;case Ph.DEADLINE_EXCEEDED:return Ea.DEADLINE_EXCEEDED;case Ph.RESOURCE_EXHAUSTED:return Ea.RESOURCE_EXHAUSTED;case Ph.INTERNAL:return Ea.INTERNAL;case Ph.UNAVAILABLE:return Ea.UNAVAILABLE;case Ph.UNAUTHENTICATED:return Ea.UNAUTHENTICATED;case Ph.INVALID_ARGUMENT:return Ea.INVALID_ARGUMENT;case Ph.NOT_FOUND:return Ea.NOT_FOUND;case Ph.ALREADY_EXISTS:return Ea.ALREADY_EXISTS;case Ph.PERMISSION_DENIED:return Ea.PERMISSION_DENIED;case Ph.FAILED_PRECONDITION:return Ea.FAILED_PRECONDITION;case Ph.ABORTED:return Ea.ABORTED;case Ph.OUT_OF_RANGE:return Ea.OUT_OF_RANGE;case Ph.UNIMPLEMENTED:return Ea.UNIMPLEMENTED;case Ph.DATA_LOSS:return Ea.DATA_LOSS;default:return wa()}}(Ah=Ph||(Ph={}))[Ah.OK=0]="OK",Ah[Ah.CANCELLED=1]="CANCELLED",Ah[Ah.UNKNOWN=2]="UNKNOWN",Ah[Ah.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ah[Ah.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ah[Ah.NOT_FOUND=5]="NOT_FOUND",Ah[Ah.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ah[Ah.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ah[Ah.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ah[Ah.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ah[Ah.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ah[Ah.ABORTED=10]="ABORTED",Ah[Ah.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ah[Ah.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ah[Ah.INTERNAL=13]="INTERNAL",Ah[Ah.UNAVAILABLE=14]="UNAVAILABLE",Ah[Ah.DATA_LOSS=15]="DATA_LOSS";let Rh=null;function Lh(){return new TextEncoder}const Mh=new ua([4294967295,4294967295],0);function Fh(e){const t=Lh().encode(e),n=new la;return n.update(t),new Uint8Array(n.digest())}function jh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ua([n,r],0),new ua([i,s],0)]}class Vh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Uh("Invalid padding: ".concat(t));if(n<0)throw new Uh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Uh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Uh("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=ua.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(ua.fromNumber(n)));return 1===r.compare(Mh)&&(r=new ua([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Fh(e),[n,r]=jh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Vh(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Fh(e),[n,r]=jh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Bh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zh(Va.min(),r,new Jl(La),Mc(),Gc())}}class Bh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Bh(n,t,Gc(),Gc(),Gc())}}class qh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Kh{constructor(e,t){this.targetId=e,this.fe=t}}class Gh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:su.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Hh{constructor(){this.ge=0,this.pe=Yh(),this.ye=su.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Gc(),t=Gc(),n=Gc();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wa()}})),new Bh(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Yh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ba(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Wh{constructor(e){this.Be=e,this.ke=new Map,this.qe=Mc(),this.Qe=Qh(),this.Ke=new Jl(La)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:wa()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(fc(i))if(0===n){const e=new Ka(i.path);this.We(t,e,ju.newNoDocument(e,Va.min()))}else ba(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Rh||Rh.tt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=uu(n).toUint8Array()}catch(e){if(e instanceof iu)return ya("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Vh(s,r,i)}catch(e){return ya(e instanceof Uh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&fc(i.target)){const t=new Ka(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ju.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Gc();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new zh(e,t,this.Ke,this.qe,n);return this.qe=Mc(),this.Qe=Qh(),this.Ke=new Jl(La),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Hh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new eu(La),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ma("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Hh),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Qh(){return new Jl(Ka.comparator)}function Yh(){return new Jl(Ka.comparator)}const Xh={asc:"ASCENDING",desc:"DESCENDING"},Jh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$h={and:"AND",or:"OR"};class Zh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ed(e,t){return e.useProto3Json||gl(t)?t:{value:t}}function td(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function nd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rd(e,t){return td(e,t.toTimestamp())}function id(e){return ba(!!e),Va.fromTimestamp(function(e){const t=au(e);return new ja(t.seconds,t.nanos)}(e))}function sd(e,t){return od(e,t).canonicalString()}function od(e,t){const n=function(e){return new za(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ad(e){const t=za.fromString(e);return ba(Dd(t)),t}function ld(e,t){return sd(e.databaseId,t.path)}function ud(e,t){const n=ad(t);if(n.get(1)!==e.databaseId.projectId)throw new Ta(Ea.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ta(Ea.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ka(fd(n))}function cd(e,t){return sd(e.databaseId,t)}function hd(e){const t=ad(e);return 4===t.length?za.emptyPath():fd(t)}function dd(e){return new za(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fd(e){return ba(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pd(e,t,n){return{name:ld(e,t),fields:n.value.mapValue.fields}}function md(e,t,n){const r=ud(e,t.name),i=id(t.updateTime),s=t.createTime?id(t.createTime):Va.min(),o=new Mu({mapValue:{fields:t.fields}}),a=ju.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gd(e,t){let n;if(t instanceof wh)n={update:pd(e,t.key,t.value)};else if(t instanceof Sh)n={delete:ld(e,t.key)};else if(t instanceof bh)n={update:pd(e,t.key,t.data),updateMask:Cd(t.fieldMask)};else{if(!(t instanceof Ih))return wa();n={verify:ld(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof th)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ih)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oh)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw wa()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:wa()}(e,t.precondition)),n}function yd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?hh.updateTime(id(e.updateTime)):void 0!==e.exists?hh.exists(e.exists):hh.none()}(t.currentDocument):hh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)ba("REQUEST_TIME"===t.setToServerValue),n=new th;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new nh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new ih(e)}else"increment"in t?n=new oh(e,t.increment):wa();const r=qa.fromServerFormat(t.fieldPath);return new uh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=ud(e,t.update.name),s=new Mu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ru(t.map((e=>qa.fromServerFormat(e))))}(t.updateMask);return new bh(i,s,e,n,r)}return new wh(i,s,n,r)}if(t.delete){const r=ud(e,t.delete);return new Sh(r,n)}if(t.verify){const r=ud(e,t.verify);return new Ih(r,n)}return wa()}function vd(e,t){return{documents:[cd(e,t.path)]}}function wd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cd(e,i);const s=function(e){if(0!==e.length)return kd(Hu.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Id(e.field),direction:Ed(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ed(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function bd(e){let t=hd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ba(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=_d(e);return t instanceof Hu&&Yu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Bu(xd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,gl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Vu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Vu(n,t)}(n.endAt)),vc(t,i,o,s,a,"F",l,u)}function _d(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xd(e.unaryFilter.field);return Gu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=xd(e.unaryFilter.field);return Gu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xd(e.unaryFilter.field);return Gu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xd(e.unaryFilter.field);return Gu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wa()}}(e):void 0!==e.fieldFilter?function(e){return Gu.create(xd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wa()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Hu.create(e.compositeFilter.filters.map((e=>_d(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return wa()}}(e.compositeFilter.op))}(e):wa()}function Ed(e){return Xh[e]}function Td(e){return Jh[e]}function Sd(e){return $h[e]}function Id(e){return{fieldPath:e.canonicalString()}}function xd(e){return qa.fromServerFormat(e.fieldPath)}function kd(e){return e instanceof Gu?function(e){if("=="===e.op){if(Cu(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NAN"}};if(ku(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cu(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NOT_NAN"}};if(ku(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Id(e.field),op:Td(e.op),value:e.value}}}(e):e instanceof Hu?function(e){const t=e.getFilters().map((e=>kd(e)));return 1===t.length?t[0]:{compositeFilter:{op:Sd(e.op),filters:t}}}(e):wa()}function Cd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Dd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Pd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Va.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Va.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:su.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Pd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ad{constructor(e){this.ct=e}}function Nd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Od(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ld(e,t.key),fields:t.data.value.mapValue.fields,updateTime:td(e,t.version.toTimestamp()),createTime:td(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Rd(t.version)};else{if(!t.isUnknownDocument())return wa();r.unknownDocument={path:n.path.toArray(),version:Rd(t.version)}}return r}function Od(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Rd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ld(e){const t=new ja(e.seconds,e.nanoseconds);return Va.fromTimestamp(t)}function Md(e,t){const n=(t.baseMutations||[]).map((t=>yd(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>yd(e.ct,t))),i=ja.fromMillis(t.localWriteTimeMs);return new xh(t.batchId,i,n,r)}function Fd(e){const t=Ld(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ld(e.lastLimboFreeSnapshotVersion):Va.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return ba(1===e.documents.length),Tc(wc(hd(e.documents[0])))}(e.query):function(e){return Tc(bd(e))}(e.query),new Pd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,su.fromBase64String(e.resumeToken))}function jd(e,t){const n=Rd(t.snapshotVersion),r=Rd(t.lastLimboFreeSnapshotVersion);let i;i=fc(t.target)?vd(e.ct,t.target):wd(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hc(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vd(e){const t=bd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xc(t,t.limit,"L"):t}function Ud(e,t){return new Ch(t.largestBatchId,yd(e.ct,t.overlayMutation))}function zd(e,t){const n=t.path.lastSegment();return[e,wl(t.path.popLast()),n]}function Bd(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Rd(r.readTime),documentKey:wl(r.documentKey.path),largestBatchId:r.largestBatchId}}class qd{getBundleMetadata(e,t){return Kd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Ld(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Kd(e).put(function(e){return{bundleId:e.id,createTime:Rd(id(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Gd(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Vd(e.bundledQuery),readTime:Ld(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Gd(e).put(function(e){return{name:e.name,readTime:Rd(id(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Kd(e){return Wl(e,"bundles")}function Gd(e){return Wl(e,"namedQueries")}class Hd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Hd(e,n)}getOverlay(e,t){return Wd(e).get(zd(this.userId,t)).next((e=>e?Ud(this.serializer,e):null))}getOverlays(e,t){const n=Uc();return rl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Ch(t,i);r.push(this.ht(e,s))})),rl.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(wl(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Wd(e).H("collectionPathOverlayIndex",r))})),rl.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Uc(),i=wl(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Wd(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Ud(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Uc();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wd(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Ud(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Wd(e).put(function(e,t,n){const[r,i,s]=zd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:gd(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Wd(e){return Wl(e,"documentOverlays")}class Qd{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(lu(e.integerValue));else if("doubleValue"in e){const n=lu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),yl(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(uu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Au(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):wa()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Ka.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Yd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Xd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Yd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Qd.bt=new Qd;class Jd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=Xd(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=Xd(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class $d{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Zd{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ef{constructor(){this.Gt=new Jd,this.zt=new $d(this.Gt),this.jt=new Zd(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class tf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new tf(this.indexId,this.documentKey,this.arrayValue,n)}}function nf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=rf(e.arrayValue,t.arrayValue),0!==n?n:(n=rf(e.directionalValue,t.directionalValue),0!==n?n:Ka.comparator(e.documentKey,t.documentKey)))}function rf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class sf{constructor(e){this.Yt=new eu(((e,t)=>qa.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(ba(e.collectionGroup===this.collectionId),this.en)return!1;const t=Ha(e);if(void 0!==t&&!this.nn(t))return!1;const n=Wa(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new eu(qa.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Qa(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Qa(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Qa(n.field,"asc"===n.dir?0:1)));return new Ga(Ga.UNKNOWN_ID,this.collectionId,t,Ya.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function of(e){var t,n;if(ba(e instanceof Gu||e instanceof Hu),e instanceof Gu){if(e instanceof oc){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Gu.create(e.field,"==",t))))||[];return Hu.create(r,"or")}return e}const r=e.filters.map((e=>of(e)));return Hu.create(r,e.op)}function af(e){if(0===e.getFilters().length)return[];const t=hf(of(e));return ba(cf(t)),lf(t)||uf(t)?[t]:t.getFilters()}function lf(e){return e instanceof Gu}function uf(e){return e instanceof Hu&&Yu(e)}function cf(e){return lf(e)||uf(e)||function(e){if(e instanceof Hu&&Qu(e)){for(const t of e.getFilters())if(!lf(t)&&!uf(t))return!1;return!0}return!1}(e)}function hf(e){if(ba(e instanceof Gu||e instanceof Hu),e instanceof Gu)return e;if(1===e.filters.length)return hf(e.filters[0]);const t=e.filters.map((e=>hf(e)));let n=Hu.create(t,e.op);return n=pf(n),cf(n)?n:(ba(n instanceof Hu),ba(Wu(n)),ba(n.filters.length>1),n.filters.reduce(((e,t)=>df(e,t))))}function df(e,t){let n;return ba(e instanceof Gu||e instanceof Hu),ba(t instanceof Gu||t instanceof Hu),n=e instanceof Gu?t instanceof Gu?function(e,t){return Hu.create([e,t],"and")}(e,t):ff(e,t):t instanceof Gu?ff(t,e):function(e,t){if(ba(e.filters.length>0&&t.filters.length>0),Wu(e)&&Wu(t))return Zu(e,t.getFilters());const n=Qu(e)?e:t,r=Qu(e)?t:e,i=n.filters.map((e=>df(e,r)));return Hu.create(i,"or")}(e,t),pf(n)}function ff(e,t){if(Wu(t))return Zu(t,e.getFilters());{const n=t.filters.map((t=>df(e,t)));return Hu.create(n,"or")}}function pf(e){if(ba(e instanceof Gu||e instanceof Hu),e instanceof Gu)return e;const t=e.getFilters();if(1===t.length)return pf(t[0]);if(Xu(e))return e;const n=t.map((e=>pf(e))),r=[];return n.forEach((t=>{t instanceof Gu?r.push(t):t instanceof Hu&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Hu.create(r,e.op)}class mf{constructor(){this._n=new gf}addToCollectionParentIndex(e,t){return this._n.add(t),rl.resolve()}getCollectionParents(e,t){return rl.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return rl.resolve()}deleteFieldIndex(e,t){return rl.resolve()}deleteAllFieldIndexes(e){return rl.resolve()}createTargetIndexes(e,t){return rl.resolve()}getDocumentsMatchingTarget(e,t){return rl.resolve(null)}getIndexType(e,t){return rl.resolve(0)}getFieldIndexes(e,t){return rl.resolve([])}getNextCollectionGroupToUpdate(e){return rl.resolve(null)}getMinOffset(e,t){return rl.resolve($a.min())}getMinOffsetFromCollectionGroup(e,t){return rl.resolve($a.min())}updateCollectionGroup(e,t,n){return rl.resolve()}updateIndexEntries(e,t){return rl.resolve()}}class gf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new eu(za.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new eu(za.comparator)).toArray()}}const yf=new Uint8Array(0);class vf{constructor(e,t){this.databaseId=t,this.an=new gf,this.un=new Rc((e=>hc(e)),((e,t)=>dc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:wl(r)};return wf(e).put(i)}return rl.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Fa(t),""],!1,!0);return wf(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(El(r.parent))}return n}))}addFieldIndex(e,t){const n=_f(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Ef(e);return i.next((e=>{n.put(Bd(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=_f(e),r=Ef(e),i=bf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=_f(e),n=bf(e),r=Ef(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return rl.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new sf(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=bf(e);let r=!0;const i=new Map;return rl.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Gc();const r=[];return rl.forEach(i,((i,s)=>{ma("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(hc(t)));const o=function(e,t){const n=Ha(t);if(void 0===n)return null;for(const r of pc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Wa(t))for(const t of pc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Wa(t)){const t=0===i.kind?mc(e,i.fieldPath,e.startAt):gc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Vu(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Wa(t)){const t=0===i.kind?gc(e,i.fieldPath,e.endAt):mc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Vu(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,a),f=this.In(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return rl.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Ka.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return rl.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:af(Hu.create(e.filters,"and")).map((t=>cc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):yf,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],s),f=o.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new tf(e,Ka.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new tf(e,Ka.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new sf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return rl.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new eu(qa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new ef;for(const r of Wa(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Qd.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new ef;return Qd.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new ef;return Qd.bt.Pt(Su(this.databaseId,t),n.Ht(function(e){const t=Wa(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new ef);let i=0;for(const s of Wa(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&xu(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Qd.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new ef;n.seed(e.Wt()),Qd.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Gu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=_f(e),r=Ef(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return rl.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ya(t.sequenceNumber,new $a(Ld(t.readTime),new Ka(El(t.documentKey)),t.largestBatchId)):Ya.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Qa(qa.fromServerFormat(t),n)}));return new Ga(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:La(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=_f(e),i=Ef(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>rl.forEach(t,(t=>i.put(Bd(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return rl.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?rl.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),rl.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?rl.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return bf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return bf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=bf(e);let i=new eu(nf);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new tf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new eu(nf);const r=this.An(t,e);if(null==r)return n;const i=Ha(t);if(null!=i){const s=e.data.field(i.fieldPath);if(xu(s))for(const i of s.arrayValue.values||[])n=n.add(new tf(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new tf(t.indexId,e.key,yf,r));return n}wn(e,t,n,r,i){ma("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=nu(s),l=nu(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=nu(o)):t?(i(a),a=nu(s)):(a=nu(s),l=nu(o))}}(r,i,nf,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),rl.waitFor(s)}gn(e){let t=1;return Ef(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>nf(e,t))).filter(((e,t,n)=>!t||0!==nf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=nf(s,e),i=nf(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,yf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,yf,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return nf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Tf)}getMinOffset(e,t){return rl.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||wa())))).next(Tf)}}function wf(e){return Wl(e,"collectionParents")}function bf(e){return Wl(e,"indexEntries")}function _f(e){return Wl(e,"indexConfiguration")}function Ef(e){return Wl(e,"indexState")}function Tf(e){ba(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Za(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $a(t.readTime,t.documentKey,n)}const Sf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class If{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new If(e,If.DEFAULT_COLLECTION_PERCENTILE,If.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{ba(1===a)})));const u=[];for(const c of n.mutations){const e=Il(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return rl.waitFor(s).next((()=>u))}function kf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw wa();t=e.noDocument}return JSON.stringify(t).length}If.DEFAULT_COLLECTION_PERCENTILE=10,If.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,If.DEFAULT=new If(41943040,If.DEFAULT_COLLECTION_PERCENTILE,If.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),If.DISABLED=new If(-1,0,0);class Cf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){ba(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Cf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Af(e),s=Pf(e);return s.add({}).next((o=>{ba("number"==typeof o);const a=new xh(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>gd(e.ct,t))),i=n.mutations.map((t=>gd(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new eu(((e,t)=>La(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Il(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,xl))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),rl.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Pf(e).get(t).next((e=>e?(ba(e.userId===this.userId),Md(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?rl.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Pf(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(ba(t.batchId>=n),i=Md(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Pf(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).W("userMutationsIndex",t).next((e=>e.map((e=>Md(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Sl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Af(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,u=El(a);if(o===this.userId&&t.path.isEqual(u))return Pf(e).get(l).next((e=>{if(!e)throw wa();ba(e.userId===this.userId),i.push(Md(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new eu(La);const r=[];return t.forEach((t=>{const i=Sl(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Af(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=El(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),rl.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Sl(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new eu(La);return Af(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,u=El(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Pf(e).get(t).next((e=>{if(null===e)throw wa();ba(e.userId===this.userId),n.push(Md(this.serializer,e))})))})),rl.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return xf(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),rl.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return rl.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Af(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=El(e[1]);r.push(t)}else n.done()})).next((()=>{ba(0===r.length)}))}))}containsKey(e,t){return Df(e,this.userId,t)}xn(e){return Nf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Df(e,t,n){const r=Sl(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Af(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Pf(e){return Wl(e,"mutations")}function Af(e){return Wl(e,"documentMutations")}function Nf(e){return Wl(e,"mutationQueues")}class Of{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Of(0)}static Ln(){return new Of(-1)}}class Rf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Of(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Va.fromTimestamp(new ja(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Lf(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(ba(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Lf(e).Y(((s,o)=>{const a=Fd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>rl.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Lf(e).Y(((e,n)=>{const r=Fd(n);t(r)}))}Bn(e){return Mf(e).get("targetGlobalKey").next((e=>(ba(null!==e),e)))}kn(e,t){return Mf(e).put("targetGlobalKey",t)}qn(e,t){return Lf(e).put(jd(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=hc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Lf(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Fd(n);dc(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Ff(e);return t.forEach((t=>{const s=wl(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),rl.waitFor(r)}removeMatchingKeys(e,t,n){const r=Ff(e);return rl.forEach(t,(t=>{const i=wl(t.path);return rl.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Ff(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ff(e);let i=Gc();return r.Y({range:n,J:!0},((e,t,n)=>{const r=El(e[1]),s=new Ka(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=wl(t.path),r=IDBKeyRange.bound([n],[Fa(n)],!1,!0);let i=0;return Ff(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Lf(e).get(t).next((e=>e?Fd(e):null))}}function Lf(e){return Wl(e,"targets")}function Mf(e){return Wl(e,"targetGlobal")}function Ff(e){return Wl(e,"targetDocuments")}function jf(e,t){let[n,r]=e,[i,s]=t;const o=La(n,i);return 0===o?La(r,s):o}class Vf{constructor(e){this.Kn=e,this.buffer=new eu(jf),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();jf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){ma("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ll(e)?ma("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await nl(e)}await this.zn(3e5)}))}}class zf{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return rl.resolve(ml._e);const n=new Vf(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ma("LruGarbageCollector","Garbage collection skipped; disabled"),rl.resolve(Sf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ma("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Sf):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ma("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),pa()<=it.DEBUG&&ma("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),rl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Bf(e,t){return new zf(e,t)}class qf{constructor(e,t){this.db=e,this.garbageCollector=Bf(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Kf(e,n)}removeReference(e,t,n){return Kf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Kf(e,t)}er(e,t){return function(e,t){let n=!1;return Nf(e).Z((r=>Df(e,r,t).next((e=>(e&&(n=!0),rl.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Va.min()),Ff(e).delete(function(e){return[0,wl(e.path)]}(s)))))}));r.push(t)}})).next((()=>rl.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Kf(e,t)}Xn(e,t){const n=Ff(e);let r,i=ml._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==ml._e&&t(new Ka(El(r)),i),i=l,r=a):i=ml._e})).next((()=>{i!==ml._e&&t(new Ka(El(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kf(e,t){return Ff(e).put(function(e,t){return{targetId:0,path:wl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Gf{constructor(){this.changes=new Rc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ju.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?rl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Xf(e).put(n)}removeEntry(e,t,n){return Xf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Od(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=ju.newInvalidDocument(t);return Xf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Jf(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:ju.newInvalidDocument(t)};return Xf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Jf(t))},((e,r)=>{n={document:this.nr(t,r),size:kf(r)}})).next((()=>n))}getEntries(e,t){let n=Mc();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Mc(),r=new Jl(Ka.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,kf(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return rl.resolve();let r=new eu(Zf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Jf(r.first()),Jf(r.last())),s=r.getIterator();let o=s.getNext();return Xf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ka.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Zf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Jf(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Od(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xf(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Mc();for(const i of e){const e=this.nr(Ka.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Pc(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Mc();const s=$f(t,n),o=$f(t,$a.max());return Xf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(Ka.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Qf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Yf(e).get("remoteDocumentGlobalKey").next((e=>(ba(!!e),e)))}tr(e,t){return Yf(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=md(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ka.fromSegments(t.noDocument.path),r=Ld(t.noDocument.readTime);n=ju.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return wa();{const e=Ka.fromSegments(t.unknownDocument.path),r=Ld(t.unknownDocument.version);n=ju.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ja(e[0],e[1]);return Va.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Va.min()))return e}return ju.newInvalidDocument(e)}}function Wf(e){return new Hf(e)}class Qf extends Gf{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Rc((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new eu(((e,t)=>La(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Nd(this.ar.serializer,s);r=r.add(i.path.popLast());const l=kf(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Nd(this.ar.serializer,s.convertToNoDocument(Va.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),rl.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Yf(e){return Wl(e,"remoteDocumentGlobal")}function Xf(e){return Wl(e,"remoteDocumentsV14")}function Jf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $f(e,t){const n=t.documentKey.path.toArray();return[e,Od(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=La(n[s],r[s]),i)return i;return i=La(n.length,r.length),i||(i=La(n[n.length-2],r[r.length-2]),i||La(n[n.length-1],r[r.length-1]))}class ep{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&gh(n.mutation,e,ru.empty(),ja.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Gc()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gc();const r=Uc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=jc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Uc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Mc();const s=Bc(),o=Bc();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof bh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),gh(o.mutation,t,o.mutation.getFieldMask(),ja.now())):s.set(t.key,ru.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new ep(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Bc();let r=new Jl(((e,t)=>e-t)),i=Gc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ru.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Gc()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=zc();l.forEach((e=>{if(!i.has(e)){const r=ph(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return rl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ka.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_c(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):rl.resolve(Uc());let o=-1,a=i;return s.next((t=>rl.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?rl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Gc()))).next((e=>({batchId:o,changes:Vc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ka(t)).next((e=>{let t=jc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=jc();return this.indexManager.getCollectionParents(e,i).next((o=>rl.forEach(o,(o=>{const a=function(e,t){return new yc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ju.newInvalidDocument(r)))}));let n=jc();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&gh(s.mutation,r,ru.empty(),ja.now()),Pc(t,r)&&(n=n.insert(e,r))})),n}))}}class np{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return rl.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:id(e.createTime)}}(t)),rl.resolve()}getNamedQuery(e,t){return rl.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Vd(e.bundledQuery),readTime:id(e.readTime)}}(t)),rl.resolve()}}class rp{constructor(){this.overlays=new Jl(Ka.comparator),this.hr=new Map}getOverlay(e,t){return rl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Uc();return rl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),rl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),rl.resolve()}getOverlaysForCollection(e,t,n){const r=Uc(),i=t.length+1,s=new Ka(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return rl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Jl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Uc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Uc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return rl.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ch(t,n));let i=this.hr.get(t);void 0===i&&(i=Gc(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class ip{constructor(){this.Pr=new eu(sp.Ir),this.Tr=new eu(sp.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new sp(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new sp(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Ka(new za([])),n=new sp(t,e),r=new sp(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Ka(new za([])),n=new sp(t,e),r=new sp(t,e+1);let i=Gc();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new sp(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class sp{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Ka.comparator(e.key,t.key)||La(e.pr,t.pr)}static Er(e,t){return La(e.pr,t.pr)||Ka.comparator(e.key,t.key)}}class op{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new eu(sp.Ir)}checkEmpty(e){return rl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new xh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new sp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return rl.resolve(s)}lookupMutationBatch(e,t){return rl.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return rl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rl.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return rl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sp(t,0),r=new sp(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),rl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new eu(La);return t.forEach((e=>{const t=new sp(e,0),r=new sp(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),rl.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ka.isDocumentKey(i)||(i=i.child(""));const s=new sp(new Ka(i),0);let o=new eu(La);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),rl.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ba(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return rl.forEach(t.mutations,(r=>{const i=new sp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new sp(t,0),r=this.wr.firstAfterOrEqual(n);return rl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,rl.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ap{constructor(e){this.vr=e,this.docs=new Jl(Ka.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return rl.resolve(n?n.document.mutableCopy():ju.newInvalidDocument(t))}getEntries(e,t){let n=Mc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ju.newInvalidDocument(e))})),rl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Mc();const s=t.path,o=new Ka(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Za(Ja(o),n)<=0||(r.has(o.key)||Pc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return rl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){wa()}Fr(e,t){return rl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new lp(this)}getSize(e){return rl.resolve(this.size)}}class lp extends Gf{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),rl.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class up{constructor(e){this.persistence=e,this.Mr=new Rc((e=>hc(e)),dc),this.lastRemoteSnapshotVersion=Va.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ip,this.targetCount=0,this.Lr=Of.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),rl.resolve()}getLastRemoteSnapshotVersion(e){return rl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rl.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),rl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),rl.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Of(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,rl.resolve()}updateTargetData(e,t){return this.qn(t),rl.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,rl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),rl.waitFor(i).next((()=>r))}getTargetCount(e){return rl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return rl.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),rl.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),rl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),rl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return rl.resolve(n)}containsKey(e,t){return rl.resolve(this.Nr.containsKey(t))}}class cp{constructor(e,t){this.Br={},this.overlays={},this.kr=new ml(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new up(this),this.indexManager=new mf,this.remoteDocumentCache=function(e){return new ap(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Ad(t),this.$r=new np(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new op(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){ma("MemoryPersistence","Starting transaction:",e);const r=new hp(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return rl.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class hp extends tl{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.zr=new ip,this.jr=null}static Hr(e){return new dp(e)}get Jr(){if(this.jr)return this.jr;throw wa()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),rl.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),rl.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),rl.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rl.forEach(this.Jr,(n=>{const r=Ka.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Va.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return rl.or([()=>rl.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class fp{constructor(e){this.serializer=e}N(e,t,n,r){const i=new il("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tl,{unique:!0}),e.createObjectStore("documentMutations")}(e),pp(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=rl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),pp(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Va.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return rl.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:jl});t.createIndex("collectionPathOverlayIndex",Vl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ul,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:kl});t.createIndex("documentKeyIndex",Cl),t.createIndex("collectionGroupIndex",Dl)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Rl}).createIndex("sequenceNumberIndex",Ll,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ml}).createIndex("documentKeyIndex",Fl,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=kf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>rl.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>rl.forEach(n,(n=>{ba(n.userId===t.userId);const r=Md(this.serializer,n);return xf(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new za(n),o=function(e){return[0,wl(e)]}(s);r.push(t.get(o).next((n=>n?rl.resolve():(n=>t.put({targetId:0,path:wl(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>rl.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ol});const n=t.store("collectionParents"),r=new gf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:wl(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new za(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=El(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Fd(n),i=jd(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Ka(za.fromString(e.document.name).popFirst(5)):e.noDocument?Ka.fromSegments(e.noDocument.path):e.unknownDocument?Ka.fromSegments(e.unknownDocument.path):wa()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>rl.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Wf(this.serializer),i=new cp(dp.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Gc();Md(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),rl.forEach(n,((e,n)=>{const s=new ha(n),o=Hd.lt(this.serializer,s),a=i.getIndexManager(s),l=Cf.lt(s,this.serializer,a,i.referenceDelegate);return new tp(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Hl(t,ml._e),e).next()}))}))}}function pp(e){e.createObjectStore("targetDocuments",{keyPath:Al}).createIndex("documentTargetsIndex",Nl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pl,{unique:!0}),e.createObjectStore("targetGlobal")}const mp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gp{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!gp.D())throw new Ta(Ea.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qf(this,r),this.Ti=t+"main",this.serializer=new Ad(a),this.Ei=new sl(this.Ti,this.ui,new fp(this.serializer)),this.Qr=new Rf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wf(this.serializer),this.$r=new qd,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&ga("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ta(Ea.FAILED_PRECONDITION,mp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new ml(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(ll(e))return ma("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ma("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return yp(e).get("owner").next((e=>rl.resolve(this.Si(e))))}bi(e){return vp(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Wl(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return rl.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?rl.resolve(!0):yp(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ta(Ea.FAILED_PRECONDITION,mp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vp(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&ma("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Hl(e,ml._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>vp(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Cf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Hd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){ma("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Gl:14===e?Kl:13===e?ql:12===e?Bl:11===e?zl:void wa()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Hl(r,this.kr?this.kr.next():ml._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw ga("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Ta(Ea.FAILED_PRECONDITION,el);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return yp(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ta(Ea.FAILED_PRECONDITION,mp)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yp(e).put("owner",t)}static D(){return sl.D()}yi(e){const t=yp(e);return t.get("owner").next((e=>this.Si(e)?(ma("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):rl.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ga("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ze()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ma("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ga("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ga("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function yp(e){return Wl(e,"owner")}function vp(e){return Wl(e,"clientMetadata")}function wp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class bp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Gc(),r=Gc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new bp(e,t.fromCache,n,r)}}class _p{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ep{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ze()?8:sl.v(Ve())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new _p;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(pa()<=it.DEBUG&&ma("QueryEngine","SDK will not create cache indexes for query:",Dc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),rl.resolve()):(pa()<=it.DEBUG&&ma("QueryEngine","Query:",Dc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(pa()<=it.DEBUG&&ma("QueryEngine","The SDK decides to create cache indexes for query:",Dc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tc(t))):rl.resolve())}ji(e,t){if(bc(t))return rl.resolve(null);let n=Tc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=xc(t,null,"F"),n=Tc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Gc(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,xc(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return bc(t)||r.isEqual(Va.min())?rl.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?rl.resolve(null):(pa()<=it.DEBUG&&ma("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dc(t)),this.es(e,s,t,Xa(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new eu(Nc(e));return t.forEach(((t,r)=>{Pc(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return pa()<=it.DEBUG&&ma("QueryEngine","Using full collection scan to execute query:",Dc(t)),this.zi.getDocumentsMatchingQuery(e,t,$a.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Tp{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Jl(La),this.rs=new Rc((e=>hc(e)),dc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Sp(e,t,n,r){return new Tp(e,t,n,r)}async function Ip(e,t){const n=_a(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Gc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function xp(e){const t=_a(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function kp(e,t,n){let r=Gc(),i=Gc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Mc();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Va.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ma("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Cp(e,t){const n=_a(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Dp(e,t){const n=_a(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,rl.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Pd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Pp(e,t,n){const r=_a(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ll(e))throw e;ma("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Ap(e,t,n){const r=_a(e);let i=Va.min(),s=Gc();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=_a(e),i=r.rs.get(n);return void 0!==i?rl.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Tc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Va.min(),n?s:Gc()))).next((e=>(Rp(r,Ac(t),e),{documents:e,hs:s})))))}function Np(e,t){const n=_a(e),r=_a(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Op(e,t){const n=_a(e),r=n.ss.get(t)||Va.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Xa(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Rp(n,t,e),e)))}function Rp(e,t,n){let r=e.ss.get(t)||Va.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Lp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gc();const r=await Dp(e,Tc(Vd(t.bundledQuery))),i=_a(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=id(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(su.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Mp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Fp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function jp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Vp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ta(r.error.code,r.error.message))),s?new Vp(e,t,r.state,i):(ga("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Up{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ta(n.error.code,n.error.message))),i?new Up(e,n.state,r):(ga("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Wc();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=vl(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new zp(e,i):(ga("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Bp{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Bp(t.clientId,t.onlineState):(ga("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class qp{constructor(){this.activeTargetIds=Wc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kp{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Jl(La),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Mp(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new qp),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Mp(this.persistenceKey,n));if(e){const t=zp.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(jp(this.persistenceKey,e));if(n){const r=Up.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jp(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ma("SharedClientState","READ",e,t),t}setItem(e,t){ma("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ma("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(ma("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void ga("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=ml._e;if(null!=e)try{const n=JSON.parse(e);ba("number"==typeof n),t=n}catch(e){ga("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ml._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new Vp(this.currentUser,e,t,n),i=Fp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Fp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=jp(this.persistenceKey,e),i=new Up(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return zp.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Vp.Es(new ha(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Up.Es(r,t)}xs(e){return Bp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);ma("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Wc();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Gp{constructor(){this.no=new qp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new qp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hp{io(e){}shutdown(){}}class Wp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ma("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ma("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Qp=null;function Yp(){return null===Qp?Qp=268435456+Math.round(2147483648*Math.random()):Qp++,"0x"+Qp.toString(16)}const Xp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jp{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const $p="WebChannelConnection";class Zp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Yp(),o=this.bo(e,t.toUriEncodedString());ma("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(ma("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ya("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+da,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Xp[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Yp();return new Promise(((s,o)=>{const a=new aa;a.setWithCredentials(!0),a.listenOnce(ra.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case na.NO_ERROR:const t=a.getResponseJson();ma($p,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case na.TIMEOUT:ma($p,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Ta(Ea.DEADLINE_EXCEEDED,"Request time out"));break;case na.HTTP_ERROR:const n=a.getStatus();if(ma($p,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ea).indexOf(t)>=0?t:Ea.UNKNOWN}(t.status);o(new Ta(e,t.message))}else o(new Ta(Ea.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ta(Ea.UNAVAILABLE,"Connection failed."));break;default:wa()}}finally{ma($p,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);ma($p,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Yp(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ea(),o=ta(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");ma($p,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Jp({lo:t=>{d?ma($p,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ma($p,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),ma($p,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,oa.EventType.OPEN,(()=>{d||ma($p,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,oa.EventType.CLOSE,(()=>{d||(d=!0,ma($p,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,oa.EventType.ERROR,(t=>{d||(d=!0,ya($p,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Ta(Ea.UNAVAILABLE,"The operation could not be completed")))})),p(c,oa.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ba(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ma($p,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Ph[e];if(void 0!==t)return Oh(t)}(t),i=o.message;void 0===n&&(n=Ea.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Ta(n,i)),c.close()}else ma($p,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,ia.STAT_EVENT,(t=>{t.stat===sa.PROXY?ma($p,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===sa.NOPROXY&&ma($p,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function em(){return"undefined"!=typeof window?window:null}function tm(){return"undefined"!=typeof document?document:null}function nm(e){return new Zh(e,!0)}class rm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&ma("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class im{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new rm(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Ea.RESOURCE_EXHAUSTED?(ga(t.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Ea.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Ta(Ea.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return ma("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(ma("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sm extends im{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:wa()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ba(void 0===t||"string"==typeof t),su.fromBase64String(t||"")):(ba(void 0===t||t instanceof Uint8Array),su.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ea.UNKNOWN:Oh(e.code);return new Ta(t,e.message||"")}(o);n=new Gh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ud(e,r.document.name),s=id(r.document.updateTime),o=r.document.createTime?id(r.document.createTime):Va.min(),a=new Mu({mapValue:{fields:r.document.fields}}),l=ju.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new qh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ud(e,r.document),s=r.readTime?id(r.readTime):Va.min(),o=ju.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ud(e,r.document),s=r.removedTargetIds||[];n=new qh([],s,i,null)}else{if(!("filter"in t))return wa();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Dh(r,i),o=e.targetId;n=new Kh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Va.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Va.min():t.readTime?id(t.readTime):Va.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=dd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=fc(r)?{documents:vd(e,r)}:{query:wd(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=nd(e,t.resumeToken);const r=ed(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Va.min())>0){n.readTime=td(e,t.snapshotVersion.toTimestamp());const r=ed(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wa()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=dd(this.serializer),t.removeTarget=e,this.t_(t)}}class om extends im{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(ba(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(ba(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?id(e.updateTime):id(t);return n.isEqual(Va.min())&&(n=id(t)),new ch(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=id(e.commitTime);return this.listener.T_(n,t)}return ba(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=dd(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>gd(this.serializer,e)))};this.t_(t)}}class am extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Ta(Ea.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,od(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ta(Ea.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,od(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ta(Ea.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class lm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(ga(t),this.g_=!1):ma("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class um{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{vm(this)&&(ma("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=_a(e);t.v_.add(4),await hm(t),t.x_.set("Unknown"),t.v_.delete(4),await cm(t)}(this))}))})),this.x_=new lm(n,r)}}async function cm(e){if(vm(e))for(const t of e.F_)await t(!0)}async function hm(e){for(const t of e.F_)await t(!1)}function dm(e,t){const n=_a(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),ym(n)?gm(n):Mm(n).Jo()&&pm(n,t))}function fm(e,t){const n=_a(e),r=Mm(n);n.C_.delete(t),r.Jo()&&mm(n,t),0===n.C_.size&&(r.Jo()?r.Xo():vm(n)&&n.x_.set("Unknown"))}function pm(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Va.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Mm(e).c_(t)}function mm(e,t){e.O_.Oe(t),Mm(e).l_(t)}function gm(e){e.O_=new Wh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Mm(e).start(),e.x_.p_()}function ym(e){return vm(e)&&!Mm(e).Ho()&&e.C_.size>0}function vm(e){return 0===_a(e).v_.size}function wm(e){e.O_=void 0}async function bm(e){e.C_.forEach(((t,n)=>{pm(e,t)}))}async function _m(e,t){wm(e),ym(e)?(e.x_.S_(t),gm(e)):e.x_.set("Unknown")}async function Em(e,t,n){if(e.x_.set("Online"),t instanceof Gh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){ma("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Tm(e,n)}else if(t instanceof qh?e.O_.$e(t):t instanceof Kh?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Va.min()))try{const t=await xp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(su.EMPTY_BYTE_STRING,r.snapshotVersion)),mm(e,t);const i=new Pd(r.target,t,n,r.sequenceNumber);pm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ma("RemoteStore","Failed to raise snapshot:",t),await Tm(e,t)}}async function Tm(e,t,n){if(!ll(t))throw t;e.v_.add(1),await hm(e),e.x_.set("Offline"),n||(n=()=>xp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ma("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await cm(e)}))}function Sm(e,t){return t().catch((n=>Tm(e,n,t)))}async function Im(e){const t=_a(e),n=Fm(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;xm(t);)try{const e=await Cp(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,km(t,e)}catch(e){await Tm(t,e)}Cm(t)&&Dm(t)}function xm(e){return vm(e)&&e.D_.length<10}function km(e,t){e.D_.push(t);const n=Fm(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Cm(e){return vm(e)&&!Fm(e).Ho()&&e.D_.length>0}function Dm(e){Fm(e).start()}async function Pm(e){Fm(e).d_()}async function Am(e){const t=Fm(e);for(const n of e.D_)t.I_(n.mutations)}async function Nm(e,t,n){const r=e.D_.shift(),i=kh.from(r,t,n);await Sm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Im(e)}async function Om(e,t){t&&Fm(e).P_&&await async function(e,t){if(function(e){return Nh(e)&&e!==Ea.ABORTED}(t.code)){const n=e.D_.shift();Fm(e).Zo(),await Sm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Im(e)}}(e,t),Cm(e)&&Dm(e)}async function Rm(e,t){const n=_a(e);n.asyncQueue.verifyOperationInProgress(),ma("RemoteStore","RemoteStore received new credentials");const r=vm(n);n.v_.add(3),await hm(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await cm(n)}async function Lm(e,t){const n=_a(e);t?(n.v_.delete(2),await cm(n)):t||(n.v_.add(2),await hm(n),n.x_.set("Unknown"))}function Mm(e){return e.N_||(e.N_=function(e,t,n){const r=_a(e);return r.R_(),new sm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:bm.bind(null,e),To:_m.bind(null,e),u_:Em.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),ym(e)?gm(e):e.x_.set("Unknown")):(await e.N_.stop(),wm(e))}))),e.N_}function Fm(e){return e.L_||(e.L_=function(e,t,n){const r=_a(e);return r.R_(),new om(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Pm.bind(null,e),To:Om.bind(null,e),E_:Am.bind(null,e),T_:Nm.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await Im(e)):(await e.L_.stop(),e.D_.length>0&&(ma("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class jm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new jm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ta(Ea.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(e,t){if(ga("AsyncQueue","".concat(t,": ").concat(e)),ll(e))return new Ta(Ea.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Um{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ka.comparator(t.key,n.key):(e,t)=>Ka.comparator(e.key,t.key),this.keyedMap=jc(),this.sortedSet=new Jl(this.comparator)}static emptySet(e){return new Um(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Um))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Um;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zm{constructor(){this.B_=new Jl(Ka.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):wa():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Bm{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Bm(e,t,Um.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class qm{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class Km{constructor(){this.queries=new Rc((e=>Cc(e)),kc),this.onlineState="Unknown",this.W_=new Set}}async function Gm(e,t){const n=_a(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new qm,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Vm(e,"Initialization of query '".concat(Dc(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&Ym(n)}async function Hm(e,t){const n=_a(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wm(e,t){const n=_a(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&Ym(n)}function Qm(e,t,n){const r=_a(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Ym(e){e.W_.forEach((e=>{e.next()}))}var Xm,Jm;(Jm=Xm||(Xm={})).j_="default",Jm.Cache="cache";class $m{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Bm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=Bm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Xm.Cache}}class Zm{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class eg{constructor(e){this.serializer=e}Ps(e){return ud(this.serializer,e)}Is(e){return e.metadata.exists?md(this.serializer,e.document,!1):ju.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return id(e)}}class tg{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ng(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=za.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new eg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Gc()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=_a(e);let s=Gc(),o=Mc();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(s=s.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Dp(i,function(e){return Tc(wc(za.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>kp(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new eg(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await Lp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function ng(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class rg{constructor(e){this.key=e}}class ig{constructor(e){this.key=e}}class sg{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Gc(),this.mutatedKeys=Gc(),this.ha=Nc(e),this.Pa=new Um(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new zm,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Pc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.da(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ha(c,a)>0||l&&this.ha(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wa()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,l=a!==this.ca;return this.ca=a,0!==s.length||l?{snapshot:new Bm(this.query,e.Pa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new zm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Gc(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new ig(e))})),this.la.forEach((n=>{e.has(n)||t.push(new rg(n))})),t}fa(e){this.ua=e.hs,this.la=Gc();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return Bm.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class og{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ag{constructor(e){this.key=e,this.pa=!1}}class lg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Rc((e=>Cc(e)),kc),this.Sa=new Map,this.ba=new Set,this.Da=new Jl(Ka.comparator),this.Ca=new Map,this.va=new ip,this.Fa={},this.Ma=new Map,this.xa=Of.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function ug(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=jg(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await hg(r,t,n,!0),i}async function cg(e,t){const n=jg(e);await hg(n,t,!0,!1)}async function hg(e,t,n,r){const i=await Dp(e.localStore,Tc(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await dg(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&dm(e.remoteStore,i),a}async function dg(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await Ap(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Sg(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await Ap(e.localStore,t,!0),o=new sg(t,s.hs),a=o.Ta(s.documents),l=Bh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Sg(e,n,u.Va);const c=new og(t,n,o);return e.wa.set(t,c),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),u.snapshot}async function fg(e,t,n){const r=_a(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!kc(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fm(r.remoteStore,i.targetId),Eg(r,i.targetId)})).catch(nl)):(Eg(r,i.targetId),await Pp(r.localStore,i.targetId,!0))}async function pg(e,t){const n=_a(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fm(n.remoteStore,r.targetId))}async function mg(e,t){const n=_a(e);try{const e=await function(e,t){const n=_a(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(su.EMPTY_BYTE_STRING,Va.min()).withLastLimboFreeSnapshotVersion(Va.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=Mc(),l=Gc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kp(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Va.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return rl.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(ba(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?ba(r.pa):e.removedDocuments.size>0&&(ba(r.pa),r.pa=!1))})),await kg(n,e,t)}catch(e){await nl(e)}}function gg(e,t,n){const r=_a(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=_a(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&Ym(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yg(e,t,n){const r=_a(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new Jl(Ka.comparator);e=e.insert(s,ju.newNoDocument(s,Va.min()));const n=Gc().add(s),i=new zh(Va.min(),new Map,new Jl(La),e,n);await mg(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),xg(r)}else await Pp(r.localStore,t,!1).then((()=>Eg(r,t,n))).catch(nl)}async function vg(e,t){const n=_a(e),r=t.batch.batchId;try{const e=await function(e,t){const n=_a(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=rl.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ba(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);_g(n,r,null),bg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kg(n,e)}catch(e){await nl(e)}}async function wg(e,t,n){const r=_a(e);try{const e=await function(e,t){const n=_a(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ba(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);_g(r,t,n),bg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kg(r,e)}catch(n){await nl(n)}}function bg(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function _g(e,t,n){const r=_a(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function Eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||Tg(e,t)}))}function Tg(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(fm(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),xg(e))}function Sg(e,t,n){for(const r of n)r instanceof rg?(e.va.addReference(r.key,t),Ig(e,r)):r instanceof ig?(ma("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||Tg(e,r.key)):wa()}function Ig(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(ma("SyncEngine","New document in limbo: "+n),e.ba.add(r),xg(e))}function xg(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new Ka(za.fromString(t)),r=e.xa.next();e.Ca.set(r,new ag(n)),e.Da=e.Da.insert(n,r),dm(e.remoteStore,new Pd(Tc(wc(n.path)),r,"TargetPurposeLimboResolution",ml._e))}}async function kg(e,t,n){const r=_a(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=bp.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=_a(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>rl.forEach(t,(t=>rl.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>rl.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ll(e))throw e;ma("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Cg(e,t){const n=_a(e);if(!n.currentUser.isEqual(t)){ma("SyncEngine","User change. New user:",t.toKey());const e=await Ip(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new Ta(Ea.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await kg(n,e.us)}}function Dg(e,t){const n=_a(e),r=n.Ca.get(t);if(r&&r.pa)return Gc().add(r.key);{let e=Gc();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function Pg(e,t){const n=_a(e),r=await Ap(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&Sg(n,t.targetId,i.Va),i}async function Ag(e,t){const n=_a(e);return Op(n.localStore,t).then((e=>kg(n,e)))}async function Ng(e,t,n,r){const i=_a(e),s=await function(e,t){const n=_a(e),r=_a(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):rl.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Im(i.remoteStore):"acknowledged"===n||"rejected"===n?(_g(i,t,r||null),bg(i,t),function(e,t){_a(_a(e).mutationQueue).Mn(t)}(i.localStore,t)):wa(),await kg(i,s)):ma("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Og(e,t,n){const r=_a(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await Dp(r.localStore,Tc(t[0]));for(const e of t){const t=r.wa.get(e),n=await Pg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Np(r.localStore,o);e=await Dp(r.localStore,t),await dg(r,Rg(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function Rg(e){return vc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Lg(e){return function(e){return _a(_a(e).persistence).Bi()}(_a(e).localStore)}async function Mg(e,t,n,r){const i=_a(e);if(i.Oa)return void ma("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Op(i.localStore,Ac(s[0])),r=zh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,su.EMPTY_BYTE_STRING);await kg(i,e,r);break}case"rejected":await Pp(i.localStore,t,!0),Eg(i,t,r);break;default:wa()}}async function Fg(e,t,n){const r=jg(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){ma("SyncEngine","Adding an already active target "+e);continue}const t=await Np(r.localStore,e),n=await Dp(r.localStore,t);await dg(r,Rg(t),n.targetId,!1,n.resumeToken),dm(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await Pp(r.localStore,e,!1).then((()=>{fm(r.remoteStore,e),Eg(r,e)})).catch(nl)}}function jg(e){const t=_a(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yg.bind(null,t),t.ya.u_=Wm.bind(null,t.eventManager),t.ya.La=Qm.bind(null,t.eventManager),t}function Vg(e){const t=_a(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wg.bind(null,t),t}class Ug{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=nm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Sp(this.persistence,new Ep,e.initialUser,this.serializer)}createPersistence(e){return new cp(dp.Hr,this.serializer)}createSharedClientState(e){return new Gp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class zg extends Ug{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await Vg(this.ka.syncEngine),await Im(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Sp(this.persistence,new Ep,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Uf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new pl(t,this.persistence);return new fl(e.asyncQueue,n)}createPersistence(e){const t=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?If.withCacheSize(this.cacheSizeBytes):If.DEFAULT;return new gp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,em(),tm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Gp}}class Bg extends zg{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof Kp&&(this.sharedClientState.syncEngine={Zs:Ng.bind(null,t),Xs:Mg.bind(null,t),eo:Fg.bind(null,t),Bi:Lg.bind(null,t),Ys:Ag.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=_a(e);if(jg(n),Vg(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Og(n,e.toArray());n.Oa=!0,await Lm(n.remoteStore,!0);for(const r of t)dm(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Eg(n,i),Pp(n.localStore,i,!0)))),fm(n.remoteStore,i)})),await t,await Og(n,e),function(e){const t=_a(e);t.Ca.forEach(((e,n)=>{fm(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new Jl(Ka.comparator)}(n),n.Oa=!1,await Lm(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=em();if(!Kp.D(t))throw new Ta(Ea.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>gg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cg.bind(null,this.syncEngine),await Lm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Km}createDatastore(e){const t=nm(e.databaseInfo.databaseId),n=function(e){return new Zp(e)}(e.databaseInfo);return function(e,t,n,r){return new am(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new um(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>gg(this.syncEngine,e,0)),Wp.D()?new Wp:new Hp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new lg(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=_a(e);ma("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await hm(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Kg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):ga("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Hg{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new Sa,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new Zm(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Wg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ta(Ea.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=_a(e),r={documents:t.map((e=>ld(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,za.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){ba(!!t.found),t.found.name,t.found.updateTime;const n=ud(e,t.found.name),r=id(t.found.updateTime),i=t.found.createTime?id(t.found.createTime):Va.min(),s=new Mu({mapValue:{fields:t.found.fields}});return ju.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){ba(!!t.missing),ba(!!t.readTime);const n=ud(e,t.missing),r=id(t.readTime);return ju.newNoDocument(n,r)}(e,t):wa()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());ba(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ka.fromPath(t);this.mutations.push(new Ih(n,this.precondition(n)))})),await async function(e,t){const n=_a(e),r={writes:t.map((e=>gd(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,za.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wa();t=Va.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ta(Ea.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Va.min())?hh.exists(!1):hh.updateTime(t):hh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Va.min()))throw new Ta(Ea.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hh.updateTime(t)}return hh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new rm(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new Wg(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!gl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Nh(t)}return!1}}class Yg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ha.UNAUTHENTICATED,this.clientId=Ra.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ma("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ma("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ta(Ea.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xg(e,t){e.asyncQueue.verifyOperationInProgress(),ma("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ip(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Jg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zg(e);ma("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Rm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Rm(t.remoteStore,n))),e._onlineComponents=t}function $g(e){return"FirebaseError"===e.name?e.code===Ea.FAILED_PRECONDITION||e.code===Ea.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Zg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ma("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!$g(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),await Xg(e,new Ug)}}else ma("FirestoreClient","Using default OfflineComponentProvider"),await Xg(e,new Ug);return e._offlineComponents}async function ey(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ma("FirestoreClient","Using user provided OnlineComponentProvider"),await Jg(e,e._uninitializedComponentsProvider._online)):(ma("FirestoreClient","Using default OnlineComponentProvider"),await Jg(e,new qg))),e._onlineComponents}function ty(e){return Zg(e).then((e=>e.persistence))}function ny(e){return Zg(e).then((e=>e.localStore))}function ry(e){return ey(e).then((e=>e.remoteStore))}function iy(e){return ey(e).then((e=>e.syncEngine))}function sy(e){return ey(e).then((e=>e.datastore))}async function oy(e){const t=await ey(e),n=t.eventManager;return n.onListen=ug.bind(null,t.syncEngine),n.onUnlisten=fg.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cg.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=pg.bind(null,t.syncEngine),n}function ay(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Gg({next:s=>{t.enqueueAndForget((()=>Hm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Ta(Ea.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Ta(Ea.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new $m(wc(n.path),s,{includeMetadataChanges:!0,ta:!0});return Gm(e,o)}(await oy(e),e.asyncQueue,t,n,r))),r.promise}function ly(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Gg({next:n=>{t.enqueueAndForget((()=>Hm(e,o))),n.fromCache&&"server"===r.source?i.reject(new Ta(Ea.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new $m(n,s,{includeMetadataChanges:!0,ta:!0});return Gm(e,o)}(await oy(e),e.asyncQueue,t,n,r))),r.promise}function uy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Lh().encode(e):e,function(e,t){return new Hg(e,t)}(function(e,t){if(e instanceof Uint8Array)return Kg(e,t);if(e instanceof ArrayBuffer)return Kg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,nm(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=_a(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=_a(e),r=id(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(ng(r));const i=new tg(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await kg(e,o.aa,void 0),await function(e,t){const n=_a(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return ya("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await iy(e),i,r)}))}function cy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hy=new Map;function dy(e,t,n){if(!n)throw new Ta(Ea.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fy(e,t,n,r){if(!0===t&&!0===r)throw new Ta(Ea.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function py(e){if(!Ka.isDocumentKey(e))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function my(e){if(Ka.isDocumentKey(e))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":wa()}function yy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ta(Ea.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gy(e);throw new Ta(Ea.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function vy(e,t){if(t<=0)throw new Ta(Ea.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class wy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ta(Ea.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ta(Ea.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ta(Ea.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ta(Ea.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ta(Ea.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class by{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xa;switch(e.type){case"firstParty":return new Pa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ta(Ea.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hy.get(e);t&&(ma("ComponentProvider","Removing Datastore"),hy.delete(e),t.terminate())}(this),Promise.resolve()}}function _y(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=yy(e,by))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ha.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ta(Ea.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ha(s)}e._authCredentials=new ka(new Ia(t,n))}}class Ey{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ey(this.firestore,e,this._query)}}class Ty{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ty(this.firestore,e,this._key)}}class Sy extends Ey{constructor(e,t,n){super(e,t,wc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ty(this.firestore,null,new Ka(e))}withConverter(e){return new Sy(this.firestore,e,this._path)}}function Iy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),dy("collection","path",t),e instanceof by){const n=za.fromString(t,...r);return my(n),new Sy(e,null,n)}{if(!(e instanceof Ty||e instanceof Sy))throw new Ta(Ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(za.fromString(t,...r));return my(n),new Sy(e.firestore,null,n)}}function xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),1===arguments.length&&(t=Ra.newId()),dy("doc","path",t),e instanceof by){const n=za.fromString(t,...r);return py(n),new Ty(e,null,new Ka(n))}{if(!(e instanceof Ty||e instanceof Sy))throw new Ta(Ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(za.fromString(t,...r));return py(n),new Ty(e.firestore,e instanceof Sy?e.converter:null,new Ka(n))}}function ky(e,t){return e=$e(e),t=$e(t),(e instanceof Ty||e instanceof Sy)&&(t instanceof Ty||t instanceof Sy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Cy(e,t){return e=$e(e),t=$e(t),e instanceof Ey&&t instanceof Ey&&e.firestore===t.firestore&&kc(e._query,t._query)&&e.converter===t.converter}class Dy{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new rm(this,"async_queue_retry"),this.cu=()=>{const e=tm();e&&ma("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=tm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=tm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new Sa;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!ll(e))throw e;ma("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ga("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=jm.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&wa()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function Py(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ay{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ny extends by{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Dy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ry(this),this._firestoreClient.terminate()}}function Oy(e){return e._firestoreClient||Ry(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ry(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new fu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,cy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Yg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Ly(e,t,n){const r=new Sa;return e.asyncQueue.enqueue((async()=>{try{await Xg(e,n),await Jg(e,t),r.resolve()}catch(e){const n=e;if(!$g(n))throw n;ya("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function My(e){return function(e){const t=new Sa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=_a(e);vm(n.remoteStore)||ma("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=_a(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=Vm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await iy(e),t))),t.promise}(Oy(e=yy(e,Ny)))}function Fy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ty(e),n=await ry(e);return t.setNetworkEnabled(!0),function(e){const t=_a(e);return t.v_.delete(0),cm(t)}(n)}))}(Oy(e=yy(e,Ny)))}function jy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ty(e),n=await ry(e);return t.setNetworkEnabled(!1),async function(e){const t=_a(e);t.v_.add(0),await hm(t),t.x_.set("Offline")}(n)}))}(Oy(e=yy(e,Ny)))}function Vy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=_a(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await ny(e),t)))}(Oy(e=yy(e,Ny)),t).then((t=>t?new Ey(e,null,t.query):null))}function Uy(e){if(e._initialized||e._terminated)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zy(su.fromBase64String(e))}catch(e){throw new Ta(Ea.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zy(su.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class By{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qy{constructor(e){this._methodName=e}}class Ky{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ta(Ea.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ta(Ea.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return La(this._lat,e._lat)||La(this._long,e._long)}}const Gy=/^__.*__$/;class Hy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new bh(e,this.data,this.fieldMask,t,this.fieldTransforms):new wh(e,this.data,t,this.fieldTransforms)}}class Wy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new bh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wa()}}class Yy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Yy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return mv(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(Qy(this.Vu)&&Gy.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Xy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||nm(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yy({Vu:e,methodName:t,Du:n,path:qa.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jy(e){const t=e._freezeSettings(),n=nm(e._databaseId);return new Xy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $y(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);hv("Data must be an object, but it was:",o,r);const a=uv(r,o);let l,u;if(s.merge)l=new ru(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=dv(t,r,n);if(!o.contains(i))throw new Ta(Ea.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));gv(e,i)||e.push(i)}l=new ru(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new Hy(new Mu(a),l,u)}class Zy extends qy{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zy}}function ev(e,t,n){return new Yy({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class tv extends qy{_toFieldTransform(e){return new uh(e.path,new th)}isEqual(e){return e instanceof tv}}class nv extends qy{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=ev(this,e,!0),n=this.vu.map((e=>lv(e,t))),r=new nh(n);return new uh(e.path,r)}isEqual(e){return e instanceof nv&&We(this.vu,e.vu)}}class rv extends qy{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=ev(this,e,!0),n=this.vu.map((e=>lv(e,t))),r=new ih(n);return new uh(e.path,r)}isEqual(e){return e instanceof rv&&We(this.vu,e.vu)}}class iv extends qy{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new oh(e.serializer,Xc(e.serializer,this.Fu));return new uh(e.path,t)}isEqual(e){return e instanceof iv&&this.Fu===e.Fu}}function sv(e,t,n,r){const i=e.Cu(1,t,n);hv("Data must be an object, but it was:",i,r);const s=[],o=Mu.empty();Yl(r,((e,r)=>{const a=pv(t,e,n);r=$e(r);const l=i.yu(a);if(r instanceof Zy)s.push(a);else{const e=lv(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ru(s);return new Wy(o,a,i.fieldTransforms)}function ov(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[dv(t,r,n)],l=[i];if(s.length%2!=0)throw new Ta(Ea.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(dv(t,s[d])),l.push(s[d+1]);const u=[],c=Mu.empty();for(let d=a.length-1;d>=0;--d)if(!gv(u,a[d])){const e=a[d];let t=l[d];t=$e(t);const n=o.yu(e);if(t instanceof Zy)u.push(e);else{const r=lv(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new ru(u);return new Wy(c,h,o.fieldTransforms)}function av(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lv(n,e.Cu(r?4:3,t))}function lv(e,t){if(cv(e=$e(e)))return hv("Unsupported field value:",t,e),uv(e,t);if(e instanceof qy)return function(e,t){if(!Qy(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=lv(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ja.fromDate(e);return{timestampValue:td(t.serializer,n)}}if(e instanceof ja){const n=new ja(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:td(t.serializer,n)}}if(e instanceof Ky)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zy)return{bytesValue:nd(t.serializer,e._byteString)};if(e instanceof Ty){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:sd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(gy(e)))}(e,t)}function uv(e,t){const n={};return Xl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yl(e,((e,r)=>{const i=lv(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function cv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ja||e instanceof Ky||e instanceof zy||e instanceof Ty||e instanceof qy)}function hv(e,t,n){if(!cv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=gy(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function dv(e,t,n){if((t=$e(t))instanceof By)return t._internalPath;if("string"==typeof t)return pv(e,t);throw mv("Field path arguments must be of type string or ",e,!1,void 0,n)}const fv=new RegExp("[~\\*/\\[\\]]");function pv(e,t,n){if(t.search(fv)>=0)throw mv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new By(...t.split("."))._internalPath}catch(rr){throw mv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function mv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Ta(Ea.INVALID_ARGUMENT,a+e+l)}function gv(e,t){return e.some((e=>e.isEqual(t)))}class yv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ty(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vv extends yv{data(){return super.data()}}function wv(e,t){return"string"==typeof t?pv(e,t):t instanceof By?t._internalPath:t._delegate._internalPath}function bv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ta(Ea.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class Ev extends _v{}function Tv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof _v&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Iv)).length,n=e.filter((e=>e instanceof Sv)).length;if(t>1||t>0&&n>0)throw new Ta(Ea.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Sv extends Ev{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Sv(e,t,n)}_apply(e){const t=this._parse(e);return Ov(e._query,t),new Ey(e.firestore,e.converter,Ic(e._query,t))}_parse(e){const t=Jy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Nv(o,s);const t=[];for(const n of o)t.push(Av(r,e,n));a={arrayValue:{values:t}}}else a=Av(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Nv(o,s),a=av(n,t,o,"in"===s||"not-in"===s);return Gu.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Iv extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Hu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ov(n,i),n=Ic(n,i)}(e._query,t),new Ey(e.firestore,e.converter,Ic(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xv extends Ev{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(t,n)}(e._query,this._field,this._direction);return new Ey(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class kv extends Ev{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new kv(e,t,n)}_apply(e){return new Ey(e.firestore,e.converter,xc(e._query,this._limit,this._limitType))}}class Cv extends Ev{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Cv(e,t,n)}_apply(e){const t=Pv(e,this.type,this._docOrFields,this._inclusive);return new Ey(e.firestore,e.converter,function(e,t){return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Dv extends Ev{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Dv(e,t,n)}_apply(e){const t=Pv(e,this.type,this._docOrFields,this._inclusive);return new Ey(e.firestore,e.converter,function(e,t){return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Pv(e,t,n,r){if(n[0]=$e(n[0]),n[0]instanceof yv)return function(e,t,n,r,i){if(!r)throw new Ta(Ea.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Ec(e))if(o.field.isKeyField())s.push(Su(t,r.key));else{const e=r.data.field(o.field);if(cu(e))throw new Ta(Ea.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Vu(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Jy(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Ta(Ea.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!_c(e)&&-1!==s.indexOf("/"))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(za.fromString(s));if(!Ka.isDocumentKey(n))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ka(n);a.push(Su(t,i))}else{const e=av(n,r,s);a.push(e)}}return new Vu(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Av(e,t,n){if("string"==typeof(n=$e(n))){if(""===n)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_c(t)&&-1!==n.indexOf("/"))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(za.fromString(n));if(!Ka.isDocumentKey(r))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Su(e,new Ka(r))}if(n instanceof Ty)return Su(e,n._key);throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gy(n),"."))}function Nv(e,t){if(!Array.isArray(e)||0===e.length)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ov(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Rv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wa()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Yl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Ky(lu(e.latitude),lu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const t=au(e);return new ja(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=za.fromString(e);ba(Dd(n));const r=new pu(n.get(1),n.get(3)),i=new Ka(n.popFirst(5));return r.isEqual(t)||ga("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Lv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Mv extends Rv{constructor(e){super(),this.firestore=e}convertBytes(e){return new zy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ty(this.firestore,null,t)}}class Fv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jv extends yv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Vv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Vv extends jv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Uv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Fv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Vv(this._firestore,this._userDataWriter,n.key,n,new Fv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ta(Ea.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Vv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Fv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Vv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Fv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:zv(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function zv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wa()}}function Bv(e,t){return e instanceof jv&&t instanceof jv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Uv&&t instanceof Uv&&e._firestore===t._firestore&&Cy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class qv extends Rv{constructor(e){super(),this.firestore=e}convertBytes(e){return new zy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ty(this.firestore,null,t)}}function Kv(e){e=yy(e,Ty);const t=yy(e.firestore,Ny),n=Oy(t),r=new qv(t);return function(e,t){const n=new Sa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=_a(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ta(Ea.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Vm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await ny(e),t,n))),n.promise}(n,e._key).then((n=>new jv(t,r,e._key,n,new Fv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Gv(e){e=yy(e,Ey);const t=yy(e.firestore,Ny),n=Oy(t),r=new qv(t);return function(e,t){const n=new Sa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Ap(e,t,!0),i=new sg(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Vm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await ny(e),t,n))),n.promise}(n,e._query).then((n=>new Uv(t,r,e,n)))}function Hv(e,t,n){e=yy(e,Ty);const r=yy(e.firestore,Ny),i=Lv(e.converter,t,n);return Xv(r,[$y(Jy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,hh.none())])}function Wv(e,t,n){e=yy(e,Ty);const r=yy(e.firestore,Ny),i=Jy(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=$e(t))||t instanceof By?ov(i,"updateDoc",e._key,t,n,a):sv(i,"updateDoc",e._key,t),Xv(r,[s.toMutation(e._key,hh.exists(!0))])}function Qv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=$e(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Py(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Py(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof Ty)h=yy(e.firestore,Ny),d=wc(e._key.path),c={next:t=>{n[l]&&n[l](Jv(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=yy(e,Ey);h=yy(t.firestore,Ny),d=t._query;const r=new qv(h);c={next:e=>{n[l]&&n[l](new Uv(h,r,t,e))},error:n[l+1],complete:n[l+2]},bv(e._query)}return function(e,t,n,r){const i=new Gg(r),s=new $m(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Gm(await oy(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>Hm(await oy(e),s)))}}(Oy(h),d,u,c)}function Yv(e,t){return function(e,t){const n=new Gg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){_a(e).W_.add(t),t.next()}(await oy(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){_a(e).W_.delete(t)}(await oy(e),n)))}}(Oy(e=yy(e,Ny)),Py(t)?t:{next:t})}function Xv(e,t){return function(e,t){const n=new Sa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Vg(e);try{const e=await function(e,t){const n=_a(e),r=ja.now(),i=t.reduce(((e,t)=>e.add(t.key)),Gc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Mc(),l=Gc();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=yh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new bh(e.key,t,Fu(t.value.mapValue),hh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Vc(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new Jl(La)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await kg(r,e.changes),await Im(r.remoteStore)}catch(e){const t=Vm(e,"Failed to persist write");n.reject(t)}}(await iy(e),t,n))),n.promise}(Oy(e),t)}function Jv(e,t,n){const r=n.docs.get(t._key),i=new qv(e);return new jv(e,i,t._key,r,new Fv(n.hasPendingWrites,n.fromCache),t.converter)}const $v={maxAttempts:5};class Zv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jy(e)}set(e,t,n){this._verifyNotCommitted();const r=ew(e,this._firestore),i=Lv(r.converter,t,n),s=$y(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,hh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=ew(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=$e(t))||t instanceof By?ov(this._dataReader,"WriteBatch.update",r._key,t,n,o):sv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,hh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ew(e,this._firestore);return this._mutations=this._mutations.concat(new Sh(t._key,hh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ta(Ea.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ew(e,t){if((e=$e(e)).firestore!==t)throw new Ta(Ea.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class tw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jy(e)}get(e){const t=ew(e,this._firestore),n=new Mv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return wa();const r=e[0];if(r.isFoundDocument())return new yv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new yv(this._firestore,n,t._key,null,t.converter);throw wa()}))}set(e,t,n){const r=ew(e,this._firestore),i=Lv(r.converter,t,n),s=$y(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=ew(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=$e(t))||t instanceof By?ov(this._dataReader,"Transaction.update",r._key,t,n,o):sv(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=ew(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ew(e,this._firestore),n=new qv(this._firestore);return super.get(e).then((e=>new jv(this._firestore,n,t._key,e._document,new Fv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){da=e}(vn),un(new Ze("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ny(new Ca(e.getProvider("auth-internal")),new Na(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ta(Ea.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Sn(ca,"4.5.1",e),Sn(ca,"4.5.1","esm2017")}();function nw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ta("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function rw(){if("undefined"===typeof Uint8Array)throw new Ta("unimplemented","Uint8Arrays are not available in this environment.")}function iw(){if("undefined"==typeof atob)throw new Ta("unimplemented","Blobs are unavailable in Firestore in this environment.")}class sw{constructor(e){this._delegate=e}static fromBase64String(e){return iw(),new sw(zy.fromBase64String(e))}static fromUint8Array(e){return rw(),new sw(zy.fromUint8Array(e))}toBase64(){return iw(),this._delegate.toBase64()}toUint8Array(){return rw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ow(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class aw{enableIndexedDbPersistence(e,t){return function(e,t){Uy(e=yy(e,Ny));const n=Oy(e);if(n._uninitializedComponentsProvider)throw new Ta(Ea.FAILED_PRECONDITION,"SDK cache is already specified.");ya("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new qg;return Ly(n,i,new zg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Uy(e=yy(e,Ny));const t=Oy(e);if(t._uninitializedComponentsProvider)throw new Ta(Ea.FAILED_PRECONDITION,"SDK cache is already specified.");ya("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new qg;return Ly(t,r,new Bg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ta(Ea.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Sa;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!sl.D())return Promise.resolve();const t=e+"main";await sl.delete(t)}(wp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class lw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof pu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ya("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_y(this._delegate,e,t,n)}enableNetwork(){return Fy(this._delegate)}disableNetwork(){return jy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,fy("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return My(this._delegate)}onSnapshotsInSync(e){return Yv(this._delegate,e)}get app(){if(!this._appCompat)throw new Ta("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ew(this,Iy(this._delegate,e))}catch(t){throw pw(t,"collection()","Firestore.collection()")}}doc(e){try{return new fw(this,xy(this._delegate,e))}catch(t){throw pw(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ww(this,function(e,t){if(e=yy(e,by),dy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ey(e,null,function(e){return new yc(za.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw pw(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=yy(e,Ny);const r=Object.assign(Object.assign({},$v),n);return function(e){if(e.maxAttempts<1)throw new Ta(Ea.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Sa;return e.asyncQueue.enqueueAndForget((async()=>{const i=await sy(e);new Qg(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(Oy(e),(n=>t(new tw(e,n))),r)}(this._delegate,(t=>e(new cw(this,t))))}batch(){return Oy(this._delegate),new hw(new Zv(this._delegate,(e=>Xv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Oy(e=yy(e,Ny)),r=new Ay;return uy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Vy(this._delegate,e).then((e=>e?new ww(this,e):null))}}class uw extends Rv{constructor(e){super(),this.firestore=e}convertBytes(e){return new sw(new zy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fw.forKey(t,this.firestore,null)}}class cw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uw(e)}get(e){const t=Tw(e);return this._delegate.get(t).then((e=>new yw(this._firestore,new jv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Tw(e);return n?(nw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Tw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Tw(e);return this._delegate.delete(t),this}}class hw{constructor(e){this._delegate=e}set(e,t,n){const r=Tw(e);return n?(nw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Tw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Tw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Vv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=dw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new dw(e,new uw(e),t),r.set(t,i)),i}}dw.INSTANCES=new WeakMap;class fw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Ta("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new fw(t,new Ty(t._delegate,n,new Ka(e)))}static forKey(e,t,n){return new fw(t,new Ty(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Ew(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ew(this.firestore,Iy(this._delegate,e))}catch(t){throw pw(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=$e(e))instanceof Ty&&ky(this._delegate,e)}set(e,t){t=nw("DocumentReference.set",t);try{return t?Hv(this._delegate,e,t):Hv(this._delegate,e)}catch(n){throw pw(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Wv(this._delegate,e):Wv(this._delegate,e,t,...r)}catch(s){throw pw(s,"updateDoc()","DocumentReference.update()")}}delete(){return Xv(yy((e=this._delegate).firestore,Ny),[new Sh(e._key,hh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=mw(t),i=gw(t,(e=>new yw(this.firestore,new jv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Qv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Kv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=yy(e,Ty);const t=yy(e.firestore,Ny);return ay(Oy(t),e._key,{source:"server"}).then((n=>Jv(t,e,n)))}(this._delegate):function(e){e=yy(e,Ty);const t=yy(e.firestore,Ny);return ay(Oy(t),e._key).then((n=>Jv(t,e,n)))}(this._delegate),t.then((e=>new yw(this.firestore,new jv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new fw(this.firestore,e?this._delegate.withConverter(dw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pw(e,t,n){return e.message=e.message.replace(t,n),e}function mw(e){for(const t of e)if("object"===typeof t&&!ow(t))return t;return{}}function gw(e,t){var n,r;let i;return i=ow(e[0])?e[0]:ow(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Bv(this._delegate,e._delegate)}}class vw extends yw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||wa(),t}}class ww{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uw(e)}where(e,t,n){try{return new ww(this.firestore,Tv(this._delegate,function(e,t,n){const r=t,i=wv("where",e);return Sv._create(i,r,n)}(e,t,n)))}catch(r){throw pw(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ww(this.firestore,Tv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wv("orderBy",e);return xv._create(n,t)}(e,t)))}catch(n){throw pw(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ww(this.firestore,Tv(this._delegate,(vy("limit",t=e),kv._create("limit",t,"F"))))}catch(t){throw pw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ww(this.firestore,Tv(this._delegate,(vy("limitToLast",t=e),kv._create("limitToLast",t,"L"))))}catch(t){throw pw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ww(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cv._create("startAt",t,!0)}(...arguments)))}catch(e){throw pw(e,"startAt()","Query.startAt()")}}startAfter(){try{return new ww(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cv._create("startAfter",t,!1)}(...arguments)))}catch(e){throw pw(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ww(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dv._create("endBefore",t,!1)}(...arguments)))}catch(e){throw pw(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new ww(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dv._create("endAt",t,!0)}(...arguments)))}catch(e){throw pw(e,"endAt()","Query.endAt()")}}isEqual(e){return Cy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Gv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=yy(e,Ey);const t=yy(e.firestore,Ny),n=Oy(t),r=new qv(t);return ly(n,e._query,{source:"server"}).then((n=>new Uv(t,r,e,n)))}(this._delegate):function(e){e=yy(e,Ey);const t=yy(e.firestore,Ny),n=Oy(t),r=new qv(t);return bv(e._query),ly(n,e._query).then((n=>new Uv(t,r,e,n)))}(this._delegate),t.then((e=>new _w(this.firestore,new Uv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=mw(t),i=gw(t,(e=>new _w(this.firestore,new Uv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Qv(this._delegate,r,i)}withConverter(e){return new ww(this.firestore,e?this._delegate.withConverter(dw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class bw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _w{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ww(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new vw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new bw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new vw(this._firestore,n))}))}isEqual(e){return Bv(this._delegate,e._delegate)}}class Ew extends ww{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fw(this.firestore,e):null}doc(e){try{return new fw(this.firestore,void 0===e?xy(this._delegate):xy(this._delegate,e))}catch(t){throw pw(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=yy(e.firestore,Ny),r=xy(e),i=Lv(e.converter,t);return Xv(n,[$y(Jy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,hh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new fw(this.firestore,e)))}isEqual(e){return ky(this._delegate,e._delegate)}withConverter(e){return new Ew(this.firestore,e?this._delegate.withConverter(dw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Tw(e){return yy(e,Ty)}class Sw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new By(...t)}static documentId(){return new Sw(qa.keyField().canonicalString())}isEqual(e){return(e=$e(e))instanceof By&&this._delegate._internalPath.isEqual(e._internalPath)}}class Iw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new tv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Iw(e)}static delete(){const e=new Zy("deleteField");return e._methodName="FieldValue.delete",new Iw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Iw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Iw(e)}static increment(e){const t=new iv("increment",e);return t._methodName="FieldValue.increment",new Iw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const xw={Firestore:lw,GeoPoint:Ky,Timestamp:ja,Blob:sw,Transaction:cw,WriteBatch:hw,DocumentReference:fw,DocumentSnapshot:yw,Query:ww,QueryDocumentSnapshot:vw,QuerySnapshot:_w,CollectionReference:Ew,FieldPath:Sw,FieldValue:Iw,setLogLevel:function(e){var t;t=e,fa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var kw,Cw;(function(e,t){e.INTERNAL.registerComponent(new Ze("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},xw)))})(kw=qn,((e,t)=>new lw(e,t,new aw))),kw.registerVersion("@firebase/firestore-compat","0.3.28"),qn.initializeApp({apiKey:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_apiKey,authDomain:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_authDomain,databaseURL:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_databaseURL,projectId:null!==(Cw={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_projectId)&&void 0!==Cw?Cw:"no-firebase",storageBucket:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_storageBucket,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_messagingSenderId,appId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_appId});const Dw=qn.firestore();function Pw(e,t){return Dw.doc("participant_responses/".concat(e,"/participants/").concat(t))}function Aw(e,t,n){return Dw.doc("".concat(Pw(e,t).path,"/data/").concat(n))}"localhost"===window.location.hostname&&Dw.useEmulator("localhost",8080);var Nw=n(579);function Ow(){return(0,Nw.jsx)("div",{className:"centered-h-v",children:(0,Nw.jsx)("div",{className:"width-50 alert alert-danger",children:"Please ask your task provider to enable firebase."})})}const Rw={name:"html-keyboard-response",parameters:{stimulus:{type:d.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:d.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:d.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0}}};class Lw{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var r={rt:null,key:null};const i=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof s&&this.jsPsych.pluginAPI.cancelKeyboardResponse(s);var n={rt:r.rt,stimulus:t.stimulus,response:r.key};e.innerHTML="",this.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var s=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",null==r.key&&(r=n),t.response_ends_trial&&i()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(i,t.trial_duration)}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}}Lw.info=Rw;const Mw={name:"html-button-response",parameters:{stimulus:{type:d.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:d.STRING,pretty_name:"Choices",default:void 0,array:!0},button_html:{type:d.HTML_STRING,pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:d.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},margin_vertical:{type:d.STRING,pretty_name:"Margin vertical",default:"0px"},margin_horizontal:{type:d.STRING,pretty_name:"Margin horizontal",default:"8px"},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0}}};class Fw{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-button-response-stimulus">'+t.stimulus+"</div>",r=[];if(Array.isArray(t.button_html))t.button_html.length==t.choices.length?r=t.button_html:console.error("Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var i=0;i<t.choices.length;i++)r.push(t.button_html);n+='<div id="jspsych-html-button-response-btngroup">';for(i=0;i<t.choices.length;i++){var s=r[i].replace(/%choice%/g,t.choices[i]);n+='<div class="jspsych-html-button-response-button" style="display: inline-block; margin:'+t.margin_vertical+" "+t.margin_horizontal+'" id="jspsych-html-button-response-button-'+i+'" data-choice="'+i+'">'+s+"</div>"}n+="</div>",null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var o=performance.now();for(i=0;i<t.choices.length;i++)e.querySelector("#jspsych-html-button-response-button-"+i).addEventListener("click",(e=>{u(e.currentTarget.getAttribute("data-choice"))}));var a={rt:null,button:null};const l=()=>{this.jsPsych.pluginAPI.clearAllTimeouts();var n={rt:a.rt,stimulus:t.stimulus,response:a.button};e.innerHTML="",this.jsPsych.finishTrial(n)};function u(n){var r=performance.now(),i=Math.round(r-o);a.button=parseInt(n),a.rt=i,e.querySelector("#jspsych-html-button-response-stimulus").className+=" responded";for(var s=document.querySelectorAll(".jspsych-html-button-response-button button"),u=0;u<s.length;u++)s[u].setAttribute("disabled","disabled");t.response_ends_trial&&l()}null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-button-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(l,t.trial_duration)}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.clickTarget(i.querySelector('div[data-choice="'.concat(r.response,'"] button')),r.rt)}}function jw(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}Fw.info=Mw,"function"===typeof SuppressedError&&SuppressedError;const Vw={name:"initialize-camera",parameters:{device_select_message:{type:d.HTML_STRING,default:"<p>Please select the camera you would like to use.</p>"},button_label:{type:d.STRING,default:"Use this camera"},include_audio:{type:d.BOOL,default:!1},width:{type:d.INT,default:null},height:{type:d.INT,default:null},mime_type:{type:d.STRING,default:null}}};class Uw{constructor(e){this.jsPsych=e}trial(e,t){this.run_trial(e,t).then((t=>{e.innerHTML="",this.jsPsych.finishTrial({device_id:t})}))}run_trial(e,t){return jw(this,void 0,void 0,(function*(){yield this.askForPermission(t),this.showCameraSelection(e,t),this.updateDeviceList(e),navigator.mediaDevices.ondevicechange=t=>{this.updateDeviceList(e)};const n=yield this.waitForSelection(e),r={video:{deviceId:n}};t.width&&(r.video.width=t.width),t.height&&(r.video.height=t.height),t.include_audio&&(r.audio=!0);const i=yield navigator.mediaDevices.getUserMedia(r),s={};return t.mime_type&&(s.mimeType=t.mime_type),this.jsPsych.pluginAPI.initializeCameraRecorder(i,s),n}))}askForPermission(e){return jw(this,void 0,void 0,(function*(){return yield navigator.mediaDevices.getUserMedia({audio:e.include_audio,video:!0})}))}showCameraSelection(e,t){let n="\n      ".concat(t.device_select_message,'\n      <select name="camera" id="which-camera" style="font-size:14px; font-family: \'Open Sans\', \'Arial\', sans-serif; padding: 4px;">\n      </select>\n      <p><button class="jspsych-btn" id="btn-select-camera">').concat(t.button_label,"</button></p>");e.innerHTML=n}waitForSelection(e){return new Promise((t=>{e.querySelector("#btn-select-camera").addEventListener("click",(()=>{const n=e.querySelector("#which-camera").value;t(n)}))}))}updateDeviceList(e){navigator.mediaDevices.enumerateDevices().then((t=>{const n=t.filter((e=>"videoinput"===e.kind&&"default"!==e.deviceId&&"communications"!==e.deviceId)).filter(((e,t,n)=>n.findIndex((t=>t.groupId==e.groupId))==t));e.querySelector("#which-camera").innerHTML="",n.forEach((t=>{let n=document.createElement("option");n.value=t.deviceId,n.innerHTML=t.label,e.querySelector("#which-camera").appendChild(n)}))}))}}function zw(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=0===Object.keys(r).length?"":" "+Object.entries(r).map((e=>{let[t,n]=e;return"".concat(t,'="').concat(n,'"')})).join(" "),"<".concat(e).concat(n,">").concat(t,"</").concat(e,">")}function Bw(e){return zw("b",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function qw(e){return zw("div",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Kw(e){return zw("h1",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Gw(e){return zw("p",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}Uw.info=Vw;const Hw="webcam";const Ww={type:Lw,stimulus:Kw(ye.trials.conclusion),choices:"NO_KEYS",trial_duration:5e3},Qw={name:"fullscreen",parameters:{fullscreen_mode:{type:d.BOOL,pretty_name:"Fullscreen mode",default:!0,array:!1},message:{type:d.HTML_STRING,pretty_name:"Message",default:"<p>The experiment will switch to full screen mode when you press the button below</p>",array:!1},button_label:{type:d.STRING,pretty_name:"Button label",default:"Continue",array:!1},delay_after:{type:d.INT,pretty_name:"Delay after",default:1e3,array:!1}}};class Yw{constructor(e){this.jsPsych=e,this.rt=null,this.start_time=0}trial(e,t){"undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element?this.endTrial(e,!1,t):t.fullscreen_mode?this.showDisplay(e,t):(this.exitFullScreen(),this.endTrial(e,!0,t))}showDisplay(e,t){e.innerHTML="\n      ".concat(t.message,'\n      <button id="jspsych-fullscreen-btn" class="jspsych-btn">').concat(t.button_label,"</button>\n    "),e.querySelector("#jspsych-fullscreen-btn").addEventListener("click",(()=>{this.rt=Math.round(performance.now()-this.start_time),this.enterFullScreen(),this.endTrial(e,!0,t)})),this.start_time=performance.now()}endTrial(e,t,n){e.innerHTML="",this.jsPsych.pluginAPI.setTimeout((()=>{var e={success:t,rt:this.rt};this.jsPsych.finishTrial(e)}),n.delay_after)}enterFullScreen(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}exitFullScreen(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){const n={success:!0,rt:this.jsPsych.randomization.sampleExGaussian(1e3,100,.005,!0)};return this.jsPsych.pluginAPI.mergeSimulationData(n,t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();!1===r.success?this.endTrial(i,!1,e):(this.trial(i,e),n(),this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-fullscreen-btn"),r.rt))}}Yw.info=Qw;const Xw={type:Yw,fullscreen_mode:!0},Jw={type:Yw,fullscreen_mode:!1};function $w(e){const t=[];return Se.USE_CAMERA&&t.push(function(e){const t=Kw(ye.trials.camera.end);return{type:Lw,stimulus:qw(t,{class:"bottom-prompt"}),trial_duration:5e3,on_start:function(){if(!Se.USE_ELECTRON)throw new Error("video recording is only available when running inside Electron");const t=e.pluginAPI.getCameraRecorder();t?t.stop():console.error("Camera is not initialized, no data will be recorded.")}}}(e)),t.push(Jw,Ww),{timeline:t}}const Zw={name:"image-keyboard-response",parameters:{stimulus:{type:d.IMAGE,pretty_name:"Stimulus",default:void 0},stimulus_height:{type:d.INT,pretty_name:"Image height",default:null},stimulus_width:{type:d.INT,pretty_name:"Image width",default:null},maintain_aspect_ratio:{type:d.BOOL,pretty_name:"Maintain aspect ratio",default:!0},choices:{type:d.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:d.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:d.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:d.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:d.BOOL,pretty_name:"Response ends trial",default:!0},render_on_canvas:{type:d.BOOL,pretty_name:"Render on canvas",default:!0}}};class eb{constructor(e){this.jsPsych=e}trial(e,t){var n,r;if(t.render_on_canvas){var i=!1;if(e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild);var s=document.createElement("canvas");s.id="jspsych-image-keyboard-response-stimulus",s.style.margin="0",s.style.padding="0";var o=s.getContext("2d");(l=new Image).onload=()=>{i||(a(),o.drawImage(l,0,0,r,n))},l.src=t.stimulus;const a=()=>{null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=l.naturalWidth*(t.stimulus_height/l.naturalHeight))):n=l.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=l.naturalHeight*(t.stimulus_width/l.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=l.naturalWidth),s.height=n,s.width=r};a(),e.insertBefore(s,null),l.complete&&Number.isFinite(r)&&Number.isFinite(n)&&(o.drawImage(l,0,0,r,n),i=!0),null!==t.prompt&&e.insertAdjacentHTML("beforeend",t.prompt)}else{var a='<img src="'+t.stimulus+'" id="jspsych-image-keyboard-response-stimulus">';null!==t.prompt&&(a+=t.prompt),e.innerHTML=a;var l=e.querySelector("#jspsych-image-keyboard-response-stimulus");null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=l.naturalWidth*(t.stimulus_height/l.naturalHeight))):n=l.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=l.naturalHeight*(t.stimulus_width/l.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=l.naturalWidth),l.style.height=n.toString()+"px",l.style.width=r.toString()+"px"}var u={rt:null,key:null};const c=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof h&&this.jsPsych.pluginAPI.cancelKeyboardResponse(h);var n={rt:u.rt,stimulus:t.stimulus,response:u.key};e.innerHTML="",this.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var h=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-image-keyboard-response-stimulus").className+=" responded",null==u.key&&(u=n),t.response_ends_trial&&c()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-image-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration?this.jsPsych.pluginAPI.setTimeout((()=>{c()}),t.trial_duration):!1===t.response_ends_trial&&console.warn("The experiment may be deadlocked. Try setting a trial duration or set response_ends_trial to true.")}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}}eb.info=Zw;const tb="photodiode-spot",nb=qw(function(e){return zw("span",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}("",{id:tb}),{id:"photodiode-box"});function rb(e){if(!Se.USE_ELECTRON)throw new Error("photodiodeSpot trial is only available when running inside Electron");if(Se.USE_PHOTODIODE){!function e(t,n){n>0&&function(e,t){const n=document.getElementById(tb);if(!n)return;n.style.visibility="visible",setTimeout((()=>{n.style.visibility="hidden",t()}),e)}(t,(()=>{setTimeout((()=>{e(t,n-1)}),t)}))}(40,e),window.electronAPI.photodiodeTrigger(e)}}function ib(e){const t=ve.honeycomb,n=function(e){const t=ve.fixation,n=Ce.fixation;return{type:Lw,choices:"NO_KEYS",stimulus:qw("",{id:"fixation-dot"}),prompt:function(){return Se.USE_PHOTODIODE?nb:null},trial_duration:function(){return t.randomize_duration?e.randomization.sampleWithoutReplacement(t.durations,1)[0]:t.default_duration},data:{code:n},on_load:function(){Se.USE_PHOTODIODE&&rb(n)}}}(e),r={type:eb,stimulus:e.timelineVariable("stimulus"),prompt:function(){return Se.USE_PHOTODIODE?nb:null},choices:t.timeline_variables.map((e=>e.correct_response)),data:{code:Ce.honeycomb,correct_response:e.timelineVariable("correct_response")},on_load:function(){Se.USE_PHOTODIODE&&rb(Ce.honeycomb)},on_finish:function(t){t.correct=e.pluginAPI.compareKeys(t.response,t.correct_response)}};return{randomize_order:t.randomize_order,repetitions:t.repetitions,timeline_variables:t.timeline_variables,timeline:[n,r]}}const sb={type:Fw,stimulus:function(){return qw(Kw(ye.trials.eventMarker.connected,{style:"color: green;"}))},prompt:function(){let e=Gw(ye.trials.holdUpMarker);return Se.USE_PHOTODIODE&&(e+=nb),e},choices:[ye.prompts.continue.button],on_load:function(){Se.USE_PHOTODIODE&&rb(Ce.test_connect)}},ob={type:Lw,stimulus:Kw(ye.name),choices:"NO_KEYS",trial_duration:1e3},ab={type:Lw,choices:"NO_KEYS",trial_duration:1600,stimulus:nb,on_load:function(){if(!Se.USE_ELECTRON)throw new Error("photodiode recording is only available when running inside Electron");Se.USE_PHOTODIODE||console.warn("photodiode trial was run but USE_PHOTODIODE is set to false "),rb(Ce.open_task)}},lb={type:Lw,response_ends_trial:!0,stimulus:function(){return qw(Kw(ye.trials.introduction))},prompt:ye.prompts.continue.prompt};function ub(e){const t=[ob,Xw,lb];return Se.USE_PHOTODIODE&&(t.push(sb),t.push(ab)),Se.USE_CAMERA&&t.push(function(e){return{timeline:[{type:Uw,include_audio:!0,mime_type:"video/webm"},{type:Fw,stimulus:function(){const e=zw("video","",{id:Hw,width:640,height:480,autoplay:!0}),t=qw(Gw(ye.trials.camera.start)+e,{class:"d-flex flex-column align-items-center"});return qw(t)},choices:[ye.prompts.continue.button],response_ends_trial:!0,on_start:function(){if(!Se.USE_ELECTRON)throw new Error("video recording is only available when running inside Electron");const t=e.pluginAPI.getCameraRecorder();if(!t)return void console.error("Camera is not initialized, no data will be recorded.");const n=[];t.addEventListener("dataavailable",(e=>{e.data.size>0&&n.push(e.data)})),t.addEventListener("stop",(()=>{const e=new Blob(n,{type:t.mimeType}),r=new FileReader;r.readAsDataURL(e),r.onloadend=()=>{window.electronAPI.saveVideo(r.result)}}))},on_load:function(){document.getElementById(Hw).srcObject=e.pluginAPI.getCameraRecorder().stream},on_finish:function(){e.pluginAPI.getCameraRecorder().start()}}]}}(e)),{timeline:t}}const cb={name:"instructions",parameters:{pages:{type:d.HTML_STRING,pretty_name:"Pages",default:void 0,array:!0},key_forward:{type:d.KEY,pretty_name:"Key forward",default:"ArrowRight"},key_backward:{type:d.KEY,pretty_name:"Key backward",default:"ArrowLeft"},allow_backward:{type:d.BOOL,pretty_name:"Allow backward",default:!0},allow_keys:{type:d.BOOL,pretty_name:"Allow keys",default:!0},show_clickable_nav:{type:d.BOOL,pretty_name:"Show clickable nav",default:!1},show_page_number:{type:d.BOOL,pretty_name:"Show page number",default:!1},page_label:{type:d.STRING,pretty_name:"Page label",default:"Page"},button_label_previous:{type:d.STRING,pretty_name:"Button label previous",default:"Previous"},button_label_next:{type:d.STRING,pretty_name:"Button label next",default:"Next"}}};class hb{constructor(e){this.jsPsych=e}trial(e,t){var n=0,r=[],i=performance.now(),s=i;function o(e){e.target.removeEventListener("click",o),"jspsych-instructions-back"===this.id?u():"jspsych-instructions-next"===this.id&&l()}function a(){var r=t.pages[n],i="";if(t.show_page_number&&(i="<span style='margin: 0 1em;' class='jspsych-instructions-pagenum'>"+t.page_label+" "+(n+1)+"/"+t.pages.length+"</span>"),t.show_clickable_nav){var s="<div class='jspsych-instructions-nav' style='padding: 10px 0px;'>";if(t.allow_backward)s+="<button id='jspsych-instructions-back' class='jspsych-btn' style='margin-right: 5px;' "+(n>0?"":"disabled='disabled'")+">&lt; "+t.button_label_previous+"</button>";t.pages.length>1&&t.show_page_number&&(s+=i),r+=s+="<button id='jspsych-instructions-next' class='jspsych-btn'style='margin-left: 5px;'>"+t.button_label_next+" &gt;</button></div>",e.innerHTML=r,0!=n&&t.allow_backward&&e.querySelector("#jspsych-instructions-back").addEventListener("click",o),e.querySelector("#jspsych-instructions-next").addEventListener("click",o)}else t.show_page_number&&t.pages.length>1&&(r+="<div class='jspsych-instructions-pagenum'>"+i+"</div>"),e.innerHTML=r}function l(){c(),++n>=t.pages.length?h():a()}function u(){c(),n--,a()}function c(){var e=performance.now(),t=Math.round(e-s);r.push({page_index:n,viewing_time:t}),s=e}const h=()=>{t.allow_keys&&this.jsPsych.pluginAPI.cancelKeyboardResponse(f),e.innerHTML="";var n={view_history:r,rt:Math.round(performance.now()-i)};this.jsPsych.finishTrial(n)},d=e=>{f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:d,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1,allow_held_key:!1}),this.jsPsych.pluginAPI.compareKeys(e.key,t.key_backward)&&0!==n&&t.allow_backward&&u(),this.jsPsych.pluginAPI.compareKeys(e.key,t.key_forward)&&l()};if(a(),t.allow_keys)var f=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:d,valid_responses:[t.key_forward,t.key_backward],rt_method:"performance",persist:!1})}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){var n,r,i,s,o,a;let l=0,u=0,c=[];if(!(null===(n=t.data)||void 0===n?void 0:n.view_history)&&!(null===(r=t.data)||void 0===r?void 0:r.rt))for(;l!==e.pages.length;){const t=Math.round(this.jsPsych.randomization.sampleExGaussian(3e3,300,1/300));c.push({page_index:l,viewing_time:t}),u+=t,0!=l&&e.allow_backward?1==this.jsPsych.randomization.sampleBernoulli(.9)?l++:l--:l++}if(!(null===(i=t.data)||void 0===i?void 0:i.view_history)&&(null===(s=t.data)||void 0===s?void 0:s.rt)){for(u=t.data.rt;l!==e.pages.length;)c.push({page_index:l,viewing_time:null}),0!=l&&e.allow_backward?1==this.jsPsych.randomization.sampleBernoulli(.9)?l++:l--:l++;const n=t.data.rt/c.length;let r=0;for(const e of c){const t=Math.round(this.jsPsych.randomization.sampleExGaussian(n,n/10,1/(n/10)));e.viewing_time=t,r+=t}const i=t.data.rt-r,s=Math.round(i/c.length);for(const e of c)e.viewing_time+=s}if((null===(o=t.data)||void 0===o?void 0:o.view_history)&&!(null===(a=t.data)||void 0===a?void 0:a.rt)){c=t.data.view_history,u=0;for(const e of t.data.view_history)u+=e.viewing_time}const h={view_history:c,rt:u},d=this.jsPsych.pluginAPI.mergeSimulationData(h,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,d),d}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n();const s=t=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_forward,t):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-instructions-next"),t)},o=t=>{e.allow_keys?this.jsPsych.pluginAPI.pressKey(e.key_backward,t):e.show_clickable_nav&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-instructions-back"),t)};let a=0,l=0;for(let u=0;u<r.view_history.length;u++)u==r.view_history.length-1?s(l+r.view_history[u].viewing_time):(r.view_history[u+1].page_index>a&&s(l+r.view_history[u].viewing_time),r.view_history[u+1].page_index<a&&o(l+r.view_history[u].viewing_time),l+=r.view_history[u].viewing_time,a=r.view_history[u+1].page_index)}}hb.info=cb;const db={name:"preload",parameters:{auto_preload:{type:d.BOOL,pretty_name:"Auto-preload",default:!1},trials:{type:d.TIMELINE,pretty_name:"Trials",default:[]},images:{type:d.STRING,pretty_name:"Images",default:[],array:!0},audio:{type:d.STRING,pretty_name:"Audio",default:[],array:!0},video:{type:d.STRING,pretty_name:"Video",default:[],array:!0},message:{type:d.HTML_STRING,pretty_name:"Message",default:null},show_progress_bar:{type:d.BOOL,pretty_name:"Show progress bar",default:!0},continue_after_error:{type:d.BOOL,pretty_name:"Continue after error",default:!1},error_message:{type:d.HTML_STRING,pretty_name:"Error message",default:"The experiment failed to load."},show_detailed_errors:{type:d.BOOL,pretty_name:"Show detailed errors",default:!1},max_load_time:{type:d.INT,pretty_name:"Max load time",default:null},on_error:{type:d.FUNCTION,pretty_name:"On error",default:null},on_success:{type:d.FUNCTION,pretty_name:"On success",default:null}}};class fb{constructor(e){this.jsPsych=e}trial(e,t){var n=null,r=!1,i=[],s=[],o=[],a=[],l=this.jsPsych.getSafeModeStatus(),u=[],c=[],h=[];if(t.auto_preload){var d=this.jsPsych.getTimeline(),f=this.jsPsych.pluginAPI.getAutoPreloadList(d);u=u.concat(f.images),c=c.concat(f.audio),h=h.concat(f.video)}if(t.trials.length>0){var p=this.jsPsych.pluginAPI.getAutoPreloadList(t.trials);u=u.concat(p.images),c=c.concat(p.audio),h=h.concat(p.video)}u=u.concat(t.images),c=c.concat(t.audio),h=h.concat(t.video),u=this.jsPsych.utils.unique(u.flat()),c=this.jsPsych.utils.unique(c.flat()),h=this.jsPsych.utils.unique(h.flat()),l&&(h=[]);var m="";null!==t.message&&(m+=t.message),t.show_progress_bar&&(m+="\n            <div id='jspsych-loading-progress-bar-container' style='height: 10px; width: 300px; background-color: #ddd; margin: auto;'>\n              <div id='jspsych-loading-progress-bar' style='height: 10px; width: 0%; background-color: #777;'></div>\n            </div>"),e.innerHTML=m;const g=()=>{if(E++,t.show_progress_bar){var n=E/_*100,r=e.querySelector("#jspsych-loading-progress-bar");null!==r&&(r.style.width=n+"%")}},y=()=>{"undefined"!==typeof r&&!1===r&&(this.jsPsych.pluginAPI.clearAllTimeouts(),this.jsPsych.pluginAPI.cancelPreloads(),n=!0,b())},v=()=>{this.jsPsych.pluginAPI.cancelPreloads(),"undefined"===typeof n||!1!==n&&null!==n||(r=!0,T<_&&(n=!1),x("timeout"),a.push("<p><strong>Loading timed out.</strong><br>Consider compressing your stimuli files, loading your files in smaller batches,<br>and/or increasing the <i>max_load_time</i> parameter.</p>"),t.continue_after_error?b():w())},w=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),this.jsPsych.pluginAPI.cancelPreloads(),e.innerHTML=t.error_message,t.show_detailed_errors&&(e.innerHTML+="<p><strong>Error details:</strong></p>",a.forEach((t=>{e.innerHTML+=t})))},b=()=>{this.jsPsych.pluginAPI.clearAllTimeouts();var t={success:n,timeout:r,failed_images:i,failed_audio:s,failed_video:o};e.innerHTML="",this.jsPsych.finishTrial(t)};null!==t.max_load_time&&this.jsPsych.pluginAPI.setTimeout(v,t.max_load_time);var _=u.length+c.length+h.length,E=0,T=0;if(0==_)y();else{const e=e=>{this.jsPsych.pluginAPI.preloadVideo(h,e,I,S)},t=e=>{this.jsPsych.pluginAPI.preloadAudio(c,e,I,S)},n=e=>{this.jsPsych.pluginAPI.preloadImages(u,e,I,S)};h.length>0&&e((()=>{})),c.length>0&&t((()=>{})),u.length>0&&n((()=>{}))}function S(e){g(),null==n&&(n=!1);var r="unknown file";e.source&&(r=e.source),e.error&&e.error.path&&e.error.path.length>0&&("img"==e.error.path[0].localName?i.push(r):"audio"==e.error.path[0].localName?s.push(r):"video"==e.error.path[0].localName&&o.push(r));var l="<p><strong>Error loading file: "+r+"</strong><br>";e.error.statusText&&(l+="File request response status: "+e.error.statusText+"<br>"),"404"==e.error&&(l+="404 - file not found.<br>"),"undefined"!==typeof e.error.loaded&&null!==e.error.loaded&&0!==e.error.loaded?l+=e.error.loaded+" bytes transferred.":l+="File did not begin loading. Check that file path is correct and reachable by the browser,<br>and that loading is not blocked by cross-origin resource sharing (CORS) errors.",l+="</p>",a.push(l),x(r),E==_&&(t.continue_after_error?b():w())}function I(e){g(),function(e){null!==t.on_success&&t.on_success(e)}(e),++T==_?y():E==_&&(t.continue_after_error?b():w())}function x(e){null!==t.on_error&&t.on_error(e)}}simulate(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}create_simulation_data(e,t){return this.jsPsych.pluginAPI.mergeSimulationData({success:!0,timeout:!1,failed_images:[],failed_audio:[],failed_video:[]},t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const r=this.jsPsych.getDisplayElement();this.trial(r,e),n()}}fb.info=db;const pb=ye.trials.honeycomb,mb={type:hb,pages:[Gw(pb.instructions.read),Gw(pb.instructions.circle),...ve.honeycomb.timeline_variables.map((e=>{let{stimulus:t,correct_response:n}=e;const r=t.substring(t.lastIndexOf("/")+1,t.indexOf("."));return qw(Gw(pb.instructions.example.start+Bw(r)+pb.instructions.example.middle+Bw(n)+pb.instructions.example.end)+function(){return zw("img","",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({src:t}))})),Gw(pb.instructions.next)],show_clickable_nav:!0,post_trial_gap:500},gb={type:fb,message:Gw(ye.prompts.settingUp),images:ve.honeycomb.timeline_variables.map((e=>{let{stimulus:t}=e;return t}))};function yb(e){const t=ub(e),n=ib(e),r=function(e){return{type:Lw,stimulus:function(){const t=e.data.get().filter({code:Ce.honeycomb}),n=t.filter({correct:!0}),r=Math.round(n.count()/t.count()*100),i=Math.round(n.select("rt").mean()),s=pb.debrief;return Gw(s.accuracy.start+r+s.accuracy.end)+Gw(s.reactionTime.start+i+s.reactionTime.end)+Gw(s.complete)}}}(e),i=$w(e);return[t,gb,mb,n,r,i]}const vb={on_trial_finish:function(e){console.log("Trial ".concat(e.internal_node_id," just finished:"),e)},on_finish:function(e){console.log("The experiment has finished:",e),window.location.reload()}};const wb="experiment-window";function bb(e){let{studyID:t,participantID:n,dataUpdateFunction:i,dataFinishFunction:s}=e;const o=r.useMemo((()=>{const e=(new Date).toISOString();Se.USE_FIREBASE&&async function(e,t,n){try{const r=Aw(e,t,n);return await r.set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform}),console.log("Initialized experiment:",e,t,n),!0}catch(r){return console.error("Unable to initialize the experiment:\n",r),!1}}(t,n,e);const r=ce({...vb,display_element:wb,on_data_update:e=>{vb.on_data_update&&vb.on_data_update(e),i(e)},on_finish:e=>{vb.on_finish&&vb.on_finish(e),s(e)}});return r.data.addProperties({study_id:t,participant_id:n,start_date:e,task_version:ge}),r}),[t,n]);return r.useEffect((()=>{const e=function(e,t,n){return console.log("Building timeline for participant ".concat(n," on study ").concat(t)),yb(e)}(o,t,n);o.run(e)}),[o]),(0,Nw.jsx)("div",{id:wb})}function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_b.apply(this,arguments)}function Eb(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Tb=n(139),Sb=n.n(Tb),Ib=(n(197),n(173)),xb=n.n(Ib),kb=["as","className","type","tooltip"],Cb={type:xb().string,tooltip:xb().bool,as:xb().elementType},Db=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"div":n,s=e.className,o=e.type,a=void 0===o?"valid":o,l=e.tooltip,u=void 0!==l&&l,c=Eb(e,kb);return r.createElement(i,_b({},c,{ref:t,className:Sb()(s,a+"-"+(u?"tooltip":"feedback"))}))}));Db.displayName="Feedback",Db.propTypes=Cb;const Pb=Db;const Ab=r.createContext({controlId:void 0});var Nb=r.createContext({});Nb.Consumer,Nb.Provider;function Ob(e,t){var n=(0,r.useContext)(Nb);return e||n[t]||t}var Rb=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],Lb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.className,a=e.type,l=void 0===a?"checkbox":a,u=e.isValid,c=void 0!==u&&u,h=e.isInvalid,d=void 0!==h&&h,f=e.isStatic,p=e.as,m=void 0===p?"input":p,g=Eb(e,Rb),y=(0,r.useContext)(Ab),v=y.controlId,w=y.custom?[s,"custom-control-input"]:[i,"form-check-input"];return i=Ob(w[0],w[1]),r.createElement(m,_b({},g,{ref:t,type:l,id:n||v,className:Sb()(o,i,c&&"is-valid",d&&"is-invalid",f&&"position-static")}))}));Lb.displayName="FormCheckInput";const Mb=Lb;var Fb=["bsPrefix","bsCustomPrefix","className","htmlFor"],jb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.bsCustomPrefix,s=e.className,o=e.htmlFor,a=Eb(e,Fb),l=(0,r.useContext)(Ab),u=l.controlId,c=l.custom?[i,"custom-control-label"]:[n,"form-check-label"];return n=Ob(c[0],c[1]),r.createElement("label",_b({},a,{ref:t,htmlFor:o||u,className:Sb()(s,n)}))}));jb.displayName="FormCheckLabel";const Vb=jb;var Ub=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],zb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.inline,a=void 0!==o&&o,l=e.disabled,u=void 0!==l&&l,c=e.isValid,h=void 0!==c&&c,d=e.isInvalid,f=void 0!==d&&d,p=e.feedbackTooltip,m=void 0!==p&&p,g=e.feedback,y=e.className,v=e.style,w=e.title,b=void 0===w?"":w,_=e.type,E=void 0===_?"checkbox":_,T=e.label,S=e.children,I=e.custom,x=e.as,k=void 0===x?"input":x,C=Eb(e,Ub),D="switch"===E||I,P=D?[s,"custom-control"]:[i,"form-check"];i=Ob(P[0],P[1]);var A=(0,r.useContext)(Ab).controlId,N=(0,r.useMemo)((function(){return{controlId:n||A,custom:D}}),[A,D,n]),O=D||null!=T&&!1!==T&&!S,R=r.createElement(Mb,_b({},C,{type:"switch"===E?"checkbox":E,ref:t,isValid:h,isInvalid:f,isStatic:!O,disabled:u,as:k}));return r.createElement(Ab.Provider,{value:N},r.createElement("div",{style:v,className:Sb()(y,i,D&&"custom-"+E,a&&i+"-inline")},S||r.createElement(r.Fragment,null,R,O&&r.createElement(Vb,{title:b},T),(h||f)&&r.createElement(Pb,{type:h?"valid":"invalid",tooltip:m},g))))}));zb.displayName="FormCheck",zb.Input=Mb,zb.Label=Vb;const Bb=zb;var qb=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],Kb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.className,a=e.isValid,l=e.isInvalid,u=e.lang,c=e.as,h=void 0===c?"input":c,d=Eb(e,qb),f=(0,r.useContext)(Ab),p=f.controlId,m=f.custom?[s,"custom-file-input"]:[i,"form-control-file"];return i=Ob(m[0],m[1]),r.createElement(h,_b({},d,{ref:t,id:n||p,type:"file",lang:u,className:Sb()(o,i,a&&"is-valid",l&&"is-invalid")}))}));Kb.displayName="FormFileInput";const Gb=Kb;var Hb=["bsPrefix","bsCustomPrefix","className","htmlFor"],Wb=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.bsCustomPrefix,s=e.className,o=e.htmlFor,a=Eb(e,Hb),l=(0,r.useContext)(Ab),u=l.controlId,c=l.custom?[i,"custom-file-label"]:[n,"form-file-label"];return n=Ob(c[0],c[1]),r.createElement("label",_b({},a,{ref:t,htmlFor:o||u,className:Sb()(s,n),"data-browse":a["data-browse"]}))}));Wb.displayName="FormFileLabel";const Qb=Wb;var Yb=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],Xb=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,s=e.bsCustomPrefix,o=e.disabled,a=void 0!==o&&o,l=e.isValid,u=void 0!==l&&l,c=e.isInvalid,h=void 0!==c&&c,d=e.feedbackTooltip,f=void 0!==d&&d,p=e.feedback,m=e.className,g=e.style,y=e.label,v=e.children,w=e.custom,b=e.lang,_=e["data-browse"],E=e.as,T=void 0===E?"div":E,S=e.inputAs,I=void 0===S?"input":S,x=Eb(e,Yb),k=w?[s,"custom"]:[i,"form-file"];i=Ob(k[0],k[1]);var C=(0,r.useContext)(Ab).controlId,D=(0,r.useMemo)((function(){return{controlId:n||C,custom:w}}),[C,w,n]),P=null!=y&&!1!==y&&!v,A=r.createElement(Gb,_b({},x,{ref:t,isValid:u,isInvalid:h,disabled:a,as:I,lang:b}));return r.createElement(Ab.Provider,{value:D},r.createElement(T,{style:g,className:Sb()(m,i,w&&"custom-file")},v||r.createElement(r.Fragment,null,w?r.createElement(r.Fragment,null,A,P&&r.createElement(Qb,{"data-browse":_},y)):r.createElement(r.Fragment,null,P&&r.createElement(Qb,null,y),A),(u||h)&&r.createElement(Pb,{type:u?"valid":"invalid",tooltip:f},p))))}));Xb.displayName="FormFile",Xb.Input=Gb,Xb.Label=Qb;const Jb=Xb;n(440);var $b=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],Zb=r.forwardRef((function(e,t){var n,i,s=e.bsPrefix,o=e.bsCustomPrefix,a=e.type,l=e.size,u=e.htmlSize,c=e.id,h=e.className,d=e.isValid,f=void 0!==d&&d,p=e.isInvalid,m=void 0!==p&&p,g=e.plaintext,y=e.readOnly,v=e.custom,w=e.as,b=void 0===w?"input":w,_=Eb(e,$b),E=(0,r.useContext)(Ab).controlId,T=v?[o,"custom"]:[s,"form-control"];if(s=Ob(T[0],T[1]),g)(i={})[s+"-plaintext"]=!0,n=i;else if("file"===a){var S;(S={})[s+"-file"]=!0,n=S}else if("range"===a){var I;(I={})[s+"-range"]=!0,n=I}else if("select"===b&&v){var x;(x={})[s+"-select"]=!0,x[s+"-select-"+l]=l,n=x}else{var k;(k={})[s]=!0,k[s+"-"+l]=l,n=k}return r.createElement(b,_b({},_,{type:a,size:u,ref:t,readOnly:y,id:c||E,className:Sb()(h,n,f&&"is-valid",m&&"is-invalid")}))}));Zb.displayName="FormControl";const e_=Object.assign(Zb,{Feedback:Pb});var t_=["bsPrefix","className","children","controlId","as"],n_=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,s=e.children,o=e.controlId,a=e.as,l=void 0===a?"div":a,u=Eb(e,t_);n=Ob(n,"form-group");var c=(0,r.useMemo)((function(){return{controlId:o}}),[o]);return r.createElement(Ab.Provider,{value:c},r.createElement(l,_b({},u,{ref:t,className:Sb()(i,n)}),s))}));n_.displayName="FormGroup";const r_=n_;var i_=["bsPrefix","className","as"],s_=["xl","lg","md","sm","xs"],o_=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,s=e.as,o=void 0===s?"div":s,a=Eb(e,i_),l=Ob(n,"col"),u=[],c=[];return s_.forEach((function(e){var t,n,r,i=a[e];if(delete a[e],"object"===typeof i&&null!=i){var s=i.span;t=void 0===s||s,n=i.offset,r=i.order}else t=i;var o="xs"!==e?"-"+e:"";t&&u.push(!0===t?""+l+o:""+l+o+"-"+t),null!=r&&c.push("order"+o+"-"+r),null!=n&&c.push("offset"+o+"-"+n)})),u.length||u.push(l),r.createElement(o,_b({},a,{ref:t,className:Sb().apply(void 0,[i].concat(u,c))}))}));o_.displayName="Col";const a_=o_;var l_=["as","bsPrefix","column","srOnly","className","htmlFor"],u_=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"label":n,s=e.bsPrefix,o=e.column,a=e.srOnly,l=e.className,u=e.htmlFor,c=Eb(e,l_),h=(0,r.useContext)(Ab).controlId;s=Ob(s,"form-label");var d="col-form-label";"string"===typeof o&&(d=d+" "+d+"-"+o);var f=Sb()(l,s,a&&"sr-only",o&&d);return u=u||h,o?r.createElement(a_,_b({ref:t,as:"label",className:f,htmlFor:u},c)):r.createElement(i,_b({ref:t,className:f,htmlFor:u},c))}));u_.displayName="FormLabel",u_.defaultProps={column:!1,srOnly:!1};const c_=u_;var h_=["bsPrefix","className","as","muted"],d_=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,s=e.as,o=void 0===s?"small":s,a=e.muted,l=Eb(e,h_);return n=Ob(n,"form-text"),r.createElement(o,_b({},l,{ref:t,className:Sb()(i,n,a&&"text-muted")}))}));d_.displayName="FormText";const f_=d_;var p_=r.forwardRef((function(e,t){return r.createElement(Bb,_b({},e,{ref:t,type:"switch"}))}));p_.displayName="Switch",p_.Input=Bb.Input,p_.Label=Bb.Label;const m_=p_;var g_=/-(.)/g;var y_=["className","bsPrefix","as"],v_=function(e){return e[0].toUpperCase()+(t=e,t.replace(g_,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var w_=["bsPrefix","inline","className","validated","as"],b_=function(e,t){var n=void 0===t?{}:t,i=n.displayName,s=void 0===i?v_(e):i,o=n.Component,a=n.defaultProps,l=r.forwardRef((function(t,n){var i=t.className,s=t.bsPrefix,a=t.as,l=void 0===a?o||"div":a,u=Eb(t,y_),c=Ob(s,e);return r.createElement(l,_b({ref:n,className:Sb()(i,c)},u))}));return l.defaultProps=a,l.displayName=s,l}("form-row"),__=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.inline,s=e.className,o=e.validated,a=e.as,l=void 0===a?"form":a,u=Eb(e,w_);return n=Ob(n,"form"),r.createElement(l,_b({},u,{ref:t,className:Sb()(s,o&&"was-validated",i&&n+"-inline")}))}));__.displayName="Form",__.defaultProps={inline:!1},__.Row=b_,__.Group=r_,__.Control=e_,__.Check=Bb,__.File=Jb,__.Switch=m_,__.Label=c_,__.Text=f_;const E_=__;const T_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};var S_=["as","disabled","onKeyDown"];function I_(e){return!e||"#"===e.trim()}var x_=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"a":n,s=e.disabled,o=e.onKeyDown,a=Eb(e,S_),l=function(e){var t=a.href,n=a.onClick;(s||I_(t))&&e.preventDefault(),s?e.stopPropagation():n&&n(e)};return I_(a.href)&&(a.role=a.role||"button",a.href=a.href||"#"),s&&(a.tabIndex=-1,a["aria-disabled"]=!0),r.createElement(i,_b({ref:t},a,{onClick:l,onKeyDown:T_((function(e){" "===e.key&&(e.preventDefault(),l(e))}),o)}))}));x_.displayName="SafeAnchor";const k_=x_;var C_=["bsPrefix","variant","size","active","className","block","type","as"],D_=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.variant,s=e.size,o=e.active,a=e.className,l=e.block,u=e.type,c=e.as,h=Eb(e,C_),d=Ob(n,"btn"),f=Sb()(a,d,o&&"active",i&&d+"-"+i,l&&d+"-block",s&&d+"-"+s);if(h.href)return r.createElement(k_,_b({},h,{as:c,ref:t,className:Sb()(f,h.disabled&&"disabled")}));t&&(h.ref=t),u?h.type=u:c||(h.type="button");var p=c||"button";return r.createElement(p,_b({},h,{className:f}))}));D_.displayName="Button",D_.defaultProps={variant:"primary",active:!1,disabled:!1};const P_=D_;function A_(e){let{handleLogin:t,initialParticipantID:n,initialStudyID:i,validationFunction:s}=e;const[o,a]=r.useState(n),[l,u]=r.useState(i),[c,h]=r.useState(!1);return(0,r.useEffect)((()=>{a(n)}),[n]),(0,r.useEffect)((()=>{u(i)}),[i]),(0,Nw.jsx)("div",{className:"centered-h-v",children:(0,Nw.jsxs)("div",{className:"width-50",children:[(0,Nw.jsxs)(E_,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),s(l,o).then((e=>{h(!e),e&&t(l,o)}))},children:[(0,Nw.jsxs)(E_.Group,{className:"width-100",size:"lg",controlId:"participantID",children:[(0,Nw.jsx)(E_.Label,{children:"Participant ID"}),(0,Nw.jsx)(E_.Control,{autoFocus:!0,type:"participantID",value:o,onChange:e=>a(e.target.value)})]}),(0,Nw.jsxs)(E_.Group,{className:"width-100",size:"lg",controlId:"studyID",children:[(0,Nw.jsx)(E_.Label,{children:"Study ID"}),(0,Nw.jsx)(E_.Control,{type:"studyID",value:l,onChange:e=>u(e.target.value)})]}),(0,Nw.jsx)(P_,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:0===l.length||0===o.length,children:"Log In"})]}),c?(0,Nw.jsx)("div",{className:"alert alert-danger",role:"alert",children:"No matching experiment found for this participant and study"}):null]})})}function N_(){const[t,n]=r.useState(!1),[i,s]=r.useState(!1),[o,a]=r.useState(!1),[l,u]=r.useState(""),[c,h]=r.useState(""),[d,f]=r.useState("default");r.useEffect((()=>{!async function(){if(console.log({"Honeycomb Configuration":Se,"Task Settings":ve}),Se.USE_ELECTRON){await window.electronAPI.setConfig(Se),await window.electronAPI.setTrigger(e);const t=await window.electronAPI.getCredentials();t.participantID&&u(t.participantID),t.studyID&&h(t.studyID),f("desktop")}else if(Se.USE_MTURK)window.lodash=_.noConflict(),a(new PsiTurk(_e,"/complete")),f("mturk"),I("mturk",_e);else if(Se.USE_PROLIFIC){const e=fe();Se.USE_FIREBASE&&e?(f("firebase"),I("prolific",e)):s(!0)}else if(Se.USE_FIREBASE){const e=de("studyID"),t=de("participantID");null!==e&&h(e),null!==t&&u(t),f("firebase")}else f("default")}()}),[]);const p=async()=>!0,m=(e,t)=>async function(e,t){try{return await Pw(e,t).get(),!0}catch(n){return console.error("Unable to validate the experiment:\n",n),!1}}(e,t),g=()=>{},y=e=>{!async function(e){const t=e.study_id,n=e.participant_id,r=e.start_date;try{const i=Aw(t,n,r);await i.collection("trials").add(e)}catch(i){console.error("Unable to add trial:\n",i)}}(e)},v=async e=>{await window.electronAPI.on_data_update(e)},w=e=>{o.recordTrialData(e)},b=e=>{e.localSave("csv","task.csv")},E=()=>{},T=async()=>{await window.electronAPI.on_finish()},S=()=>{(async()=>{o.saveData({success:()=>o.completeHIT(),error:()=>s(!0)})})()},I=r.useCallback(((e,t)=>{h(e),u(t),n(!0)}),[]);return i?(0,Nw.jsx)(Ow,{}):t?(0,Nw.jsx)(bb,{studyID:c,participantID:l,dataUpdateFunction:{desktop:v,firebase:y,mturk:w,default:g}[d],dataFinishFunction:{desktop:T,mturk:S,firebase:E,default:b}[d]}):(0,Nw.jsx)(A_,{validationFunction:{desktop:p,default:p,firebase:m}[d],initialStudyID:c,initialParticipantID:l,handleLogin:I})}i.render((0,Nw.jsx)(N_,{}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.1bcc1652.js.map